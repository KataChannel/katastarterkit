module.exports=[104868,a=>{"use strict";var b,c,d,e=a.i(321248),f=a.i(651332),g=a.i(723593),h=a.i(500891),i=a.i(638735),j=a.i(348284),k=a.i(687649),l=a.i(558767),m=((b={}).ACTIVE="ACTIVE",b.INACTIVE="INACTIVE",b.TRAINING="TRAINING",b),n=((c={}).DOCUMENT="DOCUMENT",c.TEXT="TEXT",c.FAQ="FAQ",c.CONVERSATION="CONVERSATION",c.KNOWLEDGE_BASE="KNOWLEDGE_BASE",c),o=((d={}).PENDING="PENDING",d.PROCESSING="PROCESSING",d.COMPLETED="COMPLETED",d.FAILED="FAILED",d);let p=new class{async request(a,b={}){try{let c=localStorage.getItem("accessToken"),d=await fetch(`https://appapi.tazagroup.vn${a}`,{headers:{"Content-Type":"application/json",...c&&{Authorization:`Bearer ${c}`},...b.headers},...b});if(!d.ok)return{error:(await d.json().catch(()=>({message:"Network error"}))).message||`HTTP ${d.status}`};return{data:await d.json()}}catch(a){return{error:a instanceof Error?a.message:"Unknown error"}}}async createChatbot(a){return this.request("/chatbot",{method:"POST",body:JSON.stringify(a)})}async getChatbots(){return this.request("/chatbot")}async getChatbot(a){return this.request(`/chatbot/${a}`)}async updateChatbot(a,b){return this.request(`/chatbot/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteChatbot(a){return this.request(`/chatbot/${a}`,{method:"DELETE"})}async createTrainingData(a,b){return this.request(`/ai-training/${a}`,{method:"POST",body:JSON.stringify(b)})}async getTrainingData(){return this.request("/ai-training")}async getTrainingDataById(a){return this.request(`/ai-training/${a}`)}async deleteTrainingData(a){return this.request(`/ai-training/${a}`,{method:"DELETE"})}async sendMessage(a,b){return this.request(`/chatbot/${a}/message`,{method:"POST",body:JSON.stringify(b)})}async getChatbotConversations(a){return this.request(`/chatbot/${a}/conversations`)}async getConversation(a){return this.request(`/chatbot/conversation/${a}`)}};function q(){let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!1),[e,g]=(0,f.useState)(null),h=(0,f.useCallback)(async()=>{d(!0),g(null);let a=await p.getChatbots();a.error?g(a.error):a.data&&b(a.data),d(!1)},[]),i=(0,f.useCallback)(async a=>{d(!0),g(null);let c=await p.createChatbot(a);return c.error?(g(c.error),d(!1),null):c.data?(b(a=>[c.data,...a]),d(!1),c.data):(d(!1),null)},[]),j=(0,f.useCallback)(async(a,c)=>{d(!0),g(null);let e=await p.updateChatbot(a,c);return e.error?g(e.error):e.data&&b(b=>b.map(b=>b.id===a?e.data:b)),d(!1),e.data},[]),k=(0,f.useCallback)(async a=>{d(!0),g(null);let c=await p.deleteChatbot(a);return c.error?g(c.error):b(b=>b.filter(b=>b.id!==a)),d(!1),!c.error},[]);return(0,f.useEffect)(()=>{h()},[h]),{chatbots:a,loading:c,error:e,createChatbot:i,updateChatbot:j,deleteChatbot:k,refetch:h}}function r({onChatWithBot:a,onManageTraining:b,onCreateChatbot:c,onEditChatbot:d}){let{chatbots:n,loading:o,error:p,deleteChatbot:r}=q(),[s,t]=(0,f.useState)(null),u=async a=>{confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`)&&(t(a.id),await r(a.id),t(null))};return o?(0,e.jsx)("div",{className:"p-6",children:(0,e.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>(0,e.jsx)("div",{className:"h-20 bg-gray-200 rounded-lg"},a))})}):p?(0,e.jsx)("div",{className:"p-6",children:(0,e.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,e.jsxs)("p",{className:"text-red-800",children:["Error loading chatbots: ",p]})})}):(0,e.jsxs)("div",{className:"h-full flex flex-col",children:[(0,e.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,e.jsx)(h.Bot,{className:"h-5 w-5"}),"My Chatbots"]}),(0,e.jsxs)("button",{onClick:c,className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,e.jsx)(g.Plus,{className:"h-4 w-4"}),"New Chatbot"]})]})}),(0,e.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===n.length?(0,e.jsx)("div",{className:"p-6",children:(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(h.Bot,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No chatbots yet"}),(0,e.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first AI chatbot to get started."}),(0,e.jsxs)("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,e.jsx)(g.Plus,{className:"h-4 w-4"}),"Create Chatbot"]})]})}):(0,e.jsx)("div",{className:"p-4 space-y-3",children:n.map(c=>(0,e.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors group",children:(0,e.jsxs)("div",{className:"flex items-start justify-between",children:[(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,e.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,e.jsx)(h.Bot,{className:"h-5 w-5 text-blue-600"})}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:c.name}),(0,e.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full border ${(a=>{switch(a){case m.ACTIVE:return"bg-green-100 text-green-800 border-green-200";case m.INACTIVE:return"bg-gray-100 text-gray-800 border-gray-200";case m.TRAINING:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(c.status)}`,children:c.status})]})]}),c.description&&(0,e.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:c.description}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(i.MessageSquare,{className:"h-3 w-3"}),c.conversationCount," conversations"]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(j.Database,{className:"h-3 w-3"}),c.trainingDataCount," training data"]}),(0,e.jsxs)("div",{children:["Created ",new Date(c.createdAt).toLocaleDateString()]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("button",{onClick:()=>a(c),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,e.jsx)(i.MessageSquare,{className:"h-3 w-3"}),"Chat"]}),(0,e.jsxs)("button",{onClick:()=>b(c),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors",children:[(0,e.jsx)(j.Database,{className:"h-3 w-3"}),"Training"]})]})]}),(0,e.jsx)("div",{className:"ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)("button",{onClick:a=>{a.stopPropagation(),d(c)},className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit chatbot",children:(0,e.jsx)(k.Edit,{className:"h-4 w-4 text-gray-500"})}),(0,e.jsx)("button",{onClick:a=>{a.stopPropagation(),u(c)},disabled:s===c.id,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"Delete chatbot",children:(0,e.jsx)(l.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]})},c.id))})})]})}var s=a.i(502794),t=a.i(779149),u=a.i(733554);function v({chatbot:a,onBack:b}){let{conversations:c,currentConversation:d,loading:j,error:k,sendMessage:l,loadConversation:m,startNewConversation:n}=function(a){let[b,c]=(0,f.useState)([]),[d,e]=(0,f.useState)(null),[g,h]=(0,f.useState)(!1),[i,j]=(0,f.useState)(null),k=(0,f.useCallback)(async()=>{if(!a)return;h(!0),j(null);let b=await p.getChatbotConversations(a);b.error?j(b.error):b.data&&c(b.data),h(!1)},[a]),l=(0,f.useCallback)(async b=>{if(!a)return null;if(j(null),d){let a={id:`temp-${Date.now()}`,content:b.message,role:"user",timestamp:new Date,conversationId:d.id||""};e(b=>({...b,messages:[...b.messages,a]}))}let c={...b,conversationId:d?.id||void 0},f=await p.sendMessage(a,c);if(f.error)j(f.error),d&&e(a=>({...a,messages:a.messages.slice(0,-1)}));else if(f.data){if(d?.id&&""!==d.id)e(a=>({...a,messages:[...a.messages.filter(a=>!a.id.startsWith("temp-")),f.data]}));else{let a=await p.getConversation(f.data.conversationId);a.data&&e(a.data)}return k(),f.data}return null},[a,d,k]),m=(0,f.useCallback)(async a=>{h(!0),j(null);let b=await p.getConversation(a);b.error?j(b.error):b.data&&e(b.data),h(!1)},[]),n=(0,f.useCallback)(()=>{e({id:"",title:"New Conversation",messages:[],createdAt:new Date,updatedAt:new Date})},[]);return(0,f.useEffect)(()=>{a&&k()},[k,a]),{conversations:b,currentConversation:d,loading:g,error:i,sendMessage:l,loadConversation:m,startNewConversation:n,refetchConversations:k}}(a.id),[o,q]=(0,f.useState)(""),[r,v]=(0,f.useState)(!1),w=(0,f.useRef)(null);(0,f.useEffect)(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[d?.messages]);let x=async a=>{if(a.preventDefault(),!o.trim()||r)return;let b=o.trim();q(""),v(!0);try{await l({message:b,conversationId:d?.id})}catch(a){console.error("Failed to send message:",a)}finally{v(!1)}};return(0,e.jsxs)("div",{className:"h-full flex",children:[(0,e.jsxs)("div",{className:"w-80 border-r border-gray-200 flex flex-col",children:[(0,e.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,e.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,e.jsx)("button",{onClick:b,className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"← Back to Chatbots"})}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,e.jsx)(h.Bot,{className:"h-5 w-5 text-blue-600"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"font-medium text-gray-900",children:a.name}),(0,e.jsx)("p",{className:"text-sm text-gray-500",children:a.status})]})]})]}),(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,e.jsx)("div",{className:"p-3",children:(0,e.jsxs)("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border border-blue-200",children:[(0,e.jsx)(g.Plus,{className:"h-4 w-4"}),"New Conversation"]})}),(0,e.jsx)("div",{className:"px-3 pb-3 space-y-2",children:c.map(a=>(0,e.jsx)("div",{onClick:()=>m(a.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${d?.id===a.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50 border border-transparent"}`,children:(0,e.jsxs)("div",{className:"flex items-start gap-2",children:[(0,e.jsx)(i.MessageSquare,{className:"h-4 w-4 text-gray-400 mt-1 flex-shrink-0"}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title||"Untitled Conversation"}),(0,e.jsxs)("p",{className:"text-xs text-gray-500",children:[a.messages.length," messages"]}),(0,e.jsx)("p",{className:"text-xs text-gray-400",children:new Date(a.updatedAt).toLocaleDateString()})]})]})},a.id))})]})]}),(0,e.jsx)("div",{className:"flex-1 flex flex-col",children:d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===d.messages.length?(0,e.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,e.jsxs)("div",{className:"text-center max-w-md",children:[(0,e.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,e.jsx)(i.MessageSquare,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"New Conversation"}),(0,e.jsxs)("p",{className:"text-gray-500 text-sm",children:["Start chatting with ",a.name,". Type your message below to begin."]})]})}):d.messages.map(a=>(0,e.jsxs)("div",{className:`flex gap-3 ${"user"===a.role?"justify-end":"justify-start"}`,children:["assistant"===a.role&&(0,e.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,e.jsx)(h.Bot,{className:"h-4 w-4 text-blue-600"})}),(0,e.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${"user"===a.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[(0,e.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),(0,e.jsx)("p",{className:`text-xs mt-1 ${"user"===a.role?"text-blue-100":"text-gray-500"}`,children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),"user"===a.role&&(0,e.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:(0,e.jsx)(t.User,{className:"h-4 w-4 text-gray-600"})})]},a.id)),r&&(0,e.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,e.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,e.jsx)(h.Bot,{className:"h-4 w-4 text-blue-600"})}),(0,e.jsx)("div",{className:"bg-gray-100 rounded-lg px-4 py-2",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin text-gray-500"}),(0,e.jsx)("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})]}),(0,e.jsx)("div",{ref:w})]}),(0,e.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[k&&(0,e.jsx)("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:k})}),(0,e.jsxs)("form",{onSubmit:x,className:"flex gap-3",children:[(0,e.jsx)("input",{type:"text",value:o,onChange:a=>q(a.target.value),placeholder:"Type your message...",disabled:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"}),(0,e.jsx)("button",{type:"submit",disabled:!o.trim()||r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,e.jsx)(s.Send,{className:"h-4 w-4"})})]})]})]}):(0,e.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,e.jsxs)("div",{className:"text-center max-w-md",children:[(0,e.jsx)("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,e.jsx)(h.Bot,{className:"h-8 w-8 text-blue-600"})}),(0,e.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Welcome to ",a.name]}),(0,e.jsx)("p",{className:"text-gray-500 mb-6",children:a.description||"Start a new conversation or select an existing one to continue chatting."}),(0,e.jsxs)("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,e.jsx)(g.Plus,{className:"h-4 w-4"}),"Start New Conversation"]})]})})})]})}var w=a.i(147745),x=a.i(473515),y=a.i(327987),z=a.i(508335),A=a.i(411185);function B({chatbotId:a,onBack:b}){let{trainingData:c,loading:d,error:g,createTrainingData:h,deleteTrainingData:i}=function(){let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!1),[e,g]=(0,f.useState)(null),h=(0,f.useCallback)(async()=>{d(!0),g(null);let a=await p.getTrainingData();a.error?g(a.error):a.data&&b(a.data),d(!1)},[]),i=(0,f.useCallback)(async(a,c)=>{d(!0),g(null);let e=await p.createTrainingData(a,c);return e.error?(g(e.error),d(!1),null):e.data?(b(a=>[e.data,...a]),d(!1),e.data):(d(!1),null)},[]),j=(0,f.useCallback)(async a=>{d(!0),g(null);let c=await p.deleteTrainingData(a);return c.error?g(c.error):b(b=>b.filter(b=>b.id!==a)),d(!1),!c.error},[]);return(0,f.useEffect)(()=>{h()},[h]),{trainingData:a,loading:c,error:e,createTrainingData:i,deleteTrainingData:j,refetch:h}}(),[j,k]=(0,f.useState)(!1),[m,q]=(0,f.useState)(!1),[r,s]=(0,f.useState)(null),t=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?k(!0):"dragleave"===a.type&&k(!1)},u=async b=>{if(0!==b.length){q(!0),s(null);for(let c=0;c<b.length;c++){let d=b[c];try{let b=await v(d);await h(a,{title:d.name,type:B(d),content:b})}catch(a){s(`Failed to upload ${d.name}: ${a}`);break}}q(!1)}},v=a=>new Promise((b,c)=>{let d=new FileReader;d.onload=a=>b(a.target?.result),d.onerror=()=>c(Error("Failed to read file")),d.readAsText(a)}),B=a=>"text/plain"===a.type?n.TEXT:"application/pdf"===a.type?n.DOCUMENT:"text/csv"===a.type||"application/json"===a.type?n.KNOWLEDGE_BASE:n.TEXT;return(0,e.jsxs)("div",{className:"h-full flex flex-col",children:[(0,e.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,e.jsx)("div",{className:"flex items-center justify-between",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{onClick:b,className:"text-sm text-gray-600 hover:text-gray-900 transition-colors mb-2",children:"← Back to Chatbots"}),(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Data"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Upload and manage training data for your chatbot"})]})})}),(0,e.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,e.jsxs)("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${j?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:t,onDragLeave:t,onDragOver:t,onDrop:a=>{a.preventDefault(),a.stopPropagation(),k(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&u(a.dataTransfer.files)},children:[(0,e.jsx)("input",{type:"file",multiple:!0,onChange:a=>a.target.files&&u(a.target.files),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:".txt,.pdf,.csv,.json",disabled:m}),(0,e.jsx)(w.Upload,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Training Data"}),(0,e.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here, or click to select files"}),(0,e.jsx)("p",{className:"text-sm text-gray-500",children:"Supported formats: TXT, PDF, CSV, JSON (Max 10MB per file)"}),m&&(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsxs)("div",{className:"inline-flex items-center gap-2 text-blue-600",children:[(0,e.jsx)("div",{className:"h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),"Uploading..."]})}),r&&(0,e.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:r})})]})}),(0,e.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsx)("div",{className:"h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):g?(0,e.jsx)("div",{className:"p-6",children:(0,e.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(y.AlertCircle,{className:"h-5 w-5 text-red-600"}),(0,e.jsx)("p",{className:"text-red-800",children:g})]})})}):0===c.length?(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)(x.FileText,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No training data"}),(0,e.jsx)("p",{className:"text-gray-500",children:"Upload some files to start training your chatbot"})]})}):(0,e.jsx)("div",{className:"p-6",children:(0,e.jsx)("div",{className:"space-y-4",children:c.map(a=>{let b,c=(a=>{switch(a){case o.PENDING:case o.PROCESSING:return A.Clock;case o.COMPLETED:return z.CheckCircle;case o.FAILED:return y.AlertCircle;default:return x.FileText}})(a.status);return(0,e.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,e.jsxs)("div",{className:"flex items-start justify-between",children:[(0,e.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,e.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,e.jsx)(x.FileText,{className:"h-5 w-5 text-gray-600"})}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,e.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:a.title}),(0,e.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${(a=>{switch(a){case o.PENDING:return"text-yellow-600 bg-yellow-100";case o.PROCESSING:return"text-blue-600 bg-blue-100";case o.COMPLETED:return"text-green-600 bg-green-100";case o.FAILED:return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(a.status)}`,children:[(0,e.jsx)(c,{className:"h-3 w-3"}),a.status]})]}),(0,e.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.filePath?`File: ${a.filePath}`:"Text content"}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,e.jsxs)("span",{children:["Type: ",a.type]}),(0,e.jsxs)("span",{children:["Content: ",a.content?`${a.content.length} chars`:"No content"]}),(0,e.jsxs)("span",{children:["Created: ",new Date(b=a.createdAt).toLocaleDateString()+" "+new Date(b).toLocaleTimeString()]})]})]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[a.status===o.PENDING&&(0,e.jsx)("button",{onClick:()=>{console.log("Process training data:",a.id)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Process data",children:(0,e.jsx)(z.CheckCircle,{className:"h-4 w-4"})}),(0,e.jsx)("button",{onClick:()=>i(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,e.jsx)(l.Trash2,{className:"h-4 w-4"})})]})]})},a.id)})})})})]})}var C=a.i(973174),D=a.i(363615);function E({onSubmit:a,onCancel:b,loading:c=!1,error:d}){let[g,i]=(0,f.useState)({name:"",description:"",systemPrompt:"",temperature:.7,maxTokens:1e3}),[j,k]=(0,f.useState)({}),l=async b=>{let c,d,e;b.preventDefault(),c={},g.name.trim()||(c.name="Name is required"),((d=g.temperature??.7)<0||d>2)&&(c.temperature="Temperature must be between 0 and 2"),((e=g.maxTokens??1e3)<1||e>4e3)&&(c.maxTokens="Max tokens must be between 1 and 4000"),k(c),0===Object.keys(c).length&&await a(g)},m=(a,b)=>{i(c=>({...c,[a]:b})),j[a]&&k(b=>({...b,[a]:""}))};return(0,e.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,e.jsx)(h.Bot,{className:"h-4 w-4 text-blue-600"})}),(0,e.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Create New Chatbot"})]}),(0,e.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,e.jsx)(D.X,{className:"h-5 w-5"})})]}),(0,e.jsxs)("form",{onSubmit:l,className:"p-6 space-y-4",children:[d&&(0,e.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,e.jsx)("p",{className:"text-sm text-red-800",children:d})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,e.jsx)("input",{type:"text",id:"name",value:g.name,onChange:a=>m("name",a.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${j.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter chatbot name",disabled:c}),j.name&&(0,e.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.name})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,e.jsx)("textarea",{id:"description",value:g.description,onChange:a=>m("description",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what this chatbot does",disabled:c})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"systemPrompt",className:"block text-sm font-medium text-gray-700 mb-1",children:"System Prompt"}),(0,e.jsx)("textarea",{id:"systemPrompt",value:g.systemPrompt,onChange:a=>m("systemPrompt",a.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter instructions for how the chatbot should behave",disabled:c})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("label",{htmlFor:"temperature",className:"block text-sm font-medium text-gray-700 mb-1",children:["Temperature: ",g.temperature]}),(0,e.jsx)("input",{type:"range",id:"temperature",min:"0",max:"2",step:"0.1",value:g.temperature,onChange:a=>m("temperature",parseFloat(a.target.value)),className:"w-full",disabled:c}),(0,e.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,e.jsx)("span",{children:"More focused"}),(0,e.jsx)("span",{children:"More creative"})]}),j.temperature&&(0,e.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.temperature})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"maxTokens",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Tokens"}),(0,e.jsx)("input",{type:"number",id:"maxTokens",min:"1",max:"4000",value:g.maxTokens,onChange:a=>m("maxTokens",parseInt(a.target.value)),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${j.maxTokens?"border-red-300":"border-gray-300"}`,placeholder:"1000",disabled:c}),j.maxTokens&&(0,e.jsx)("p",{className:"text-sm text-red-600 mt-1",children:j.maxTokens})]}),(0,e.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,e.jsx)("button",{type:"button",onClick:b,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Cancel"}),(0,e.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",disabled:c,children:c?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Save,{className:"h-4 w-4"}),"Create Chatbot"]})})]})]})]})})}var F=a.i(40947),G=a.i(439889),H=a.i(425685);function I(){let{user:a,loading:b,isAuthenticated:c}=(0,F.useAuth)(),{createChatbot:d,loading:g,error:h}=q(),[i,j]=(0,f.useState)({type:"list"}),[k,l]=(0,f.useState)(!1),[m,n]=(0,f.useState)(null);if(b)return(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})});if(!c)return(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,e.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[(0,e.jsx)("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,e.jsx)(t.User,{className:"h-8 w-8 text-blue-600"})}),(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),(0,e.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to access the chatbot features."}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)(G.default,{href:"/login",className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,e.jsx)(H.LogIn,{className:"h-4 w-4"}),"Login"]}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",(0,e.jsx)(G.default,{href:"/register",className:"text-blue-600 hover:text-blue-700",children:"Sign up here"})]})]})]})})});let o=()=>{j({type:"list"})},p=async a=>{l(!0),n(null);try{await d(a),j({type:"list"})}catch(a){n(a instanceof Error?a.message:"Failed to create chatbot")}finally{l(!1)}};return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50",children:["list"===i.type&&(0,e.jsx)(r,{onChatWithBot:a=>{j({type:"chat",chatbot:a})},onManageTraining:a=>{j({type:"training",chatbot:a})},onCreateChatbot:()=>{j({type:"form"})},onEditChatbot:a=>{console.log("Edit chatbot:",a)}}),"chat"===i.type&&(0,e.jsx)(v,{chatbot:i.chatbot,onBack:o}),"training"===i.type&&(0,e.jsx)(B,{chatbotId:i.chatbot.id,onBack:o}),"form"===i.type&&(0,e.jsx)(E,{onSubmit:p,onCancel:()=>{n(null),j({type:"list"})},loading:k,error:m})]})}a.s(["default",()=>I],104868)}];

//# sourceMappingURL=frontend_src_app_demo_chatbot_page_tsx_1c90b0b4._.js.map
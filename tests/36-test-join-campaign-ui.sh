#!/bin/bash

# Test Join Campaign UI Components
# Tests: JoinCampaignModal, CampaignBrowser, ApplicationReviewPanel

echo "ğŸ§ª Testing Join Campaign UI Components..."
echo ""

echo "ğŸ“‹ Test Checklist:"
echo ""

echo "1ï¸âƒ£ CampaignBrowser Component"
echo "   âœ“ Navigate to /admin/affiliate/browse"
echo "   âœ“ See campaign grid (1/2/3 columns responsive)"
echo "   âœ“ Search functionality works"
echo "   âœ“ Commission filter works (All/Percentage/Fixed)"
echo "   âœ“ Status filter works (All/Active/Paused/Draft)"
echo "   âœ“ Application status badges show correctly"
echo "   âœ“ Join button states work (Join/Pending/Approved/Rejected)"
echo ""

echo "2ï¸âƒ£ JoinCampaignModal Component"
echo "   âœ“ Click 'Join Campaign' button"
echo "   âœ“ Modal opens with campaign details"
echo "   âœ“ Commission info displays correctly"
echo "   âœ“ Cookie duration shows"
echo "   âœ“ Campaign type and status visible"
echo "   âœ“ Message input works"
echo "   âœ“ Required message for private campaigns"
echo "   âœ“ Submit button works"
echo "   âœ“ Loading state during submission"
echo "   âœ“ Error handling displays"
echo "   âœ“ Success closes modal"
echo "   âœ“ Status badge updates after join"
echo ""

echo "3ï¸âƒ£ ApplicationReviewPanel Component"
echo "   âœ“ Navigate to /admin/affiliate/campaigns/:id/applications"
echo "   âœ“ Stats cards show (Pending/Approved/Rejected)"
echo "   âœ“ Applications segmented correctly"
echo "   âœ“ Affiliate info displays (name, email, website)"
echo "   âœ“ Application message visible"
echo "   âœ“ Approve button works"
echo "   âœ“ Reject button works"
echo "   âœ“ Review dialog opens"
echo "   âœ“ Reason input works"
echo "   âœ“ Submit review works"
echo "   âœ“ Application moves to correct section"
echo "   âœ“ Counts update"
echo "   âœ“ Rejection reason displays"
echo ""

echo "4ï¸âƒ£ CampaignManagement Integration"
echo "   âœ“ 'Browse All Campaigns' button visible (affiliates)"
echo "   âœ“ 'View Applications' button on campaigns (merchants)"
echo "   âœ“ Buttons link to correct pages"
echo ""

echo "5ï¸âƒ£ Responsive Design"
echo "   âœ“ Mobile (320px-768px): 1 column"
echo "   âœ“ Tablet (768px-1024px): 2 columns"
echo "   âœ“ Desktop (1024px+): 3 columns"
echo "   âœ“ Modal adapts to screen size"
echo "   âœ“ Filters stack on mobile"
echo ""

echo "6ï¸âƒ£ Dark Mode"
echo "   âœ“ All components work in dark mode"
echo "   âœ“ Colors properly inverted"
echo "   âœ“ Contrast maintained"
echo ""

echo "7ï¸âƒ£ Error Handling"
echo "   âœ“ Network errors show message"
echo "   âœ“ Validation errors handled"
echo "   âœ“ Already joined error"
echo "   âœ“ Campaign full error"
echo "   âœ“ Unauthorized errors"
echo ""

echo "8ï¸âƒ£ Loading States"
echo "   âœ“ Skeleton loaders on initial load"
echo "   âœ“ Spinner on buttons during mutation"
echo "   âœ“ Disabled states during processing"
echo ""

echo ""
echo "âœ… Manual Testing Steps:"
echo ""
echo "AFFILIATE FLOW:"
echo "1. Login as affiliate"
echo "2. Go to /admin/affiliate/campaigns"
echo "3. Click 'Browse All Campaigns'"
echo "4. Search for a campaign"
echo "5. Click 'Join Campaign' on any active campaign"
echo "6. Fill in message (if required)"
echo "7. Submit"
echo "8. Verify status badge appears"
echo "9. Check button changes to 'Pending' or 'Already Joined'"
echo ""

echo "MERCHANT FLOW:"
echo "10. Login as merchant"
echo "11. Go to /admin/affiliate/campaigns"
echo "12. Click Users icon on any campaign"
echo "13. Navigate to applications page"
echo "14. See pending applications"
echo "15. Click 'Approve' on an application"
echo "16. Enter optional message"
echo "17. Submit"
echo "18. Verify application moves to 'Approved' section"
echo "19. Verify counts update"
echo ""

echo "REJECTION FLOW:"
echo "20. Click 'Reject' on pending application"
echo "21. Enter rejection reason"
echo "22. Submit"
echo "23. Verify application in 'Rejected' section"
echo "24. Verify reason displays on card"
echo ""

echo "ğŸ“Š Component Checklist:"
echo ""
echo "Files to verify exist:"
echo "âœ“ /frontend/src/components/affiliate/campaigns/JoinCampaignModal.tsx"
echo "âœ“ /frontend/src/components/affiliate/campaigns/CampaignBrowser.tsx"
echo "âœ“ /frontend/src/components/affiliate/campaigns/ApplicationReviewPanel.tsx"
echo "âœ“ /frontend/src/app/admin/affiliate/browse/page.tsx"
echo "âœ“ /frontend/src/app/admin/affiliate/campaigns/[id]/applications/page.tsx"
echo ""

echo "GraphQL operations to verify:"
echo "âœ“ JOIN_CAMPAIGN mutation"
echo "âœ“ REVIEW_CAMPAIGN_APPLICATION mutation"
echo "âœ“ DELETE_AFFILIATE_CAMPAIGN mutation"
echo "âœ“ GET_MY_CAMPAIGN_APPLICATIONS query"
echo "âœ“ GET_CAMPAIGN_APPLICATIONS query"
echo ""

echo "ğŸ‰ Testing Guide Complete!"
echo ""
echo "Run frontend with: cd frontend && bun dev"
echo "Open browser at: http://localhost:3000"
echo "Test both affiliate and merchant flows"
echo ""

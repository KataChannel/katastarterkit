{"version":3,"sources":["turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/page.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/components/ConfigModal.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/utils/localStorage.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/utils/formatters.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/utils/invoiceClassifier.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/utils/inventoryCalculator.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/utils/excelExporter.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/components/SummaryCards.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/components/FilterToolbar.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/components/InventoryTable.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/components/Pagination.tsx","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/hooks/useInventoryData.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/hooks/useInventoryFilter.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/hooks/usePagination.ts","turbopack:///[project]/frontend/src/app/ketoan/xuatnhapton/hooks/useDebouncedValue.ts"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { toast } from 'sonner';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Button } from '@/components/ui/button';\nimport { AlertCircle } from 'lucide-react';\n\n// Types\nimport { UserConfig, DateRange, GroupBy, SortField, SortDirection } from './types';\n\n// Components\nimport {\n  ConfigModal,\n  SummaryCards,\n  FilterToolbar,\n  InventoryTable,\n  Pagination,\n} from './components';\n\n// Hooks\nimport { useInventoryData, useInventoryFilter, usePagination, useDebouncedValue } from './hooks';\n\n// Utils\nimport {\n  getUserConfig,\n  saveUserConfig,\n  getDefaultDateRange,\n  calculateInventory,\n  calculateOpeningBalance,\n  calculateSummary,\n  exportToExcel,\n} from './utils';\n\nexport default function XuatNhapTonPage() {\n  // User configuration\n  const [userConfig, setUserConfig] = useState<UserConfig | null>(null);\n  const [showConfigModal, setShowConfigModal] = useState(false);\n  \n  // Date range\n  const [dateRange, setDateRange] = useState<DateRange>(getDefaultDateRange());\n  \n  // Filters and sorting\n  const [searchTerm, setSearchTerm] = useState('');\n  const debouncedSearchTerm = useDebouncedValue(searchTerm, 300); // 300ms debounce\n  const [isSearching, setIsSearching] = useState(false);\n  const [groupBy, setGroupBy] = useState<GroupBy>('ma');\n  const [sortField, setSortField] = useState<SortField>('date');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  \n  // Display limits\n  const DISPLAY_LIMIT = 100; // Limit records shown on UI\n  const [itemsPerPage] = useState(50);\n  \n  // Data loading\n  const {\n    invoices,\n    details,\n    products,\n    loading,\n    error,\n    isReady,\n    refetch,\n  } = useInventoryData();\n  \n  // Load user config from localStorage on mount\n  useEffect(() => {\n    const config = getUserConfig();\n    if (config) {\n      setUserConfig(config);\n    } else {\n      // Show config modal if no config exists\n      setShowConfigModal(true);\n    }\n  }, []);\n  \n  // Calculate inventory rows\n  const inventoryRows = useMemo(() => {\n    if (!userConfig || !isReady) {\n      console.log('‚ö†Ô∏è Inventory calculation skipped:', { \n        hasUserConfig: !!userConfig, \n        isReady,\n        userConfig \n      });\n      return [];\n    }\n    \n    console.log('üìä Calculating inventory with:', {\n      invoicesCount: invoices.length,\n      detailsCount: details.length,\n      productsCount: products.length,\n      userMST: userConfig.mst,\n      groupBy,\n      dateRange,\n      periodStartDate: dateRange.periodStartDate,\n      sampleInvoice: invoices[0],\n      sampleDetail: details[0],\n      sampleProduct: products[0],\n    });\n    \n    // Debug: Check if invoices have nbmst/nmmst matching userMST\n    const userMSTLower = userConfig.mst.trim().toLowerCase();\n    const matchingSales = invoices.filter(inv => inv.nbmst?.trim().toLowerCase() === userMSTLower);\n    const matchingPurchases = invoices.filter(inv => inv.nmmst?.trim().toLowerCase() === userMSTLower);\n    \n    console.log('üîç MST Matching Debug:', {\n      userMST: userConfig.mst,\n      userMSTLower,\n      matchingSalesCount: matchingSales.length,\n      matchingPurchasesCount: matchingPurchases.length,\n      sampleSaleInvoice: matchingSales[0],\n      samplePurchaseInvoice: matchingPurchases[0],\n      firstInvoiceNbmst: invoices[0]?.nbmst,\n      firstInvoiceNmmst: invoices[0]?.nmmst,\n    });\n    \n    // Calculate opening balance if periodStartDate is set\n    let openingBalances: Map<string, any> | undefined;\n    if (dateRange.periodStartDate) {\n      console.log('üîµ Calculating opening balance from period start:', dateRange.periodStartDate);\n      openingBalances = calculateOpeningBalance(\n        invoices,\n        details,\n        products,\n        userConfig.mst,\n        groupBy,\n        dateRange.periodStartDate\n      );\n      console.log('‚úÖ Opening balance calculated for', openingBalances.size, 'products');\n    }\n    \n    const result = calculateInventory(\n      invoices,\n      details,\n      products,\n      userConfig.mst,\n      groupBy,\n      dateRange.startDate,\n      dateRange.endDate,\n      openingBalances\n    );\n    \n    console.log('‚úÖ Inventory rows calculated:', result.length);\n    if (result.length > 0) {\n      console.log('Sample result rows (first 3):', result.slice(0, 3));\n    } else {\n      console.warn('‚ö†Ô∏è No inventory rows generated! Check MST matching logic.');\n    }\n    \n    return result;\n  }, [invoices, details, products, userConfig, groupBy, dateRange, isReady]);\n  \n  // Apply filters and sorting with debounced search\n  const filteredRows = useInventoryFilter({\n    rows: inventoryRows,\n    searchTerm: debouncedSearchTerm,\n    sortField,\n    sortDirection,\n  });\n  \n  // Track search loading state\n  useEffect(() => {\n    if (searchTerm !== debouncedSearchTerm) {\n      setIsSearching(true);\n    } else {\n      setIsSearching(false);\n    }\n  }, [searchTerm, debouncedSearchTerm]);\n  \n  console.log('üîç Filtered rows:', filteredRows.length, { searchTerm: debouncedSearchTerm, sortField, sortDirection });\n  \n  // Limit display rows for performance\n  const totalRecords = filteredRows.length;\n  const displayRows = filteredRows.slice(0, DISPLAY_LIMIT);\n  const isLimited = totalRecords > DISPLAY_LIMIT;\n  \n  // Calculate summary from display rows for performance\n  const summary = useMemo(() => calculateSummary(displayRows), [displayRows]);\n  \n  // Pagination (using display rows)\n  const {\n    currentPage,\n    totalPages,\n    startIndex,\n    endIndex,\n    goToPage,\n    nextPage,\n    prevPage,\n    canGoNext,\n    canGoPrev,\n  } = usePagination({\n    totalItems: displayRows.length,\n    itemsPerPage,\n  });\n  \n  // Handlers\n  const handleSaveConfig = (config: UserConfig) => {\n    saveUserConfig(config);\n    setUserConfig(config);\n    setShowConfigModal(false);\n    toast.success('ƒê√£ l∆∞u c·∫•u h√¨nh MST');\n  };\n  \n  const handleExport = () => {\n    if (!userConfig) {\n      toast.error('Vui l√≤ng c·∫•u h√¨nh MST tr∆∞·ªõc');\n      setShowConfigModal(true);\n      return;\n    }\n    \n    if (filteredRows.length === 0) {\n      toast.error('Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ xu·∫•t');\n      return;\n    }\n    \n    try {\n      // Calculate full summary from all filtered rows for export\n      const fullSummary = calculateSummary(filteredRows);\n      \n      exportToExcel(\n        filteredRows,\n        fullSummary,\n        dateRange,\n        userConfig.companyName || 'C√¥ng ty'\n      );\n      toast.success(`ƒê√£ xu·∫•t ${filteredRows.length.toLocaleString()} b·∫£n ghi ra Excel`);\n    } catch (error) {\n      console.error('Export error:', error);\n      toast.error('L·ªói khi xu·∫•t file Excel');\n    }\n  };\n  \n  const handleRefresh = async () => {\n    try {\n      await refetch();\n      toast.success('ƒê√£ l√†m m·ªõi d·ªØ li·ªáu');\n    } catch (error) {\n      console.error('Refresh error:', error);\n      toast.error('L·ªói khi l√†m m·ªõi d·ªØ li·ªáu');\n    }\n  };\n  \n  const handleSortChange = (field: SortField, direction: SortDirection) => {\n    setSortField(field);\n    setSortDirection(direction);\n  };\n  \n  // Show error if data loading failed\n  useEffect(() => {\n    if (error.any) {\n      if (error.invoices) toast.error(`L·ªói t·∫£i h√≥a ƒë∆°n: ${error.invoices}`);\n      if (error.details) toast.error(`L·ªói t·∫£i chi ti·∫øt: ${error.details}`);\n      if (error.products) toast.error(`L·ªói t·∫£i s·∫£n ph·∫©m: ${error.products}`);\n    }\n  }, [error]);\n  \n  // Warning if no config\n  const showWarning = !userConfig && !showConfigModal;\n  \n  return (\n    <div className=\"container mx-auto px-4 py-6 space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">B√°o C√°o Xu·∫•t Nh·∫≠p T·ªìn</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Qu·∫£n l√Ω v√† theo d√µi xu·∫•t nh·∫≠p t·ªìn kho theo h√≥a ƒë∆°n\n        </p>\n        {userConfig && (\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            MST: <span className=\"font-medium\">{userConfig.mst}</span>\n            {userConfig.companyName && ` - ${userConfig.companyName}`}\n          </p>\n        )}\n      </div>\n      \n      {/* Warning Alert */}\n      {showWarning && (\n        <Alert className=\"border-yellow-500 bg-yellow-50\">\n          <AlertCircle className=\"h-4 w-4 text-yellow-600\" />\n          <AlertDescription className=\"text-yellow-700\">\n            <span className=\"font-medium\">C·∫ßn c·∫•u h√¨nh MST:</span> Vui l√≤ng c·∫•u h√¨nh m√£ s·ªë thu·∫ø (MST) ƒë·ªÉ ph√¢n lo·∫°i h√≥a ƒë∆°n b√°n/mua.{' '}\n            <Button\n              variant=\"link\"\n              className=\"h-auto p-0 text-yellow-800 underline\"\n              onClick={() => setShowConfigModal(true)}\n            >\n              C·∫•u h√¨nh ngay\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n      \n      {/* Config Modal */}\n      <ConfigModal\n        isOpen={showConfigModal}\n        currentConfig={userConfig}\n        onSave={handleSaveConfig}\n        onClose={() => setShowConfigModal(false)}\n      />\n      \n      {/* Summary Cards */}\n      <SummaryCards summary={summary} loading={loading.any} />\n      \n      {/* Filter Toolbar */}\n      <FilterToolbar\n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        dateRange={dateRange}\n        onDateRangeChange={setDateRange}\n        onSearch={() => {\n          toast.info(`T√¨m th·∫•y ${totalRecords} b·∫£n ghi${isLimited ? `, hi·ªÉn th·ªã ${DISPLAY_LIMIT} ƒë·∫ßu ti√™n` : ''}`);\n        }}\n        groupBy={groupBy}\n        onGroupByChange={setGroupBy}\n        sortField={sortField}\n        sortDirection={sortDirection}\n        onSortChange={handleSortChange}\n        onExport={handleExport}\n        onRefresh={handleRefresh}\n        onConfig={() => setShowConfigModal(true)}\n        loading={loading.any}\n        totalRecords={totalRecords}\n        displayedRecords={displayRows.length}\n        isSearching={isSearching}\n      />\n      \n      {/* Inventory Table */}\n      <InventoryTable\n        rows={displayRows}\n        currentPage={currentPage}\n        itemsPerPage={itemsPerPage}\n        loading={loading.any}\n        totalRecords={totalRecords}\n        isLimited={isLimited}\n        searchTerm={debouncedSearchTerm}\n        isSearching={isSearching}\n      />\n      \n      {/* Pagination */}\n      <Pagination\n        currentPage={currentPage}\n        totalPages={totalPages}\n        totalItems={displayRows.length}\n        itemsPerPage={itemsPerPage}\n        onPageChange={goToPage}\n        canGoPrev={canGoPrev}\n        canGoNext={canGoNext}\n        totalRecords={totalRecords}\n        isLimited={isLimited}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { UserConfig } from '../types';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\n\ninterface ConfigModalProps {\n  isOpen: boolean;\n  currentConfig: UserConfig | null;\n  onSave: (config: UserConfig) => void;\n  onClose: () => void;\n}\n\nexport const ConfigModal: React.FC<ConfigModalProps> = ({\n  isOpen,\n  currentConfig,\n  onSave,\n  onClose,\n}) => {\n  const [mst, setMst] = React.useState(currentConfig?.mst || '');\n  const [companyName, setCompanyName] = React.useState(currentConfig?.companyName || '');\n  \n  React.useEffect(() => {\n    if (currentConfig) {\n      setMst(currentConfig.mst);\n      setCompanyName(currentConfig.companyName);\n    }\n  }, [currentConfig]);\n  \n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (mst.trim()) {\n      onSave({ mst: mst.trim(), companyName: companyName.trim() });\n    }\n  };\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>C·∫•u H√¨nh M√£ S·ªë Thu·∫ø</DialogTitle>\n          <DialogDescription>\n            Nh·∫≠p m√£ s·ªë thu·∫ø ƒë·ªÉ ph√¢n lo·∫°i h√≥a ƒë∆°n b√°n/mua t·ª± ƒë·ªông\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"mst\">\n                M√£ S·ªë Thu·∫ø (MST) <span className=\"text-red-500\">*</span>\n              </Label>\n              <Input\n                id=\"mst\"\n                value={mst}\n                onChange={(e) => setMst(e.target.value)}\n                placeholder=\"Nh·∫≠p m√£ s·ªë thu·∫ø c·ªßa b·∫°n\"\n                required\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                MST d√πng ƒë·ªÉ ph√¢n lo·∫°i h√≥a ƒë∆°n b√°n/mua\n              </p>\n            </div>\n            \n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"companyName\">T√™n C√¥ng Ty</Label>\n              <Input\n                id=\"companyName\"\n                value={companyName}\n                onChange={(e) => setCompanyName(e.target.value)}\n                placeholder=\"Nh·∫≠p t√™n c√¥ng ty\"\n              />\n            </div>\n          </div>\n          \n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              H·ªßy\n            </Button>\n            <Button type=\"submit\">L∆∞u C·∫•u H√¨nh</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { UserConfig } from '../types';\n\nconst CONFIG_KEY = 'xuatnhapton_user_config';\n\n/**\n * Get user configuration from localStorage\n */\nexport const getUserConfig = (): UserConfig | null => {\n  if (typeof window === 'undefined') return null;\n  \n  try {\n    const stored = localStorage.getItem(CONFIG_KEY);\n    if (!stored) return null;\n    return JSON.parse(stored) as UserConfig;\n  } catch (error) {\n    console.error('Error reading user config:', error);\n    return null;\n  }\n};\n\n/**\n * Save user configuration to localStorage\n */\nexport const saveUserConfig = (config: UserConfig): void => {\n  if (typeof window === 'undefined') return;\n  \n  try {\n    localStorage.setItem(CONFIG_KEY, JSON.stringify(config));\n  } catch (error) {\n    console.error('Error saving user config:', error);\n  }\n};\n\n/**\n * Clear user configuration from localStorage\n */\nexport const clearUserConfig = (): void => {\n  if (typeof window === 'undefined') return;\n  \n  try {\n    localStorage.removeItem(CONFIG_KEY);\n  } catch (error) {\n    console.error('Error clearing user config:', error);\n  }\n};\n","/**\n * Format number as Vietnamese currency (VND)\n */\nexport const formatCurrency = (value: number | null | undefined): string => {\n  if (value === null || value === undefined) return '0 ‚Ç´';\n  return new Intl.NumberFormat('vi-VN', {\n    style: 'currency',\n    currency: 'VND',\n  }).format(value);\n};\n\n/**\n * Format number with thousand separators\n */\nexport const formatNumber = (value: number | null | undefined): string => {\n  if (value === null || value === undefined) return '0';\n  return new Intl.NumberFormat('vi-VN').format(value);\n};\n\n/**\n * Format date to Vietnamese format (DD/MM/YYYY)\n */\nexport const formatDate = (dateString: string | null | undefined): string => {\n  if (!dateString) return '';\n  \n  try {\n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat('vi-VN').format(date);\n  } catch (error) {\n    return dateString;\n  }\n};\n\n/**\n * Format date to ISO format (YYYY-MM-DD) for input[type=\"date\"]\n */\nexport const formatDateISO = (date: Date): string => {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n\n/**\n * Get default date range (last 30 days)\n */\nexport const getDefaultDateRange = (): { startDate: string; endDate: string } => {\n  const endDate = new Date();\n  const startDate = new Date();\n  startDate.setDate(startDate.getDate() - 30);\n  \n  return {\n    startDate: formatDateISO(startDate),\n    endDate: formatDateISO(endDate),\n  };\n};\n\n/**\n * Parse Vietnamese date string (DD/MM/YYYY) to Date\n */\nexport const parseVietnameseDate = (dateStr: string): Date | null => {\n  if (!dateStr) return null;\n  \n  try {\n    const parts = dateStr.split('/');\n    if (parts.length !== 3) return null;\n    \n    const day = parseInt(parts[0], 10);\n    const month = parseInt(parts[1], 10) - 1; // Month is 0-indexed\n    const year = parseInt(parts[2], 10);\n    \n    return new Date(year, month, day);\n  } catch (error) {\n    return null;\n  }\n};\n","import { InvoiceHeader } from '../types';\n\n// Debug flag\nlet classifyDebugLogged = false;\n\n/**\n * Classify invoice as sale or purchase based on MST\n * @param invoice - Invoice header\n * @param userMST - User's tax code (MST)\n * @returns 'sale' if user is seller, 'purchase' if user is buyer, null if neither\n */\nexport const classifyInvoice = (\n  invoice: InvoiceHeader,\n  userMST: string\n): 'sale' | 'purchase' | null => {\n  if (!userMST || !invoice) return null;\n  \n  const normalizedUserMST = userMST.trim().toLowerCase();\n  const nbmst = invoice.nbmst?.trim().toLowerCase();\n  const nmmst = invoice.nmmst?.trim().toLowerCase();\n  \n  // Debug first invoice\n  if (!classifyDebugLogged) {\n    console.log('üîç classifyInvoice DEBUG:', {\n      userMST: normalizedUserMST,\n      nbmst,\n      nmmst,\n      matchesSeller: nbmst === normalizedUserMST,\n      matchesBuyer: nmmst === normalizedUserMST,\n      invoice: invoice\n    });\n    classifyDebugLogged = true;\n  }\n  \n  // H√≥a ƒë∆°n b√°n: nbmst = user MST\n  if (nbmst === normalizedUserMST) {\n    return 'sale';\n  }\n  \n  // H√≥a ƒë∆°n mua: nmmst = user MST\n  if (nmmst === normalizedUserMST) {\n    return 'purchase';\n  }\n  \n  return null;\n};\n\n/**\n * Filter invoices by type\n */\nexport const filterInvoicesByType = (\n  invoices: InvoiceHeader[],\n  userMST: string,\n  type: 'all' | 'sale' | 'purchase'\n): InvoiceHeader[] => {\n  if (type === 'all') return invoices;\n  \n  return invoices.filter(invoice => {\n    const classification = classifyInvoice(invoice, userMST);\n    return classification === type;\n  });\n};\n\n/**\n * Get invoice type display name\n */\nexport const getInvoiceTypeLabel = (type: 'sale' | 'purchase' | null): string => {\n  switch (type) {\n    case 'sale':\n      return 'B√°n h√†ng';\n    case 'purchase':\n      return 'Mua h√†ng';\n    default:\n      return 'Kh√¥ng x√°c ƒë·ªãnh';\n  }\n};\n\n/**\n * Get invoice type badge color\n */\nexport const getInvoiceTypeBadgeColor = (type: 'sale' | 'purchase' | null): string => {\n  switch (type) {\n    case 'sale':\n      return 'bg-green-100 text-green-800 border-green-300';\n    case 'purchase':\n      return 'bg-blue-100 text-blue-800 border-blue-300';\n    default:\n      return 'bg-gray-100 text-gray-800 border-gray-300';\n  }\n};\n","import { InvoiceHeader, InvoiceDetail, ProductMapping, InventoryRow, GroupBy, OpeningBalance } from '../types';\nimport { classifyInvoice } from './invoiceClassifier';\n\n/**\n * Calculate opening balance from transactions before periodStartDate\n * Looks back up to 5 years\n */\nexport const calculateOpeningBalance = (\n  invoices: InvoiceHeader[],\n  details: InvoiceDetail[],\n  products: ProductMapping[],\n  userMST: string,\n  groupBy: GroupBy,\n  periodStartDate: string\n): Map<string, OpeningBalance> => {\n  console.log('üîµ calculateOpeningBalance START:', { periodStartDate });\n  \n  // Calculate date 5 years before periodStartDate\n  const startDateObj = new Date(periodStartDate);\n  const fiveYearsAgo = new Date(startDateObj);\n  fiveYearsAgo.setFullYear(startDateObj.getFullYear() - 5);\n  \n  console.log('üìÖ Date range for opening balance:', {\n    from: fiveYearsAgo.toISOString().split('T')[0],\n    to: periodStartDate\n  });\n  \n  // Calculate inventory from 5 years ago to periodStartDate (exclusive)\n  const periodEndDate = new Date(startDateObj);\n  periodEndDate.setDate(periodEndDate.getDate() - 1); // Day before periodStartDate\n  \n  const historicalInventory = calculateInventory(\n    invoices,\n    details,\n    products,\n    userMST,\n    groupBy,\n    fiveYearsAgo.toISOString().split('T')[0],\n    periodEndDate.toISOString().split('T')[0]\n  );\n  \n  // Group by product and get closing balance (which becomes opening balance)\n  const openingBalanceMap = new Map<string, OpeningBalance>();\n  \n  // Sum up all transactions per product to get final closing balance\n  historicalInventory.forEach(row => {\n    const existing = openingBalanceMap.get(row.productName);\n    if (existing) {\n      existing.quantity += row.closingQuantity;\n      existing.amount += row.closingAmount;\n    } else {\n      openingBalanceMap.set(row.productName, {\n        productName: row.productName,\n        quantity: row.closingQuantity,\n        amount: row.closingAmount\n      });\n    }\n  });\n  \n  console.log('‚úÖ Opening balance calculated for', openingBalanceMap.size, 'products');\n  if (openingBalanceMap.size > 0) {\n    const samples = Array.from(openingBalanceMap.values()).slice(0, 3);\n    console.log('Sample opening balances:', samples);\n  }\n  \n  return openingBalanceMap;\n};\n\n/**\n * Match product name from invoice detail to product mapping\n * Returns normalized name (ten2) or product code (ma) based on groupBy\n */\nconst matchProduct = (\n  detailName: string,\n  products: ProductMapping[],\n  groupBy: GroupBy\n): { key: string; code: string | null; unit: string | null } => {\n  // If no products available, use original name\n  if (!products || products.length === 0) {\n    console.warn('‚ö†Ô∏è No products available for mapping, using original name');\n    return {\n      key: detailName,\n      code: null,\n      unit: null,\n    };\n  }\n  \n  // Try exact match first\n  const exactMatch = products.find(p => p.ten?.toLowerCase() === detailName.toLowerCase());\n  if (exactMatch) {\n    const key = groupBy === 'ma' ? (exactMatch.ma || detailName) : (exactMatch.ten2 || detailName);\n    return {\n      key,\n      code: exactMatch.ma,\n      unit: exactMatch.dvt,\n    };\n  }\n  \n  // Try partial match\n  const partialMatch = products.find(p => \n    p.ten?.toLowerCase().includes(detailName.toLowerCase()) ||\n    detailName.toLowerCase().includes(p.ten?.toLowerCase() || '')\n  );\n  if (partialMatch) {\n    const key = groupBy === 'ma' ? (partialMatch.ma || detailName) : (partialMatch.ten2 || detailName);\n    return {\n      key,\n      code: partialMatch.ma,\n      unit: partialMatch.dvt,\n    };\n  }\n  \n  // No match found, use original name\n  return {\n    key: detailName,\n    code: null,\n    unit: null,\n  };\n};\n\n/**\n * Calculate inventory report from invoices\n * @param openingBalances - Optional opening balances at period start\n */\nexport const calculateInventory = (\n  invoices: InvoiceHeader[],\n  details: InvoiceDetail[],\n  products: ProductMapping[],\n  userMST: string,\n  groupBy: GroupBy,\n  startDate: string,\n  endDate: string,\n  openingBalances?: Map<string, OpeningBalance>\n): InventoryRow[] => {\n  console.log('üîß calculateInventory START:', { invoices: invoices.length, details: details.length, products: products.length });\n  \n  // Create a map to store inventory by product and date\n  const inventoryMap = new Map<string, InventoryRow>();\n  \n  // Filter invoices by date range\n  const filteredInvoices = invoices.filter(inv => {\n    if (!inv.tdlap) return false;\n    const invDate = new Date(inv.tdlap);\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    end.setHours(23, 59, 59, 999); // Include end date\n    return invDate >= start && invDate <= end;\n  });\n  \n  console.log('üìÖ Filtered by date:', filteredInvoices.length, 'invoices');\n  \n  // Process each invoice detail\n  let processedCount = 0;\n  let skippedNoType = 0;\n  let saleCount = 0;\n  let purchaseCount = 0;\n  \n  filteredInvoices.forEach(invoice => {\n    const invoiceType = classifyInvoice(invoice, userMST);\n    if (!invoiceType) {\n      skippedNoType++;\n      return; // Skip if invoice doesn't belong to user\n    }\n    processedCount++;\n    if (invoiceType === 'sale') saleCount++;\n    if (invoiceType === 'purchase') purchaseCount++;\n    \n    // Get all details for this invoice using idServer field\n    const invoiceDetails = details.filter(d => d.idhdonServer === invoice.idServer);\n    \n    if (processedCount <= 2) {\n      console.log(`üìÑ Processing invoice #${processedCount}:`, {\n        type: invoiceType,\n        id: invoice.id,\n        idServer: invoice.idServer,\n        nbmst: invoice.nbmst,\n        nmmst: invoice.nmmst,\n        detailsCount: invoiceDetails.length,\n      });\n    }\n    \n    invoiceDetails.forEach(detail => {\n      if (!detail.ten) return;\n      \n      // Match product\n      const { key: productKey, code: productCode, unit } = matchProduct(\n        detail.ten,\n        products,\n        groupBy\n      );\n      \n      // Get or create inventory row for this product and date\n      const date = invoice.tdlap ? new Date(invoice.tdlap).toISOString().split('T')[0] : '';\n      const mapKey = `${productKey}_${date}`;\n      \n      let row = inventoryMap.get(mapKey);\n      if (!row) {\n        row = {\n          productName: productKey,\n          originalName: detail.ten, // L∆∞u t√™n g·ªëc t·ª´ h√≥a ƒë∆°n\n          productCode: productCode,\n          unit: unit || detail.dvtinh,\n          date: date,\n          openingQuantity: 0,\n          openingAmount: 0,\n          importQuantity: 0,\n          importAmount: 0,\n          exportQuantity: 0,\n          exportAmount: 0,\n          exportCostPrice: 0,\n          exportSalePrice: 0,\n          exportSaleAmount: 0,\n          closingQuantity: 0,\n          closingAmount: 0,\n        };\n        inventoryMap.set(mapKey, row);\n      }\n      \n      // Add to import or export based on invoice type\n      const quantity = Number(detail.sluong) || 0;\n      const amount = Number(detail.thtien) || 0;\n      const unitPrice = Number(detail.dgia) || 0;\n      \n      if (invoiceType === 'purchase') {\n        // Mua h√†ng = Nh·∫≠p kho\n        row.importQuantity += quantity;\n        row.importAmount += amount;\n      } else if (invoiceType === 'sale') {\n        // B√°n h√†ng = Xu·∫•t kho\n        row.exportQuantity += quantity;\n        // Note: exportAmount will be calculated as cost (gi√° v·ªën √ó SL)\n        // exportSaleAmount will be calculated from sale price (gi√° b√°n √ó SL)\n        row.exportSalePrice = unitPrice; // Store sale unit price from invoice\n        row.exportSaleAmount += unitPrice * quantity; // Total sale amount\n      }\n    });\n  });\n  \n  console.log('‚úÖ Processed invoices:', processedCount, '| Sales:', saleCount, '| Purchases:', purchaseCount, '| Skipped (no type):', skippedNoType);\n  console.log('üì¶ Inventory map size:', inventoryMap.size);\n  \n  // Convert map to array and calculate closing inventory\n  const inventoryRows = Array.from(inventoryMap.values());\n  \n  console.log('üìä Inventory rows before grouping:', inventoryRows.length);\n  \n  // Sort by date and calculate cumulative inventory\n  const productGroups = new Map<string, InventoryRow[]>();\n  inventoryRows.forEach(row => {\n    const key = row.productName;\n    if (!productGroups.has(key)) {\n      productGroups.set(key, []);\n    }\n    productGroups.get(key)!.push(row);\n  });\n  \n  console.log('üè∑Ô∏è Product groups:', productGroups.size);\n  \n  // Calculate opening and closing for each product\n  const finalRows: InventoryRow[] = [];\n  productGroups.forEach(rows => {\n    // Sort by date\n    rows.sort((a, b) => a.date.localeCompare(b.date));\n    \n    // Initialize running balance\n    const productName = rows[0].productName;\n    const openingBalance = openingBalances?.get(productName);\n    \n    let runningQuantity = openingBalance?.quantity || 0;\n    let runningAmount = openingBalance?.amount || 0;\n    \n    if (openingBalance) {\n      console.log(`üîµ Using opening balance for \"${productName}\":`, {\n        quantity: runningQuantity,\n        amount: runningAmount\n      });\n    }\n    \n    rows.forEach(row => {\n      row.openingQuantity = runningQuantity;\n      row.openingAmount = runningAmount;\n      \n      // Calculate weighted average cost price (Gi√° v·ªën b√¨nh qu√¢n gia quy·ªÅn)\n      // Formula: (T·ªìn ƒë·∫ßu ti·ªÅn + Nh·∫≠p ti·ªÅn) / (T·ªìn ƒë·∫ßu SL + Nh·∫≠p SL)\n      const totalQuantity = row.openingQuantity + row.importQuantity;\n      const totalAmount = row.openingAmount + row.importAmount;\n      const weightedAvgCost = totalQuantity > 0 ? totalAmount / totalQuantity : 0;\n      \n      row.exportCostPrice = weightedAvgCost;\n      row.exportAmount = weightedAvgCost * row.exportQuantity; // Cost of goods sold\n      \n      // Formula: T·ªìn ƒê·∫ßu + Nh·∫≠p - Xu·∫•t = T·ªìn Cu·ªëi\n      row.closingQuantity = row.openingQuantity + row.importQuantity - row.exportQuantity;\n      row.closingAmount = row.openingAmount + row.importAmount - row.exportAmount;\n      \n      runningQuantity = row.closingQuantity;\n      runningAmount = row.closingAmount;\n      \n      finalRows.push(row);\n    });\n  });\n  \n  console.log('üéØ FINAL ROWS:', finalRows.length);\n  if (finalRows.length > 0) {\n    console.log('Sample row:', finalRows[0]);\n  }\n  \n  return finalRows;\n};\n\n/**\n * Group inventory rows by product (sum all dates for each product)\n */\nexport const groupInventoryByProduct = (rows: InventoryRow[]): InventoryRow[] => {\n  const productMap = new Map<string, InventoryRow>();\n  \n  rows.forEach(row => {\n    const existing = productMap.get(row.productName);\n    if (!existing) {\n      productMap.set(row.productName, { ...row });\n    } else {\n      existing.importQuantity += row.importQuantity;\n      existing.importAmount += row.importAmount;\n      existing.exportQuantity += row.exportQuantity;\n      existing.exportAmount += row.exportAmount;\n      existing.exportSaleAmount += row.exportSaleAmount;\n      existing.closingQuantity += row.closingQuantity;\n      existing.closingAmount += row.closingAmount;\n      \n      // Recalculate weighted average for grouped data\n      const totalQty = existing.importQuantity + existing.openingQuantity;\n      const totalAmt = existing.importAmount + existing.openingAmount;\n      existing.exportCostPrice = totalQty > 0 ? totalAmt / totalQty : 0;\n      existing.exportSalePrice = existing.exportQuantity > 0 ? existing.exportSaleAmount / existing.exportQuantity : 0;\n    }\n  });\n  \n  return Array.from(productMap.values());\n};\n","import * as XLSX from 'xlsx';\nimport { InventoryRow, InventorySummary, DateRange } from '../types';\nimport { formatCurrency, formatNumber, formatDate } from './formatters';\n\n/**\n * Export inventory data to Excel file\n */\nexport const exportToExcel = (\n  rows: InventoryRow[],\n  summary: InventorySummary,\n  dateRange: DateRange,\n  companyName: string\n): void => {\n  // Create workbook\n  const wb = XLSX.utils.book_new();\n  \n  // Prepare data for Excel\n  const excelData: any[] = [];\n  \n  // Title rows\n  excelData.push(['B√ÅO C√ÅO XU·∫§T NH·∫¨P T·ªíN']);\n  excelData.push([companyName]);\n  excelData.push([`T·ª´ ng√†y: ${formatDate(dateRange.startDate)} - ƒê·∫øn ng√†y: ${formatDate(dateRange.endDate)}`]);\n  excelData.push([]); // Empty row\n  \n  // Header row\n  excelData.push([\n    'Ng√†y',\n    'T√™n S·∫£n Ph·∫©m',\n    'M√£ SP',\n    'ƒêVT',\n    'SL T·ªìn ƒê·∫ßu',\n    'TT T·ªìn ƒê·∫ßu',\n    'SL Nh·∫≠p',\n    'TT Nh·∫≠p',\n    'SL Xu·∫•t',\n    'Gi√° V·ªën',\n    'TT V·ªën',\n    'Gi√° B√°n',\n    'TT B√°n',\n    'SL T·ªìn Cu·ªëi',\n    'TT T·ªìn Cu·ªëi',\n  ]);\n  \n  // Data rows\n  rows.forEach(row => {\n    excelData.push([\n      formatDate(row.date),\n      row.productName,\n      row.productCode || '',\n      row.unit || '',\n      row.openingQuantity,\n      row.openingAmount,\n      row.importQuantity,\n      row.importAmount,\n      row.exportQuantity,\n      row.exportCostPrice,\n      row.exportAmount,\n      row.exportSalePrice,\n      row.exportSaleAmount,\n      row.closingQuantity,\n      row.closingAmount,\n    ]);\n  });\n  \n  // Summary section\n  excelData.push([]); // Empty row\n  excelData.push(['T·ªîNG H·ª¢P']);\n  excelData.push(['T·ªïng s·ªë s·∫£n ph·∫©m:', summary.totalProducts]);\n  excelData.push(['T·ªïng SL nh·∫≠p:', summary.totalImportQuantity]);\n  excelData.push(['T·ªïng TT nh·∫≠p:', summary.totalImportAmount]);\n  excelData.push(['T·ªïng SL xu·∫•t:', summary.totalExportQuantity]);\n  excelData.push(['T·ªïng TT v·ªën:', summary.totalExportAmount]);\n  excelData.push(['T·ªïng TT b√°n:', summary.totalExportSaleAmount]);\n  excelData.push(['T·ªïng SL t·ªìn cu·ªëi:', summary.totalClosingQuantity]);\n  excelData.push(['T·ªïng TT t·ªìn cu·ªëi:', summary.totalClosingAmount]);\n  \n  // Create worksheet\n  const ws = XLSX.utils.aoa_to_sheet(excelData);\n  \n  // Set column widths\n  const colWidths = [\n    { wch: 12 },  // Ng√†y\n    { wch: 40 },  // T√™n SP\n    { wch: 15 },  // M√£ SP\n    { wch: 10 },  // ƒêVT\n    { wch: 12 },  // SL T·ªìn ƒê·∫ßu\n    { wch: 15 },  // TT T·ªìn ƒê·∫ßu\n    { wch: 12 },  // SL Nh·∫≠p\n    { wch: 15 },  // TT Nh·∫≠p\n    { wch: 12 },  // SL Xu·∫•t\n    { wch: 15 },  // Gi√° V·ªën\n    { wch: 15 },  // TT V·ªën\n    { wch: 15 },  // Gi√° B√°n\n    { wch: 15 },  // TT B√°n\n    { wch: 12 },  // SL T·ªìn Cu·ªëi\n    { wch: 15 },  // TT T·ªìn Cu·ªëi\n  ];\n  ws['!cols'] = colWidths;\n  \n  // Merge cells for title\n  ws['!merges'] = [\n    { s: { r: 0, c: 0 }, e: { r: 0, c: 14 } }, // Title (15 columns now)\n    { s: { r: 1, c: 0 }, e: { r: 1, c: 14 } }, // Company name\n    { s: { r: 2, c: 0 }, e: { r: 2, c: 14 } }, // Date range\n  ];\n  \n  // Add worksheet to workbook\n  XLSX.utils.book_append_sheet(wb, ws, 'Xu·∫•t Nh·∫≠p T·ªìn');\n  \n  // Generate filename\n  const timestamp = new Date().toISOString().split('T')[0];\n  const filename = `XuatNhapTon_${timestamp}.xlsx`;\n  \n  // Save file\n  XLSX.writeFile(wb, filename);\n};\n\n/**\n * Calculate summary statistics from inventory rows\n */\nexport const calculateSummary = (rows: InventoryRow[]): InventorySummary => {\n  // Get unique products\n  const uniqueProducts = new Set(rows.map(r => r.productName));\n  \n  return {\n    totalProducts: uniqueProducts.size,\n    totalRecords: rows.length,\n    totalOpeningQuantity: rows.reduce((sum, r) => sum + r.openingQuantity, 0),\n    totalOpeningAmount: rows.reduce((sum, r) => sum + r.openingAmount, 0),\n    totalImportQuantity: rows.reduce((sum, r) => sum + r.importQuantity, 0),\n    totalImportAmount: rows.reduce((sum, r) => sum + r.importAmount, 0),\n    totalExportQuantity: rows.reduce((sum, r) => sum + r.exportQuantity, 0),\n    totalExportAmount: rows.reduce((sum, r) => sum + r.exportAmount, 0),\n    totalExportSaleAmount: rows.reduce((sum, r) => sum + r.exportSaleAmount, 0),\n    totalClosingQuantity: rows.reduce((sum, r) => sum + r.closingQuantity, 0),\n    totalClosingAmount: rows.reduce((sum, r) => sum + r.closingAmount, 0),\n  };\n};\n","import React from 'react';\nimport { InventorySummary } from '../types';\nimport { formatCurrency, formatNumber } from '../utils';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Package, ArrowDownCircle, ArrowUpCircle, Archive, ListOrdered, TrendingUp } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\n\ninterface SummaryCardsProps {\n  summary: InventorySummary;\n  loading?: boolean;\n}\n\nexport const SummaryCards: React.FC<SummaryCardsProps> = ({ summary, loading }) => {\n  if (loading) {\n    return (\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 mb-6\">\n        {[1, 2, 3, 4, 5, 6].map(i => (\n          <Card key={i}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <Skeleton className=\"h-4 w-[100px]\" />\n              <Skeleton className=\"h-4 w-4\" />\n            </CardHeader>\n            <CardContent>\n              <Skeleton className=\"h-8 w-[120px] mb-1\" />\n              <Skeleton className=\"h-3 w-[80px]\" />\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 mb-6\">\n      {/* Total Records */}\n      <Card className=\"border-l-4 border-l-slate-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">T·ªïng B·∫£n Ghi</CardTitle>\n          <ListOrdered className=\"h-4 w-4 text-slate-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalRecords)}</div>\n          <p className=\"text-xs text-muted-foreground\">{formatNumber(summary.totalProducts)} s·∫£n ph·∫©m</p>\n        </CardContent>\n      </Card>\n      \n      {/* Opening Inventory */}\n      <Card className=\"border-l-4 border-l-indigo-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">T·ªìn ƒê·∫ßu K·ª≥</CardTitle>\n          <TrendingUp className=\"h-4 w-4 text-indigo-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalOpeningQuantity)}</div>\n          <p className=\"text-xs text-indigo-600\">{formatCurrency(summary.totalOpeningAmount)}</p>\n        </CardContent>\n      </Card>\n      \n      {/* Import Summary */}\n      <Card className=\"border-l-4 border-l-green-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">T·ªïng Nh·∫≠p</CardTitle>\n          <ArrowDownCircle className=\"h-4 w-4 text-green-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalImportQuantity)}</div>\n          <p className=\"text-xs text-green-600\">{formatCurrency(summary.totalImportAmount)}</p>\n        </CardContent>\n      </Card>\n      \n      {/* Export Summary */}\n      <Card className=\"border-l-4 border-l-orange-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">T·ªïng Xu·∫•t</CardTitle>\n          <ArrowUpCircle className=\"h-4 w-4 text-orange-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalExportQuantity)}</div>\n          <p className=\"text-xs text-orange-600\" title=\"Gi√° v·ªën\">\n            V·ªën: {formatCurrency(summary.totalExportAmount)}\n          </p>\n          <p className=\"text-xs text-orange-800 font-medium\" title=\"Doanh thu b√°n\">\n            B√°n: {formatCurrency(summary.totalExportSaleAmount)}\n          </p>\n        </CardContent>\n      </Card>\n      \n      {/* Closing Inventory */}\n      <Card className=\"border-l-4 border-l-purple-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">T·ªìn Cu·ªëi K·ª≥</CardTitle>\n          <Archive className=\"h-4 w-4 text-purple-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalClosingQuantity)}</div>\n          <p className=\"text-xs text-purple-600\">{formatCurrency(summary.totalClosingAmount)}</p>\n        </CardContent>\n      </Card>\n      \n      {/* Total Products */}\n      <Card className=\"border-l-4 border-l-blue-500\">\n        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n          <CardTitle className=\"text-sm font-medium\">S·∫£n Ph·∫©m</CardTitle>\n          <Package className=\"h-4 w-4 text-blue-500\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-2xl font-bold\">{formatNumber(summary.totalProducts)}</div>\n          <p className=\"text-xs text-muted-foreground\">Unique SKU</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { DateRange, GroupBy, SortField, SortDirection } from '../types';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Search, Settings, RefreshCw, FileSpreadsheet, ArrowUpDown, Loader2 } from 'lucide-react';\n\ninterface FilterToolbarProps {\n  searchTerm: string;\n  onSearchChange: (value: string) => void;\n  dateRange: DateRange;\n  onDateRangeChange: (range: DateRange) => void;\n  onSearch: () => void; // New callback for search button\n  groupBy: GroupBy;\n  onGroupByChange: (value: GroupBy) => void;\n  sortField: SortField;\n  sortDirection: SortDirection;\n  onSortChange: (field: SortField, direction: SortDirection) => void;\n  onExport: () => void;\n  onRefresh: () => void;\n  onConfig: () => void;\n  loading?: boolean;\n  totalRecords?: number;\n  displayedRecords?: number;\n  isSearching?: boolean;\n}\n\nexport const FilterToolbar: React.FC<FilterToolbarProps> = ({\n  searchTerm,\n  onSearchChange,\n  dateRange,\n  onDateRangeChange,\n  onSearch,\n  groupBy,\n  onGroupByChange,\n  sortField,\n  sortDirection,\n  onSortChange,\n  onExport,\n  onRefresh,\n  onConfig,\n  loading,\n  totalRecords = 0,\n  displayedRecords = 0,\n  isSearching = false,\n}) => {\n  // Local state for date range to prevent auto-reload\n  const [localDateRange, setLocalDateRange] = useState<DateRange>(dateRange);\n  \n  // Sync local state when parent date range changes\n  useEffect(() => {\n    setLocalDateRange(dateRange);\n  }, [dateRange]);\n  \n  // Handle search button click\n  const handleSearch = () => {\n    onDateRangeChange(localDateRange);\n    onSearch();\n  };\n  \n  // Check if date range has changed\n  const hasDateChanged = localDateRange.startDate !== dateRange.startDate || \n                        localDateRange.endDate !== dateRange.endDate ||\n                        localDateRange.periodStartDate !== dateRange.periodStartDate;\n  return (\n    <Card className=\"mb-6\">\n      <CardContent className=\"pt-6 space-y-4\">\n        {/* Period Start Info */}\n        {localDateRange.periodStartDate && (\n          <div className=\"flex items-center gap-2 text-sm bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 px-4 py-2 rounded-md\">\n            <span className=\"text-green-700 dark:text-green-300\">\n              üîµ <strong>Ng√†y ch·ªët ƒë·∫ßu k·ª≥:</strong> {new Date(localDateRange.periodStartDate).toLocaleDateString('vi-VN')}\n            </span>\n            <span className=\"text-xs text-green-600 dark:text-green-400\">\n              (T·ªìn ƒë·∫ßu t√≠nh t·ª´ 5 nƒÉm tr∆∞·ªõc)\n            </span>\n          </div>\n        )}\n        \n        {/* Records Info */}\n        {totalRecords > 0 && (\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground bg-blue-50 dark:bg-blue-950 px-4 py-2 rounded-md\">\n            <span className=\"font-medium text-blue-700 dark:text-blue-300\">\n              T·ªïng s·ªë: {totalRecords.toLocaleString()} b·∫£n ghi\n            </span>\n            {totalRecords !== displayedRecords && (\n              <>\n                <span>‚Ä¢</span>\n                <span className=\"text-amber-700 dark:text-amber-300\">\n                  Hi·ªÉn th·ªã: {displayedRecords.toLocaleString()} b·∫£n ghi\n                </span>\n                <span className=\"text-xs\">(Xu·∫•t Excel ƒë·ªÉ xem ƒë·∫ßy ƒë·ªß)</span>\n              </>\n            )}\n          </div>\n        )}\n        \n        {/* Row 1: Search and Actions */}\n        <div className=\"flex flex-col md:flex-row gap-4\">\n          <div className=\"relative flex-1\">\n            {isSearching ? (\n              <Loader2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-primary animate-spin\" />\n            ) : (\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            )}\n            <Input\n              value={searchTerm}\n              onChange={(e) => onSearchChange(e.target.value)}\n              placeholder=\"T√¨m ki·∫øm theo t√™n, m√£ s·∫£n ph·∫©m, ƒë∆°n v·ªã...\"\n              className=\"pl-9 transition-all duration-200 focus:ring-2 focus:ring-primary\"\n            />\n            {searchTerm && (\n              <button\n                onClick={() => onSearchChange('')}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                title=\"X√≥a t√¨m ki·∫øm\"\n              >\n                ‚úï\n              </button>\n            )}\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" size=\"default\" onClick={onConfig}>\n              <Settings className=\"h-4 w-4 mr-2\" />\n              C·∫•u H√¨nh\n            </Button>\n            \n            <Button\n              variant=\"outline\"\n              size=\"default\"\n              onClick={onRefresh}\n              disabled={loading}\n            >\n              <RefreshCw className={`h-4 w-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\n              L√†m M·ªõi\n            </Button>\n            \n            <Button variant=\"default\" size=\"default\" onClick={onExport}>\n              <FileSpreadsheet className=\"h-4 w-4 mr-2\" />\n              Xu·∫•t Excel\n            </Button>\n          </div>\n        </div>\n        \n        {/* Row 2: Date Range & Period Start */}\n        <div className=\"grid grid-cols-1 md:grid-cols-6 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"periodStartDate\" className=\"flex items-center gap-1\">\n              Ng√†y Ch·ªët ƒê·∫ßu K·ª≥\n              <span className=\"text-xs text-muted-foreground\">(optional)</span>\n            </Label>\n            <Input\n              id=\"periodStartDate\"\n              type=\"date\"\n              value={localDateRange.periodStartDate || ''}\n              onChange={(e) => setLocalDateRange({ ...localDateRange, periodStartDate: e.target.value || undefined })}\n              placeholder=\"Ch·ªçn ng√†y ch·ªët\"\n              title=\"Ch·ªçn ng√†y ch·ªët ƒë·∫ßu k·ª≥ ƒë·ªÉ t√≠nh t·ªìn ƒë·∫ßu t·ª´ 5 nƒÉm tr∆∞·ªõc\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              T√≠nh t·ªìn ƒë·∫ßu t·ª´ giao d·ªãch 5 nƒÉm tr∆∞·ªõc\n            </p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"startDate\">T·ª´ Ng√†y</Label>\n            <Input\n              id=\"startDate\"\n              type=\"date\"\n              value={localDateRange.startDate}\n              onChange={(e) => setLocalDateRange({ ...localDateRange, startDate: e.target.value })}\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"endDate\">ƒê·∫øn Ng√†y</Label>\n            <Input\n              id=\"endDate\"\n              type=\"date\"\n              value={localDateRange.endDate}\n              onChange={(e) => setLocalDateRange({ ...localDateRange, endDate: e.target.value })}\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label className=\"opacity-0\">Action</Label>\n            <Button \n              variant={hasDateChanged ? \"default\" : \"outline\"}\n              size=\"default\" \n              onClick={handleSearch}\n              disabled={loading}\n              className=\"w-full\"\n            >\n              <Search className=\"h-4 w-4 mr-2\" />\n              {hasDateChanged ? 'T√¨m ki·∫øm' : 'ƒê√£ c·∫≠p nh·∫≠t'}\n            </Button>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"groupBy\">Nh√≥m Theo</Label>\n            <Select value={groupBy} onValueChange={(value) => onGroupByChange(value as GroupBy)}>\n              <SelectTrigger id=\"groupBy\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"ma\">M√£ S·∫£n Ph·∫©m</SelectItem>\n                <SelectItem value=\"ten2\">T√™n Chu·∫©n H√≥a</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label>S·∫Øp X·∫øp</Label>\n            <div className=\"flex gap-2\">\n              <Select\n                value={sortField}\n                onValueChange={(value) => onSortChange(value as SortField, sortDirection)}\n              >\n                <SelectTrigger className=\"flex-1\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"date\">Ng√†y</SelectItem>\n                  <SelectItem value=\"productName\">T√™n SP</SelectItem>\n                  <SelectItem value=\"closingQuantity\">SL T·ªìn</SelectItem>\n                  <SelectItem value=\"closingAmount\">TT T·ªìn</SelectItem>\n                </SelectContent>\n              </Select>\n              \n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                onClick={() => onSortChange(sortField, sortDirection === 'asc' ? 'desc' : 'asc')}\n                title={sortDirection === 'asc' ? 'TƒÉng d·∫ßn' : 'Gi·∫£m d·∫ßn'}\n              >\n                <ArrowUpDown className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","import React from 'react';\nimport { InventoryRow } from '../types';\nimport { formatCurrency, formatNumber, formatDate } from '../utils';\nimport { Card, CardContent } from '@/components/ui/card';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Loader2, Package } from 'lucide-react';\n\ninterface InventoryTableProps {\n  rows: InventoryRow[];\n  currentPage: number;\n  itemsPerPage: number;\n  loading?: boolean;\n  totalRecords?: number;\n  isLimited?: boolean;\n  searchTerm?: string;\n  isSearching?: boolean;\n}\n\nexport const InventoryTable: React.FC<InventoryTableProps> = ({\n  rows,\n  currentPage,\n  itemsPerPage,\n  loading,\n  totalRecords = 0,\n  isLimited = false,\n  searchTerm = '',\n  isSearching = false,\n}) => {\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = Math.min(startIndex + itemsPerPage, rows.length);\n  const displayRows = rows.slice(startIndex, endIndex);\n  console.log('rows',rows);\n  \n  console.log('üìã InventoryTable render:', { \n    totalRows: rows.length, \n    displayRows: displayRows.length,\n    currentPage,\n    itemsPerPage,\n    startIndex,\n    endIndex,\n    loading,\n    searchTerm,\n    isSearching\n  });\n  \n  // Helper function to highlight matching text\n  const highlightText = (text: string | null | undefined, searchTerm: string): React.ReactNode => {\n    if (!text || !searchTerm) return text || '-';\n    \n    const lowerText = text.toLowerCase();\n    const lowerSearch = searchTerm.toLowerCase();\n    const index = lowerText.indexOf(lowerSearch);\n    \n    if (index === -1) return text;\n    \n    const before = text.slice(0, index);\n    const match = text.slice(index, index + searchTerm.length);\n    const after = text.slice(index + searchTerm.length);\n    \n    return (\n      <>\n        {before}\n        <mark className=\"bg-yellow-200 dark:bg-yellow-800 font-semibold\">{match}</mark>\n        {after}\n      </>\n    );\n  };\n  \n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"p-8\">\n          <div className=\"flex flex-col items-center justify-center text-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary mb-2\" />\n            <p className=\"text-muted-foreground\">ƒêang t·∫£i d·ªØ li·ªáu...</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n  \n  if (rows.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"p-8\">\n          <div className=\"flex flex-col items-center justify-center text-center\">\n            <Package className=\"h-12 w-12 text-muted-foreground mb-2\" />\n            <p className=\"text-muted-foreground\">Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n  \n  return (\n    <Card>\n      {isLimited && totalRecords > rows.length && (\n        <div className=\"bg-amber-50 dark:bg-amber-950 border-b border-amber-200 dark:border-amber-800 px-4 py-3\">\n          <p className=\"text-sm text-amber-800 dark:text-amber-200\">\n            ‚ö†Ô∏è Hi·ªÉn th·ªã {rows.length.toLocaleString()} / {totalRecords.toLocaleString()} b·∫£n ghi ƒë·ªÉ t·ªëi ∆∞u hi·ªáu su·∫•t.\n            <span className=\"font-medium\"> S·ª≠ d·ª•ng \"Xu·∫•t Excel\" ƒë·ªÉ xem to√†n b·ªô d·ªØ li·ªáu.</span>\n          </p>\n        </div>\n      )}\n      {searchTerm && (\n        <div className=\"bg-blue-50 dark:bg-blue-950 border-b border-blue-200 dark:border-blue-800 px-4 py-3\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n            üîç T√¨m ki·∫øm: <span className=\"font-semibold\">\"{searchTerm}\"</span> - \n            {isSearching ? (\n              <span className=\"ml-2 italic\">ƒêang t√¨m ki·∫øm...</span>\n            ) : (\n              <span className=\"ml-2\">T√¨m th·∫•y {rows.length.toLocaleString()} k·∫øt qu·∫£</span>\n            )}\n          </p>\n        </div>\n      )}\n      <CardContent className=\"p-0\">\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[60px]\">STT</TableHead>\n                <TableHead className=\"w-[120px]\">Ng√†y</TableHead>\n                <TableHead className=\"min-w-[250px]\">T√™n S·∫£n Ph·∫©m</TableHead>\n                <TableHead className=\"min-w-[250px]\">T√™n G·ªëc (H√≥a ƒê∆°n)</TableHead>\n                <TableHead className=\"w-[120px]\">M√£ SP</TableHead>\n                <TableHead className=\"w-[80px]\">ƒêVT</TableHead>\n                <TableHead colSpan={2} className=\"text-center bg-blue-50\">T·ªìn ƒê·∫ßu</TableHead>\n                <TableHead colSpan={2} className=\"text-center bg-green-50\">Nh·∫≠p</TableHead>\n                <TableHead colSpan={5} className=\"text-center bg-orange-50\">Xu·∫•t</TableHead>\n                <TableHead colSpan={2} className=\"text-center bg-purple-50\">T·ªìn Cu·ªëi</TableHead>\n              </TableRow>\n              <TableRow>\n                <TableHead colSpan={6}></TableHead>\n                <TableHead className=\"text-right bg-blue-50\">SL</TableHead>\n                <TableHead className=\"text-right bg-blue-50\">Th√†nh Ti·ªÅn</TableHead>\n                <TableHead className=\"text-right bg-green-50\">SL</TableHead>\n                <TableHead className=\"text-right bg-green-50\">Th√†nh Ti·ªÅn</TableHead>\n                <TableHead className=\"text-right bg-orange-50\">SL</TableHead>\n                <TableHead className=\"text-right bg-orange-50\">Gi√° V·ªën</TableHead>\n                <TableHead className=\"text-right bg-orange-50\">TT V·ªën</TableHead>\n                <TableHead className=\"text-right bg-orange-50\">Gi√° B√°n</TableHead>\n                <TableHead className=\"text-right bg-orange-50\">TT B√°n</TableHead>\n                <TableHead className=\"text-right bg-purple-50\">SL</TableHead>\n                <TableHead className=\"text-right bg-purple-50\">Th√†nh Ti·ªÅn</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {displayRows.map((row, index) => (\n                <TableRow \n                  key={`${row.productName}-${row.date}-${index}`}\n                  className=\"animate-in fade-in duration-200\"\n                  style={{ animationDelay: `${index * 20}ms` }}\n                >\n                  <TableCell className=\"font-medium\">\n                    {startIndex + index + 1}\n                  </TableCell>\n                  <TableCell className=\"whitespace-nowrap\">\n                    {formatDate(row.date)}\n                  </TableCell>\n                  <TableCell className=\"font-medium\">\n                    {highlightText(row.productName, searchTerm)}\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground text-sm\">\n                    {highlightText(row.originalName, searchTerm)}\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {highlightText(row.productCode, searchTerm)}\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {highlightText(row.unit, searchTerm)}\n                  </TableCell>\n                  \n                  {/* T·ªìn ƒê·∫ßu */}\n                  <TableCell className=\"text-right bg-blue-50\">\n                    {formatNumber(row.openingQuantity)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-blue-600 bg-blue-50\">\n                    {formatCurrency(row.openingAmount)}\n                  </TableCell>\n                  \n                  {/* Nh·∫≠p */}\n                  <TableCell className=\"text-right bg-green-50\">\n                    {formatNumber(row.importQuantity)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-green-600 bg-green-50\">\n                    {formatCurrency(row.importAmount)}\n                  </TableCell>\n                  \n                  {/* Xu·∫•t - 5 columns */}\n                  <TableCell className=\"text-right bg-orange-50\">\n                    {formatNumber(row.exportQuantity)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-orange-600 bg-orange-50\" title=\"Gi√° v·ªën b√¨nh qu√¢n gia quy·ªÅn\">\n                    {formatCurrency(row.exportCostPrice)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-orange-600 bg-orange-50\" title=\"Th√†nh ti·ªÅn v·ªën\">\n                    {formatCurrency(row.exportAmount)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-orange-700 bg-orange-50\" title=\"Gi√° b√°n (t·ª´ ƒë∆°n h√†ng)\">\n                    {formatCurrency(row.exportSalePrice)}\n                  </TableCell>\n                  <TableCell className=\"text-right text-orange-800 font-medium bg-orange-50\" title=\"Th√†nh ti·ªÅn b√°n\">\n                    {formatCurrency(row.exportSaleAmount)}\n                  </TableCell>\n                  \n                  {/* T·ªìn Cu·ªëi */}\n                  <TableCell className=\"text-right font-semibold bg-purple-50\">\n                    {formatNumber(row.closingQuantity)}\n                  </TableCell>\n                  <TableCell className=\"text-right font-semibold text-purple-600 bg-purple-50\">\n                    {formatCurrency(row.closingAmount)}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","import React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  itemsPerPage: number;\n  onPageChange: (page: number) => void;\n  canGoPrev: boolean;\n  canGoNext: boolean;\n  totalRecords?: number;\n  isLimited?: boolean;\n}\n\nexport const Pagination: React.FC<PaginationProps> = ({\n  currentPage,\n  totalPages,\n  totalItems,\n  itemsPerPage,\n  onPageChange,\n  canGoPrev,\n  canGoNext,\n  totalRecords = 0,\n  isLimited = false,\n}) => {\n  const startItem = (currentPage - 1) * itemsPerPage + 1;\n  const endItem = Math.min(currentPage * itemsPerPage, totalItems);\n  \n  if (totalItems === 0) return null;\n  \n  // Generate page numbers to display\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    const maxVisible = 5;\n    \n    if (totalPages <= maxVisible) {\n      // Show all pages if total is small\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // Always show first page\n      pages.push(1);\n      \n      if (currentPage > 3) {\n        pages.push('...');\n      }\n      \n      // Show pages around current\n      const start = Math.max(2, currentPage - 1);\n      const end = Math.min(totalPages - 1, currentPage + 1);\n      \n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      \n      if (currentPage < totalPages - 2) {\n        pages.push('...');\n      }\n      \n      // Always show last page\n      pages.push(totalPages);\n    }\n    \n    return pages;\n  };\n  \n  return (\n    <div className=\"flex items-center justify-between px-2 py-4\">\n      <div className=\"flex-1 text-sm text-muted-foreground\">\n        Hi·ªÉn th·ªã <span className=\"font-medium\">{startItem}</span> ƒë·∫øn{' '}\n        <span className=\"font-medium\">{endItem}</span> trong t·ªïng s·ªë{' '}\n        <span className=\"font-medium\">{totalItems}</span> k·∫øt qu·∫£\n        {isLimited && totalRecords > totalItems && (\n          <span className=\"ml-2 text-amber-600 dark:text-amber-400\">\n            ({totalRecords.toLocaleString()} t·ªïng - gi·ªõi h·∫°n hi·ªÉn th·ªã)\n          </span>\n        )}\n      </div>\n      \n      <div className=\"flex items-center gap-2\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={!canGoPrev}\n        >\n          <ChevronLeft className=\"h-4 w-4 mr-1\" />\n          Tr∆∞·ªõc\n        </Button>\n        \n        <div className=\"hidden md:flex items-center gap-1\">\n          {getPageNumbers().map((pageNum, idx) => (\n            pageNum === '...' ? (\n              <span key={`ellipsis-${idx}`} className=\"px-2\">...</span>\n            ) : (\n              <Button\n                key={pageNum}\n                variant={currentPage === pageNum ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onPageChange(pageNum as number)}\n                className=\"w-9\"\n              >\n                {pageNum}\n              </Button>\n            )\n          ))}\n        </div>\n        \n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={!canGoNext}\n        >\n          Sau\n          <ChevronRight className=\"h-4 w-4 ml-1\" />\n        </Button>\n      </div>\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useDynamicQuery } from '@/lib/graphql/dynamic-hooks';\nimport { InvoiceHeader, InvoiceDetail, ProductMapping } from '../types';\n\n/**\n * Hook to fetch all necessary data for inventory calculation\n */\nexport const useInventoryData = () => {\n  const [isReady, setIsReady] = useState(false);\n  const [debugged, setDebughed] = useState(false);\n  const [detailsDebugged, setDetailsDebugged] = useState(false);\n  \n  // Fetch invoices (ext_listhoadon)\n  const {\n    data: invoicesData,\n    loading: invoicesLoading,\n    error: invoicesError,\n    refetch: refetchInvoices,\n  } = useDynamicQuery('GET_ALL', 'ext_listhoadon', {\n    fetchPolicy: 'network-only',\n  });\n  console.log('invoicesData', invoicesData);\n  \n  // Fetch invoice details (ext_detailhoadon)\n  const {\n    data: detailsData,\n    loading: detailsLoading,\n    error: detailsError,\n    refetch: refetchDetails,\n  } = useDynamicQuery('GET_ALL', 'ext_detailhoadon', {\n    fetchPolicy: 'network-only',\n  });\n  \n  // Fetch product mappings (ext_sanphamhoadon)\n  const {\n    data: productsData,\n    loading: productsLoading,\n    error: productsError,\n    refetch: refetchProducts,\n  } = useDynamicQuery('GET_ALL', 'ext_sanphamhoadon', {\n    fetchPolicy: 'network-only',\n  });\n  \n  // Extract data from GraphQL responses\n  const invoices: InvoiceHeader[] = invoicesData?.getext_listhoadons || [];\n  const details: InvoiceDetail[] = detailsData?.getext_detailhoadons || [];\n  const products: ProductMapping[] = productsData?.getext_sanphamhoadons || [];\n  \n  // Debug data structure\n  useEffect(() => {\n    if (invoices.length > 0 && !debugged) {\n      console.log('üìã Sample invoice:', invoices[0]);\n      console.log('üìã Invoice fields:', Object.keys(invoices[0]));\n      setDebughed(true);\n    }\n    if (details.length > 0 && !detailsDebugged) {\n      console.log('üìÑ Sample detail:', details[0]);\n      console.log('üìÑ Detail fields:', Object.keys(details[0]));\n      setDetailsDebugged(true);\n    }\n  }, [invoices, details, debugged, detailsDebugged]);\n  \n  // Check if all data is loaded\n  useEffect(() => {\n    if (!invoicesLoading && !detailsLoading && !productsLoading) {\n      setIsReady(true);\n    }\n  }, [invoicesLoading, detailsLoading, productsLoading]);\n  \n  // Refetch all data\n  const refetchAll = async () => {\n    await Promise.all([\n      refetchInvoices(),\n      refetchDetails(),\n      refetchProducts(),\n    ]);\n  };\n  \n  return {\n    invoices,\n    details,\n    products,\n    loading: {\n      invoices: invoicesLoading,\n      details: detailsLoading,\n      products: productsLoading,\n      any: invoicesLoading || detailsLoading || productsLoading,\n    },\n    error: {\n      invoices: invoicesError?.message || null,\n      details: detailsError?.message || null,\n      products: productsError?.message || null,\n      any: invoicesError || detailsError || productsError,\n    },\n    isReady,\n    refetch: refetchAll,\n  };\n};\n","import { useMemo } from 'react';\nimport { InventoryRow, SortField, SortDirection } from '../types';\n\ninterface UseInventoryFilterProps {\n  rows: InventoryRow[];\n  searchTerm: string;\n  sortField: SortField;\n  sortDirection: SortDirection;\n}\n\n/**\n * Hook to filter and sort inventory rows\n * Returns filtered rows and search metadata for performance optimization\n */\nexport const useInventoryFilter = ({\n  rows,\n  searchTerm,\n  sortField,\n  sortDirection,\n}: UseInventoryFilterProps): InventoryRow[] => {\n  return useMemo(() => {\n    const startTime = performance.now();\n    let filtered = [...rows];\n    \n    // Apply search filter\n    if (searchTerm) {\n      const term = searchTerm.toLowerCase().trim();\n      filtered = filtered.filter(row =>\n        row.productName?.toLowerCase().includes(term) ||\n        row.productCode?.toLowerCase().includes(term) ||\n        row.unit?.toLowerCase().includes(term)\n      );\n      \n      const endTime = performance.now();\n      console.log(`üîç Search completed in ${(endTime - startTime).toFixed(2)}ms - Found ${filtered.length}/${rows.length} records`);\n    }\n    \n    // Apply sorting\n    filtered.sort((a, b) => {\n      let aVal: any;\n      let bVal: any;\n      \n      switch (sortField) {\n        case 'date':\n          aVal = new Date(a.date).getTime();\n          bVal = new Date(b.date).getTime();\n          break;\n        case 'productName':\n          aVal = (a.productName || '').toLowerCase();\n          bVal = (b.productName || '').toLowerCase();\n          break;\n        case 'closingQuantity':\n          aVal = a.closingQuantity || 0;\n          bVal = b.closingQuantity || 0;\n          break;\n        case 'closingAmount':\n          aVal = a.closingAmount || 0;\n          bVal = b.closingAmount || 0;\n          break;\n        default:\n          aVal = 0;\n          bVal = 0;\n      }\n      \n      const comparison = aVal < bVal ? -1 : aVal > bVal ? 1 : 0;\n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n    \n    return filtered;\n  }, [rows, searchTerm, sortField, sortDirection]);\n};\n","import { useState, useEffect } from 'react';\n\ninterface UsePaginationProps {\n  totalItems: number;\n  itemsPerPage: number;\n}\n\ninterface UsePaginationResult {\n  currentPage: number;\n  totalPages: number;\n  startIndex: number;\n  endIndex: number;\n  goToPage: (page: number) => void;\n  nextPage: () => void;\n  prevPage: () => void;\n  canGoNext: boolean;\n  canGoPrev: boolean;\n}\n\n/**\n * Hook for pagination logic\n */\nexport const usePagination = ({\n  totalItems,\n  itemsPerPage,\n}: UsePaginationProps): UsePaginationResult => {\n  const [currentPage, setCurrentPage] = useState(1);\n  \n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = Math.min(startIndex + itemsPerPage, totalItems);\n  \n  // Reset to page 1 if current page exceeds total pages\n  useEffect(() => {\n    if (currentPage > totalPages && totalPages > 0) {\n      setCurrentPage(1);\n    }\n  }, [currentPage, totalPages]);\n  \n  const goToPage = (page: number) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n  \n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(prev => prev + 1);\n    }\n  };\n  \n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(prev => prev - 1);\n    }\n  };\n  \n  return {\n    currentPage,\n    totalPages,\n    startIndex,\n    endIndex,\n    goToPage,\n    nextPage,\n    prevPage,\n    canGoNext: currentPage < totalPages,\n    canGoPrev: currentPage > 1,\n  };\n};\n","import { useEffect, useState } from 'react';\n\n/**\n * Hook to debounce a value\n * Useful for search inputs to avoid excessive filtering on large datasets\n * \n * @param value - The value to debounce\n * @param delay - Delay in milliseconds (default: 300ms)\n * @returns The debounced value\n */\nexport function useDebouncedValue<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    // Set up the timeout\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    // Clean up timeout if value changes before delay\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n"],"names":[],"mappings":"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"}
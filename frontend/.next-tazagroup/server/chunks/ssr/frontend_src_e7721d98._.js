module.exports=[601470,a=>{"use strict";var b=a.i(651332);function c(){let[a,c]=(0,b.useState)(null),[d,e]=(0,b.useState)({isStandalone:!1,canInstall:!1,hasNotificationSupport:!1,hasBackgroundSync:!1,hasPushSupport:!1,isOnline:!0,serviceWorkerReady:!1}),[f,g]=(0,b.useState)(!1),[h,i]=(0,b.useState)(null);(0,b.useEffect)(()=>{},[a]),(0,b.useEffect)(()=>{},[]),(0,b.useEffect)(()=>{},[]);let j=(0,b.useCallback)(async()=>{if(!a)throw Error("Install prompt not available");try{await a.prompt();let b=await a.userChoice;"accepted"===b.outcome?(console.log("PWA installation accepted"),c(null)):console.log("PWA installation dismissed")}catch(a){throw console.error("PWA installation failed:",a),a}},[a]),k=(0,b.useCallback)(async()=>{throw Error("Notifications not supported")},[]),l=(0,b.useCallback)(async(a,b)=>{if("granted"!==await k())throw Error("Notification permission denied");h?await h.showNotification(a,{icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png",...b}):new Notification(a,{icon:"/icons/icon-192x192.png",...b})},[h]),m=(0,b.useCallback)(async a=>{if(!h||!d.hasBackgroundSync)throw Error("Background sync not supported");try{await h.sync.register(a),console.log("Background sync registered:",a)}catch(a){throw console.error("Background sync registration failed:",a),a}},[h,d.hasBackgroundSync]);return{capabilities:d,installPrompt:a,install:j,requestNotificationPermission:k,showNotification:l,registerBackgroundSync:m,clearCache:(0,b.useCallback)(async()=>{},[h]),updateAvailable:f,updateApp:(0,b.useCallback)(async()=>{throw Error("Service worker not registered or not in browser environment")},[h])}}let d=()=>!1,e=()=>!1,f=()=>0;a.s(["checkPWASupport",0,d,"getInstallPromptDelay",0,f,"isRunningStandalone",0,e,"shouldShowInstallPrompt",0,()=>!e()&&0===f()&&d(),"usePWA",()=>c])},665055,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(601470),e=a.i(106107);function f({className:a="",showDelay:f=5e3,position:g="bottom"}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),{siteName:n}=(0,e.useSiteName)(),{capabilities:o,installPrompt:p,install:q,showNotification:r}=(0,d.usePWA)();(0,c.useEffect)(()=>{if(!o.canInstall||o.isStandalone||j)return;let a=localStorage.getItem("pwa-install-dismissed");if(a){let b=parseInt(a);if(Date.now()-b<6048e5)return}let b=setTimeout(()=>{i(!0)},f);return()=>clearTimeout(b)},[o.canInstall,o.isStandalone,j,f]);let s=async()=>{if(p){m(!0);try{await q(),i(!1),o.hasNotificationSupport&&await r("App Installed Successfully!",{body:`${n} has been installed to your device. You can now access it from your home screen.`,tag:"pwa-install-success"})}catch(a){console.error("Install failed:",a)}finally{m(!1)}}};return h&&o.canInstall&&!o.isStandalone?(0,b.jsxs)("div",{className:`
      fixed ${{top:"top-4 left-1/2 transform -translate-x-1/2",bottom:"bottom-4 left-1/2 transform -translate-x-1/2",center:"top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}[g]} z-50 max-w-sm mx-4
      bg-white rounded-lg shadow-2xl border border-gray-200
      animate-in slide-in-from-bottom-4 duration-300
      ${a}
    `,children:[(0,b.jsx)("div",{className:"p-4 pb-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Install ",n]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Add to your home screen for quick access"})]})]}),(0,b.jsx)("button",{onClick:()=>{k(!0),i(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Dismiss install prompt",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsx)("div",{className:"px-4 pb-2",children:(0,b.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600",children:[(0,b.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Work offline"})]}),(0,b.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Faster loading"})]}),(0,b.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{children:"Push notifications"})]})]})}),(0,b.jsxs)("div",{className:"p-4 pt-2 space-y-2",children:[(0,b.jsx)("button",{onClick:s,disabled:l,className:" w-full bg-blue-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 ",children:l?(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Installing..."})]}):"Add to Home Screen"}),(0,b.jsx)("button",{onClick:()=>{i(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString()),setTimeout(()=>{k(!1)},2592e5)},className:" w-full text-gray-600 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-colors duration-200 ",children:"Maybe Later"})]})]}):null}function g({variant:a="default",size:e="medium",className:f=""}){let[g,h]=(0,c.useState)(!1),{capabilities:i,install:j}=(0,d.usePWA)(),k=async()=>{h(!0);try{await j()}catch(a){console.error("Install failed:",a)}finally{h(!1)}};if(!i.canInstall||i.isStandalone)return null;let l={default:"bg-blue-600 text-white hover:bg-blue-700",minimal:"bg-gray-100 text-gray-700 hover:bg-gray-200",icon:"p-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-full"};return"icon"===a?(0,b.jsx)("button",{onClick:k,disabled:g,className:`
          ${l[a]} ${f}
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
          disabled:opacity-50 disabled:cursor-not-allowed
          transition-colors duration-200
        `,title:"Install App","aria-label":"Install App",children:g?(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}):(0,b.jsx)("button",{onClick:k,disabled:g,className:`
        ${l[a]} ${{small:"px-2 py-1 text-sm",medium:"px-3 py-2 text-sm",large:"px-4 py-2 text-base"}[e]} ${f}
        font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
        disabled:opacity-50 disabled:cursor-not-allowed
        transition-colors duration-200
      `,children:g?(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Installing..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Install App"]})})}a.s(["PWAInstallButton",()=>g,"PWAInstallPrompt",()=>f])},146621,a=>{"use strict";let b=class{db=null;dbName="rausachcoreOfflineDB";dbVersion=1;syncInProgress=!1;constructor(){}async initDB(){return Promise.resolve()}async getTasks(){return this.db?new Promise((a,b)=>{let c=this.db.transaction(["tasks"],"readonly").objectStore("tasks").getAll();c.onsuccess=()=>a(c.result||[]),c.onerror=()=>b(c.error)}):[]}async getTask(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["tasks"],"readonly").objectStore("tasks").get(a);d.onsuccess=()=>b(d.result||null),d.onerror=()=>c(d.error)})}async storeTask(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["tasks"],"readwrite").objectStore("tasks").put({...a,lastModified:Date.now(),offline:!0});d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}async createTaskOffline(a){let b={...a,id:`offline_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await this.storeTask(b),await this.queueAction({type:"CREATE",entity:"TASK",entityId:b.id,data:b,timestamp:Date.now(),retryCount:0,maxRetries:3}),b}async updateTaskOffline(a,b){let c=await this.getTask(a);if(!c)throw Error("Task not found");let d={...c,...b,updatedAt:new Date().toISOString()};return await this.storeTask(d),await this.queueAction({type:"UPDATE",entity:"TASK",entityId:a,data:b,timestamp:Date.now(),retryCount:0,maxRetries:3}),d}async deleteTaskOffline(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["tasks"],"readwrite").objectStore("tasks").delete(a);d.onsuccess=()=>{this.queueAction({type:"DELETE",entity:"TASK",entityId:a,data:null,timestamp:Date.now(),retryCount:0,maxRetries:3}),b()},d.onerror=()=>c(d.error)})}async queueAction(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions").add(a);d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}async getPendingActions(){return this.db||await this.initDB(),new Promise((a,b)=>{let c=this.db.transaction(["offlineActions"],"readonly").objectStore("offlineActions").getAll();c.onsuccess=()=>a(c.result||[]),c.onerror=()=>b(c.error)})}async removeAction(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions").delete(a);d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}async syncWithServer(){if(this.syncInProgress)return{success:!1,error:"Sync already in progress"};this.syncInProgress=!0;try{let a=await this.getPendingActions(),b=[];for(let b of a)try{await this.processAction(b),await this.removeAction(b.id)}catch(a){console.error("Failed to sync action:",b,a),b.retryCount++,b.retryCount>=b.maxRetries?await this.removeAction(b.id):await this.updateAction(b)}return await this.updateSyncMeta("lastSync",Date.now()),{success:!0,conflicts:b.length>0?b:void 0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown sync error"}}finally{this.syncInProgress=!1}}async processAction(a){let b,c=this.getAPIEndpoint(a.entity,a.type,a.entityId);switch(a.type){case"CREATE":b=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.data)});break;case"UPDATE":b=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.data)});break;case"DELETE":b=await fetch(c,{method:"DELETE"});break;default:throw Error(`Unknown action type: ${a.type}`)}if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);if("CREATE"===a.type||"UPDATE"===a.type){let c=await b.json();await this.handleServerResponse(a,c)}}async handleServerResponse(a,b){if("TASK"===a.entity){let c=await this.getTask(a.entityId);if(c&&c.updatedAt!==b.updatedAt){let a=await this.resolveConflict(c,b);await this.storeTask(a)}else await this.storeTask(b)}}async resolveConflict(a,b){let c=new Date(a.updatedAt).getTime();return new Date(b.updatedAt).getTime()>c?b:a}async updateAction(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["offlineActions"],"readwrite").objectStore("offlineActions").put(a);d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}getAPIEndpoint(a,b,c){let d=process.env.NEXT_PUBLIC_API_URL||"/api";if("TASK"===a)return"CREATE"===b?`${d}/tasks`:`${d}/tasks/${c}`;throw Error(`Unknown entity: ${a}`)}async updateSyncMeta(a,b){return this.db||await this.initDB(),new Promise((c,d)=>{let e=this.db.transaction(["syncMeta"],"readwrite").objectStore("syncMeta").put({key:a,value:b});e.onsuccess=()=>c(),e.onerror=()=>d(e.error)})}async getSyncMeta(a){return this.db||await this.initDB(),new Promise((b,c)=>{let d=this.db.transaction(["syncMeta"],"readonly").objectStore("syncMeta").get(a);d.onsuccess=()=>b(d.result?.value),d.onerror=()=>c(d.error)})}async getSyncStatus(){return{lastSync:await this.getSyncMeta("lastSync")||0,pendingActions:(await this.getPendingActions()).length,isOnline:navigator.onLine}}async forceSyncAll(){try{let a=await this.syncWithServer();return await this.fetchLatestData(),a}catch(a){return{success:!1,error:a instanceof Error?a.message:"Full sync failed"}}}async fetchLatestData(){try{let a=await fetch("/api/tasks");if(a.ok)for(let b of(await a.json()))await this.storeTask(b)}catch(a){console.error("Failed to fetch latest data:",a)}}async clearOfflineData(){for(let a of(this.db||await this.initDB(),["tasks","offlineActions","syncMeta","cache"]))await new Promise((b,c)=>{let d=this.db.transaction([a],"readwrite").objectStore(a).clear();d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}};a.s(["default",0,b,"offlineDataService",0,{getTasks:()=>Promise.resolve([]),getTask:()=>Promise.resolve(null),storeTask:()=>Promise.resolve(),createTaskOffline:()=>Promise.resolve({}),updateTaskOffline:()=>Promise.resolve({}),deleteTaskOffline:()=>Promise.resolve(),queueAction:()=>Promise.resolve(),getPendingActions:()=>Promise.resolve([]),clearPendingActions:()=>Promise.resolve(),processPendingActions:()=>Promise.resolve({success:0,failed:0}),syncWithServer:()=>Promise.resolve({success:!0}),resolveConflict:()=>Promise.resolve({}),getSyncStatus:()=>Promise.resolve({lastSync:0,pendingActions:0,isOnline:!1}),cacheApiResponse:()=>Promise.resolve(),getCachedResponse:()=>Promise.resolve(null),clearExpiredCache:()=>Promise.resolve()}])},847761,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(601470),e=a.i(146621);function f({className:a="",position:f="top",showSyncStatus:g=!0}){let[h,i]=(0,c.useState)(()=>!0),[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),{capabilities:p}=(0,d.usePWA)();return((0,c.useEffect)(()=>{let a=()=>i(!0),b=()=>i(!1);return window.addEventListener("online",a),window.addEventListener("offline",b),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",b)}},[]),(0,c.useEffect)(()=>{let a=async()=>{try{let a=await e.offlineDataService.getPendingActions();k(a.length);let b=await e.offlineDataService.getSyncStatus();m(!1),b.lastSync>0&&o(new Date(b.lastSync))}catch(a){console.error("Failed to get offline status:",a)}};a();let b=setInterval(a,2e3);return()=>clearInterval(b)},[]),(0,c.useEffect)(()=>{h&&j>0&&!l&&"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(a=>a.sync.register("background-sync")).catch(console.error)},[h,j,l]),h&&0===j&&!l)?null:(0,b.jsxs)("div",{className:`
      fixed ${{top:"top-4",bottom:"bottom-4"}[f]} right-4 z-40
      ${a}
    `,children:[!h&&(0,b.jsx)("div",{className:" bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-3 mb-2 shadow-lg backdrop-blur-sm animate-in slide-in-from-right-4 duration-300 ",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"You're offline"}),(0,b.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"Changes will sync when you're back online"})]})]})}),g&&(l||j>0)&&(0,b.jsx)("div",{className:" bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 shadow-lg backdrop-blur-sm animate-in slide-in-from-right-4 duration-300 ",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:l?(0,b.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,b.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-xs font-bold text-orange-600",children:j})})}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Syncing changes..."}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[j," action",1!==j?"s":""," pending"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-orange-800",children:[j," change",1!==j?"s":""," pending"]}),(0,b.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:h?"Will sync automatically":"Waiting for connection"})]})}),h&&j>0&&!l&&(0,b.jsx)("button",{onClick:()=>{"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(a=>a.sync.register("background-sync")).catch(console.error)},className:" text-blue-600 hover:text-blue-700 focus:outline-none transition-colors duration-200 ",title:"Sync now",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),g&&h&&n&&0===j&&(0,b.jsx)("div",{className:" bg-green-50 border border-green-200 rounded-lg px-4 py-2 mt-2 shadow-lg backdrop-blur-sm animate-in slide-in-from-right-4 duration-300 ",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsxs)("p",{className:"text-xs text-green-600",children:["Last sync: ",function(a){let b=new Date().getTime()-a.getTime();if(b<6e4)return"Just now";if(b<36e5){let a=Math.floor(b/6e4);return`${a}m ago`}if(!(b<864e5))return a.toLocaleDateString();{let a=Math.floor(b/36e5);return`${a}h ago`}}(n)]})})]})})]})}function g({className:a=""}){let[d,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(0);return((0,c.useEffect)(()=>{let a=()=>f(!0),b=()=>f(!1);return window.addEventListener("online",a),window.addEventListener("offline",b),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",b)}},[]),(0,c.useEffect)(()=>{let a=async()=>{try{let a=await e.offlineDataService.getPendingActions();h(a.length)}catch(a){console.error("Failed to get pending actions:",a)}};a();let b=setInterval(a,5e3);return()=>clearInterval(b)},[]),d&&0===g)?null:(0,b.jsxs)("div",{className:`flex items-center space-x-2 ${a}`,children:[!d&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-xs text-yellow-600 font-medium",children:"Offline"})]}),g>0&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,b.jsxs)("span",{className:"text-xs text-orange-600 font-medium",children:[g," pending"]})]})]})}a.s(["CompactOfflineStatus",()=>g,"OfflineStatus",()=>f])},292899,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(665055),e=a.i(847761),f=a.i(601470);let g=(0,c.createContext)(null);function h({children:a,enableAutoPrompt:h=!0,enableOfflineStatus:i=!0,installPromptDelay:j=1e4,offlineStatusPosition:k="top",className:l=""}){let[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(0),[q,r]=(0,c.useState)(!1),{capabilities:s,install:t,showNotification:u}=(0,f.usePWA)();(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{let a=()=>{p(0)};a();let b=setInterval(a,5e3);return()=>clearInterval(b)},[]),(0,c.useEffect)(()=>{},[s.canInstall,s.isStandalone,h,j]),(0,c.useEffect)(()=>{},[u]);let v={isOnline:m,isInstalled:s.isStandalone,canInstall:s.canInstall,pendingActions:o,showInstallPrompt:()=>r(!0),hideInstallPrompt:()=>r(!1),requestNotificationPermission:async()=>"denied"};return(0,b.jsx)(g.Provider,{value:v,children:(0,b.jsxs)("div",{className:l,children:[a,h&&q&&(0,b.jsx)(d.PWAInstallPrompt,{showDelay:0}),i&&(0,b.jsx)(e.OfflineStatus,{position:k,showSyncStatus:!0})]})})}function i(){let a=(0,c.useContext)(g);if(!a)throw Error("usePWAContext must be used within a PWAProvider");return a}function j(a){return function(c){let d=i();return(0,b.jsx)(a,{...c,pwa:d})}}function k(){let{isOnline:a}=i();return{isOnline:a,isOffline:!a}}function l(){let{isInstalled:a,canInstall:b,showInstallPrompt:c}=i();return{isInstalled:a,canInstall:b,showInstallPrompt:c,installationStatus:a?"installed":b?"available":"unavailable"}}function m(){let{pendingActions:a,isOnline:b}=i();return{pendingActions:a,hasPendingActions:a>0,canSync:b,triggerSync:()=>{}}}a.s(["PWAProvider",()=>h,"usePWAContext",()=>i,"usePWAInstallation",()=>l,"usePWANetworkStatus",()=>k,"usePWASync",()=>m,"withPWA",()=>j])}];

//# sourceMappingURL=frontend_src_e7721d98._.js.map
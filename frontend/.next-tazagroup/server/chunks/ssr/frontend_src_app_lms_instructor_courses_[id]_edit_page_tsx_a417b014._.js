module.exports=[61654,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(8912),e=a.i(168918),f=a.i(772213),g=a.i(852854),h=a.i(53627),i=a.i(439889),j=a.i(516482),k=a.i(973174),l=a.i(147745),m=a.i(363615),n=a.i(733554);let o=f.gql`
  query GetCourseById($id: ID!) {
    course(id: $id) {
      id
      title
      slug
      description
      thumbnail
      trailer
      price
      level
      status
      duration
      metaTitle
      metaDescription
      tags
      whatYouWillLearn
      requirements
      targetAudience
      categoryId
    }
  }
`;function p(){let a=(0,h.useRouter)(),f=(0,h.useParams)(),p=f?.id,[q,r]=(0,c.useState)({title:"",description:"",thumbnail:"",trailer:"",price:0,level:"BEGINNER",status:"DRAFT",duration:0,metaTitle:"",metaDescription:"",tags:[],whatYouWillLearn:[],requirements:[],targetAudience:[],categoryId:""}),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)({}),{data:C,loading:D}=(0,e.useQuery)(o,{variables:{id:p},skip:!p,onCompleted:a=>{if(a?.course){let b=a.course;r({title:b.title||"",description:b.description||"",thumbnail:b.thumbnail||"",trailer:b.trailer||"",price:b.price||0,level:b.level||"BEGINNER",status:b.status||"DRAFT",duration:b.duration||0,metaTitle:b.metaTitle||"",metaDescription:b.metaDescription||"",tags:b.tags||[],whatYouWillLearn:b.whatYouWillLearn||[],requirements:b.requirements||[],targetAudience:b.targetAudience||[],categoryId:b.categoryId||""})}}}),{data:E}=(0,e.useQuery)(g.GET_COURSE_CATEGORIES),[F,{loading:G}]=(0,d.useMutation)(g.UPDATE_COURSE,{refetchQueries:[{query:g.GET_MY_COURSES}],onCompleted:()=>{a.push("/lms/instructor/dashboard")},onError:a=>{console.error("Error updating course:",a),B({submit:a.message})}}),H=E?.courseCategoryTree||[],I=a=>{let{name:b,value:c}=a.target;r(a=>({...a,[b]:"price"===b||"duration"===b?parseFloat(c)||0:c})),A[b]&&B(a=>({...a,[b]:""}))},J=()=>{s.trim()&&!q.tags.includes(s.trim())&&(r(a=>({...a,tags:[...a.tags,s.trim()]})),t(""))},K=async a=>{let b;if(a.preventDefault(),b={},(!q.title||q.title.length<3)&&(b.title="TiÃªu Ä‘á» pháº£i cÃ³ Ã­t nháº¥t 3 kÃ½ tá»±"),q.title.length>200&&(b.title="TiÃªu Ä‘á» khÃ´ng Ä‘Æ°á»£c quÃ¡ 200 kÃ½ tá»±"),q.price<0&&(b.price="GiÃ¡ khÃ´ng Ä‘Æ°á»£c Ã¢m"),q.duration&&q.duration<0&&(b.duration="Thá»i lÆ°á»£ng khÃ´ng Ä‘Æ°á»£c Ã¢m"),B(b),0===Object.keys(b).length)try{let a={id:p,...q,duration:q.duration||void 0,metaTitle:q.metaTitle||void 0,metaDescription:q.metaDescription||void 0,categoryId:q.categoryId||void 0,thumbnail:q.thumbnail||void 0,trailer:q.trailer||void 0};await F({variables:{input:a}})}catch(a){console.error("Submit error:",a)}};return D?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(n.Loader2,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Äang táº£i khÃ³a há»c..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.default,{href:"/lms/instructor/dashboard",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(j.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Chá»‰nh sá»­a khÃ³a há»c"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:C?.course?.title})]})]}),(0,b.jsxs)("button",{onClick:K,disabled:G,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[(0,b.jsx)(k.Save,{className:"w-5 h-5"}),G?"Äang lÆ°u...":"LÆ°u thay Ä‘á»•i"]})]})})}),(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.submit&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:A.submit}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"ThÃ´ng tin cÆ¡ báº£n"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["TiÃªu Ä‘á» khÃ³a há»c ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"title",name:"title",value:q.title,onChange:I,className:`w-full px-4 py-3 rounded-lg border ${A.title?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,placeholder:"VÃ­ dá»¥: Láº­p trÃ¬nh Web vá»›i React & Next.js"}),A.title&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.title})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"MÃ´ táº£ khÃ³a há»c"}),(0,b.jsx)("textarea",{id:"description",name:"description",value:q.description,onChange:I,rows:5,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"MÃ´ táº£ chi tiáº¿t vá» khÃ³a há»c, ná»™i dung, lá»£i Ã­ch há»c viÃªn nháº­n Ä‘Æ°á»£c..."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh má»¥c"}),(0,b.jsxs)("select",{id:"categoryId",name:"categoryId",value:q.categoryId,onChange:I,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"-- Chá»n danh má»¥c --"}),H.map(a=>(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsx)("option",{value:a.id,children:a.name}),a.children?.map(a=>(0,b.jsxs)("option",{value:a.id,children:["Â Â â””â”€ ",a.name]},a.id))]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cáº¥p Ä‘á»™"}),(0,b.jsxs)("select",{id:"level",name:"level",value:q.level,onChange:I,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"BEGINNER",children:"CÆ¡ báº£n"}),(0,b.jsx)("option",{value:"INTERMEDIATE",children:"Trung cáº¥p"}),(0,b.jsx)("option",{value:"ADVANCED",children:"NÃ¢ng cao"}),(0,b.jsx)("option",{value:"EXPERT",children:"ChuyÃªn gia"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:"GiÃ¡ (USD)"}),(0,b.jsx)("input",{type:"number",id:"price",name:"price",value:q.price,onChange:I,min:"0",step:"0.01",className:`w-full px-4 py-3 rounded-lg border ${A.price?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,placeholder:"0.00"}),A.price&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.price})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Thá»i lÆ°á»£ng (phÃºt)"}),(0,b.jsx)("input",{type:"number",id:"duration",name:"duration",value:q.duration,onChange:I,min:"0",className:`w-full px-4 py-3 rounded-lg border ${A.duration?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,placeholder:"0"}),A.duration&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.duration})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tráº¡ng thÃ¡i"}),(0,b.jsxs)("select",{id:"status",name:"status",value:q.status,onChange:I,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"DRAFT",children:"Báº£n nhÃ¡p"}),(0,b.jsx)("option",{value:"PUBLISHED",children:"CÃ´ng khai"}),(0,b.jsx)("option",{value:"ARCHIVED",children:"LÆ°u trá»¯"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ná»™i dung & YÃªu cáº§u"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Báº¡n sáº½ há»c Ä‘Æ°á»£c gÃ¬?"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),u.trim()&&!q.whatYouWillLearn.includes(u.trim())&&(r(a=>({...a,whatYouWillLearn:[...a.whatYouWillLearn,u.trim()]})),v("")))},className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"XÃ¢y dá»±ng á»©ng dá»¥ng web hoÃ n chá»‰nh..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{u.trim()&&!q.whatYouWillLearn.includes(u.trim())&&(r(a=>({...a,whatYouWillLearn:[...a.whatYouWillLearn,u.trim()]})),v(""))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"ThÃªm"})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.whatYouWillLearn.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-blue-600 mt-1",children:"âœ“"}),(0,b.jsx)("span",{className:"flex-1 text-gray-700",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{r(a=>({...a,whatYouWillLearn:a.whatYouWillLearn.filter((a,b)=>b!==c)}))},className:"text-red-500 hover:text-red-700 p-1",children:(0,b.jsx)(m.X,{className:"w-4 h-4"})})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YÃªu cáº§u"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),w.trim()&&!q.requirements.includes(w.trim())&&(r(a=>({...a,requirements:[...a.requirements,w.trim()]})),x("")))},className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Kiáº¿n thá»©c cÆ¡ báº£n vá» HTML, CSS..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{w.trim()&&!q.requirements.includes(w.trim())&&(r(a=>({...a,requirements:[...a.requirements,w.trim()]})),x(""))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"ThÃªm"})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.requirements.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-500 mt-1",children:"â€¢"}),(0,b.jsx)("span",{className:"flex-1 text-gray-700",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{r(a=>({...a,requirements:a.requirements.filter((a,b)=>b!==c)}))},className:"text-red-500 hover:text-red-700 p-1",children:(0,b.jsx)(m.X,{className:"w-4 h-4"})})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Äá»‘i tÆ°á»£ng há»c viÃªn"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:y,onChange:a=>z(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),y.trim()&&!q.targetAudience.includes(y.trim())&&(r(a=>({...a,targetAudience:[...a.targetAudience,y.trim()]})),z("")))},className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"NgÆ°á»i má»›i báº¯t Ä‘áº§u há»c láº­p trÃ¬nh web..."}),(0,b.jsx)("button",{type:"button",onClick:()=>{y.trim()&&!q.targetAudience.includes(y.trim())&&(r(a=>({...a,targetAudience:[...a.targetAudience,y.trim()]})),z(""))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"ThÃªm"})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.targetAudience.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-purple-600 mt-1",children:"ğŸ‘¤"}),(0,b.jsx)("span",{className:"flex-1 text-gray-700",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{r(a=>({...a,targetAudience:a.targetAudience.filter((a,b)=>b!==c)}))},className:"text-red-500 hover:text-red-700 p-1",children:(0,b.jsx)(m.X,{className:"w-4 h-4"})})]},c))})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Media"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"thumbnail",className:"block text-sm font-medium text-gray-700 mb-2",children:"áº¢nh Ä‘áº¡i diá»‡n"}),(0,b.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,b.jsx)("input",{type:"text",id:"thumbnail",name:"thumbnail",value:q.thumbnail,onChange:I,className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"}),(0,b.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-lg",children:[(0,b.jsx)(l.Upload,{className:"w-5 h-5"}),"Upload"]})]}),q.thumbnail&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("img",{src:q.thumbnail,alt:"Preview",className:"w-full max-w-md h-48 object-cover rounded-lg"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"trailer",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video giá»›i thiá»‡u"}),(0,b.jsx)("input",{type:"text",id:"trailer",name:"trailer",value:q.trailer,onChange:I,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://youtube.com/watch?v=..."})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"SEO & Tags"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"metaTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),(0,b.jsx)("input",{type:"text",id:"metaTitle",name:"metaTitle",value:q.metaTitle,onChange:I,maxLength:200,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SEO title..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,b.jsx)("textarea",{id:"metaDescription",name:"metaDescription",value:q.metaDescription,onChange:I,maxLength:500,rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SEO description..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),J()),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nháº­p tag vÃ  Enter..."}),(0,b.jsx)("button",{type:"button",onClick:J,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"ThÃªm"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:q.tags.map(a=>(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{r(b=>({...b,tags:b.tags.filter(b=>b!==a)}))},className:"hover:bg-blue-200 rounded-full p-0.5",children:(0,b.jsx)(m.X,{className:"w-3 h-3"})})]},a))})]})]})]}),(0,b.jsx)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t p-4",children:(0,b.jsxs)("button",{type:"submit",disabled:G,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium",children:[(0,b.jsx)(k.Save,{className:"w-5 h-5"}),G?"Äang lÆ°u...":"LÆ°u thay Ä‘á»•i"]})})]}),(0,b.jsx)("div",{className:"md:hidden h-20"})]})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=frontend_src_app_lms_instructor_courses_%5Bid%5D_edit_page_tsx_a417b014._.js.map
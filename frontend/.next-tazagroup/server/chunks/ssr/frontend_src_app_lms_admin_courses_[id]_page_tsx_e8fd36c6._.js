module.exports=[907598,a=>{"use strict";var b=a.i(321248),c=a.i(53627),d=a.i(235746),e=a.i(975780),f=a.i(202979),g=a.i(293470),h=a.i(785694),i=a.i(516482),j=a.i(687649),k=a.i(558767),l=a.i(26720),m=a.i(358054),n=a.i(411185),o=a.i(520215),p=a.i(458007),q=a.i(653107),r=a.i(395992),s=a.i(508335),t=a.i(327987),u=a.i(128348),v=a.i(785903),w=a.i(147678),x=a.i(202076),y=a.i(871925),z=a.i(638735),A=a.i(730705),B=a.i(651332),C=a.i(234211),D=a.i(734639);function E(){var a;let E,F=(0,c.useParams)(),G=(0,c.useRouter)(),{toast:H}=(0,C.useToast)(),[I,J]=(0,B.useState)(!1),K=F?.id||"",{data:L,loading:M,error:N,refetch:O}=(0,d.useFindUnique)("Course",{id:K},{include:{instructor:{select:{id:!0,firstName:!0,lastName:!0,username:!0,email:!0}},category:{select:{id:!0,name:!0,slug:!0}},_count:{select:{modules:!0,enrollments:!0,reviews:!0,discussions:!0}}}},{skip:!K||""===K}),[P,{loading:Q}]=(0,d.useDeleteOne)("Course"),[R]=(0,d.useUpdateOne)("Course"),S=()=>{G.push("/lms/admin/courses")},T=async()=>{try{await P({where:{id:K}}),H({title:"Thành công",description:`Đ\xe3 x\xf3a kh\xf3a học "${L?.title}"`,type:"success"}),G.push("/lms/admin/courses")}catch(a){H({title:"Lỗi",description:a.message||"Không thể xóa khóa học",type:"error"})}},U=async()=>{if(L)try{let a="PUBLISHED"===L.status?"DRAFT":"PUBLISHED";await R({where:{id:K},data:{status:a}}),H({title:"Thành công",description:`Đ\xe3 ${"PUBLISHED"===a?"xuất bản":"chuyển về nháp"} kh\xf3a học`,type:"success"}),O()}catch(a){H({title:"Lỗi",description:a.message||"Không thể cập nhật trạng thái",type:"error"})}},V=a=>new Date(a).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return M?(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"text-gray-500 mt-4",children:"Đang tải..."})]})}):N||!L?(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(t.AlertCircle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-red-600",children:N?.message||"Không tìm thấy khóa học"}),(0,b.jsx)(f.Button,{onClick:S,className:"mt-4",children:"Quay lại"})]})})}):(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:S,children:(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Chi tiết khóa học"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Xem thông tin chi tiết"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"PUBLISHED"===L.status?"outline":"default",onClick:U,className:"gap-2",children:"PUBLISHED"===L.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.CheckCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Đã xuất bản"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Clock,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Xuất bản"})]})}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{G.push(`/lms/admin/courses/${K}/edit`)},className:"gap-2",children:[(0,b.jsx)(j.Edit,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Chỉnh sửa"})]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>J(!0),className:"gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,b.jsx)(k.Trash2,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Xóa"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(e.CardTitle,{className:"text-xl mb-2",children:L.title}),(0,b.jsx)(e.CardDescription,{className:"text-sm",children:L.slug})]}),(0,b.jsx)(g.Badge,{variant:"PUBLISHED"===L.status?"default":"secondary",children:"PUBLISHED"===L.status?"Đã xuất bản":"Nháp"})]}),L.thumbnail&&(0,b.jsx)("div",{className:"relative w-full h-64 rounded-lg overflow-hidden bg-gray-100",children:(0,b.jsx)(D.default,{src:L.thumbnail,alt:L.title,fill:!0,className:"object-cover"})})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Mô tả"}),(0,b.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:L.description||"Chưa có mô tả"})]}),(0,b.jsx)(h.Separator,{}),L.whatYouWillLearn&&L.whatYouWillLearn.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(r.Target,{className:"w-5 h-5 text-blue-600"}),"Bạn sẽ học được gì"]}),(0,b.jsx)("ul",{className:"space-y-2",children:L.whatYouWillLearn.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(s.CheckCircle,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-gray-700",children:a})]},c))})]}),(0,b.jsx)(h.Separator,{})]}),L.requirements&&L.requirements.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(t.AlertCircle,{className:"w-5 h-5 text-orange-600"}),"Yêu cầu"]}),(0,b.jsx)("ul",{className:"space-y-2",children:L.requirements.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"•"}),(0,b.jsx)("span",{className:"text-gray-700",children:a})]},c))})]}),(0,b.jsx)(h.Separator,{})]}),L.targetAudience&&L.targetAudience.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(m.Users,{className:"w-5 h-5 text-purple-600"}),"Đối tượng học viên"]}),(0,b.jsx)("ul",{className:"space-y-2",children:L.targetAudience.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"•"}),(0,b.jsx)("span",{className:"text-gray-700",children:a})]},c))})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Thông tin SEO"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Meta Title"}),(0,b.jsx)("p",{className:"text-gray-600",children:L.metaTitle||"Chưa thiết lập"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Meta Description"}),(0,b.jsx)("p",{className:"text-gray-600",children:L.metaDescription||"Chưa thiết lập"})]}),L.tags&&L.tags.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:L.tags.map((a,c)=>(0,b.jsxs)(g.Badge,{variant:"outline",className:"gap-1",children:[(0,b.jsx)(y.Tag,{className:"w-3 h-3"}),a]},c))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Thống kê"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,b.jsx)(m.Users,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:L._count.enrollments}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Học viên"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,b.jsx)(l.BookOpen,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:L._count.modules}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Modules"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[(0,b.jsx)(o.Star,{className:"w-6 h-6 text-yellow-600 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:L.avgRating.toFixed(1)}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[L._count.reviews," đánh giá"]})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,b.jsx)(v.Eye,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:L.viewCount}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Lượt xem"})]})]}),(0,b.jsx)(h.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(q.DollarSign,{className:"w-4 h-4"}),"Giá"]}),(0,b.jsx)("span",{className:"font-semibold text-green-600",children:L.price>0?(E=Number(L.price),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(E)):"Miễn phí"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(w.Award,{className:"w-4 h-4"}),"Cấp độ"]}),(0,b.jsx)(g.Badge,{variant:"outline",children:{BEGINNER:"Cơ bản",INTERMEDIATE:"Trung cấp",ADVANCED:"Nâng cao",EXPERT:"Chuyên gia"}[a=L.level]||a})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(n.Clock,{className:"w-4 h-4"}),"Thời lượng"]}),(0,b.jsxs)("span",{className:"font-medium",children:[L.duration||0," phút"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(x.Globe,{className:"w-4 h-4"}),"Ngôn ngữ"]}),(0,b.jsx)("span",{className:"font-medium",children:"vi"===L.language?"Tiếng Việt":L.language})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(z.MessageSquare,{className:"w-4 h-4"}),"Thảo luận"]}),(0,b.jsx)("span",{className:"font-medium",children:L._count.discussions})]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Giảng viên"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:L.instructor.firstName&&L.instructor.lastName?`${L.instructor.firstName} ${L.instructor.lastName}`:L.instructor.username}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:L.instructor.email})]})})]}),L.category&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Danh mục"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(g.Badge,{variant:"outline",className:"text-sm",children:L.category.name})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Thời gian"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Tạo lúc"}),(0,b.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(u.Calendar,{className:"w-4 h-4"}),V(L.createdAt)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Cập nhật lúc"}),(0,b.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(u.Calendar,{className:"w-4 h-4"}),V(L.updatedAt)]})]}),L.publishedAt&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Xuất bản lúc"}),(0,b.jsxs)("p",{className:"font-medium flex items-center gap-2 text-green-600",children:[(0,b.jsx)(s.CheckCircle,{className:"w-4 h-4"}),V(L.publishedAt)]})]})]})]}),L.trailer&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(p.Video,{className:"w-5 h-5"}),"Video giới thiệu"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("a",{href:L.trailer,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm break-all",children:L.trailer})})]})]})]}),(0,b.jsx)(A.AlertDialog,{open:I,onOpenChange:J,children:(0,b.jsxs)(A.AlertDialogContent,{children:[(0,b.jsxs)(A.AlertDialogHeader,{children:[(0,b.jsx)(A.AlertDialogTitle,{children:"Xác nhận xóa khóa học"}),(0,b.jsxs)(A.AlertDialogDescription,{children:["Bạn có chắc chắn muốn xóa khóa học ",(0,b.jsxs)("strong",{children:['"',L.title,'"']}),"?",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-red-600 font-semibold",children:"Hành động này không thể hoàn tác và sẽ xóa tất cả dữ liệu liên quan."})]})]}),(0,b.jsxs)(A.AlertDialogFooter,{children:[(0,b.jsx)(A.AlertDialogCancel,{children:"Hủy"}),(0,b.jsx)(A.AlertDialogAction,{onClick:T,disabled:Q,className:"bg-red-600 hover:bg-red-700",children:Q?"Đang xóa...":"Xóa khóa học"})]})]})})]})}a.s(["default",()=>E])}];

//# sourceMappingURL=frontend_src_app_lms_admin_courses_%5Bid%5D_page_tsx_e8fd36c6._.js.map
module.exports=[282842,a=>{"use strict";var b,c,d,e,f=a.i(321248),g=a.i(932032);a.i(129406);var h=a.i(609202),i=a.i(184327),j=a.i(47329),k=function(a){var b=a.client,c=a.children,d=(0,j.getApolloContext)(),e=i.useContext(d),f=i.useMemo(function(){return(0,g.__assign)((0,g.__assign)({},e),{client:b||e.client})},[e,b]);return(0,h.invariant)(f.client,71),i.createElement(d.Provider,{value:f},c)},l=a.i(234211),m=a.i(363615),n=a.i(890082),o=a.i(327987),p=a.i(122455),q=a.i(897608),r=a.i(422171);function s(){let{toasts:a,dismiss:b}=(0,l.useToast)();return(0,f.jsx)("div",{className:"fixed top-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:top-4 sm:right-4 sm:flex-col sm:max-w-[420px] pointer-events-none",children:a.map(a=>(0,f.jsxs)("div",{className:(0,r.cn)("group pointer-events-auto relative flex w-full items-start gap-3 overflow-hidden rounded-lg border p-4 pr-8 shadow-lg transition-all","animate-in slide-in-from-top-full duration-300","data-[state=closed]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full",{"bg-white border-gray-200":"info"===a.type,"bg-green-50 border-green-200":"success"===a.type,"bg-red-50 border-red-200":"error"===a.type,"bg-yellow-50 border-yellow-200":"warning"===a.type}),style:{marginBottom:"0.5rem"},children:[(0,f.jsxs)("div",{className:"flex-shrink-0 mt-0.5",children:["success"===a.type&&(0,f.jsx)(n.CheckCircle2,{className:"h-5 w-5 text-green-600"}),"error"===a.type&&(0,f.jsx)(o.AlertCircle,{className:"h-5 w-5 text-red-600"}),"warning"===a.type&&(0,f.jsx)(q.AlertTriangle,{className:"h-5 w-5 text-yellow-600"}),"info"===a.type&&(0,f.jsx)(p.Info,{className:"h-5 w-5 text-blue-600"})]}),(0,f.jsxs)("div",{className:"flex-1 grid gap-1",children:[(0,f.jsx)("div",{className:(0,r.cn)("text-sm font-semibold",{"text-gray-900":"info"===a.type,"text-green-900":"success"===a.type,"text-red-900":"error"===a.type,"text-yellow-900":"warning"===a.type}),children:a.title}),a.description&&(0,f.jsx)("div",{className:(0,r.cn)("text-sm",{"text-gray-600":"info"===a.type,"text-green-700":"success"===a.type,"text-red-700":"error"===a.type,"text-yellow-700":"warning"===a.type}),children:a.description})]}),(0,f.jsx)("button",{onClick:()=>b(a.id),className:(0,r.cn)("absolute right-2 top-2 rounded-md p-1 transition-opacity hover:opacity-100 focus:opacity-100 focus:outline-none focus:ring-2 opacity-70",{"text-gray-500 hover:text-gray-700 focus:ring-gray-400":"info"===a.type,"text-green-700 hover:text-green-900 focus:ring-green-400":"success"===a.type,"text-red-700 hover:text-red-900 focus:ring-red-400":"error"===a.type,"text-yellow-700 hover:text-yellow-900 focus:ring-yellow-400":"warning"===a.type}),children:(0,f.jsx)(m.X,{className:"h-4 w-4"})})]},a.id))})}var t=a.i(1898),u=a.i(451759),v=a.i(380361);function w(a,b){return b?b(a):t.Observable.of()}function x(a){return"function"==typeof a?new z(a):a}function y(a){return a.request.length<=1}var z=function(){function a(a){a&&(this.request=a)}return a.empty=function(){return new a(function(){return t.Observable.of()})},a.from=function(b){return 0===b.length?a.empty():b.map(x).reduce(function(a,b){return a.concat(b)})},a.split=function(b,c,d){var e=x(c),f=x(d||new a(w));return Object.assign(new a(y(e)&&y(f)?function(a){return b(a)?e.request(a)||t.Observable.of():f.request(a)||t.Observable.of()}:function(a,c){return b(a)?e.request(a,c)||t.Observable.of():f.request(a,c)||t.Observable.of()}),{left:e,right:f})},a.execute=function(a,b){var c,d,e,f,i;return a.request((e=b.context,(d={variables:(c=function(a){for(var b=["query","operationName","variables","extensions","context"],c=0,d=Object.keys(a);c<d.length;c++){var e=d[c];if(0>b.indexOf(e))throw(0,h.newInvariantError)(58,e)}return a}(b)).variables||{},extensions:c.extensions||{},operationName:c.operationName,query:c.query}).operationName||(d.operationName="string"!=typeof d.query?(0,u.getOperationName)(d.query)||void 0:""),f=d,i=(0,g.__assign)({},e),Object.defineProperty(f,"setContext",{enumerable:!1,value:function(a){i="function"==typeof a?(0,g.__assign)((0,g.__assign)({},i),a(i)):(0,g.__assign)((0,g.__assign)({},i),a)}}),Object.defineProperty(f,"getContext",{enumerable:!1,value:function(){return(0,g.__assign)({},i)}}),f))||t.Observable.of()},a.concat=function(b,c){var d=x(b);if(y(d))return!1!==globalThis.__DEV__&&h.invariant.warn(47,d),d;var e=x(c);return Object.assign(new a(y(e)?function(a){return d.request(a,function(a){return e.request(a)||t.Observable.of()})||t.Observable.of()}:function(a,b){return d.request(a,function(a){return e.request(a,b)||t.Observable.of()})||t.Observable.of()}),{left:d,right:e})},a.prototype.split=function(b,c,d){return this.concat(a.split(b,c,d||new a(w)))},a.prototype.concat=function(b){return a.concat(this,b)},a.prototype.request=function(a,b){throw(0,h.newInvariantError)(48)},a.prototype.onError=function(a,b){if(!1!==globalThis.__DEV__&&(0,v.warnDeprecated)("onError",function(){!1!==globalThis.__DEV__&&h.invariant.warn(49)}),b&&b.error)return b.error(a),!1;throw a},a.prototype.setOnError=function(a){return!1!==globalThis.__DEV__&&!1!==globalThis.__DEV__&&h.invariant.warn(50),this.onError=a,this},a}(),A=z.execute,B=a.i(861154),C=a.i(19285),D=function(a,b){var c;try{c=JSON.stringify(a)}catch(a){var d=(0,h.newInvariantError)(54,b,a.message);throw d.parseError=a,d}return c},E=function(a,b){var c=a.getContext().uri;return c||("function"==typeof b?b(a):b||"/graphql")},F=a.i(820531);function G(a){var b={next:function(){return a.read()}};return F.canUseAsyncIteratorSymbol&&(b[Symbol.asyncIterator]=function(){return this}),b}var H=function(a,b,c){var d=Error(c);throw d.name="ServerError",d.response=a,d.statusCode=a.status,d.result=b,d},I=a.i(730012),J=a.i(420602),K=a.i(315868),L=Object.prototype.hasOwnProperty;function M(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return N(a)}function N(a){var b=a[0]||{},c=a.length;if(c>1)for(var d=new P,e=1;e<c;++e)b=d.merge(b,a[e]);return b}var O=function(a,b,c){return this.merge(a[c],b[c])},P=function(){function a(a){void 0===a&&(a=O),this.reconciler=a,this.isObject=J.isNonNullObject,this.pastCopies=new Set}return a.prototype.merge=function(a,b){for(var c=this,d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];return(0,J.isNonNullObject)(b)&&(0,J.isNonNullObject)(a)?(Object.keys(b).forEach(function(e){if(L.call(a,e)){var f=a[e];if(b[e]!==f){var h=c.reconciler.apply(c,(0,g.__spreadArray)([a,b,e],d,!1));h!==f&&((a=c.shallowCopyForMerge(a))[e]=h)}}else(a=c.shallowCopyForMerge(a))[e]=b[e]}),a):b},a.prototype.shallowCopyForMerge=function(a){return(0,J.isNonNullObject)(a)&&!this.pastCopies.has(a)&&(a=Array.isArray(a)?a.slice(0):(0,g.__assign)({__proto__:Object.getPrototypeOf(a)},a),this.pastCopies.add(a)),a},a}();function Q(a){return"incremental"in a}function R(a,b){var c=a,d=new P;return Q(b)&&(0,K.isNonEmptyArray)(b.incremental)&&b.incremental.forEach(function(a){for(var b=a.data,e=a.path,f=e.length-1;f>=0;--f){var g=e[f],h=isNaN(+g)?{}:[];h[g]=b,b=h}c=d.merge(c,b)}),c}var S=Object.prototype.hasOwnProperty;function T(a,b){a.status>=300&&H(a,function(){try{return JSON.parse(b)}catch(a){return b}}(),"Response not successful: Received status code ".concat(a.status));try{return JSON.parse(b)}catch(c){throw c.name="ServerParseError",c.response=a,c.statusCode=a.status,c.bodyText=b,c}}var U=function(a){if(!a&&"undefined"==typeof fetch)throw(0,h.newInvariantError)(51)},V=a.i(291214);let W=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function X(a){return Y[a.charCodeAt(0)]}let Y=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var Z=a.i(853255);let $={Name:{leave:a=>a.value},Variable:{leave:a=>"$"+a.name},Document:{leave:a=>_(a.definitions,"\n\n")},OperationDefinition:{leave(a){let b=ab("(",_(a.variableDefinitions,", "),")"),c=_([a.operation,_([a.name,b]),_(a.directives," ")]," ");return("query"===c?"":c+" ")+a.selectionSet}},VariableDefinition:{leave:({variable:a,type:b,defaultValue:c,directives:d})=>a+": "+b+ab(" = ",c)+ab(" ",_(d," "))},SelectionSet:{leave:({selections:a})=>aa(a)},Field:{leave({alias:a,name:b,arguments:c,directives:d,selectionSet:e}){let f=ab("",a,": ")+b,g=f+ab("(",_(c,", "),")");return g.length>80&&(g=f+ab("(\n",ac(_(c,"\n")),"\n)")),_([g,_(d," "),e]," ")}},Argument:{leave:({name:a,value:b})=>a+": "+b},FragmentSpread:{leave:({name:a,directives:b})=>"..."+a+ab(" ",_(b," "))},InlineFragment:{leave:({typeCondition:a,directives:b,selectionSet:c})=>_(["...",ab("on ",a),_(b," "),c]," ")},FragmentDefinition:{leave:({name:a,typeCondition:b,variableDefinitions:c,directives:d,selectionSet:e})=>`fragment ${a}${ab("(",_(c,", "),")")} on ${b} ${ab("",_(d," ")," ")}`+e},IntValue:{leave:({value:a})=>a},FloatValue:{leave:({value:a})=>a},StringValue:{leave:({value:a,block:b})=>b?(0,V.printBlockString)(a):`"${a.replace(W,X)}"`},BooleanValue:{leave:({value:a})=>a?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:a})=>a},ListValue:{leave:({values:a})=>"["+_(a,", ")+"]"},ObjectValue:{leave:({fields:a})=>"{"+_(a,", ")+"}"},ObjectField:{leave:({name:a,value:b})=>a+": "+b},Directive:{leave:({name:a,arguments:b})=>"@"+a+ab("(",_(b,", "),")")},NamedType:{leave:({name:a})=>a},ListType:{leave:({type:a})=>"["+a+"]"},NonNullType:{leave:({type:a})=>a+"!"},SchemaDefinition:{leave:({description:a,directives:b,operationTypes:c})=>ab("",a,"\n")+_(["schema",_(b," "),aa(c)]," ")},OperationTypeDefinition:{leave:({operation:a,type:b})=>a+": "+b},ScalarTypeDefinition:{leave:({description:a,name:b,directives:c})=>ab("",a,"\n")+_(["scalar",b,_(c," ")]," ")},ObjectTypeDefinition:{leave:({description:a,name:b,interfaces:c,directives:d,fields:e})=>ab("",a,"\n")+_(["type",b,ab("implements ",_(c," & ")),_(d," "),aa(e)]," ")},FieldDefinition:{leave:({description:a,name:b,arguments:c,type:d,directives:e})=>ab("",a,"\n")+b+(ad(c)?ab("(\n",ac(_(c,"\n")),"\n)"):ab("(",_(c,", "),")"))+": "+d+ab(" ",_(e," "))},InputValueDefinition:{leave:({description:a,name:b,type:c,defaultValue:d,directives:e})=>ab("",a,"\n")+_([b+": "+c,ab("= ",d),_(e," ")]," ")},InterfaceTypeDefinition:{leave:({description:a,name:b,interfaces:c,directives:d,fields:e})=>ab("",a,"\n")+_(["interface",b,ab("implements ",_(c," & ")),_(d," "),aa(e)]," ")},UnionTypeDefinition:{leave:({description:a,name:b,directives:c,types:d})=>ab("",a,"\n")+_(["union",b,_(c," "),ab("= ",_(d," | "))]," ")},EnumTypeDefinition:{leave:({description:a,name:b,directives:c,values:d})=>ab("",a,"\n")+_(["enum",b,_(c," "),aa(d)]," ")},EnumValueDefinition:{leave:({description:a,name:b,directives:c})=>ab("",a,"\n")+_([b,_(c," ")]," ")},InputObjectTypeDefinition:{leave:({description:a,name:b,directives:c,fields:d})=>ab("",a,"\n")+_(["input",b,_(c," "),aa(d)]," ")},DirectiveDefinition:{leave:({description:a,name:b,arguments:c,repeatable:d,locations:e})=>ab("",a,"\n")+"directive @"+b+(ad(c)?ab("(\n",ac(_(c,"\n")),"\n)"):ab("(",_(c,", "),")"))+(d?" repeatable":"")+" on "+_(e," | ")},SchemaExtension:{leave:({directives:a,operationTypes:b})=>_(["extend schema",_(a," "),aa(b)]," ")},ScalarTypeExtension:{leave:({name:a,directives:b})=>_(["extend scalar",a,_(b," ")]," ")},ObjectTypeExtension:{leave:({name:a,interfaces:b,directives:c,fields:d})=>_(["extend type",a,ab("implements ",_(b," & ")),_(c," "),aa(d)]," ")},InterfaceTypeExtension:{leave:({name:a,interfaces:b,directives:c,fields:d})=>_(["extend interface",a,ab("implements ",_(b," & ")),_(c," "),aa(d)]," ")},UnionTypeExtension:{leave:({name:a,directives:b,types:c})=>_(["extend union",a,_(b," "),ab("= ",_(c," | "))]," ")},EnumTypeExtension:{leave:({name:a,directives:b,values:c})=>_(["extend enum",a,_(b," "),aa(c)]," ")},InputObjectTypeExtension:{leave:({name:a,directives:b,fields:c})=>_(["extend input",a,_(b," "),aa(c)]," ")}};function _(a,b=""){var c;return null!=(c=null==a?void 0:a.filter(a=>a).join(b))?c:""}function aa(a){return ab("{\n",ac(_(a,"\n")),"\n}")}function ab(a,b,c=""){return null!=b&&""!==b?a+b+c:""}function ac(a){return ab("  ",a.replace(/\n/g,"\n  "))}function ad(a){var b;return null!=(b=null==a?void 0:a.some(a=>a.includes("\n")))&&b}var ae=a.i(510087),af=a.i(933157),ag=a.i(521015),ah=Object.assign(function(a){var b=e.get(a);return b||(b=(0,Z.visit)(a,$),e.set(a,b)),b},{reset:function(){e=new ae.AutoCleanedWeakCache(af.cacheSizes.print||2e3)}});ah.reset(),!1!==globalThis.__DEV__&&(0,ag.registerGlobalCache)("print",function(){return e?e.size:0});var ai={http:{includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},aj=function(a,b){return b(a)};function ak(a){return new t.Observable(function(b){b.error(a)})}var al=a.i(617273),am=a.i(10866),an=a.i(918023),ao=a.i(253871),ap={kind:am.Kind.FIELD,name:{kind:am.Kind.NAME,value:"__typename"}};function aq(a){var b=new Map;return function(c){void 0===c&&(c=a);var d=b.get(c);return d||b.set(c,d={variables:new Set,fragmentSpreads:new Set}),d}}function ar(a,b){(0,u.checkDocument)(b);for(var c,d,e,f=aq(""),i=aq(""),j=function(a){for(var b=0,c=void 0;b<a.length&&(c=a[b]);++b)if(!(0,K.isArray)(c)){if(c.kind===am.Kind.OPERATION_DEFINITION)return f(c.name&&c.name.value);if(c.kind===am.Kind.FRAGMENT_DEFINITION)return i(c.name.value)}return!1!==globalThis.__DEV__&&h.invariant.error(125),null},k=0,l=b.definitions.length-1;l>=0;--l)b.definitions[l].kind===am.Kind.OPERATION_DEFINITION&&++k;var m=(c=new Map,d=new Map,a.forEach(function(a){a&&(a.name?c.set(a.name,a):a.test&&d.set(a.test,a))}),function(a){var b=c.get(a.name.value);return!b&&d.size&&d.forEach(function(c,d){d(a)&&(b=c)}),b}),n=function(a){return(0,K.isNonEmptyArray)(a)&&a.map(m).some(function(a){return a&&a.remove})},o=new Map,p=!1,q={enter:function(a){if(n(a.directives))return p=!0,null}},r=(0,Z.visit)(b,{Field:q,InlineFragment:q,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(a,b,c,d,e){var f=j(e);f&&f.variables.add(a.name.value)}},FragmentSpread:{enter:function(a,b,c,d,e){if(n(a.directives))return p=!0,null;var f=j(e);f&&f.fragmentSpreads.add(a.name.value)}},FragmentDefinition:{enter:function(a,b,c,d){o.set(JSON.stringify(d),a)},leave:function(a,b,c,d){return a===o.get(JSON.stringify(d))?a:k>0&&a.selectionSet.selections.every(function(a){return a.kind===am.Kind.FIELD&&"__typename"===a.name.value})?(i(a.name.value).removed=!0,p=!0,null):void 0}},Directive:{leave:function(a){if(m(a))return p=!0,null}}});if(!p)return b;var s=function(a){return!a.transitiveVars&&(a.transitiveVars=new Set(a.variables),a.removed||a.fragmentSpreads.forEach(function(b){s(i(b)).transitiveVars.forEach(function(b){a.transitiveVars.add(b)})})),a},t=new Set;r.definitions.forEach(function(a){a.kind===am.Kind.OPERATION_DEFINITION?s(f(a.name&&a.name.value)).fragmentSpreads.forEach(function(a){t.add(a)}):a.kind!==am.Kind.FRAGMENT_DEFINITION||0!==k||i(a.name.value).removed||t.add(a.name.value)}),t.forEach(function(a){s(i(a)).fragmentSpreads.forEach(function(a){t.add(a)})});var v={enter:function(a){var b;if(b=a.name.value,!t.has(b)||i(b).removed)return null}};return e=(0,Z.visit)(r,{FragmentSpread:v,FragmentDefinition:v,OperationDefinition:{leave:function(a){if(a.variableDefinitions){var b=s(f(a.name&&a.name.value)).transitiveVars;if(b.size<a.variableDefinitions.length)return(0,g.__assign)((0,g.__assign)({},a),{variableDefinitions:a.variableDefinitions.filter(function(a){return b.has(a.variable.name.value)})})}}}}),!function a(b,c){return!b||b.selectionSet.selections.every(function(b){return b.kind===am.Kind.FRAGMENT_SPREAD&&a(c[b.name.value],c)})}((0,u.getOperationDefinition)(e)||(0,u.getFragmentDefinition)(e),(0,ao.createFragmentMap)((0,u.getFragmentDefinitions)(e)))?e:null}var as=Object.assign(function(a){return(0,Z.visit)(a,{SelectionSet:{enter:function(a,b,c){if(!c||c.kind!==am.Kind.OPERATION_DEFINITION){var d=a.selections;if(!(!d||d.some(function(a){return(0,an.isField)(a)&&("__typename"===a.name.value||0===a.name.value.lastIndexOf("__",0))}))&&!((0,an.isField)(c)&&c.directives&&c.directives.some(function(a){return"export"===a.name.value})))return(0,g.__assign)((0,g.__assign)({},a),{selections:(0,g.__spreadArray)((0,g.__spreadArray)([],d,!0),[ap],!1)})}}}})},{added:function(a){return a===ap}});function at(a){return(0,u.checkDocument)(a),ar([{test:function(a){return"client"===a.name.value},remove:!0}],a)}var au=(0,al.maybe)(function(){return fetch}),av=function(a){void 0===a&&(a={});var b=a.uri,c=void 0===b?"/graphql":b,d=a.fetch,e=a.print,f=void 0===e?aj:e,i=a.includeExtensions,j=a.preserveHeaderCase,k=a.useGETForQueries,l=a.includeUnusedVariables,m=void 0!==l&&l,n=(0,g.__rest)(a,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);!1!==globalThis.__DEV__&&U(d||au);var o={http:{includeExtensions:i,preserveHeaderCase:j},options:n.fetchOptions,credentials:n.credentials,headers:n.headers};return new z(function(a){var b,e,i,j,l,n,p=E(a,c),q=a.getContext(),r={};if(q.clientAwareness){var s=q.clientAwareness,v=s.name,w=s.version;v&&(r["apollographql-client-name"]=v),w&&(r["apollographql-client-version"]=w)}var x=(0,g.__assign)((0,g.__assign)({},r),q.headers),y={http:q.http,options:q.fetchOptions,credentials:q.credentials,headers:x};if((0,C.hasDirectives)(["client"],a.query)){!1!==globalThis.__DEV__&&!1!==globalThis.__DEV__&&h.invariant.warn(52);var z=at(a.query);if(!z)return ak(Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));a.query=z}var A=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e={},f={};c.forEach(function(a){e=(0,g.__assign)((0,g.__assign)((0,g.__assign)({},e),a.options),{headers:(0,g.__assign)((0,g.__assign)({},e.headers),a.headers)}),a.credentials&&(e.credentials=a.credentials),f=(0,g.__assign)((0,g.__assign)({},f),a.http)}),e.headers&&(e.headers=function(a,b){if(!b){var c={};return Object.keys(Object(a)).forEach(function(b){c[b.toLowerCase()]=a[b]}),c}var d={};Object.keys(Object(a)).forEach(function(b){d[b.toLowerCase()]={originalName:b,value:a[b]}});var e={};return Object.keys(d).forEach(function(a){e[d[a].originalName]=d[a].value}),e}(e.headers,f.preserveHeaderCase));var h=a.operationName,i=a.extensions,j=a.variables,k=a.query,l={operationName:h,variables:j};return f.includeExtensions&&(l.extensions=i),f.includeQuery&&(l.query=b(k,ah)),{options:e,body:l}}(a,f,ai,o,y),B=A.options,K=A.body;K.variables&&!m&&(b=K.variables,e=a.query,i=(0,g.__assign)({},b),j=new Set(Object.keys(b)),(0,Z.visit)(e,{Variable:function(a,b,c){c&&"VariableDefinition"!==c.kind&&j.delete(a.name.value)}}),j.forEach(function(a){delete i[a]}),K.variables=i),B.signal||"undefined"==typeof AbortController||(B.signal=(n=new AbortController).signal);var L="OperationDefinition"===(l=(0,u.getMainDefinition)(a.query)).kind&&"subscription"===l.operation,M=(0,C.hasDirectives)(["defer"],a.query);if(k&&!a.query.definitions.some(function(a){return"OperationDefinition"===a.kind&&"mutation"===a.operation})&&(B.method="GET"),M||L){B.headers=B.headers||{};var N="multipart/mixed;";L&&M&&!1!==globalThis.__DEV__&&h.invariant.warn(53),L?N+="boundary=graphql;subscriptionSpec=1.0,application/json":M&&(N+="deferSpec=20220824,application/json"),B.headers.accept=N}if("GET"===B.method){var O=function(a,b){var c=[],d=function(a,b){c.push("".concat(a,"=").concat(encodeURIComponent(b)))};if("query"in b&&d("query",b.query),b.operationName&&d("operationName",b.operationName),b.variables){var e=void 0;try{e=D(b.variables,"Variables map")}catch(a){return{parseError:a}}d("variables",e)}if(b.extensions){var f=void 0;try{f=D(b.extensions,"Extensions map")}catch(a){return{parseError:a}}d("extensions",f)}var g="",h=a,i=a.indexOf("#");-1!==i&&(g=a.substr(i),h=a.substr(0,i));var j=-1===h.indexOf("?")?"?":"&";return{newURI:h+j+c.join("&")+g}}(p,K),P=O.newURI,Q=O.parseError;if(Q)return ak(Q);p=P}else try{B.body=D(K,"Payload")}catch(a){return ak(a)}return new t.Observable(function(b){var c=d||(0,al.maybe)(function(){return fetch})||au,e=b.next.bind(b);return c(p,B).then(function(b){a.setContext({response:b});var c,d=null==(c=b.headers)?void 0:c.get("content-type");return null!==d&&/^multipart\/mixed/i.test(d)?function(a,b){return(0,g.__awaiter)(this,void 0,void 0,function(){var c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return(0,g.__generator)(this,function(A){switch(A.label){case 0:if(void 0===TextDecoder)throw Error("TextDecoder must be defined in the environment: please import a polyfill.");c=new TextDecoder("utf-8"),d=null==(z=a.headers)?void 0:z.get("content-type"),e="boundary=",f=(null==d?void 0:d.includes(e))?null==d?void 0:d.substring((null==d?void 0:d.indexOf(e))+e.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",h="\r\n--".concat(f),i="",j=function(a){var b,c,d,e,f,g,h=a;if(a.body&&(h=a.body),b=h,F.canUseAsyncIteratorSymbol&&b[Symbol.asyncIterator])return d=h[Symbol.asyncIterator](),(c={next:function(){return d.next()}})[Symbol.asyncIterator]=function(){return this},c;if(h.getReader)return G(h.getReader());if(h.stream)return G(h.stream().getReader());if(h.arrayBuffer)return e=h.arrayBuffer(),f=!1,g={next:function(){return f?Promise.resolve({value:void 0,done:!0}):(f=!0,new Promise(function(a,b){e.then(function(b){a({value:b,done:!1})}).catch(b)}))}},F.canUseAsyncIteratorSymbol&&(g[Symbol.asyncIterator]=function(){return this}),g;if(h.pipe)return function(a){var b=null,c=null,d=!1,e=[],f=[];function g(a){if(!c){if(f.length){var b=f.shift();if(Array.isArray(b)&&b[0])return b[0]({value:a,done:!1})}e.push(a)}}function h(a){c=a,f.slice().forEach(function(b){b[1](a)}),b&&b()}function i(){d=!0,f.slice().forEach(function(a){a[0]({value:void 0,done:!0})}),b&&b()}b=function(){b=null,a.removeListener("data",g),a.removeListener("error",h),a.removeListener("end",i),a.removeListener("finish",i),a.removeListener("close",i)},a.on("data",g),a.on("error",h),a.on("end",i),a.on("finish",i),a.on("close",i);var j={next:function(){return new Promise(function(a,b){return c?b(c):e.length?a({value:e.shift(),done:!1}):d?a({value:void 0,done:!0}):void f.push([a,b])})}};return F.canUseAsyncIteratorSymbol&&(j[Symbol.asyncIterator]=function(){return this}),j}(h);throw Error("Unknown body type for responseIterator. Please pass a streamable response.")}(a),k=!0,A.label=1;case 1:if(!k)return[3,3];return[4,j.next()];case 2:for(m=(l=A.sent()).value,n=l.done,o="string"==typeof m?m:c.decode(m),p=i.length-h.length+1,k=!n,i+=o,q=i.indexOf(h,p);q>-1;){if(r=void 0,r=(x=[i.slice(0,q),i.slice(q+h.length)])[0],i=x[1],s=r.indexOf("\r\n\r\n"),(t=function(a){var b={};return a.split("\n").forEach(function(a){var c=a.indexOf(":");if(c>-1){var d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();b[d]=e}}),b}(r.slice(0,s))["content-type"])&&-1===t.toLowerCase().indexOf("application/json"))throw Error("Unsupported patch content type: application/json is required.");if(u=r.slice(s)){if(Object.keys(v=T(a,u)).length>1||"data"in v||"incremental"in v||"errors"in v||"payload"in v)if((0,J.isNonNullObject)(v)&&"payload"in v){if(w={},"payload"in v){if(1===Object.keys(v).length&&null===v.payload)return[2];w=(0,g.__assign)({},v.payload)}"errors"in v&&(w=(0,g.__assign)((0,g.__assign)({},w),{extensions:(0,g.__assign)((0,g.__assign)({},"extensions"in w?w.extensions:null),((y={})[I.PROTOCOL_ERRORS_SYMBOL]=v.errors,y))})),b(w)}else b(v);else if(1===Object.keys(v).length&&"hasNext"in v&&!v.hasNext)return[2]}q=i.indexOf(h)}return[3,1];case 3:return[2]}})})}(b,e):(function(b){return b.text().then(function(a){return T(b,a)}).then(function(c){return Array.isArray(c)||S.call(c,"data")||S.call(c,"errors")||H(b,c,"Server response was missing for query '".concat(Array.isArray(a)?a.map(function(a){return a.operationName}):a.operationName,"'.")),c})})(b).then(e)}).then(function(){n=void 0,b.complete()}).catch(function(a){n=void 0,a.result&&a.result.errors&&a.result.data&&b.next(a.result),b.error(a)}),function(){n&&n.abort()}})})},aw=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,av(b).request)||this;return c.options=b,c}return(0,g.__extends)(b,a),b}(z),ax=a.i(876158),ay=a.i(214888);function az(a){var b=aA(a);return(0,K.isNonEmptyArray)(b)}function aA(a){var b=(0,K.isNonEmptyArray)(a.errors)?a.errors.slice(0):[];return Q(a)&&(0,K.isNonEmptyArray)(a.incremental)&&a.incremental.forEach(function(a){a.errors&&b.push.apply(b,a.errors)}),b}function aB(a,b,c){return new t.Observable(function(d){var e={then:function(a){return new Promise(function(b){return b(a())})}};function f(a,b){return function(c){if(a){var f=function(){return d.closed?0:a(c)};e=e.then(f,f).then(function(a){return d.next(a)},function(a){return d.error(a)})}else d[b](c)}}var g={next:f(b,"next"),error:f(c,"error"),complete:function(){e.then(function(){return d.complete()})}},h=a.subscribe(g);return function(){return h.unsubscribe()}})}var aC=a.i(664968),aD=a.i(208781);function aE(a){return a&&"function"==typeof a.then}var aF=function(a){function b(b){var c=a.call(this,function(a){return c.addObserver(a),function(){return c.removeObserver(a)}})||this;return c.observers=new Set,c.promise=new Promise(function(a,b){c.resolve=a,c.reject=b}),c.handlers={next:function(a){null!==c.sub&&(c.latest=["next",a],c.notify("next",a),(0,aC.iterateObserversSafely)(c.observers,"next",a))},error:function(a){var b=c.sub;null!==b&&(b&&setTimeout(function(){return b.unsubscribe()}),c.sub=null,c.latest=["error",a],c.reject(a),c.notify("error",a),(0,aC.iterateObserversSafely)(c.observers,"error",a))},complete:function(){var a=c.sub,b=c.sources;if(null!==a){var d=(void 0===b?[]:b).shift();d?aE(d)?d.then(function(a){return c.sub=a.subscribe(c.handlers)},c.handlers.error):c.sub=d.subscribe(c.handlers):(a&&setTimeout(function(){return a.unsubscribe()}),c.sub=null,c.latest&&"next"===c.latest[0]?c.resolve(c.latest[1]):c.resolve(),c.notify("complete"),(0,aC.iterateObserversSafely)(c.observers,"complete"))}}},c.nextResultListeners=new Set,c.cancel=function(a){c.reject(a),c.sources=[],c.handlers.error(a)},c.promise.catch(function(a){}),"function"==typeof b&&(b=[new t.Observable(b)]),aE(b)?b.then(function(a){return c.start(a)},c.handlers.error):c.start(b),c}return(0,g.__extends)(b,a),b.prototype.start=function(a){void 0===this.sub&&(this.sources=Array.from(a),this.handlers.complete())},b.prototype.deliverLastMessage=function(a){if(this.latest){var b=this.latest[0],c=a[b];c&&c.call(a,this.latest[1]),null===this.sub&&"next"===b&&a.complete&&a.complete()}},b.prototype.addObserver=function(a){this.observers.has(a)||(this.deliverLastMessage(a),this.observers.add(a))},b.prototype.removeObserver=function(a){this.observers.delete(a)&&this.observers.size<1&&this.handlers.complete()},b.prototype.notify=function(a,b){var c=this.nextResultListeners;c.size&&(this.nextResultListeners=new Set,c.forEach(function(c){return c(a,b)}))},b.prototype.beforeNext=function(a){var b=!1;this.nextResultListeners.add(function(c,d){b||(b=!0,a(c,d))})},b}(t.Observable);(0,aD.fixObservableSubclass)(aF);var aG=a.i(85826),aH=a.i(824339),aI=a.i(63025),aJ=a.i(300105);function aK(a){return a}var aL=function(){function a(a,b){void 0===b&&(b=Object.create(null)),this.resultCache=F.canUseWeakSet?new WeakSet:new Set,this.transform=a,b.getCacheKey&&(this.getCacheKey=b.getCacheKey),this.cached=!1!==b.cache,this.resetCache()}return a.prototype.getCacheKey=function(a){return[a]},a.identity=function(){return new a(aK,{cache:!1})},a.split=function(b,c,d){return void 0===d&&(d=a.identity()),Object.assign(new a(function(a){return(b(a)?c:d).transformDocument(a)},{cache:!1}),{left:c,right:d})},a.prototype.resetCache=function(){var b=this;if(this.cached){var c=new aH.Trie(F.canUseWeakMap);this.performWork=(0,aJ.wrap)(a.prototype.performWork.bind(this),{makeCacheKey:function(a){var d=b.getCacheKey(a);if(d)return(0,h.invariant)(Array.isArray(d),105),c.lookupArray(d)},max:af.cacheSizes["documentTransform.cache"],cache:aI.WeakCache})}},a.prototype.performWork=function(a){return(0,u.checkDocument)(a),this.transform(a)},a.prototype.transformDocument=function(a){if(this.resultCache.has(a))return a;var b=this.performWork(a);return this.resultCache.add(b),b},a.prototype.concat=function(b){var c=this;return Object.assign(new a(function(a){return b.transformDocument(c.transformDocument(a))},{cache:!1}),{left:this,right:b})},a}(),aM=a.i(485521),aN=a.i(310691),aO=new(F.canUseWeakMap?WeakMap:Map);function aP(a,b){var c=a[b];"function"==typeof c&&(a[b]=function(){return aO.set(a,(aO.get(a)+1)%1e15),c.apply(this,arguments)})}var aQ=function(){function a(a,b){void 0===b&&(b=a.generateQueryId()),this.queryId=b,this.document=null,this.lastRequestId=1,this.stopped=!1,this.observableQuery=null;var c=this.cache=a.cache;aO.has(c)||(aO.set(c,0),aP(c,"evict"),aP(c,"modify"),aP(c,"reset"))}return a.prototype.init=function(a){var b=a.networkStatus||aN.NetworkStatus.loading;return this.variables&&this.networkStatus!==aN.NetworkStatus.loading&&!(0,ax.equal)(this.variables,a.variables)&&(b=aN.NetworkStatus.setVariables),(0,ax.equal)(a.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:a.document,variables:a.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:b}),a.observableQuery&&this.setObservableQuery(a.observableQuery),a.lastRequestId&&(this.lastRequestId=a.lastRequestId),this},a.prototype.resetDiff=function(){this.lastDiff=void 0},a.prototype.getDiff=function(){var a=this,b=this.getDiffOptions();if(this.lastDiff&&(0,ax.equal)(b,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var c=this.observableQuery;if(c&&"no-cache"===c.options.fetchPolicy)return{complete:!1};var d=(0,v.muteDeprecations)("canonizeResults",function(){return a.cache.diff(b)});return this.updateLastDiff(d,b),d},a.prototype.updateLastDiff=function(a,b){this.lastDiff=a?{diff:a,options:b||this.getDiffOptions()}:void 0},a.prototype.getDiffOptions=function(a){var b;return void 0===a&&(a=this.variables),{query:this.document,variables:a,returnPartialData:!0,optimistic:!0,canonizeResults:null==(b=this.observableQuery)?void 0:b.options.canonizeResults}},a.prototype.setDiff=function(a){var b,c=this,d=this.lastDiff&&this.lastDiff.diff;!(a&&!a.complete&&(0,v.muteDeprecations)("getLastError",function(){var a;return null==(a=c.observableQuery)?void 0:a.getLastError()}))&&(this.updateLastDiff(a),(0,ax.equal)(d&&d.result,a&&a.result)||null==(b=this.observableQuery)||b.scheduleNotify())},a.prototype.setObservableQuery=function(a){a!==this.observableQuery&&(this.observableQuery=a,a&&(a.queryInfo=this))},a.prototype.stop=function(){var a;if(!this.stopped){this.stopped=!0,null==(a=this.observableQuery)||a.resetNotifications(),this.cancel();var b=this.observableQuery;b&&b.stopPolling()}},a.prototype.cancel=function(){var a;null==(a=this.cancelWatch)||a.call(this),this.cancelWatch=void 0},a.prototype.updateWatch=function(a){var b=this;void 0===a&&(a=this.variables);var c=this.observableQuery;if(!c||"no-cache"!==c.options.fetchPolicy){var d=(0,g.__assign)((0,g.__assign)({},this.getDiffOptions(a)),{watcher:this,callback:function(a){return b.setDiff(a)}});this.lastWatch&&(0,ax.equal)(d,this.lastWatch)||(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=d))}},a.prototype.resetLastWrite=function(){this.lastWrite=void 0},a.prototype.shouldWrite=function(a,b){var c=this.lastWrite;return!(c&&c.dmCount===aO.get(this.cache)&&(0,ax.equal)(b,c.variables)&&(0,ax.equal)(a.data,c.result.data))},a.prototype.markResult=function(a,b,c,d){var e,f=this,g=new P,h=(0,K.isNonEmptyArray)(a.errors)?a.errors.slice(0):[];if(null==(e=this.observableQuery)||e.resetNotifications(),"incremental"in a&&(0,K.isNonEmptyArray)(a.incremental)){var i=R(this.getDiff().result,a);a.data=i}else if("hasNext"in a&&a.hasNext){var j=this.getDiff();a.data=g.merge(j.result,a.data)}this.graphQLErrors=h,"no-cache"===c.fetchPolicy?this.updateLastDiff({result:a.data,complete:!0},this.getDiffOptions(c.variables)):0!==d&&(aR(a,c.errorPolicy)?this.cache.performTransaction(function(e){if(f.shouldWrite(a,c.variables))e.writeQuery({query:b,data:a.data,variables:c.variables,overwrite:1===d}),f.lastWrite={result:a,variables:c.variables,dmCount:aO.get(f.cache)};else if(f.lastDiff&&f.lastDiff.diff.complete){a.data=f.lastDiff.diff.result;return}var g=f.getDiffOptions(c.variables),h=(0,v.muteDeprecations)("canonizeResults",function(){return e.diff(g)});!f.stopped&&(0,ax.equal)(f.variables,c.variables)&&f.updateWatch(c.variables),f.updateLastDiff(h,g),h.complete&&(a.data=h.result)}):this.lastWrite=void 0)},a.prototype.markReady=function(){return this.networkError=null,this.networkStatus=aN.NetworkStatus.ready},a.prototype.markError=function(a){var b;return this.networkStatus=aN.NetworkStatus.error,this.lastWrite=void 0,null==(b=this.observableQuery)||b.resetNotifications(),a.graphQLErrors&&(this.graphQLErrors=a.graphQLErrors),a.networkError&&(this.networkError=a.networkError),a},a}();function aR(a,b){void 0===b&&(b="none");var c="ignore"===b||"all"===b,d=!az(a);return!d&&c&&a.data&&(d=!0),d}var aS=a.i(12623),aT=F.canUseWeakMap?WeakMap:Map,aU=F.canUseWeakSet?WeakSet:Set,aV=new aS.Slot,aW=!1;function aX(){aW||(aW=!0,!1!==globalThis.__DEV__&&h.invariant.warn(64))}var aY=a.i(470702);function aZ(a,b,c){return aV.withValue(!0,function(){var d=function a(b,c,d,e,f){var g,i=d.knownChanged,j=function(a,b){if(b.has(a))return b.get(a);var c=Array.isArray(a)?[]:Object.create(null);return b.set(a,c),c}(b,d.mutableTargets);if(Array.isArray(b)){for(var k=0,l=Array.from(b.entries());k<l.length;k++){var m=l[k],n=m[0],o=m[1];if(null===o){j[n]=null;continue}var p=a(o,c,d,e,!1!==globalThis.__DEV__?"".concat(f||"","[").concat(n,"]"):void 0);i.has(p)&&i.add(j),j[n]=p}return i.has(j)?j:b}for(var q=0,r=c.selections;q<r.length;q++){var s=r[q],t=void 0;if(e&&i.add(j),s.kind===am.Kind.FIELD){var u=(0,an.resultKeyNameFromField)(s),v=s.selectionSet;if(void 0===(t=j[u]||b[u]))continue;if(v&&null!==t){var p=a(b[u],v,d,e,!1!==globalThis.__DEV__?"".concat(f||"",".").concat(u):void 0);i.has(p)&&(t=p)}!1===globalThis.__DEV__&&(j[u]=t),!1!==globalThis.__DEV__&&(!e||"__typename"===u||(null==(g=Object.getOwnPropertyDescriptor(j,u))?void 0:g.value)?(delete j[u],j[u]=t):Object.defineProperty(j,u,function(a,b,c,d,e){var f=function(){return aV.getValue()||(!1!==globalThis.__DEV__&&h.invariant.warn(60,d?"".concat(e," '").concat(d,"'"):"anonymous ".concat(e),"".concat(c,".").concat(a).replace(/^\./,"")),f=function(){return b}),b};return{get:function(){return f()},set:function(a){f=function(){return a}},enumerable:!0,configurable:!0}}(u,t,f||"",d.operationName,d.operationType)))}if(s.kind===am.Kind.INLINE_FRAGMENT&&(!s.typeCondition||d.cache.fragmentMatches(s,b.__typename))&&(t=a(b,s.selectionSet,d,e,f)),s.kind===am.Kind.FRAGMENT_SPREAD){var w=s.name.value,x=d.fragmentMap[w]||(d.fragmentMap[w]=d.cache.lookupFragment(w));(0,h.invariant)(x,59,w);var y=(0,C.getFragmentMaskMode)(s);"mask"!==y&&(t=a(b,x.selectionSet,d,"migrate"===y,f))}i.has(t)&&i.add(j)}return"__typename"in b&&!("__typename"in j)&&(j.__typename=b.__typename),Object.keys(j).length!==Object.keys(b).length&&i.add(j),i.has(j)?j:b}(a,b,c,!1);return Object.isFrozen(a)&&(0,aY.maybeDeepFreeze)(d),d})}function a$(a,b,c,d){if(!c.fragmentMatches)return!1!==globalThis.__DEV__&&aX(),a;var e=b.definitions.filter(function(a){return a.kind===am.Kind.FRAGMENT_DEFINITION});void 0===d&&((0,h.invariant)(1===e.length,61,e.length),d=e[0].name.value);var f=e.find(function(a){return a.name.value===d});return((0,h.invariant)(!!f,62,d),null==a||(0,ax.default)(a,{}))?a:aZ(a,f.selectionSet,{operationType:"fragment",operationName:f.name.value,fragmentMap:(0,ao.createFragmentMap)((0,u.getFragmentDefinitions)(b)),cache:c,mutableTargets:new aT,knownChanged:new aU})}var a_=Object.prototype.hasOwnProperty,a0=Object.create(null),a1=function(){function a(a){var b=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new ae.AutoCleanedWeakCache(af.cacheSizes["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new aH.Trie(!1),this.noCacheWarningsByQueryId=new Set;var c=new aL(function(a){return b.cache.transformDocument(a)},{cache:!1});this.cache=a.cache,this.link=a.link,this.defaultOptions=a.defaultOptions,this.queryDeduplication=a.queryDeduplication,this.clientAwareness=a.clientAwareness,this.localState=a.localState,this.ssrMode=a.ssrMode,this.assumeImmutableResults=a.assumeImmutableResults,this.dataMasking=a.dataMasking;var d=a.documentTransform;this.documentTransform=d?c.concat(d).concat(c):c,this.defaultContext=a.defaultContext||Object.create(null),(this.onBroadcast=a.onBroadcast)&&(this.mutationStore=Object.create(null))}return a.prototype.stop=function(){var a=this;this.queries.forEach(function(b,c){a.stopQueryNoBroadcast(c)}),this.cancelPendingFetches((0,h.newInvariantError)(35))},a.prototype.cancelPendingFetches=function(a){this.fetchCancelFns.forEach(function(b){return b(a)}),this.fetchCancelFns.clear()},a.prototype.mutate=function(a){return(0,g.__awaiter)(this,arguments,void 0,function(a){var b,c,d,e,f,i,j,k=a.mutation,l=a.variables,m=a.optimisticResponse,n=a.updateQueries,o=a.refetchQueries,p=void 0===o?[]:o,q=a.awaitRefetchQueries,r=void 0!==q&&q,s=a.update,t=a.onQueryUpdated,u=a.fetchPolicy,v=void 0===u?(null==(i=this.defaultOptions.mutate)?void 0:i.fetchPolicy)||"network-only":u,w=a.errorPolicy,x=void 0===w?(null==(j=this.defaultOptions.mutate)?void 0:j.errorPolicy)||"none":w,y=a.keepRootFields,z=a.context;return(0,g.__generator)(this,function(a){switch(a.label){case 0:if((0,h.invariant)(k,36),(0,h.invariant)("network-only"===v||"no-cache"===v,37),b=this.generateMutationId(),k=this.cache.transformForLink(this.transform(k)),c=this.getDocumentInfo(k).hasClientExports,l=this.getVariables(k,l),!c)return[3,2];return[4,this.localState.addExportedVariables(k,l,z)];case 1:l=a.sent(),a.label=2;case 2:return d=this.mutationStore&&(this.mutationStore[b]={mutation:k,variables:l,loading:!0,error:null}),e=m&&this.markMutationOptimistic(m,{mutationId:b,document:k,variables:l,fetchPolicy:v,errorPolicy:x,context:z,updateQueries:n,update:s,keepRootFields:y}),this.broadcastQueries(),f=this,[2,new Promise(function(a,c){return aB(f.getObservableFromLink(k,(0,g.__assign)((0,g.__assign)({},z),{optimisticResponse:e?m:void 0}),l,{},!1),function(a){if(az(a)&&"none"===x)throw new I.ApolloError({graphQLErrors:aA(a)});d&&(d.loading=!1,d.error=null);var c=(0,g.__assign)({},a);return"function"==typeof p&&(p=p(c)),"ignore"===x&&az(c)&&delete c.errors,f.markMutationResult({mutationId:b,result:c,document:k,variables:l,fetchPolicy:v,errorPolicy:x,context:z,update:s,updateQueries:n,awaitRefetchQueries:r,refetchQueries:p,removeOptimistic:e?b:void 0,onQueryUpdated:t,keepRootFields:y})}).subscribe({next:function(c){f.broadcastQueries(),"hasNext"in c&&!1!==c.hasNext||a((0,g.__assign)((0,g.__assign)({},c),{data:f.maskOperation({document:k,data:c.data,fetchPolicy:v,id:b})}))},error:function(a){d&&(d.loading=!1,d.error=a),e&&f.cache.removeOptimistic(b),f.broadcastQueries(),c(a instanceof I.ApolloError?a:new I.ApolloError({networkError:a}))}})})]}})})},a.prototype.markMutationResult=function(a,b){var c=this;void 0===b&&(b=this.cache);var d=a.result,e=[],f="no-cache"===a.fetchPolicy;if(!f&&aR(d,a.errorPolicy)){if(Q(d)||e.push({result:d.data,dataId:"ROOT_MUTATION",query:a.document,variables:a.variables}),Q(d)&&(0,K.isNonEmptyArray)(d.incremental)){var h=b.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(a.document).asQuery,variables:a.variables,optimistic:!1,returnPartialData:!0}),i=void 0;h.result&&(i=R(h.result,d)),void 0!==i&&(d.data=i,e.push({result:i,dataId:"ROOT_MUTATION",query:a.document,variables:a.variables}))}var j=a.updateQueries;j&&this.queries.forEach(function(a,f){var g=a.observableQuery,h=g&&g.queryName;if(h&&a_.call(j,h)){var i=j[h],k=c.queries.get(f),l=k.document,m=k.variables,n=b.diff({query:l,variables:m,returnPartialData:!0,optimistic:!1}),o=n.result;if(n.complete&&o){var p=i(o,{mutationResult:d,queryName:l&&(0,u.getOperationName)(l)||void 0,queryVariables:m});p&&e.push({result:p,dataId:"ROOT_QUERY",query:l,variables:m})}}})}if(e.length>0||(a.refetchQueries||"").length>0||a.update||a.onQueryUpdated||a.removeOptimistic){var k=[];if(this.refetchQueries({updateCache:function(b){f||e.forEach(function(a){return b.write(a)});var h,i=a.update,j=!(Q(h=d)||"hasNext"in h&&"data"in h)||Q(d)&&!d.hasNext;if(i){if(!f){var k=b.diff({id:"ROOT_MUTATION",query:c.getDocumentInfo(a.document).asQuery,variables:a.variables,optimistic:!1,returnPartialData:!0});k.complete&&("incremental"in(d=(0,g.__assign)((0,g.__assign)({},d),{data:k.result}))&&delete d.incremental,"hasNext"in d&&delete d.hasNext)}j&&i(b,d,{context:a.context,variables:a.variables})}f||a.keepRootFields||!j||b.modify({id:"ROOT_MUTATION",fields:function(a,b){var c=b.fieldName,d=b.DELETE;return"__typename"===c?a:d}})},include:a.refetchQueries,optimistic:!1,removeOptimistic:a.removeOptimistic,onQueryUpdated:a.onQueryUpdated||null}).forEach(function(a){return k.push(a)}),a.awaitRefetchQueries||a.onQueryUpdated)return Promise.all(k).then(function(){return d})}return Promise.resolve(d)},a.prototype.markMutationOptimistic=function(a,b){var c=this,d="function"==typeof a?a(b.variables,{IGNORE:a0}):a;return d!==a0&&(this.cache.recordOptimisticTransaction(function(a){try{c.markMutationResult((0,g.__assign)((0,g.__assign)({},b),{result:{data:d}}),a)}catch(a){!1!==globalThis.__DEV__&&h.invariant.error(a)}},b.mutationId),!0)},a.prototype.fetchQuery=function(a,b,c){return this.fetchConcastWithInfo(this.getOrCreateQuery(a),b,c).concast.promise},a.prototype.getQueryStore=function(){var a=Object.create(null);return this.queries.forEach(function(b,c){a[c]={variables:b.variables,networkStatus:b.networkStatus,networkError:b.networkError,graphQLErrors:b.graphQLErrors}}),a},a.prototype.resetErrors=function(a){var b=this.queries.get(a);b&&(b.networkError=void 0,b.graphQLErrors=[])},a.prototype.transform=function(a){return this.documentTransform.transformDocument(a)},a.prototype.getDocumentInfo=function(a){var b=this.transformCache;if(!b.has(a)){var c={hasClientExports:(0,C.hasClientExports)(a),hasForcedResolvers:this.localState.shouldForceResolvers(a),hasNonreactiveDirective:(0,C.hasDirectives)(["nonreactive"],a),nonReactiveQuery:((0,u.checkDocument)(a),(0,Z.visit)(a,{FragmentSpread:function(a){var b;if(null==(b=a.directives)||!b.some(function(a){return"unmask"===a.name.value}))return(0,g.__assign)((0,g.__assign)({},a),{directives:(0,g.__spreadArray)((0,g.__spreadArray)([],a.directives||[],!0),[{kind:am.Kind.DIRECTIVE,name:{kind:am.Kind.NAME,value:"nonreactive"}}],!1)})}})),clientQuery:this.localState.clientQuery(a),serverQuery:ar([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],a),defaultVars:(0,u.getDefaultValues)((0,u.getOperationDefinition)(a)),asQuery:(0,g.__assign)((0,g.__assign)({},a),{definitions:a.definitions.map(function(a){return"OperationDefinition"===a.kind&&"query"!==a.operation?(0,g.__assign)((0,g.__assign)({},a),{operation:"query"}):a})})};b.set(a,c)}return b.get(a)},a.prototype.getVariables=function(a,b){return(0,g.__assign)((0,g.__assign)({},this.getDocumentInfo(a).defaultVars),b)},a.prototype.watchQuery=function(a){var b=this.transform(a.query);void 0===(a=(0,g.__assign)((0,g.__assign)({},a),{variables:this.getVariables(b,a.variables)})).notifyOnNetworkStatusChange&&(a.notifyOnNetworkStatusChange=!1);var c=new aQ(this),d=new aM.ObservableQuery({queryManager:this,queryInfo:c,options:a});return d.lastQuery=b,aM.ObservableQuery.inactiveOnCreation.getValue()||this.queries.set(d.queryId,c),c.init({document:b,observableQuery:d,variables:d.variables}),d},a.prototype.query=function(a,b){var c=this;void 0===b&&(b=this.generateQueryId()),(0,h.invariant)(a.query,38),(0,h.invariant)("Document"===a.query.kind,39),(0,h.invariant)(!a.returnPartialData,40),(0,h.invariant)(!a.pollInterval,41);var d=this.transform(a.query);return this.fetchQuery(b,(0,g.__assign)((0,g.__assign)({},a),{query:d})).then(function(e){return e&&(0,g.__assign)((0,g.__assign)({},e),{data:c.maskOperation({document:d,data:e.data,fetchPolicy:a.fetchPolicy,id:b})})}).finally(function(){return c.stopQuery(b)})},a.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},a.prototype.generateRequestId=function(){return this.requestIdCounter++},a.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},a.prototype.stopQueryInStore=function(a){this.stopQueryInStoreNoBroadcast(a),this.broadcastQueries()},a.prototype.stopQueryInStoreNoBroadcast=function(a){var b=this.queries.get(a);b&&b.stop()},a.prototype.clearStore=function(a){return void 0===a&&(a={discardWatches:!0}),this.cancelPendingFetches((0,h.newInvariantError)(42)),this.queries.forEach(function(a){a.observableQuery?a.networkStatus=aN.NetworkStatus.loading:a.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(a)},a.prototype.getObservableQueries=function(a){var b=this;void 0===a&&(a="active");var c=new Map,d=new Map,e=new Map,f=new Set;return Array.isArray(a)&&a.forEach(function(a){if("string"==typeof a)d.set(a,a),e.set(a,!1);else if((0,an.isDocumentNode)(a)){var c=ah(b.transform(a));d.set(c,(0,u.getOperationName)(a)),e.set(c,!1)}else(0,J.isNonNullObject)(a)&&a.query&&f.add(a)}),this.queries.forEach(function(b,d){var f=b.observableQuery,g=b.document;if(f){if("all"===a)return void c.set(d,f);var h=f.queryName;if("standby"===f.options.fetchPolicy||"active"===a&&!f.hasObservers())return;("active"===a||h&&e.has(h)||g&&e.has(ah(g)))&&(c.set(d,f),h&&e.set(h,!0),g&&e.set(ah(g),!0))}}),f.size&&f.forEach(function(a){var d=(0,aG.makeUniqueId)("legacyOneTimeQuery"),e=b.getOrCreateQuery(d).init({document:a.query,variables:a.variables}),f=new aM.ObservableQuery({queryManager:b,queryInfo:e,options:(0,g.__assign)((0,g.__assign)({},a),{fetchPolicy:"network-only"})});(0,h.invariant)(f.queryId===d),e.setObservableQuery(f),c.set(d,f)}),!1!==globalThis.__DEV__&&e.size&&e.forEach(function(a,b){if(!a){var c=d.get(b);c?!1!==globalThis.__DEV__&&h.invariant.warn(43,c):!1!==globalThis.__DEV__&&h.invariant.warn(44)}}),c},a.prototype.reFetchObservableQueries=function(a){var b=this;void 0===a&&(a=!1);var c=[];return this.getObservableQueries(a?"all":"active").forEach(function(d,e){var f=d.options.fetchPolicy;(0,v.muteDeprecations)("resetLastResults",function(){return d.resetLastResults()}),(a||"standby"!==f&&"cache-only"!==f)&&c.push(d.refetch()),(b.queries.get(e)||d.queryInfo).setDiff(null)}),this.broadcastQueries(),Promise.all(c)},a.prototype.startGraphQLSubscription=function(a){var b=this,c=a.query,d=a.variables,e=a.fetchPolicy,f=a.errorPolicy,g=void 0===f?"none":f,h=a.context,i=void 0===h?{}:h,j=a.extensions,k=void 0===j?{}:j;c=this.transform(c),d=this.getVariables(c,d);var l=function(a){return b.getObservableFromLink(c,i,a,k).map(function(d){"no-cache"!==e&&(aR(d,g)&&b.cache.write({query:c,result:d.data,dataId:"ROOT_SUBSCRIPTION",variables:a}),b.broadcastQueries());var f=az(d),h=(0,I.graphQLResultHasProtocolErrors)(d);if(f||h){var i={};if(f&&(i.graphQLErrors=d.errors),h&&(i.protocolErrors=d.extensions[I.PROTOCOL_ERRORS_SYMBOL]),"none"===g||h)throw new I.ApolloError(i)}return"ignore"===g&&delete d.errors,d})};if(this.getDocumentInfo(c).hasClientExports){var m=this.localState.addExportedVariables(c,d,i).then(l);return new t.Observable(function(a){var b=null;return m.then(function(c){return b=c.subscribe(a)},a.error),function(){return b&&b.unsubscribe()}})}return l(d)},a.prototype.stopQuery=function(a){this.stopQueryNoBroadcast(a),this.broadcastQueries()},a.prototype.stopQueryNoBroadcast=function(a){this.stopQueryInStoreNoBroadcast(a),this.removeQuery(a)},a.prototype.removeQuery=function(a){var b;this.fetchCancelFns.delete(a),this.queries.has(a)&&(null==(b=this.queries.get(a))||b.stop(),this.queries.delete(a))},a.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(a){var b;return null==(b=a.observableQuery)?void 0:b.notify()})},a.prototype.getLocalState=function(){return this.localState},a.prototype.getObservableFromLink=function(a,b,c,d,e){var f,h,i=this;void 0===e&&(e=null!=(f=null==b?void 0:b.queryDeduplication)?f:this.queryDeduplication);var j=this.getDocumentInfo(a),k=j.serverQuery,l=j.clientQuery;if(k){var m=this.inFlightLinkObservables,n=this.link,o={query:k,variables:c,operationName:(0,u.getOperationName)(k)||void 0,context:this.prepareContext((0,g.__assign)((0,g.__assign)({},b),{forceFetch:!e})),extensions:d};if(b=o.context,e){var p=ah(k),q=(0,ay.canonicalStringify)(c),r=m.lookup(p,q);if(!(h=r.observable)){var s=new aF([A(n,o)]);h=r.observable=s,s.beforeNext(function a(b,c){"next"===b&&"hasNext"in c&&c.hasNext?s.beforeNext(a):m.remove(p,q)})}}else h=new aF([A(n,o)])}else h=new aF([t.Observable.of({data:{}})]),b=this.prepareContext(b);return l&&(h=aB(h,function(a){return i.localState.runResolvers({document:l,remoteResult:a,context:b,variables:c})})),h},a.prototype.getResultsFromLink=function(a,b,c){var d=a.lastRequestId=this.generateRequestId(),e=this.cache.transformForLink(c.query);return aB(this.getObservableFromLink(e,c.context,c.variables),function(f){var g=aA(f),h=g.length>0,i=c.errorPolicy;if(d>=a.lastRequestId){if(h&&"none"===i)throw a.markError(new I.ApolloError({graphQLErrors:g}));a.markResult(f,e,c,b),a.markReady()}var j={data:f.data,loading:!1,networkStatus:aN.NetworkStatus.ready};return h&&"none"===i&&(j.data=void 0),h&&"ignore"!==i&&(j.errors=g,j.networkStatus=aN.NetworkStatus.error),j},function(b){var c=(0,I.isApolloError)(b)?b:new I.ApolloError({networkError:b});throw d>=a.lastRequestId&&a.markError(c),c})},a.prototype.fetchConcastWithInfo=function(a,b,c,d){var e,f,g=this;void 0===c&&(c=aN.NetworkStatus.loading),void 0===d&&(d=b.query);var h=this.getVariables(d,b.variables),i=this.defaultOptions.watchQuery,j=b.fetchPolicy,k=void 0===j?i&&i.fetchPolicy||"cache-first":j,l=b.errorPolicy,m=void 0===l?i&&i.errorPolicy||"none":l,n=b.returnPartialData,o=b.notifyOnNetworkStatusChange,p=b.context,q=Object.assign({},b,{query:d,variables:h,fetchPolicy:k,errorPolicy:m,returnPartialData:void 0!==n&&n,notifyOnNetworkStatusChange:void 0!==o&&o,context:void 0===p?{}:p}),r=function(d){q.variables=d;var e=g.fetchQueryByPolicy(a,q,c);return"standby"!==q.fetchPolicy&&e.sources.length>0&&a.observableQuery&&a.observableQuery.applyNextFetchPolicy("after-fetch",b),e},s=function(){return g.fetchCancelFns.delete(a.queryId)};if(this.fetchCancelFns.set(a.queryId,function(a){s(),setTimeout(function(){return e.cancel(a)})}),this.getDocumentInfo(q.query).hasClientExports)e=new aF(this.localState.addExportedVariables(q.query,q.variables,q.context).then(r).then(function(a){return a.sources})),f=!0;else{var t=r(q.variables);f=t.fromLink,e=new aF(t.sources)}return e.promise.then(s,s),{concast:e,fromLink:f}},a.prototype.refetchQueries=function(a){var b=this,c=a.updateCache,d=a.include,e=a.optimistic,f=void 0!==e&&e,g=a.removeOptimistic,h=void 0===g?f?(0,aG.makeUniqueId)("refetchQueries"):void 0:g,i=a.onQueryUpdated,j=new Map;d&&this.getObservableQueries(d).forEach(function(a,c){j.set(c,{oq:a,lastDiff:(b.queries.get(c)||a.queryInfo).getDiff()})});var k=new Map;return c&&this.cache.batch({update:c,optimistic:f&&h||!1,removeOptimistic:h,onWatchUpdated:function(a,b,c){var d=a.watcher instanceof aQ&&a.watcher.observableQuery;if(d){if(i){j.delete(d.queryId);var e=i(d,b,c);return!0===e&&(e=d.refetch()),!1!==e&&k.set(d,e),e}null!==i&&j.set(d.queryId,{oq:d,lastDiff:c,diff:b})}}}),j.size&&j.forEach(function(a,c){var d,e=a.oq,f=a.lastDiff,g=a.diff;i&&(g||(g=(0,v.muteDeprecations)("canonizeResults",function(){return b.cache.diff(e.queryInfo.getDiffOptions())})),d=i(e,g,f)),i&&!0!==d||(d=e.refetch()),!1!==d&&k.set(e,d),c.indexOf("legacyOneTimeQuery")>=0&&b.stopQueryNoBroadcast(c)}),h&&this.cache.removeOptimistic(h),k},a.prototype.maskOperation=function(a){var b,c,d,e=a.document,f=a.data;if(!1!==globalThis.__DEV__){var g=a.fetchPolicy,i=a.id,j=null==(b=(0,u.getOperationDefinition)(e))?void 0:b.operation,k=(null!=(c=null==j?void 0:j[0])?c:"o")+i;!this.dataMasking||"no-cache"!==g||(0,ao.isFullyUnmaskedOperation)(e)||this.noCacheWarningsByQueryId.has(k)||(this.noCacheWarningsByQueryId.add(k),!1!==globalThis.__DEV__&&h.invariant.warn(45,null!=(d=(0,u.getOperationName)(e))?d:"Unnamed ".concat(null!=j?j:"operation")))}return this.dataMasking?function(a,b,c){if(!c.fragmentMatches)return!1!==globalThis.__DEV__&&aX(),a;var d,e=(0,u.getOperationDefinition)(b);return((0,h.invariant)(e,63),null==a)?a:aZ(a,e.selectionSet,{operationType:e.operation,operationName:null==(d=e.name)?void 0:d.value,fragmentMap:(0,ao.createFragmentMap)((0,u.getFragmentDefinitions)(b)),cache:c,mutableTargets:new aT,knownChanged:new aU})}(f,e,this.cache):f},a.prototype.maskFragment=function(a){var b=a.data,c=a.fragment,d=a.fragmentName;return this.dataMasking?a$(b,c,this.cache,d):b},a.prototype.fetchQueryByPolicy=function(a,b,c){var d=this,e=b.query,f=b.variables,h=b.fetchPolicy,i=b.refetchWritePolicy,j=b.errorPolicy,k=b.returnPartialData,l=b.context,m=b.notifyOnNetworkStatusChange,n=a.networkStatus;a.init({document:e,variables:f,networkStatus:c});var o=function(){return a.getDiff()},p=function(b,c){void 0===c&&(c=a.networkStatus||aN.NetworkStatus.loading);var h=b.result;!1===globalThis.__DEV__||k||(0,ax.equal)(h,{})||(0,aM.logMissingFieldErrors)(b.missing);var i=function(a){return t.Observable.of((0,g.__assign)({data:a,loading:(0,aN.isNetworkRequestInFlight)(c),networkStatus:c},b.complete?null:{partial:!0}))};return h&&d.getDocumentInfo(e).hasForcedResolvers?d.localState.runResolvers({document:e,remoteResult:{data:h},context:l,variables:f,onlyRunForcedResolvers:!0}).then(function(a){return i(a.data||void 0)}):"none"===j&&c===aN.NetworkStatus.refetch&&Array.isArray(b.missing)?i(void 0):i(h)},q="no-cache"===h?0:c===aN.NetworkStatus.refetch&&"merge"!==i?1:2,r=function(){return d.getResultsFromLink(a,q,{query:e,variables:f,context:l,fetchPolicy:h,errorPolicy:j})},s=m&&"number"==typeof n&&n!==c&&(0,aN.isNetworkRequestInFlight)(c);switch(h){default:case"cache-first":var u=o();if(u.complete)return{fromLink:!1,sources:[p(u,a.markReady())]};if(k||s)return{fromLink:!0,sources:[p(u),r()]};return{fromLink:!0,sources:[r()]};case"cache-and-network":var u=o();if(u.complete||k||s)return{fromLink:!0,sources:[p(u),r()]};return{fromLink:!0,sources:[r()]};case"cache-only":return{fromLink:!1,sources:[p(o(),a.markReady())]};case"network-only":if(s)return{fromLink:!0,sources:[p(o()),r()]};return{fromLink:!0,sources:[r()]};case"no-cache":if(s)return{fromLink:!0,sources:[p(a.getDiff()),r()]};return{fromLink:!0,sources:[r()]};case"standby":return{fromLink:!1,sources:[]}}},a.prototype.getOrCreateQuery=function(a){return a&&!this.queries.has(a)&&this.queries.set(a,new aQ(this,a)),this.queries.get(a)},a.prototype.prepareContext=function(a){void 0===a&&(a={});var b=this.localState.prepareContext(a);return(0,g.__assign)((0,g.__assign)((0,g.__assign)({},this.defaultContext),b),{clientAwareness:this.clientAwareness})},a}();function a2(a){return a.kind===am.Kind.FIELD||a.kind===am.Kind.FRAGMENT_SPREAD||a.kind===am.Kind.INLINE_FRAGMENT}var a3=a.i(218949),a4=new aS.Slot,a5=new WeakMap;function a6(a){var b=a5.get(a);return b||a5.set(a,b={vars:new Set,dep:(0,a3.dep)()}),b}function a7(a){a6(a).vars.forEach(function(b){return b.forgetCache(a)})}function a8(a){var b=new Set,c=new Set,d=function(f){if(arguments.length>0){if(a!==f){a=f,b.forEach(function(a){var b;a6(a).dep.dirty(d),(b=a).broadcastWatches&&b.broadcastWatches()});var g=Array.from(c);c.clear(),g.forEach(function(b){return b(a)})}}else{var h=a4.getValue();h&&(e(h),a6(h).dep(d))}return a};d.onNextChange=function(a){return c.add(a),function(){c.delete(a)}};var e=d.attachCache=function(a){return b.add(a),a6(a).vars.add(d),d};return d.forgetCache=function(a){return b.delete(a)},d}var a9=function(){function a(a){var b=a.cache,c=a.client,d=a.resolvers,e=a.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=b,c&&(this.client=c),d&&this.addResolvers(d),e&&this.setFragmentMatcher(e)}return a.prototype.addResolvers=function(a){var b=this;this.resolvers=this.resolvers||{},Array.isArray(a)?a.forEach(function(a){b.resolvers=M(b.resolvers,a)}):this.resolvers=M(this.resolvers,a)},a.prototype.setResolvers=function(a){this.resolvers={},this.addResolvers(a)},a.prototype.getResolvers=function(){return this.resolvers||{}},a.prototype.runResolvers=function(a){return(0,g.__awaiter)(this,arguments,void 0,function(a){var b=a.document,c=a.remoteResult,d=a.context,e=a.variables,f=a.onlyRunForcedResolvers,h=void 0!==f&&f;return(0,g.__generator)(this,function(a){return b?[2,this.resolveDocument(b,c.data,d,e,this.fragmentMatcher,h).then(function(a){return(0,g.__assign)((0,g.__assign)({},c),{data:a.result})})]:[2,c]})})},a.prototype.setFragmentMatcher=function(a){this.fragmentMatcher=a},a.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},a.prototype.clientQuery=function(a){return(0,C.hasDirectives)(["client"],a)&&this.resolvers?a:null},a.prototype.serverQuery=function(a){return at(a)},a.prototype.prepareContext=function(a){var b=this.cache;return(0,g.__assign)((0,g.__assign)({},a),{cache:b,getCacheKey:function(a){return b.identify(a)}})},a.prototype.addExportedVariables=function(a){return(0,g.__awaiter)(this,arguments,void 0,function(a,b,c){return void 0===b&&(b={}),void 0===c&&(c={}),(0,g.__generator)(this,function(d){return a?[2,this.resolveDocument(a,this.buildRootValueFromCache(a,b)||{},this.prepareContext(c),b).then(function(a){return(0,g.__assign)((0,g.__assign)({},b),a.exportedVariables)})]:[2,(0,g.__assign)({},b)]})})},a.prototype.shouldForceResolvers=function(a){var b=!1;return(0,Z.visit)(a,{Directive:{enter:function(a){if("client"===a.name.value&&a.arguments&&(b=a.arguments.some(function(a){return"always"===a.name.value&&"BooleanValue"===a.value.kind&&!0===a.value.value})))return Z.BREAK}}}),b},a.prototype.buildRootValueFromCache=function(a,b){return this.cache.diff({query:"query"===(0,u.getMainDefinition)(a).operation?a:(0,Z.visit)(a,{OperationDefinition:{enter:function(a){return(0,g.__assign)((0,g.__assign)({},a),{operation:"query"})}}}),variables:b,returnPartialData:!0,optimistic:!1}).result},a.prototype.resolveDocument=function(a,b){return(0,g.__awaiter)(this,arguments,void 0,function(a,b,c,d,e,f){var h,i,j,k,l,m,n,o,p,q;return void 0===c&&(c={}),void 0===d&&(d={}),void 0===e&&(e=function(){return!0}),void 0===f&&(f=!1),(0,g.__generator)(this,function(r){return h=(0,u.getMainDefinition)(a),i=(0,u.getFragmentDefinitions)(a),j=(0,ao.createFragmentMap)(i),k=this.collectSelectionsToResolve(h,j),m=(l=h.operation)?l.charAt(0).toUpperCase()+l.slice(1):"Query",n=this,o=n.cache,p=n.client,q={fragmentMap:j,context:(0,g.__assign)((0,g.__assign)({},c),{cache:o,client:p}),variables:d,fragmentMatcher:e,defaultOperationType:m,exportedVariables:{},selectionsToResolve:k,onlyRunForcedResolvers:f},[2,this.resolveSelectionSet(h.selectionSet,!1,b,q).then(function(a){return{result:a,exportedVariables:q.exportedVariables}})]})})},a.prototype.resolveSelectionSet=function(a,b,c,d){return(0,g.__awaiter)(this,void 0,void 0,function(){var e,f,i,j,k,l=this;return(0,g.__generator)(this,function(m){return e=d.fragmentMap,f=d.context,i=d.variables,j=[c],k=function(a){return(0,g.__awaiter)(l,void 0,void 0,function(){var k,l;return(0,g.__generator)(this,function(g){return(b||d.selectionsToResolve.has(a))&&(0,C.shouldInclude)(a,i)?(0,an.isField)(a)?[2,this.resolveField(a,b,c,d).then(function(b){var c;void 0!==b&&j.push(((c={})[(0,an.resultKeyNameFromField)(a)]=b,c))})]:((0,an.isInlineFragment)(a)?k=a:(k=e[a.name.value],(0,h.invariant)(k,21,a.name.value)),k&&k.typeCondition&&(l=k.typeCondition.name.value,d.fragmentMatcher(c,l,f)))?[2,this.resolveSelectionSet(k.selectionSet,b,c,d).then(function(a){j.push(a)})]:[2]:[2]})})},[2,Promise.all(a.selections.map(k)).then(function(){return N(j)})]})})},a.prototype.resolveField=function(a,b,c,d){return(0,g.__awaiter)(this,void 0,void 0,function(){var e,f,h,i,j,k,l,m,n,o=this;return(0,g.__generator)(this,function(g){return c?(e=d.variables,i=(f=a.name.value)!==(h=(0,an.resultKeyNameFromField)(a)),k=Promise.resolve(j=c[h]||c[f]),(!d.onlyRunForcedResolvers||this.shouldForceResolvers(a))&&(l=c.__typename||d.defaultOperationType,(m=this.resolvers&&this.resolvers[l])&&(n=m[i?f:h])&&(k=Promise.resolve(a4.withValue(this.cache,n,[c,(0,an.argumentsObjectFromField)(a,e),d.context,{field:a,fragmentMap:d.fragmentMap}])))),[2,k.then(function(c){if(void 0===c&&(c=j),a.directives&&a.directives.forEach(function(a){"export"===a.name.value&&a.arguments&&a.arguments.forEach(function(a){"as"===a.name.value&&"StringValue"===a.value.kind&&(d.exportedVariables[a.value.value]=c)})}),!a.selectionSet||null==c)return c;var e,f,g=null!=(f=null==(e=a.directives)?void 0:e.some(function(a){return"client"===a.name.value}))&&f;return Array.isArray(c)?o.resolveSubSelectedArray(a,b||g,c,d):a.selectionSet?o.resolveSelectionSet(a.selectionSet,b||g,c,d):void 0})]):[2,null]})})},a.prototype.resolveSubSelectedArray=function(a,b,c,d){var e=this;return Promise.all(c.map(function(c){return null===c?null:Array.isArray(c)?e.resolveSubSelectedArray(a,b,c,d):a.selectionSet?e.resolveSelectionSet(a.selectionSet,b,c,d):void 0}))},a.prototype.collectSelectionsToResolve=function(a,b){var c=function(a){return!Array.isArray(a)},d=this.selectionsToResolveCache;return function a(e){if(!d.has(e)){var f=new Set;d.set(e,f),(0,Z.visit)(e,{Directive:function(a,b,d,e,g){"client"===a.name.value&&g.forEach(function(a){c(a)&&a2(a)&&f.add(a)})},FragmentSpread:function(d,e,g,i,j){var k=b[d.name.value];(0,h.invariant)(k,22,d.name.value);var l=a(k);l.size>0&&(j.forEach(function(a){c(a)&&a2(a)&&f.add(a)}),f.add(d),l.forEach(function(a){f.add(a)}))}})}return d.get(e)}(a)},a}(),ba=a.i(90431),bb=function(){function a(a){var b,c,d,e=this;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!a.cache)throw(0,h.newInvariantError)(16);var f=a.uri,i=a.credentials,j=a.headers,k=a.cache,l=a.documentTransform,m=a.ssrMode,n=void 0!==m&&m,o=a.ssrForceFetchDelay,p=void 0===o?0:o,q=a.connectToDevTools,r=a.queryDeduplication,s=void 0===r||r,t=a.defaultOptions,u=a.defaultContext,w=a.assumeImmutableResults,x=void 0===w?k.assumeImmutableResults:w,y=a.resolvers,A=a.typeDefs,C=a.fragmentMatcher,D=a.clientAwareness,E=a.name,F=a.version,G=a.devtools,H=a.dataMasking;!1!==globalThis.__DEV__&&((0,v.warnRemovedOption)(a,"connectToDevTools","ApolloClient","Please use `devtools.enabled` instead."),(0,v.warnRemovedOption)(a,"uri","ApolloClient","Please initialize an instance of `HttpLink` with `uri` instead."),(0,v.warnRemovedOption)(a,"credentials","ApolloClient","Please initialize an instance of `HttpLink` with `credentials` instead."),(0,v.warnRemovedOption)(a,"headers","ApolloClient","Please initialize an instance of `HttpLink` with `headers` instead."),(0,v.warnRemovedOption)(a,"name","ApolloClient","Please use the `clientAwareness.name` option instead."),(0,v.warnRemovedOption)(a,"version","ApolloClient","Please use the `clientAwareness.version` option instead."),(0,v.warnRemovedOption)(a,"typeDefs","ApolloClient"),a.link||!1===globalThis.__DEV__||h.invariant.warn(17));var I=a.link;I||(I=f?new aw({uri:f,credentials:i,headers:j}):z.empty()),this.link=I,this.cache=k,this.disableNetworkFetches=n||p>0,this.queryDeduplication=s,this.defaultOptions=t||Object.create(null),this.typeDefs=A,this.devtoolsConfig=(0,g.__assign)((0,g.__assign)({},G),{enabled:null!=(b=null==G?void 0:G.enabled)?b:q}),void 0===this.devtoolsConfig.enabled&&(this.devtoolsConfig.enabled=!1!==globalThis.__DEV__),p&&setTimeout(function(){return e.disableNetworkFetches=!1},p),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=B.version,this.localState=new a9({cache:k,client:this,resolvers:y,fragmentMatcher:C}),this.queryManager=new a1({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:u,documentTransform:l,queryDeduplication:s,ssrMode:n,dataMasking:!!H,clientAwareness:{name:null!=(c=null==D?void 0:D.name)?c:E,version:null!=(d=null==D?void 0:D.version)?d:F},localState:this.localState,assumeImmutableResults:x,onBroadcast:this.devtoolsConfig.enabled?function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.getQueryStore(),mutations:e.queryManager.mutationStore||{}},dataWithOptimisticResults:e.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return Object.defineProperty(a.prototype,"prioritizeCacheValues",{get:function(){return this.disableNetworkFetches},set:function(a){this.disableNetworkFetches=a},enumerable:!1,configurable:!0}),a.prototype.connectToDevTools=function(){},Object.defineProperty(a.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),a.prototype.stop=function(){this.queryManager.stop()},a.prototype.watchQuery=function(a){return this.defaultOptions.watchQuery&&(a=(0,ba.mergeOptions)(this.defaultOptions.watchQuery,a)),this.disableNetworkFetches&&("network-only"===a.fetchPolicy||"cache-and-network"===a.fetchPolicy)&&(a=(0,g.__assign)((0,g.__assign)({},a),{fetchPolicy:"cache-first"})),!1!==globalThis.__DEV__&&((0,v.warnRemovedOption)(a,"canonizeResults","client.watchQuery"),(0,v.warnRemovedOption)(a,"partialRefetch","client.watchQuery")),this.queryManager.watchQuery(a)},a.prototype.query=function(a){return this.defaultOptions.query&&(a=(0,ba.mergeOptions)(this.defaultOptions.query,a)),(0,h.invariant)("cache-and-network"!==a.fetchPolicy,18),this.disableNetworkFetches&&"network-only"===a.fetchPolicy&&(a=(0,g.__assign)((0,g.__assign)({},a),{fetchPolicy:"cache-first"})),!1!==globalThis.__DEV__&&((0,v.warnRemovedOption)(a,"canonizeResults","client.query"),(0,v.warnRemovedOption)(a,"notifyOnNetworkStatusChange","client.query","This option does not affect `client.query` and can be safely removed."),"standby"===a.fetchPolicy&&!1!==globalThis.__DEV__&&h.invariant.warn(19)),this.queryManager.query(a)},a.prototype.mutate=function(a){return this.defaultOptions.mutate&&(a=(0,ba.mergeOptions)(this.defaultOptions.mutate,a)),this.queryManager.mutate(a)},a.prototype.subscribe=function(a){var b=this,c=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(a).map(function(d){return(0,g.__assign)((0,g.__assign)({},d),{data:b.queryManager.maskOperation({document:a.query,data:d.data,fetchPolicy:a.fetchPolicy,id:c})})})},a.prototype.readQuery=function(a,b){return void 0===b&&(b=!1),this.cache.readQuery(a,b)},a.prototype.watchFragment=function(a){var b;return this.cache.watchFragment((0,g.__assign)((0,g.__assign)({},a),((b={})[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,b)))},a.prototype.readFragment=function(a,b){return void 0===b&&(b=!1),this.cache.readFragment(a,b)},a.prototype.writeQuery=function(a){var b=this.cache.writeQuery(a);return!1!==a.broadcast&&this.queryManager.broadcastQueries(),b},a.prototype.writeFragment=function(a){var b=this.cache.writeFragment(a);return!1!==a.broadcast&&this.queryManager.broadcastQueries(),b},a.prototype.__actionHookForDevTools=function(a){this.devToolsHookCb=a},a.prototype.__requestRaw=function(a){return A(this.link,a)},a.prototype.resetStore=function(){var a=this;return Promise.resolve().then(function(){return a.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(a.resetStoreCallbacks.map(function(a){return a()}))}).then(function(){return a.reFetchObservableQueries()})},a.prototype.clearStore=function(){var a=this;return Promise.resolve().then(function(){return a.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(a.clearStoreCallbacks.map(function(a){return a()}))})},a.prototype.onResetStore=function(a){var b=this;return this.resetStoreCallbacks.push(a),function(){b.resetStoreCallbacks=b.resetStoreCallbacks.filter(function(b){return b!==a})}},a.prototype.onClearStore=function(a){var b=this;return this.clearStoreCallbacks.push(a),function(){b.clearStoreCallbacks=b.clearStoreCallbacks.filter(function(b){return b!==a})}},a.prototype.reFetchObservableQueries=function(a){return this.queryManager.reFetchObservableQueries(a)},a.prototype.refetchQueries=function(a){var b=this.queryManager.refetchQueries(a),c=[],d=[];b.forEach(function(a,b){c.push(b),d.push(a)});var e=Promise.all(d);return e.queries=c,e.results=d,e.catch(function(a){!1!==globalThis.__DEV__&&h.invariant.debug(20,a)}),e},a.prototype.getObservableQueries=function(a){return void 0===a&&(a="active"),this.queryManager.getObservableQueries(a)},a.prototype.extract=function(a){return this.cache.extract(a)},a.prototype.restore=function(a){return this.cache.restore(a)},a.prototype.addResolvers=function(a){this.localState.addResolvers(a)},a.prototype.setResolvers=function(a){this.localState.setResolvers(a)},a.prototype.getResolvers=function(){return this.localState.getResolvers()},a.prototype.setLocalStateFragmentMatcher=function(a){this.localState.setFragmentMatcher(a)},a.prototype.setLink=function(a){this.link=this.queryManager.link=a},Object.defineProperty(a.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),a}();!1!==globalThis.__DEV__&&(bb.prototype.getMemoryInternals=ag.getApolloClientMemoryInternals);var bc=a.i(762799),bd=function(){function a(){this.assumeImmutableResults=!1,this.getFragmentDoc=(0,aJ.wrap)(ao.getFragmentQueryDocument,{max:af.cacheSizes["cache.fragmentQueryDocuments"]||1e3,cache:aI.WeakCache})}return a.prototype.lookupFragment=function(a){return null},a.prototype.batch=function(a){var b,c=this,d="string"==typeof a.optimistic?a.optimistic:!1===a.optimistic?null:void 0;return this.performTransaction(function(){return b=a.update(c)},d),b},a.prototype.recordOptimisticTransaction=function(a,b){this.performTransaction(a,b)},a.prototype.transformDocument=function(a){return a},a.prototype.transformForLink=function(a){return a},a.prototype.identify=function(a){},a.prototype.gc=function(){return[]},a.prototype.modify=function(a){return!1},a.prototype.readQuery=function(a,b){var c=this;return void 0===b&&(b=!!a.optimistic),!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.readQuery"),(0,v.muteDeprecations)("canonizeResults",function(){return c.read((0,g.__assign)((0,g.__assign)({},a),{rootId:a.id||"ROOT_QUERY",optimistic:b}))})},a.prototype.watchFragment=function(a){var b,c=this,d=a.fragment,e=a.fragmentName,f=a.from,i=a.optimistic,j=(0,g.__rest)(a,["fragment","fragmentName","from","optimistic"]),k=this.getFragmentDoc(d,e),l=void 0===f||"string"==typeof f?f:this.identify(f),m=!!a[Symbol.for("apollo.dataMasking")];if(!1!==globalThis.__DEV__){var n=e||(0,u.getFragmentDefinition)(d).name.value;l||!1===globalThis.__DEV__||h.invariant.warn(1,n)}var o=(0,g.__assign)((0,g.__assign)({},j),{returnPartialData:!0,id:l,query:k,optimistic:void 0===i||i});return new t.Observable(function(f){return c.watch((0,g.__assign)((0,g.__assign)({},o),{immediate:!0,callback:function(h){var i=m?a$(h.result,d,c,e):h.result;if(!(b&&(0,bc.equalByQuery)(k,{data:b.result},{data:i},a.variables))){var j={data:i,complete:!!h.complete};h.missing&&(j.missing=N(h.missing.map(function(a){return a.missing}))),b=(0,g.__assign)((0,g.__assign)({},h),{result:i}),f.next(j)}}}))})},a.prototype.readFragment=function(a,b){var c=this;return void 0===b&&(b=!!a.optimistic),!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.readFragment"),(0,v.muteDeprecations)("canonizeResults",function(){return c.read((0,g.__assign)((0,g.__assign)({},a),{query:c.getFragmentDoc(a.fragment,a.fragmentName),rootId:a.id,optimistic:b}))})},a.prototype.writeQuery=function(a){var b=a.id,c=a.data,d=(0,g.__rest)(a,["id","data"]);return this.write(Object.assign(d,{dataId:b||"ROOT_QUERY",result:c}))},a.prototype.writeFragment=function(a){var b=a.id,c=a.data,d=a.fragment,e=a.fragmentName,f=(0,g.__rest)(a,["id","data","fragment","fragmentName"]);return this.write(Object.assign(f,{query:this.getFragmentDoc(d,e),dataId:b,result:c}))},a.prototype.updateQuery=function(a,b){return!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.updateQuery"),this.batch({update:function(c){var d=(0,v.muteDeprecations)("canonizeResults",function(){return c.readQuery(a)}),e=b(d);return null==e?d:(c.writeQuery((0,g.__assign)((0,g.__assign)({},a),{data:e})),e)}})},a.prototype.updateFragment=function(a,b){return!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.updateFragment"),this.batch({update:function(c){var d=(0,v.muteDeprecations)("canonizeResults",function(){return c.readFragment(a)}),e=b(d);return null==e?d:(c.writeFragment((0,g.__assign)((0,g.__assign)({},a),{data:e})),e)}})},a}();!1!==globalThis.__DEV__&&(bd.prototype.getMemoryInternals=ag.getApolloCacheMemoryInternals);var be=function(a){function b(c,d,e,f){var g,h=a.call(this,c)||this;if(h.message=c,h.path=d,h.query=e,h.variables=f,Array.isArray(h.path)){h.missing=h.message;for(var i=h.path.length-1;i>=0;--i)(g={})[h.path[i]]=h.missing,h.missing=g}else h.missing=h.path;return h.__proto__=b.prototype,h}return(0,g.__extends)(b,a),b}(Error),bf=a.i(381322),bg=Object.prototype.hasOwnProperty;function bh(a){return null==a}function bi(a,b){var c=a.__typename,d=a.id,e=a._id;if("string"==typeof c&&(b&&(b.keyObject=bh(d)?bh(e)?void 0:{_id:e}:{id:d}),bh(d)&&!bh(e)&&(d=e),!bh(d)))return"".concat(c,":").concat("number"==typeof d||"string"==typeof d?d:JSON.stringify(d))}var bj={dataIdFromObject:bi,addTypename:!0,resultCaching:!0,canonizeResults:!1};function bk(a){var b=a.canonizeResults;return void 0===b?bj.canonizeResults:b}var bl=/^[_a-z][_0-9a-z]*/i;function bm(a){var b=a.match(bl);return b?b[0]:a}function bn(a){return(0,J.isNonNullObject)(a)&&!(0,an.isReference)(a)&&!(0,K.isArray)(a)}function bo(a,b){var c=(0,ao.createFragmentMap)((0,u.getFragmentDefinitions)(a));return{fragmentMap:c,lookupFragment:function(a){var d=c[a];return!d&&b&&(d=b.lookup(a)),d||null}}}var bp=Object.create(null),bq=function(){return bp},br=Object.create(null),bs=function(){function a(a,b){var c=this;this.policies=a,this.group=b,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(a,b){return(0,aY.maybeDeepFreeze)((0,an.isReference)(a)?c.get(a.__ref,b):a&&a[b])},this.canRead=function(a){return(0,an.isReference)(a)?c.has(a.__ref):"object"==typeof a},this.toReference=function(a,b){if("string"==typeof a)return(0,an.makeReference)(a);if((0,an.isReference)(a))return a;var d=c.policies.identify(a)[0];if(d){var e=(0,an.makeReference)(d);return b&&c.merge(d,a),e}}}return a.prototype.toObject=function(){return(0,g.__assign)({},this.data)},a.prototype.has=function(a){return void 0!==this.lookup(a,!0)},a.prototype.get=function(a,b){if(this.group.depend(a,b),bg.call(this.data,a)){var c=this.data[a];if(c&&bg.call(c,b))return c[b]}return"__typename"===b&&bg.call(this.policies.rootTypenamesById,a)?this.policies.rootTypenamesById[a]:this instanceof bv?this.parent.get(a,b):void 0},a.prototype.lookup=function(a,b){return(b&&this.group.depend(a,"__exists"),bg.call(this.data,a))?this.data[a]:this instanceof bv?this.parent.lookup(a,b):this.policies.rootTypenamesById[a]?Object.create(null):void 0},a.prototype.merge=function(a,b){var c,d=this;(0,an.isReference)(a)&&(a=a.__ref),(0,an.isReference)(b)&&(b=b.__ref);var e="string"==typeof a?this.lookup(c=a):a,f="string"==typeof b?this.lookup(c=b):b;if(f){(0,h.invariant)("string"==typeof c,2);var g=new P(bx).merge(e,f);if(this.data[c]=g,g!==e&&(delete this.refs[c],this.group.caching)){var i=Object.create(null);e||(i.__exists=1),Object.keys(f).forEach(function(a){if(!e||e[a]!==g[a]){i[a]=1;var b=bm(a);b===a||d.policies.hasKeyArgs(g.__typename,b)||(i[b]=1),void 0!==g[a]||d instanceof bv||delete g[a]}}),i.__typename&&!(e&&e.__typename)&&this.policies.rootTypenamesById[c]===g.__typename&&delete i.__typename,Object.keys(i).forEach(function(a){return d.group.dirty(c,a)})}}},a.prototype.modify=function(a,b){var c=this,d=this.lookup(a);if(d){var e=Object.create(null),f=!1,i=!0,j={DELETE:bp,INVALIDATE:br,isReference:an.isReference,toReference:this.toReference,canRead:this.canRead,readField:function(b,d){return c.policies.readField("string"==typeof b?{fieldName:b,from:d||(0,an.makeReference)(a)}:b,{store:c})}};if(Object.keys(d).forEach(function(k){var l=bm(k),m=d[k];if(void 0!==m){var n="function"==typeof b?b:b[k]||b[l];if(n){var o=n===bq?bp:n((0,aY.maybeDeepFreeze)(m),(0,g.__assign)((0,g.__assign)({},j),{fieldName:l,storeFieldName:k,storage:c.getStorage(a,k)}));if(o===br)c.group.dirty(a,k);else if(o===bp&&(o=void 0),o!==m&&(e[k]=o,f=!0,m=o,!1!==globalThis.__DEV__)){var p=function(a){if(void 0===c.lookup(a.__ref))return!1!==globalThis.__DEV__&&h.invariant.warn(3,a),!0};if((0,an.isReference)(o))p(o);else if(Array.isArray(o))for(var q=!1,r=void 0,s=0,t=o;s<t.length;s++){var u=t[s];if((0,an.isReference)(u)){if(q=!0,p(u))break}else"object"==typeof u&&u&&c.policies.identify(u)[0]&&(r=u);if(q&&void 0!==r){!1!==globalThis.__DEV__&&h.invariant.warn(4,r);break}}}}void 0!==m&&(i=!1)}}),f)return this.merge(a,e),i&&(this instanceof bv?this.data[a]=void 0:delete this.data[a],this.group.dirty(a,"__exists")),!0}return!1},a.prototype.delete=function(a,b,c){var d,e=this.lookup(a);if(e){var f=this.getFieldValue(e,"__typename"),g=b&&c?this.policies.getStoreFieldName({typename:f,fieldName:b,args:c}):b;return this.modify(a,g?((d={})[g]=bq,d):bq)}return!1},a.prototype.evict=function(a,b){var c=!1;return a.id&&(bg.call(this.data,a.id)&&(c=this.delete(a.id,a.fieldName,a.args)),this instanceof bv&&this!==b&&(c=this.parent.evict(a,b)||c),(a.fieldName||c)&&this.group.dirty(a.id,a.fieldName||"__exists")),c},a.prototype.clear=function(){this.replace(null)},a.prototype.extract=function(){var a=this,b=this.toObject(),c=[];return this.getRootIdSet().forEach(function(b){bg.call(a.policies.rootTypenamesById,b)||c.push(b)}),c.length&&(b.__META={extraRootIds:c.sort()}),b},a.prototype.replace=function(a){var b=this;if(Object.keys(this.data).forEach(function(c){a&&bg.call(a,c)||b.delete(c)}),a){var c=a.__META,d=(0,g.__rest)(a,["__META"]);Object.keys(d).forEach(function(a){b.merge(a,d[a])}),c&&c.extraRootIds.forEach(this.retain,this)}},a.prototype.retain=function(a){return this.rootIds[a]=(this.rootIds[a]||0)+1},a.prototype.release=function(a){if(this.rootIds[a]>0){var b=--this.rootIds[a];return b||delete this.rootIds[a],b}return 0},a.prototype.getRootIdSet=function(a){return void 0===a&&(a=new Set),Object.keys(this.rootIds).forEach(a.add,a),this instanceof bv?this.parent.getRootIdSet(a):Object.keys(this.policies.rootTypenamesById).forEach(a.add,a),a},a.prototype.gc=function(){var a=this,b=this.getRootIdSet(),c=this.toObject();b.forEach(function(d){bg.call(c,d)&&(Object.keys(a.findChildRefIds(d)).forEach(b.add,b),delete c[d])});var d=Object.keys(c);if(d.length){for(var e=this;e instanceof bv;)e=e.parent;d.forEach(function(a){return e.delete(a)})}return d},a.prototype.findChildRefIds=function(a){if(!bg.call(this.refs,a)){var b=this.refs[a]=Object.create(null),c=this.data[a];if(!c)return b;var d=new Set([c]);d.forEach(function(a){(0,an.isReference)(a)&&(b[a.__ref]=!0),(0,J.isNonNullObject)(a)&&Object.keys(a).forEach(function(b){var c=a[b];(0,J.isNonNullObject)(c)&&d.add(c)})})}return this.refs[a]},a.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},a}(),bt=function(){function a(a,b){void 0===b&&(b=null),this.caching=a,this.parent=b,this.d=null,this.resetCaching()}return a.prototype.resetCaching=function(){this.d=this.caching?(0,a3.dep)():null,this.keyMaker=new aH.Trie(F.canUseWeakMap)},a.prototype.depend=function(a,b){if(this.d){this.d(b+"#"+a);var c=bm(b);c!==b&&this.d(c+"#"+a),this.parent&&this.parent.depend(a,b)}},a.prototype.dirty=function(a,b){this.d&&this.d.dirty(b+"#"+a,"__exists"===b?"forget":"setDirty")},a}();function bu(a,b){by(a)&&a.group.depend(b,"__exists")}c=function(a){function b(b){var c=b.policies,d=b.resultCaching,e=b.seed,f=a.call(this,c,new bt(void 0===d||d))||this;return f.stump=new bw(f),f.storageTrie=new aH.Trie(F.canUseWeakMap),e&&f.replace(e),f}return(0,g.__extends)(b,a),b.prototype.addLayer=function(a,b){return this.stump.addLayer(a,b)},b.prototype.removeLayer=function(){return this},b.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},b}(b=bs||(bs={})),b.Root=c;var bv=function(a){function b(b,c,d,e){var f=a.call(this,c.policies,e)||this;return f.id=b,f.parent=c,f.replay=d,f.group=e,d(f),f}return(0,g.__extends)(b,a),b.prototype.addLayer=function(a,c){return new b(a,this,c,this.group)},b.prototype.removeLayer=function(a){var b=this,c=this.parent.removeLayer(a);return a===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var d=b.data[a],e=c.lookup(a);e?d?d!==e&&Object.keys(d).forEach(function(c){(0,ax.equal)(d[c],e[c])||b.group.dirty(a,c)}):(b.group.dirty(a,"__exists"),Object.keys(e).forEach(function(c){b.group.dirty(a,c)})):b.delete(a)}),c):c===this.parent?this:c.addLayer(this.id,this.replay)},b.prototype.toObject=function(){return(0,g.__assign)((0,g.__assign)({},this.parent.toObject()),this.data)},b.prototype.findChildRefIds=function(b){var c=this.parent.findChildRefIds(b);return bg.call(this.data,b)?(0,g.__assign)((0,g.__assign)({},c),a.prototype.findChildRefIds.call(this,b)):c},b.prototype.getStorage=function(){for(var a=this.parent;a.parent;)a=a.parent;return a.getStorage.apply(a,arguments)},b}(bs),bw=function(a){function b(b){return a.call(this,"EntityStore.Stump",b,function(){},new bt(b.group.caching,b.group))||this}return(0,g.__extends)(b,a),b.prototype.removeLayer=function(){return this},b.prototype.merge=function(a,b){return this.parent.merge(a,b)},b}(bv);function bx(a,b,c){var d=a[c],e=b[c];return(0,ax.equal)(d,e)?d:e}function by(a){return!!(a instanceof bs&&a.group.caching)}var bz=function(){function a(){this.known=new(F.canUseWeakSet?WeakSet:Set),this.pool=new aH.Trie(F.canUseWeakMap),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return a.prototype.isKnown=function(a){return(0,J.isNonNullObject)(a)&&this.known.has(a)},a.prototype.pass=function(a){if((0,J.isNonNullObject)(a)){var b=(0,J.isNonNullObject)(a)?(0,K.isArray)(a)?a.slice(0):(0,g.__assign)({__proto__:Object.getPrototypeOf(a)},a):a;return this.passes.set(b,a),b}return a},a.prototype.admit=function(a){var b=this;if((0,J.isNonNullObject)(a)){var c=this.passes.get(a);if(c)return c;switch(Object.getPrototypeOf(a)){case Array.prototype:if(this.known.has(a))break;var d=a.map(this.admit,this),e=this.pool.lookupArray(d);return e.array||(this.known.add(e.array=d),!1!==globalThis.__DEV__&&Object.freeze(d)),e.array;case null:case Object.prototype:if(this.known.has(a))break;var f=Object.getPrototypeOf(a),g=[f],h=this.sortedKeys(a);g.push(h.json);var i=g.length;h.sorted.forEach(function(c){g.push(b.admit(a[c]))});var e=this.pool.lookupArray(g);if(!e.object){var j=e.object=Object.create(f);this.known.add(j),h.sorted.forEach(function(a,b){j[a]=g[i+b]}),!1!==globalThis.__DEV__&&Object.freeze(j)}return e.object}}return a},a.prototype.sortedKeys=function(a){var b=Object.keys(a),c=this.pool.lookupArray(b);if(!c.keys){b.sort();var d=JSON.stringify(b);(c.keys=this.keysByJSON.get(d))||this.keysByJSON.set(d,c.keys={sorted:b,json:d})}return c.keys},a}();function bA(a){return[a.selectionSet,a.objectOrReference,a.context,a.context.canonizeResults]}var bB=function(){function a(a){var b=this;this.knownResults=new(F.canUseWeakMap?WeakMap:Map),this.config=(0,bf.compact)(a,{addTypename:!1!==a.addTypename,canonizeResults:bk(a)}),this.canon=a.canon||new bz,this.executeSelectionSet=(0,aJ.wrap)(function(a){var c,d=a.context.canonizeResults,e=bA(a);e[3]=!d;var f=(c=b.executeSelectionSet).peek.apply(c,e);return f?d?(0,g.__assign)((0,g.__assign)({},f),{result:b.canon.admit(f.result)}):f:(bu(a.context.store,a.enclosingRef.__ref),b.execSelectionSetImpl(a))},{max:this.config.resultCacheMaxSize||af.cacheSizes["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:bA,makeCacheKey:function(a,b,c,d){if(by(c.store))return c.store.makeCacheKey(a,(0,an.isReference)(b)?b.__ref:b,c.varString,d)}}),this.executeSubSelectedArray=(0,aJ.wrap)(function(a){return bu(a.context.store,a.enclosingRef.__ref),b.execSubSelectedArrayImpl(a)},{max:this.config.resultCacheMaxSize||af.cacheSizes["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(a){var b=a.field,c=a.array,d=a.context;if(by(d.store))return d.store.makeCacheKey(b,c,d.varString)}})}return a.prototype.resetCanon=function(){this.canon=new bz},a.prototype.diffQueryAgainstStore=function(a){var b,c=a.store,d=a.query,e=a.rootId,f=a.variables,h=a.returnPartialData,i=a.canonizeResults,j=void 0===i?this.config.canonizeResults:i,k=this.config.cache.policies;f=(0,g.__assign)((0,g.__assign)({},(0,u.getDefaultValues)((0,u.getQueryDefinition)(d))),f);var l=(0,an.makeReference)(void 0===e?"ROOT_QUERY":e),m=this.executeSelectionSet({selectionSet:(0,u.getMainDefinition)(d).selectionSet,objectOrReference:l,enclosingRef:l,context:(0,g.__assign)({store:c,query:d,policies:k,variables:f,varString:(0,ay.canonicalStringify)(f),canonizeResults:j},bo(d,this.config.fragments))});if(m.missing&&(b=[new be(function(a){try{JSON.stringify(a,function(a,b){if("string"==typeof b)throw b;return b})}catch(a){return a}}(m.missing),m.missing,d,f)],!(void 0===h||h)))throw b[0];return{result:m.result,complete:!b,missing:b}},a.prototype.isFresh=function(a,b,c,d){if(by(d.store)&&this.knownResults.get(a)===c){var e=this.executeSelectionSet.peek(c,b,d,this.canon.isKnown(a));if(e&&a===e.result)return!0}return!1},a.prototype.execSelectionSetImpl=function(a){var b,c=this,d=a.selectionSet,e=a.objectOrReference,f=a.enclosingRef,g=a.context;if((0,an.isReference)(e)&&!g.policies.rootTypenamesById[e.__ref]&&!g.store.has(e.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(e.__ref," object")};var i=g.variables,j=g.policies,k=g.store.getFieldValue(e,"__typename"),l=[],m=new P;function n(a,c){var d;return a.missing&&(b=m.merge(b,((d={})[c]=a.missing,d))),a.result}this.config.addTypename&&"string"==typeof k&&!j.rootIdsByTypename[k]&&l.push({__typename:k});var o=new Set(d.selections);o.forEach(function(a){var d,p;if((0,C.shouldInclude)(a,i))if((0,an.isField)(a)){var q=j.readField({fieldName:a.name.value,field:a,variables:g.variables,from:e},g),r=(0,an.resultKeyNameFromField)(a);void 0===q?as.added(a)||(b=m.merge(b,((d={})[r]="Can't find field '".concat(a.name.value,"' on ").concat((0,an.isReference)(e)?e.__ref+" object":"object "+JSON.stringify(e,null,2)),d))):(0,K.isArray)(q)?q.length>0&&(q=n(c.executeSubSelectedArray({field:a,array:q,enclosingRef:f,context:g}),r)):a.selectionSet?null!=q&&(q=n(c.executeSelectionSet({selectionSet:a.selectionSet,objectOrReference:q,enclosingRef:(0,an.isReference)(q)?q:f,context:g}),r)):g.canonizeResults&&(q=c.canon.pass(q)),void 0!==q&&l.push(((p={})[r]=q,p))}else{var s=(0,ao.getFragmentFromSelection)(a,g.lookupFragment);if(!s&&a.kind===am.Kind.FRAGMENT_SPREAD)throw(0,h.newInvariantError)(10,a.name.value);s&&j.fragmentMatches(s,k)&&s.selectionSet.selections.forEach(o.add,o)}});var p={result:N(l),missing:b},q=g.canonizeResults?this.canon.admit(p):(0,aY.maybeDeepFreeze)(p);return q.result&&this.knownResults.set(q.result,d),q},a.prototype.execSubSelectedArrayImpl=function(a){var b,c=this,d=a.field,e=a.array,f=a.enclosingRef,g=a.context,i=new P;function j(a,c){var d;return a.missing&&(b=i.merge(b,((d={})[c]=a.missing,d))),a.result}return d.selectionSet&&(e=e.filter(g.store.canRead)),e=e.map(function(a,b){return null===a?null:(0,K.isArray)(a)?j(c.executeSubSelectedArray({field:d,array:a,enclosingRef:f,context:g}),b):d.selectionSet?j(c.executeSelectionSet({selectionSet:d.selectionSet,objectOrReference:a,enclosingRef:(0,an.isReference)(a)?a:f,context:g}),b):(!1!==globalThis.__DEV__&&function(a,b,c){if(!b.selectionSet){var d=new Set([c]);d.forEach(function(c){(0,J.isNonNullObject)(c)&&((0,h.invariant)(!(0,an.isReference)(c),11,(0,an.isReference)(c)?a.get(c.__ref,"__typename"):c&&c.__typename,b.name.value),Object.values(c).forEach(d.add,d))})}}(g.store,d,a),a)}),{result:g.canonizeResults?this.canon.admit(e):e,missing:b}},a}(),bC=a.i(625445),bD=a.i(114714),bE=Object.create(null);function bF(a){var b=JSON.stringify(a);return bE[b]||(bE[b]=Object.create(null))}function bG(a){var b=bF(a);return b.keyFieldsFn||(b.keyFieldsFn=function(b,c){var d=function(a,b){return c.readField(b,a)},e=c.keyObject=bI(a,function(a){var e=bK(c.storeObject,a,d);return void 0===e&&b!==c.storeObject&&bg.call(b,a[0])&&(e=bK(b,a,bJ)),(0,h.invariant)(void 0!==e,5,a.join("."),b),e});return"".concat(c.typename,":").concat(JSON.stringify(e))})}function bH(a){var b=bF(a);return b.keyArgsFn||(b.keyArgsFn=function(b,c){var d=c.field,e=c.variables,f=c.fieldName,g=JSON.stringify(bI(a,function(a){var c=a[0],f=c.charAt(0);if("@"===f){if(d&&(0,K.isNonEmptyArray)(d.directives)){var g=c.slice(1),h=d.directives.find(function(a){return a.name.value===g}),i=h&&(0,an.argumentsObjectFromField)(h,e);return i&&bK(i,a.slice(1))}return}if("$"===f){var j=c.slice(1);if(e&&bg.call(e,j)){var k=a.slice(0);return k[0]=j,bK(e,k)}return}if(b)return bK(b,a)}));return(b||"{}"!==g)&&(f+=":"+g),f})}function bI(a,b){var c=new P;return(function a(b){var c=bF(b);if(!c.paths){var d=c.paths=[],e=[];b.forEach(function(c,f){(0,K.isArray)(c)?(a(c).forEach(function(a){return d.push(e.concat(a))}),e.length=0):(e.push(c),(0,K.isArray)(b[f+1])||(d.push(e.slice(0)),e.length=0))})}return c.paths})(a).reduce(function(a,d){var e,f=b(d);if(void 0!==f){for(var g=d.length-1;g>=0;--g)(e={})[d[g]]=f,f=e;a=c.merge(a,f)}return a},Object.create(null))}function bJ(a,b){return a[b]}function bK(a,b,c){return c=c||bJ,function a(b){return(0,J.isNonNullObject)(b)?(0,K.isArray)(b)?b.map(a):bI(Object.keys(b).sort(),function(a){return bK(b,a)}):b}(b.reduce(function a(b,d){return(0,K.isArray)(b)?b.map(function(b){return a(b,d)}):b&&c(b,d)},a))}function bL(a){return void 0!==a.args?a.args:a.field?(0,an.argumentsObjectFromField)(a.field,a.variables):null}var bM=function(){},bN=function(a,b){return b.fieldName},bO=function(a,b,c){return(0,c.mergeObjects)(a,b)},bP=function(a,b){return b},bQ=function(){function a(a){this.config=a,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,g.__assign)({dataIdFromObject:bi},a),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),a.possibleTypes&&this.addPossibleTypes(a.possibleTypes),a.typePolicies&&this.addTypePolicies(a.typePolicies)}return a.prototype.identify=function(a,b){var c,d,e=this,f=b&&(b.typename||(null==(c=b.storeObject)?void 0:c.__typename))||a.__typename;if(f===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var h=b&&b.storeObject||a,i=(0,g.__assign)((0,g.__assign)({},b),{typename:f,storeObject:h,readField:b&&b.readField||function(){var a=bS(arguments,h);return e.readField(a,{store:e.cache.data,variables:a.variables})}}),j=f&&this.getTypePolicy(f),k=j&&j.keyFn||this.config.dataIdFromObject;return aV.withValue(!0,function(){for(;k;){var b=k((0,g.__assign)((0,g.__assign)({},a),h),i);if((0,K.isArray)(b))k=bG(b);else{d=b;break}}}),d=d?String(d):void 0,i.keyObject?[d,i.keyObject]:[d]},a.prototype.addTypePolicies=function(a){var b=this;Object.keys(a).forEach(function(c){var d=a[c],e=d.queryType,f=d.mutationType,h=d.subscriptionType,i=(0,g.__rest)(d,["queryType","mutationType","subscriptionType"]);e&&b.setRootTypename("Query",c),f&&b.setRootTypename("Mutation",c),h&&b.setRootTypename("Subscription",c),bg.call(b.toBeAdded,c)?b.toBeAdded[c].push(i):b.toBeAdded[c]=[i]})},a.prototype.updateTypePolicy=function(a,b,c){var d=this.getTypePolicy(a),e=b.keyFields,f=b.fields;function g(a,b){a.merge="function"==typeof b?b:!0===b?bO:!1===b?bP:a.merge}g(d,b.merge),d.keyFn=!1===e?bM:(0,K.isArray)(e)?bG(e):"function"==typeof e?e:d.keyFn,f&&Object.keys(f).forEach(function(b){var d=c[b];d&&(null==d?void 0:d.typename)===a||(d=c[b]={typename:a});var e=f[b];if("function"==typeof e)d.read=e;else{var h=e.keyArgs,i=e.read,j=e.merge;d.keyFn=!1===h?bN:(0,K.isArray)(h)?bH(h):"function"==typeof h?h:d.keyFn,"function"==typeof i&&(d.read=i),g(d,j)}d.read&&d.merge&&(d.keyFn=d.keyFn||bN)})},a.prototype.setRootTypename=function(a,b){void 0===b&&(b=a);var c="ROOT_"+a.toUpperCase(),d=this.rootTypenamesById[c];b!==d&&((0,h.invariant)(!d||d===a,6,a),d&&delete this.rootIdsByTypename[d],this.rootIdsByTypename[b]=c,this.rootTypenamesById[c]=b)},a.prototype.addPossibleTypes=function(a){var b=this;this.usingPossibleTypes=!0,Object.keys(a).forEach(function(c){b.getSupertypeSet(c,!0),a[c].forEach(function(a){b.getSupertypeSet(a,!0).add(c);var d=a.match(bl);d&&d[0]===a||b.fuzzySubtypes.set(a,new RegExp(a))})})},a.prototype.getTypePolicy=function(a){var b=this;if(!bg.call(this.typePolicies,a)){var c=this.typePolicies[a]=Object.create(null);c.fields=Object.create(null);var d=this.supertypeMap.get(a);!d&&this.fuzzySubtypes.size&&(d=this.getSupertypeSet(a,!0),this.fuzzySubtypes.forEach(function(c,e){if(c.test(a)){var f=b.supertypeMap.get(e);f&&f.forEach(function(a){return d.add(a)})}})),d&&d.size&&d.forEach(function(a){var d=b.getTypePolicy(a),e=d.fields;Object.assign(c,(0,g.__rest)(d,["fields"])),Object.assign(c.fields,e)})}var e=this.toBeAdded[a];return e&&e.length&&e.splice(0).forEach(function(c){b.updateTypePolicy(a,c,b.typePolicies[a].fields)}),this.typePolicies[a]},a.prototype.getFieldPolicy=function(a,b){if(a)return this.getTypePolicy(a).fields[b]},a.prototype.getSupertypeSet=function(a,b){var c=this.supertypeMap.get(a);return!c&&b&&this.supertypeMap.set(a,c=new Set),c},a.prototype.fragmentMatches=function(a,b,c,d){var e=this;if(!a.typeCondition)return!0;if(!b)return!1;var f=a.typeCondition.name.value;if(b===f)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(f))for(var g=this.getSupertypeSet(b,!0),i=[g],j=function(a){var b=e.getSupertypeSet(a,!1);b&&b.size&&0>i.indexOf(b)&&i.push(b)},k=!!(c&&this.fuzzySubtypes.size),l=!1,m=0;m<i.length;++m){var n=i[m];if(n.has(f))return g.has(f)||(l&&!1!==globalThis.__DEV__&&h.invariant.warn(7,b,f),g.add(f)),!0;n.forEach(j),k&&m===i.length-1&&function a(b,c,d){return!!(0,J.isNonNullObject)(c)&&((0,K.isArray)(c)?c.every(function(c){return a(b,c,d)}):b.selections.every(function(b){if((0,an.isField)(b)&&(0,C.shouldInclude)(b,d)){var e=(0,an.resultKeyNameFromField)(b);return bg.call(c,e)&&(!b.selectionSet||a(b.selectionSet,c[e],d))}return!0}))}(a.selectionSet,c,d)&&(k=!1,l=!0,this.fuzzySubtypes.forEach(function(a,c){var d=b.match(a);d&&d[0]===b&&j(c)}))}return!1},a.prototype.hasKeyArgs=function(a,b){var c=this.getFieldPolicy(a,b);return!!(c&&c.keyFn)},a.prototype.getStoreFieldName=function(a){var b,c=a.typename,d=a.fieldName,e=this.getFieldPolicy(c,d),f=e&&e.keyFn;if(f&&c)for(var g={typename:c,fieldName:d,field:a.field||null,variables:a.variables},h=bL(a);f;){var i=f(h,g);if((0,K.isArray)(i))f=bH(i);else{b=i||d;break}}return(void 0===b&&(b=a.field?(0,an.storeKeyNameFromField)(a.field,a.variables):(0,an.getStoreKeyName)(d,bL(a))),!1===b)?d:d===bm(b)?b:d+":"+b},a.prototype.readField=function(a,b){var c=a.from;if(c&&(a.field||a.fieldName)){if(void 0===a.typename){var d=b.store.getFieldValue(c,"__typename");d&&(a.typename=d)}var e=this.getStoreFieldName(a),f=bm(e),g=b.store.getFieldValue(c,e),h=this.getFieldPolicy(a.typename,f),i=h&&h.read;if(i){var j=bR(this,c,a,b,b.store.getStorage((0,an.isReference)(c)?c.__ref:c,e));return a4.withValue(this.cache,i,[g,j])}return g}},a.prototype.getReadFunction=function(a,b){var c=this.getFieldPolicy(a,b);return c&&c.read},a.prototype.getMergeFunction=function(a,b,c){var d=this.getFieldPolicy(a,b),e=d&&d.merge;return!e&&c&&(e=(d=this.getTypePolicy(c))&&d.merge),e},a.prototype.runMergeFunction=function(a,b,c,d,e){var f=c.field,g=c.typename,h=c.merge;return h===bO?bT(d.store)(a,b):h===bP?b:(d.overwrite&&(a=void 0),h(a,b,bR(this,void 0,{typename:g,fieldName:f.name.value,field:f,variables:d.variables},d,e||Object.create(null))))},a}();function bR(a,b,c,d,e){var f=a.getStoreFieldName(c),g=bm(f),h=c.variables||d.variables,i=d.store,j=i.toReference,k=i.canRead;return{args:bL(c),field:c.field||null,fieldName:g,storeFieldName:f,variables:h,isReference:an.isReference,toReference:j,storage:e,cache:a.cache,canRead:k,readField:function(){return a.readField(bS(arguments,b,h),d)},mergeObjects:bT(d.store)}}function bS(a,b,c){var d,e=a[0],f=a[1],i=a.length;return"string"==typeof e?d={fieldName:e,from:i>1?f:b}:(d=(0,g.__assign)({},e),bg.call(d,"from")||(d.from=b)),!1!==globalThis.__DEV__&&void 0===d.from&&!1!==globalThis.__DEV__&&h.invariant.warn(8,(0,bD.stringifyForDisplay)(Array.from(a))),void 0===d.variables&&(d.variables=c),d}function bT(a){return function(b,c){if((0,K.isArray)(b)||(0,K.isArray)(c))throw(0,h.newInvariantError)(9);if((0,J.isNonNullObject)(b)&&(0,J.isNonNullObject)(c)){var d=a.getFieldValue(b,"__typename"),e=a.getFieldValue(c,"__typename");if(d&&e&&d!==e)return c;if((0,an.isReference)(b)&&bn(c))return a.merge(b.__ref,c),b;if(bn(b)&&(0,an.isReference)(c))return a.merge(b,c.__ref),c;if(bn(b)&&bn(c))return(0,g.__assign)((0,g.__assign)({},b),c)}return c}}function bU(a,b,c){var d="".concat(b).concat(c),e=a.flavors.get(d);return e||a.flavors.set(d,e=a.clientOnly===b&&a.deferred===c?a:(0,g.__assign)((0,g.__assign)({},a),{clientOnly:b,deferred:c})),e}var bV=function(){function a(a,b,c){this.cache=a,this.reader=b,this.fragments=c}return a.prototype.writeToStore=function(a,b){var c=this,d=b.query,e=b.result,f=b.dataId,i=b.variables,j=b.overwrite,k=(0,u.getOperationDefinition)(d),l=new P;i=(0,g.__assign)((0,g.__assign)({},(0,u.getDefaultValues)(k)),i);var m=(0,g.__assign)((0,g.__assign)({store:a,written:Object.create(null),merge:function(a,b){return l.merge(a,b)},variables:i,varString:(0,ay.canonicalStringify)(i)},bo(d,this.fragments)),{overwrite:!!j,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),n=this.processSelectionSet({result:e||Object.create(null),dataId:f,selectionSet:k.selectionSet,mergeTree:{map:new Map},context:m});if(!(0,an.isReference)(n))throw(0,h.newInvariantError)(12,e);return m.incomingById.forEach(function(b,d){var e=b.storeObject,f=b.mergeTree,i=b.fieldNodeSet,j=(0,an.makeReference)(d);if(f&&f.map.size){var k=c.applyMerges(f,j,e,m);if((0,an.isReference)(k))return;e=k}if(!1!==globalThis.__DEV__&&!m.overwrite){var l=Object.create(null);i.forEach(function(a){a.selectionSet&&(l[a.name.value]=!0)});var n=function(a){var b=f&&f.map.get(a);return!!(b&&b.info&&b.info.merge)};Object.keys(e).forEach(function(a){!0!==l[bm(a)]||n(a)||function(a,b,c,d){var e=function(a){var b=d.getFieldValue(a,c);return"object"==typeof b&&b},f=e(a);if(f){var i=e(b);if(!(!i||(0,an.isReference)(f)||(0,ax.equal)(f,i)||Object.keys(f).every(function(a){return void 0!==d.getFieldValue(i,a)}))){var j=d.getFieldValue(a,"__typename")||d.getFieldValue(b,"__typename"),k=bm(c),l="".concat(j,".").concat(k);if(!b$.has(l)){b$.add(l);var m=[];(0,K.isArray)(f)||(0,K.isArray)(i)||[f,i].forEach(function(a){var b=d.getFieldValue(a,"__typename");"string"!=typeof b||m.includes(b)||m.push(b)}),!1!==globalThis.__DEV__&&h.invariant.warn(15,k,j,m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"",l,(0,g.__assign)({},f),(0,g.__assign)({},i))}}}}(j,e,a,m.store)})}a.merge(d,e)}),a.retain(n.__ref),n},a.prototype.processSelectionSet=function(a){var b=this,c=a.dataId,d=a.result,e=a.selectionSet,f=a.context,i=a.mergeTree,j=this.cache.policies,k=Object.create(null),l=c&&j.rootTypenamesById[c]||(0,an.getTypenameFromResult)(d,e,f.fragmentMap)||c&&f.store.get(c,"__typename");"string"==typeof l&&(k.__typename=l);var m=function(){var a=bS(arguments,k,f.variables);if((0,an.isReference)(a.from)){var b=f.incomingById.get(a.from.__ref);if(b){var c=j.readField((0,g.__assign)((0,g.__assign)({},a),{from:b.storeObject}),f);if(void 0!==c)return c}}return j.readField(a,f)},n=new Set;this.flattenFields(e,d,f,l).forEach(function(a,c){var e,f=d[(0,an.resultKeyNameFromField)(c)];if(n.add(c),void 0!==f){var g=j.getStoreFieldName({typename:l,fieldName:c.name.value,field:c,variables:a.variables}),o=bX(i,g),p=b.processFieldValue(f,c,c.selectionSet?bU(a,!1,!1):a,o),q=void 0;c.selectionSet&&((0,an.isReference)(p)||bn(p))&&(q=m("__typename",p));var r=j.getMergeFunction(l,c.name.value,q);r?o.info={field:c,typename:l,merge:r}:bZ(i,g),k=a.merge(k,((e={})[g]=p,e))}else!1===globalThis.__DEV__||a.clientOnly||a.deferred||as.added(c)||j.getReadFunction(l,c.name.value)||!1===globalThis.__DEV__||h.invariant.error(13,(0,an.resultKeyNameFromField)(c),d)});try{var o=j.identify(d,{typename:l,selectionSet:e,fragmentMap:f.fragmentMap,storeObject:k,readField:m}),p=o[0],q=o[1];c=c||p,q&&(k=f.merge(k,q))}catch(a){if(!c)throw a}if("string"==typeof c){var r=(0,an.makeReference)(c),s=f.written[c]||(f.written[c]=[]);if(s.indexOf(e)>=0||(s.push(e),this.reader&&this.reader.isFresh(d,r,e,f)))return r;var t=f.incomingById.get(c);return t?(t.storeObject=f.merge(t.storeObject,k),t.mergeTree=function a(b,c){if(b===c||!c||bY(c))return b;if(!b||bY(b))return c;var d=b.info&&c.info?(0,g.__assign)((0,g.__assign)({},b.info),c.info):b.info||c.info,e=b.map.size&&c.map.size,f={info:d,map:e?new Map:b.map.size?b.map:c.map};if(e){var h=new Set(c.map.keys());b.map.forEach(function(b,d){f.map.set(d,a(b,c.map.get(d))),h.delete(d)}),h.forEach(function(d){f.map.set(d,a(c.map.get(d),b.map.get(d)))})}return f}(t.mergeTree,i),n.forEach(function(a){return t.fieldNodeSet.add(a)})):f.incomingById.set(c,{storeObject:k,mergeTree:bY(i)?void 0:i,fieldNodeSet:n}),r}return k},a.prototype.processFieldValue=function(a,b,c,d){var e=this;return b.selectionSet&&null!==a?(0,K.isArray)(a)?a.map(function(a,f){var g=e.processFieldValue(a,b,c,bX(d,f));return bZ(d,f),g}):this.processSelectionSet({result:a,selectionSet:b.selectionSet,context:c,mergeTree:d}):!1!==globalThis.__DEV__?(0,bC.cloneDeep)(a):a},a.prototype.flattenFields=function(a,b,c,d){void 0===d&&(d=(0,an.getTypenameFromResult)(b,a,c.fragmentMap));var e=new Map,f=this.cache.policies,g=new aH.Trie(!1);return!function a(i,j){var k=g.lookup(i,j.clientOnly,j.deferred);k.visited||(k.visited=!0,i.selections.forEach(function(g){if((0,C.shouldInclude)(g,c.variables)){var i=j.clientOnly,k=j.deferred;if(!(i&&k)&&(0,K.isNonEmptyArray)(g.directives)&&g.directives.forEach(function(a){var b=a.name.value;if("client"===b&&(i=!0),"defer"===b){var d=(0,an.argumentsObjectFromField)(a,c.variables);d&&!1===d.if||(k=!0)}}),(0,an.isField)(g)){var l=e.get(g);l&&(i=i&&l.clientOnly,k=k&&l.deferred),e.set(g,bU(c,i,k))}else{var m=(0,ao.getFragmentFromSelection)(g,c.lookupFragment);if(!m&&g.kind===am.Kind.FRAGMENT_SPREAD)throw(0,h.newInvariantError)(14,g.name.value);m&&f.fragmentMatches(m,d,b,c.variables)&&a(m.selectionSet,bU(c,i,k))}}}))}(a,c),e},a.prototype.applyMerges=function(a,b,c,d,e){var f=this;if(a.map.size&&!(0,an.isReference)(c)){var i,j,k=!(0,K.isArray)(c)&&((0,an.isReference)(b)||bn(b))?b:void 0,l=c;k&&!e&&(e=[(0,an.isReference)(k)?k.__ref:k]);var m=function(a,b){return(0,K.isArray)(a)?"number"==typeof b?a[b]:void 0:d.store.getFieldValue(a,String(b))};a.map.forEach(function(a,b){var c=m(k,b),g=m(l,b);if(void 0!==g){e&&e.push(b);var i=f.applyMerges(a,c,g,d,e);i!==g&&(j=j||new Map).set(b,i),e&&(0,h.invariant)(e.pop()===b)}}),j&&(c=(0,K.isArray)(l)?l.slice(0):(0,g.__assign)({},l),j.forEach(function(a,b){c[b]=a}))}return a.info?this.cache.policies.runMergeFunction(b,c,a.info,d,e&&(i=d.store).getStorage.apply(i,e)):c},a}(),bW=[];function bX(a,b){var c=a.map;return c.has(b)||c.set(b,bW.pop()||{map:new Map}),c.get(b)}function bY(a){return!a||!(a.info||a.map.size)}function bZ(a,b){var c=a.map,d=c.get(b);d&&bY(d)&&(bW.push(d),c.delete(b))}var b$=new Set,b_=function(a){function b(b){void 0===b&&(b={});var c,d=a.call(this)||this;return d.watches=new Set,d.addTypenameTransform=new aL(as),d.assumeImmutableResults=!0,d.makeVar=a8,d.txCount=0,!1!==globalThis.__DEV__&&((0,v.warnRemovedOption)(b,"addTypename","InMemoryCache","Please remove the `addTypename` option when initializing `InMemoryCache`."),(0,v.warnRemovedOption)(b,"canonizeResults","InMemoryCache","Please remove the `canonizeResults` option when initializing `InMemoryCache`.")),c=b,d.config=(0,bf.compact)(bj,c),d.addTypename=!!d.config.addTypename,d.policies=new bQ({cache:d,dataIdFromObject:d.config.dataIdFromObject,possibleTypes:d.config.possibleTypes,typePolicies:d.config.typePolicies}),d.init(),d}return(0,g.__extends)(b,a),b.prototype.init=function(){var a=this.data=new bs.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=a.stump,this.resetResultCache()},b.prototype.resetResultCache=function(a){var b=this,c=this.storeReader,d=this.config.fragments;this.addTypenameTransform.resetCache(),null==d||d.resetCaches(),this.storeWriter=new bV(this,this.storeReader=new bB({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:bk(this.config),canon:a?void 0:c&&c.canon,fragments:d}),d),this.maybeBroadcastWatch=(0,aJ.wrap)(function(a,c){return b.broadcastWatch(a,c)},{max:this.config.resultCacheMaxSize||af.cacheSizes["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(a){var c=a.optimistic?b.optimisticData:b.data;if(by(c)){var d=a.optimistic,e=a.id,f=a.variables;return c.makeCacheKey(a.query,a.callback,(0,ay.canonicalStringify)({optimistic:d,id:e,variables:f}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},b.prototype.restore=function(a){return this.init(),a&&this.data.replace(a),this},b.prototype.extract=function(a){return void 0===a&&(a=!1),(a?this.optimisticData:this.data).extract()},b.prototype.read=function(a){!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.read");var b=a.returnPartialData;try{return this.storeReader.diffQueryAgainstStore((0,g.__assign)((0,g.__assign)({},a),{store:a.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:void 0!==b&&b})).result||null}catch(a){if(a instanceof be)return null;throw a}},b.prototype.write=function(a){try{return++this.txCount,this.storeWriter.writeToStore(this.data,a)}finally{--this.txCount||!1===a.broadcast||this.broadcastWatches()}},b.prototype.modify=function(a){if(bg.call(a,"id")&&!a.id)return!1;var b=a.optimistic?this.optimisticData:this.data;try{return++this.txCount,b.modify(a.id||"ROOT_QUERY",a.fields)}finally{--this.txCount||!1===a.broadcast||this.broadcastWatches()}},b.prototype.diff=function(a){return!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a,"canonizeResults","cache.diff"),this.storeReader.diffQueryAgainstStore((0,g.__assign)((0,g.__assign)({},a),{store:a.optimistic?this.optimisticData:this.data,rootId:a.id||"ROOT_QUERY",config:this.config}))},b.prototype.watch=function(a){var b,c=this;return this.watches.size||(b=this,a6(b).vars.forEach(function(a){return a.attachCache(b)})),this.watches.add(a),a.immediate&&this.maybeBroadcastWatch(a),function(){c.watches.delete(a)&&!c.watches.size&&a7(c),c.maybeBroadcastWatch.forget(a)}},b.prototype.gc=function(a){!1!==globalThis.__DEV__&&(0,v.warnRemovedOption)(a||{},"resetResultIdentities","cache.gc","First ensure all usages of `canonizeResults` are removed, then remove this option."),ay.canonicalStringify.reset(),ah.reset();var b=this.optimisticData.gc();return a&&!this.txCount&&(a.resetResultCache?this.resetResultCache(a.resetResultIdentities):a.resetResultIdentities&&this.storeReader.resetCanon()),b},b.prototype.retain=function(a,b){return(b?this.optimisticData:this.data).retain(a)},b.prototype.release=function(a,b){return(b?this.optimisticData:this.data).release(a)},b.prototype.identify=function(a){if((0,an.isReference)(a))return a.__ref;try{return this.policies.identify(a)[0]}catch(a){!1!==globalThis.__DEV__&&h.invariant.warn(a)}},b.prototype.evict=function(a){if(!a.id){if(bg.call(a,"id"))return!1;a=(0,g.__assign)((0,g.__assign)({},a),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(a,this.data)}finally{--this.txCount||!1===a.broadcast||this.broadcastWatches()}},b.prototype.reset=function(a){var b=this;return this.init(),ay.canonicalStringify.reset(),a&&a.discardWatches?(this.watches.forEach(function(a){return b.maybeBroadcastWatch.forget(a)}),this.watches.clear(),a7(this)):this.broadcastWatches(),Promise.resolve()},b.prototype.removeOptimistic=function(a){var b=this.optimisticData.removeLayer(a);b!==this.optimisticData&&(this.optimisticData=b,this.broadcastWatches())},b.prototype.batch=function(a){var b,c=this,d=a.update,e=a.optimistic,f=void 0===e||e,h=a.removeOptimistic,i=a.onWatchUpdated,j=function(a){var e=c.data,f=c.optimisticData;++c.txCount,a&&(c.data=c.optimisticData=a);try{return b=d(c)}finally{--c.txCount,c.data=e,c.optimisticData=f}},k=new Set;return i&&!this.txCount&&this.broadcastWatches((0,g.__assign)((0,g.__assign)({},a),{onWatchUpdated:function(a){return k.add(a),!1}})),"string"==typeof f?this.optimisticData=this.optimisticData.addLayer(f,j):!1===f?j(this.data):j(),"string"==typeof h&&(this.optimisticData=this.optimisticData.removeLayer(h)),i&&k.size?(this.broadcastWatches((0,g.__assign)((0,g.__assign)({},a),{onWatchUpdated:function(a,b){var c=i.call(this,a,b);return!1!==c&&k.delete(a),c}})),k.size&&k.forEach(function(a){return c.maybeBroadcastWatch.dirty(a)})):this.broadcastWatches(a),b},b.prototype.performTransaction=function(a,b){return this.batch({update:a,optimistic:b||null!==b})},b.prototype.transformDocument=function(a){return this.addTypenameToDocument(this.addFragmentsToDocument(a))},b.prototype.fragmentMatches=function(a,b){return this.policies.fragmentMatches(a,b)},b.prototype.lookupFragment=function(a){var b;return(null==(b=this.config.fragments)?void 0:b.lookup(a))||null},b.prototype.broadcastWatches=function(a){var b=this;this.txCount||this.watches.forEach(function(c){return b.maybeBroadcastWatch(c,a)})},b.prototype.addFragmentsToDocument=function(a){var b=this.config.fragments;return b?b.transform(a):a},b.prototype.addTypenameToDocument=function(a){return this.addTypename?this.addTypenameTransform.transformDocument(a):a},b.prototype.broadcastWatch=function(a,b){var c=this,d=a.lastDiff,e=(0,v.muteDeprecations)("canonizeResults",function(){return c.diff(a)});(!b||(a.optimistic&&"string"==typeof b.optimistic&&(e.fromOptimisticTransaction=!0),!b.onWatchUpdated||!1!==b.onWatchUpdated.call(this,a,e,d)))&&(d&&(0,ax.equal)(d.result,e.result)||a.callback(a.lastDiff=e,d))},b}(bd);!1!==globalThis.__DEV__&&(b_.prototype.getMemoryInternals=ag.getInMemoryCacheMemoryInternals);var b0=z.from;function b1(a){return new z(function(b,c){return new t.Observable(function(d){var e,f,g;try{e=c(b).subscribe({next:function(e){if(e.errors?g=a({graphQLErrors:e.errors,response:e,operation:b,forward:c}):(0,I.graphQLResultHasProtocolErrors)(e)&&(g=a({protocolErrors:e.extensions[I.PROTOCOL_ERRORS_SYMBOL],response:e,operation:b,forward:c})),g){f=g.subscribe({next:d.next.bind(d),error:d.error.bind(d),complete:d.complete.bind(d)});return}d.next(e)},error:function(e){if(g=a({operation:b,networkError:e,graphQLErrors:e&&e.result&&e.result.errors||void 0,forward:c})){f=g.subscribe({next:d.next.bind(d),error:d.error.bind(d),complete:d.complete.bind(d)});return}d.error(e)},complete:function(){g||d.complete.bind(d)()}})}catch(e){a({networkError:e,operation:b,forward:c}),d.error(e)}return function(){e&&e.unsubscribe(),f&&e.unsubscribe()}})})}function b2(a){var b=z.call(this)||this;return b.link=b1(a),b}(0,g.__extends)(b2,z),b2.prototype.request=function(a,b){return this.link.request(a,b)};let b3=(a,b=3)=>{try{let b=new WeakSet;return JSON.stringify(a,(a,c)=>{if("object"==typeof c&&null!==c){if(b.has(c))return"[Circular Reference]";b.add(c)}return c},2)}catch(a){return`[Unable to stringify: ${a}]`}},b4=(a,b,c)=>{let d=new Date().toISOString(),e=`[${d}] Apollo Client`;"error"===a?console.error(`${e} `,b,c?b3(c):""):"warn"===a?console.warn(`${e} `,b,c?b3(c):""):console.info(`${e} `,b,c?b3(c):"")},b5=()=>({}),b6=av({uri:"https://appapi.tazagroup.vn/graphql"}),b7=(d=(a,{headers:b})=>({headers:{...b}}),new z(function(a,b){var c=(0,g.__rest)(a,[]);return new t.Observable(function(e){var f,g=!1;return Promise.resolve(c).then(function(b){return d(b,a.getContext())}).then(a.setContext).then(function(){g||(f=b(a).subscribe({next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)}))}).catch(e.error.bind(e)),function(){g=!0,f&&f.unsubscribe()}})})),b8=new bb({link:b0([b1(({graphQLErrors:a,networkError:b,operation:c,forward:d})=>{if(a&&a.length>0&&(console.group("%c GraphQL Errors Detected","color: #e74c3c; font-weight: bold;"),console.log(`Operation: ${c.operationName}`),console.table(a.map((a,b)=>({"#":b+1,Message:a.message,Code:a.extensions?.code||"N/A",Path:a.path?.join(".")||"N/A"}))),a.map(({message:a,locations:b,path:d,extensions:e})=>{let f={message:a,path:d,locations:b,extensions:e,operation:c.operationName,variables:c.variables,timestamp:new Date().toISOString()};return("Bad Request Exception"===a&&b4("warn"," Bad request - check query syntax and variables",{message:a,path:d}),e?.code==="UNAUTHENTICATED")?(console.log("%c UNAUTHENTICATED error - delegating to AuthContext","color: #f39c12;"),b4("warn"," UNAUTHENTICATED error - AuthContext will handle logout",{message:a,path:d})):(("Forbidden resource"===a||e?.code==="FORBIDDEN")&&(console.log("%c Forbidden error - delegating to AuthContext","color: #f39c12;"),b4("warn"," Forbidden error - let AuthContext decide if logout is needed",{message:a,path:d})),(a.includes("validation")||a.includes("invalid"))&&b4("warn"," Validation error - check input data",{message:a,path:d}),a.includes("not found")&&b4("warn"," Resource not found - check if resource exists",{message:a,path:d,operation:c.operationName,variables:c.variables})),f}),b4("warn","GraphQL errors occurred",{errors:a.map(a=>({message:a.message,code:a.extensions?.code,path:a.path})),context:b5()}),console.groupEnd()),b){let a={type:b.name||"NetworkError",message:b.message,operation:c.operationName,variables:c.variables,timestamp:new Date().toISOString()};if("statusCode"in b&&(a.statusCode=b.statusCode),"result"in b&&b.result&&(a.result=b.result),"response"in b&&b.response&&(a.response=b.response),"request"in b&&b.request){let c=b.request;a.requestUrl=c?.url||"N/A",a.requestMethod=c?.method||"N/A"}if(b4("error","Network error occurred",{...a,context:b5()}),b.message?.includes("Socket closed")||b.message?.includes("WebSocket"))return void console.warn(" WebSocket connection lost - will attempt to reconnect");if("statusCode"in b&&401===b.statusCode&&(console.log("%c HTTP 401 Unauthorized - LOGGING OUT","color: #c0392b; font-weight: bold;"),b4("warn"," Unauthorized access (401) - redirecting to login")),"statusCode"in b){let a=b.statusCode;switch(a){case 403:console.log(`%c Forbidden (403) - insufficient permissions`,"color: #e67e22;"),b4("warn"," Forbidden (403) - insufficient permissions");break;case 404:console.log(`%c Not Found (404) - resource not found`,"color: #e67e22;"),b4("warn"," Not Found (404) - resource not found");break;case 500:console.log(`%c Internal Server Error (500)`,"color: #e74c3c;"),b4("error"," Internal Server Error (500)");break;case 502:console.log(`%c Bad Gateway (502) - server might be down`,"color: #e74c3c;"),b4("error"," Bad Gateway (502) - server might be down");break;case 503:console.log(`%c Service Unavailable (503) - please try again later`,"color: #e74c3c;"),b4("error"," Service Unavailable (503) - please try again later");break;default:console.log(`%c HTTP Error ${a}`,"color: #e67e22;"),b4("warn",` HTTP Error ${a}`)}}}}),b7.concat(b6)]),cache:new b_({typePolicies:{Query:{fields:{getPosts:{keyArgs:["filters"],merge:(a,b,{args:c})=>c?.pagination?.page===1?b:{...b,items:[...a?.items||[],...b?.items||[]]}},posts:{merge:(a,b,{args:c})=>b},getPostById:{merge:(a,b)=>b},tasks:{merge:(a=[],b)=>b},getTask:{merge:(a,b)=>b}}}}}),defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}});var b9=a.i(40947),ca=a.i(651332);class cb extends ca.Component{constructor(a){super(a),this.state={hasError:!1,error:void 0}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("Uncaught error:",a,b)}render(){return this.state.hasError?this.props.fallback||(0,f.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,f.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,f.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-red-200 p-8 text-center",children:[(0,f.jsx)("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,f.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,f.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),(0,f.jsx)("p",{className:"text-gray-600 mb-6",children:"There was an error loading the application. Please refresh the page to try again."}),(0,f.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"})]})})}):this.props.children}}function cc({children:a}){return(0,f.jsx)(cb,{children:(0,f.jsx)(k,{client:b8,children:(0,f.jsxs)(b9.AuthProvider,{children:[(0,f.jsx)(s,{}),a]})})})}a.s(["Providers",()=>cc],282842)},218844,a=>{"use strict";var b=a.i(321248),c=a.i(168918),d=a.i(772213),e=a.i(651332),f=a.i(421396),g=a.i(142414),h=a.i(313541),i=a.i(780368),j=a.i(984523),k=a.i(234357),l=e,m=a.i(25932);function n(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class o extends l.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,k.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:a,isPresent:c,anchorX:d,root:f}){let g=(0,l.useId)(),h=(0,l.useRef)(null),i=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,l.useContext)(m.MotionConfigContext),k=function(...a){return e.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=n(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():n(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,l.useInsertionEffect)(()=>{let{width:a,height:b,top:e,left:k,right:l}=i.current;if(c||!h.current||!a||!b)return;let m="left"===d?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${m}px !important;
            top: ${e}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[c]),(0,b.jsx)(o,{isPresent:c,childRef:h,sizeRef:i,children:l.cloneElement(a,{ref:k})})}let q=({children:a,initial:c,isPresent:d,onExitComplete:f,custom:g,presenceAffectsLayout:i,mode:k,anchorX:l,root:m})=>{let n=(0,h.useConstant)(r),o=(0,e.useId)(),q=!0,s=(0,e.useMemo)(()=>(q=!1,{id:o,initial:c,isPresent:d,custom:g,onExitComplete:a=>{for(let b of(n.set(a,!0),n.values()))if(!b)return;f&&f()},register:a=>(n.set(a,!1),()=>n.delete(a))}),[d,n,f]);return i&&q&&(s={...s}),(0,e.useMemo)(()=>{n.forEach((a,b)=>n.set(b,!1))},[d]),e.useEffect(()=>{d||n.size||!f||f()},[d]),"popLayout"===k&&(a=(0,b.jsx)(p,{isPresent:d,anchorX:l,root:m,children:a})),(0,b.jsx)(j.PresenceContext.Provider,{value:s,children:a})};function r(){return new Map}var s=a.i(566920);let t=a=>a.key||"";function u(a){let b=[];return e.Children.forEach(a,a=>{(0,e.isValidElement)(a)&&b.push(a)}),b}let v=({children:a,custom:c,initial:d=!0,onExitComplete:f,presenceAffectsLayout:j=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:n})=>{let[o,p]=(0,s.usePresence)(l),r=(0,e.useMemo)(()=>u(a),[a]),v=l&&!o?[]:r.map(t),w=(0,e.useRef)(!0),x=(0,e.useRef)(r),y=(0,h.useConstant)(()=>new Map),[z,A]=(0,e.useState)(r),[B,C]=(0,e.useState)(r);(0,i.useIsomorphicLayoutEffect)(()=>{w.current=!1,x.current=r;for(let a=0;a<B.length;a++){let b=t(B[a]);v.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,v.length,v.join("-")]);let D=[];if(r!==z){let a=[...r];for(let b=0;b<B.length;b++){let c=B[b],d=t(c);v.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(u(a)),A(r),null}let{forceRender:E}=(0,e.useContext)(g.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:B.map(a=>{let e=t(a),g=(!l||!!o)&&(r===B||v.includes(e));return(0,b.jsx)(q,{isPresent:g,initial:(!w.current||!!d)&&void 0,custom:c,presenceAffectsLayout:j,mode:k,root:n,onExitComplete:g?void 0:()=>{if(!y.has(e))return;y.set(e,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&p?.(),f&&f())},anchorX:m,children:a},e)})})};var w=a.i(196467),x=a.i(8912),y=a.i(649515),z=a.i(646254),A=a.i(363615),B=a.i(502794),C=a.i(921599),D=a.i(669055),E=a.i(208172),F=a.i(500891),G=a.i(779149);function H({apiUrl:a="http://localhost:3001",websocketUrl:c="http://localhost:3001/support-chat",primaryColor:d="#2563eb",position:g="bottom-right"}){let[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)([]),[n,o]=(0,e.useState)(""),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)(null),[H,I]=(0,e.useState)(0),[J,K]=(0,e.useState)(""),[L,M]=(0,e.useState)(!0),[N,O]=(0,e.useState)(null),P=(0,e.useRef)(null),Q=(0,e.useRef)(null),[R]=(0,x.useMutation)(y.CREATE_SUPPORT_CONVERSATION),[S]=(0,x.useMutation)(y.SEND_SUPPORT_MESSAGE);(0,e.useEffect)(()=>{if(h&&!t){let a=(0,w.io)(c,{transports:["websocket"]});return a.on("connect",()=>{console.log("Connected to support chat")}),a.on("new_message",a=>{m(b=>[...b,a]),"CUSTOMER"!==a.senderType&&I(a=>a+1),T()}),a.on("ai_suggestion",a=>{console.log("AI Suggestion:",a)}),a.on("user_typing",()=>{q(!0)}),a.on("user_stopped_typing",()=>{q(!1)}),a.on("agent_assigned",a=>{O(a.agent)}),u(a),()=>{a.disconnect()}}},[h,c]);let T=()=>{P.current?.scrollIntoView({behavior:"smooth"})};(0,e.useEffect)(()=>{T()},[l]);let U=async()=>{if(J.trim())try{let{data:a}=await R({variables:{input:{customerName:J,platform:"WEBSITE"}}});if(!a?.createSupportConversation)throw Error("Failed to create conversation");let b=a.createSupportConversation;s(b.id),M(!1),t&&t.emit("join_conversation",{conversationId:b.id}),m([{id:"1",content:`Xin ch\xe0o ${J}! T\xf4i c\xf3 th gi\xfap g\xec cho bn?`,senderType:"BOT",senderName:"Tr l o",sentAt:new Date().toISOString(),isRead:!0,isAIGenerated:!0}])}catch(a){console.error("Error starting conversation:",a)}},V=async()=>{if(n.trim()&&r){o("");try{let{data:a}=await S({variables:{input:{conversationId:r,content:n,senderType:"CUSTOMER",senderName:J}}});t&&a?.sendSupportMessage&&t.emit("send_message",{conversationId:r,messageId:a.sendSupportMessage.id,content:n,senderType:"CUSTOMER",senderName:J}),m(b=>[...b,{id:a?.sendSupportMessage?.id||Date.now().toString(),content:n,senderType:"CUSTOMER",senderName:J,sentAt:new Date().toISOString(),isRead:!1}])}catch(a){console.error("Error sending message:",a),o(n)}}},W="bottom-right"===g?"right-4 md:right-6":"left-4 md:left-6";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v,{children:!h&&(0,b.jsxs)(f.motion.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!0),className:`fixed bottom-4 md:bottom-6 ${W} z-50 w-14 h-14 md:w-16 md:h-16 rounded-full shadow-2xl flex items-center justify-center focus:outline-none focus:ring-4 focus:ring-opacity-50`,style:{backgroundColor:d,boxShadow:`0 10px 40px rgba(0, 0, 0, 0.2), 0 0 0 4px ${d}20`},children:[(0,b.jsx)(z.MessageCircle,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}),H>0&&(0,b.jsx)(f.motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:H>9?"9+":H})]})}),(0,b.jsx)(v,{children:h&&(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,height:j?"auto":void 0},exit:{opacity:0,y:20,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:`fixed bottom-4 md:bottom-6 ${W} z-50 w-[calc(100vw-2rem)] md:w-96 bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col`,style:{maxHeight:j?"60px":"calc(100vh - 8rem)",height:j?"auto":"600px"},children:[(0,b.jsxs)("div",{className:"p-4 flex items-center justify-between text-white relative overflow-hidden",style:{backgroundColor:d},children:[(0,b.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,b.jsx)("div",{className:"absolute w-32 h-32 bg-white rounded-full -top-10 -left-10 animate-pulse"}),(0,b.jsx)("div",{className:"absolute w-24 h-24 bg-white rounded-full -bottom-5 -right-5 animate-pulse delay-300"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3 relative z-10",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:N?.avatar?(0,b.jsx)("img",{src:N.avatar,alt:N.name,className:"w-full h-full rounded-full object-cover"}):(0,b.jsx)(F.Bot,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:N?N.name:"H tr khch hng"}),(0,b.jsx)("p",{className:"text-xs opacity-90",children:p?"ang nhp...":"Trc tuyn"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 relative z-10",children:[(0,b.jsx)("button",{onClick:()=>k(!j),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(D.ChevronDown,{className:`w-5 h-5 transition-transform ${j?"rotate-180":""}`})}),(0,b.jsx)("button",{onClick:()=>{i(!1),I(0)},className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(A.X,{className:"w-5 h-5"})})]})]}),!j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[L?(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2 text-gray-900",children:"Cho mng bn! "}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Vui lng cho chng ti bit tn ca bn  bt u hi thoi."}),(0,b.jsx)("input",{type:"text",value:J,onChange:a=>K(a.target.value),onKeyPress:a=>"Enter"===a.key&&U(),placeholder:"Nhp tn ca bn...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none mb-3"}),(0,b.jsx)("button",{onClick:U,disabled:!J.trim(),className:"w-full py-2 rounded-lg font-medium text-white disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",style:{backgroundColor:d},children:"Bt u chat"})]}):l.map((a,c)=>(0,b.jsx)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*c},className:`flex ${"CUSTOMER"===a.senderType?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 ${"CUSTOMER"===a.senderType?"text-white rounded-br-sm":"bg-white text-gray-900 rounded-bl-sm shadow-sm"}`,style:{backgroundColor:"CUSTOMER"===a.senderType?d:void 0},children:["CUSTOMER"!==a.senderType&&(0,b.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[a.isAIGenerated?(0,b.jsx)(F.Bot,{className:"w-3 h-3 text-blue-500"}):(0,b.jsx)(G.User,{className:"w-3 h-3 text-gray-500"}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-600",children:a.senderName})]}),(0,b.jsx)("p",{className:"text-sm leading-relaxed",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-1 mt-1",children:[(0,b.jsx)("span",{className:`text-xs ${"CUSTOMER"===a.senderType?"text-white/70":"text-gray-400"}`,children:new Date(a.sentAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),"CUSTOMER"===a.senderType&&(0,b.jsx)(E.CheckCheck,{className:`w-3.5 h-3.5 ${a.isRead?"text-blue-300":"text-white/50"}`})]})]})},a.id)),p&&(0,b.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:(0,b.jsx)("div",{className:"bg-white rounded-2xl rounded-bl-sm px-4 py-3 shadow-sm",children:(0,b.jsxs)("div",{className:"flex space-x-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,b.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,b.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),(0,b.jsx)("div",{ref:P})]}),!L&&(0,b.jsxs)("div",{className:"p-4 bg-white border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:"nh km file",children:(0,b.jsx)(C.Paperclip,{className:"w-5 h-5 text-gray-500"})}),(0,b.jsx)("div",{className:"flex-1 relative",children:(0,b.jsx)("input",{ref:Q,type:"text",value:n,onChange:a=>{o(a.target.value),t&&r&&(t.emit("typing_start",{conversationId:r,userId:"customer"}),setTimeout(()=>{t.emit("typing_stop",{conversationId:r,userId:"customer"})},3e3))},onKeyPress:a=>"Enter"===a.key&&V(),placeholder:"Nhp tin nhn...",className:"w-full px-4 py-2.5 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none"})}),(0,b.jsx)("button",{onClick:V,disabled:!n.trim(),className:"p-2.5 rounded-xl text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-105 active:scale-95 flex-shrink-0",style:{backgroundColor:d},children:(0,b.jsx)(B.Send,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:1===l.length&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 rounded-full transition-colors",children:" Gi sn phm"}),(0,b.jsx)("button",{className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 rounded-full transition-colors",children:" Theo di n hng"}),(0,b.jsx)("button",{className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 rounded-full transition-colors",children:" Vn chuyn"})]})})]})]})]})})]})}let I=d.gql`
  query GetSupportChatSettings {
    websiteSettings(
      category: "SUPPORT_CHAT"
      isActive: true
    ) {
      key
      value
      type
    }
  }
`;function J(){let{data:a,loading:d}=(0,c.useQuery)(I);if(d)return null;let e=a?.websiteSettings||[],f={};if(e.forEach(a=>{let b=a.key.replace("support_chat.",""),c=a.value;if("BOOLEAN"===a.type)c="true"===c;else if("NUMBER"===a.type)c=parseFloat(c);else if("JSON"===a.type)try{c=JSON.parse(c)}catch(a){console.error("Failed to parse JSON setting:",b,c)}f[b]=c}),!1===f.enabled)return null;let g="https://appapi.tazagroup.vn/graphql".replace("/graphql","")||"http://116.118.49.243:12001",h="https://appapi.tazagroup.vn/graphql".replace("/graphql","/support-chat")||"http://116.118.49.243:12001/support-chat";return(0,b.jsx)(H,{apiUrl:g,websocketUrl:h,primaryColor:f.primaryColor||"#16a34a",position:f.position||"bottom-right"})}a.s(["default",()=>J],218844)}];

//# sourceMappingURL=frontend_src_components_29211bf0._.js.map
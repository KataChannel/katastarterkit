{"version":3,"sources":["turbopack:///[project]/frontend/src/components/page-builder/contexts/PageActionsContext.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/ImportTemplateDialog.tsx","turbopack:///[project]/frontend/src/components/page-builder/contexts/index.ts","turbopack:///[project]/frontend/src/components/page-builder/contexts/UIStateContext.tsx","turbopack:///[project]/frontend/src/data/blockTemplates.ts","turbopack:///[project]/frontend/src/components/page-builder/contexts/TemplateContext.tsx","turbopack:///[project]/frontend/src/components/page-builder/contexts/HistoryContext.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/TemplateLibrary.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/SaveTemplateDialog.tsx","turbopack:///[project]/frontend/src/components/page-builder/PageBuilderProvider.tsx","turbopack:///[project]/frontend/src/components/page-builder/DynamicPageConfig.tsx","turbopack:///[project]/frontend/src/components/page-builder/PageSettingsForm.tsx","turbopack:///[project]/frontend/src/components/page-builder/PageBuilderTopBar.tsx","turbopack:///[project]/frontend/src/components/page-builder/layout/EditorCanvas.tsx","turbopack:///[project]/frontend/src/components/page-builder/layout/EditorFooter.tsx","turbopack:///[project]/frontend/src/components/page-builder/hooks/useFilteredAndGrouped.ts","turbopack:///[project]/frontend/src/components/page-builder/hooks/useCategoryToggle.ts","turbopack:///[project]/frontend/src/components/page-builder/panels/LeftPanel/ElementsLibrary.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/LeftPanel/TemplatesLibrary.tsx","turbopack:///[project]/frontend/src/components/page-builder/components/LibraryCard.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/LeftPanel/SavedBlocksLibrary.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/LeftPanel/LeftPanel.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/StylePanel/LayoutEditor.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/StylePanel/VisualSpacingEditor.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/ConfirmationDialog.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/TemplatePreview.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/TemplateCategoryFilter.tsx","turbopack:///[project]/frontend/src/components/page-builder/templates/TemplateCard.tsx","turbopack:///[project]/frontend/src/hooks/useTemplates.ts","turbopack:///[project]/frontend/src/app/admin/pagebuilder/page.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/StylePanel/AdvancedColorPicker.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/StylePanel/BorderEditor.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/StylePanel/StylePanel.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/DevLogPanel.tsx","turbopack:///[project]/frontend/src/components/page-builder/panels/RightPanel/RightPanel.tsx","turbopack:///[project]/frontend/src/components/page-builder/layout/FullScreenLayout.tsx","turbopack:///[project]/frontend/src/components/page-builder/FullScreenPageBuilder.tsx","turbopack:///[project]/frontend/src/app/admin/pagebuilder/data-table.tsx","turbopack:///[project]/frontend/src/components/page-builder/ErrorBoundary.tsx","turbopack:///[project]/node_modules/.bun/react-colorful@5.6.1+498059a1009c1789/node_modules/react-colorful/dist/index.mjs","turbopack:///[project]/frontend/src/constants/blockTypes.ts","turbopack:///[project]/frontend/src/components/page-builder/StorageWarning.tsx","turbopack:///[project]/frontend/src/utils/customTemplates.ts","turbopack:///[project]/frontend/src/components/page-builder/blocks/SortableBlockWrapper.tsx","turbopack:///[project]/frontend/src/components/page-builder/PageBuilderCanvas.tsx","turbopack:///[project]/frontend/src/utils/templateThumbnails.ts","turbopack:///[project]/frontend/src/utils/storageManager.ts","turbopack:///[project]/frontend/src/lib/templateStore.ts","turbopack:///[project]/frontend/src/lib/graphql/custom-templates.graphql.ts","turbopack:///[project]/frontend/src/lib/templateDefaults.ts","turbopack:///[project]/frontend/src/components/page-builder/utils/pageBuilderLogger.ts","turbopack:///[project]/frontend/src/types/template.ts"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useCallback, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { toast } from 'sonner';\nimport { usePageOperations, useBlockOperations, useNestedBlockOperations } from '@/hooks/usePageBuilder';\nimport { BlockType, PageBlock, CreatePageInput, UpdatePageInput } from '@/types/page-builder';\nimport { pageBuilderLogger, LOG_OPERATIONS } from '../utils/pageBuilderLogger';\nimport { usePageState } from './PageStateContext';\nimport { useTemplate } from './TemplateContext';\nimport { useUIState } from './UIStateContext';\nimport { useHistory } from './HistoryContext';\nimport { BlockTemplate } from '@/data/blockTemplates';\n\n/**\n * Default content for each block type\n */\nexport const DEFAULT_BLOCK_CONTENT = {\n  [BlockType.TEXT]: { content: 'Enter your text here...', style: {} },\n  [BlockType.IMAGE]: { src: '', alt: '', style: {} },\n  [BlockType.HERO]: { \n    title: 'Hero Title', \n    subtitle: 'Hero subtitle text', \n    backgroundImage: '', \n    style: {} \n  },\n  [BlockType.BUTTON]: { \n    text: 'Click me', \n    link: '#', \n    variant: 'primary', \n    style: {} \n  },\n  [BlockType.CAROUSEL]: {\n    slides: [\n      {\n        id: '1',\n        title: 'Slide 1',\n        subtitle: 'Welcome to our carousel',\n        description: 'This is the first slide',\n        image: 'https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop',\n        cta: { text: 'Learn More', link: '#' },\n        badge: 'NEW',\n        bgColor: 'bg-gradient-to-r from-blue-500 to-purple-600'\n      }\n    ],\n    autoPlay: true,\n    autoPlayInterval: 5000,\n    showIndicators: true,\n    showArrows: true,\n    loop: true,\n    style: {}\n  },\n  [BlockType.TEAM]: { title: 'Our Team', members: [], style: {} },\n  [BlockType.STATS]: { title: 'Our Stats', stats: [], style: {} },\n  [BlockType.CONTACT_INFO]: { email: '', phone: '', address: '', style: {} },\n  [BlockType.DIVIDER]: { thickness: 1, color: '#e5e7eb', style: {} },\n  [BlockType.SPACER]: { height: 40, style: {} },\n  [BlockType.CONTAINER]: { \n    maxWidth: '1200px',\n    padding: '20px',\n    backgroundColor: 'transparent',\n    style: {} \n  },\n  [BlockType.SECTION]: { \n    backgroundColor: '#ffffff',\n    padding: '40px 20px',\n    style: {} \n  },\n  [BlockType.GRID]: { columns: 2, gap: '20px', style: {} },\n  [BlockType.FLEX_ROW]: { \n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    gap: '10px',\n    style: {} \n  },\n  [BlockType.FLEX_COLUMN]: { \n    justifyContent: 'flex-start',\n    alignItems: 'stretch',\n    gap: '10px',\n    style: {} \n  },\n  [BlockType.DYNAMIC]: { \n    // Initialize with a random sample template for better user experience\n    componentType: 'template',\n    templateId: 'sample-template',\n    templateName: 'Sample Template',\n    // Will be replaced with actual template on block add\n    template: '<div class=\"p-6 border-2 border-dashed border-gray-300 rounded-lg text-center\"><h3 class=\"text-lg font-semibold mb-2\">Dynamic Block</h3><p class=\"text-gray-600\">Loading sample template...</p></div>',\n    dataSource: { type: 'static', data: {} },\n    variables: {},\n    style: {} \n  },\n  [BlockType.PRODUCT_LIST]: {\n    title: 'Sản phẩm nổi bật',\n    subtitle: 'Khám phá các sản phẩm chất lượng cao',\n    limit: 12,\n    filters: { isFeatured: true },\n    layout: 'grid',\n    columns: 3,\n    showPrice: true,\n    showCategory: true,\n    showDescription: false,\n    showAddToCart: true,\n    cardVariant: 'default',\n    style: {}\n  },\n  [BlockType.PRODUCT_DETAIL]: {\n    productSlug: '',\n    showGallery: true,\n    showDescription: true,\n    showSpecs: true,\n    showReviews: false,\n    showRelated: false,\n    layout: 'default',\n    style: {}\n  },\n  [BlockType.VIDEO]: { url: '', title: '', autoplay: false, controls: true, muted: false, loop: false, style: {} },\n  [BlockType.SEARCH]: { \n    placeholder: 'Tìm kiếm...', \n    searchType: 'global',\n    showFilters: true,\n    showResults: true,\n    style: {} \n  },\n  [BlockType.BOOKMARK]: {\n    bookmarks: [],\n    displayMode: 'list',\n    showCategories: true,\n    allowEdit: true,\n    style: {}\n  },\n} as const;\n\n/**\n * Page Actions Context - Manages all CRUD operations\n */\ninterface PageActionsContextType {\n  // Page operations\n  handlePageSave: () => Promise<void>;\n  handlePageDelete: () => Promise<void>;\n  \n  // Block operations\n  handleAddBlock: (blockType: BlockType) => Promise<void>;\n  handleAddTemplateBlock: (templateConfig: {\n    templateId: string;\n    templateName: string;\n    template: string;\n    dataSource: any;\n    variables: any;\n  }) => Promise<void>;\n  handleBlockUpdate: (blockId: string, content: any, style?: any) => Promise<void>;\n  handleBlockDelete: (blockId: string) => Promise<void>;\n  handleBlocksReorder: (newBlocks: PageBlock[]) => Promise<void>;\n  handleSelectBlock: (blockId: string | null) => void;\n  handleUpdateBlockStyle: (blockId: string, style: any) => Promise<void>;\n  \n  // History operations\n  handleUndo: () => Promise<void>;\n  handleRedo: () => Promise<void>;\n  \n  // Nested block operations\n  handleAddChild: (parentId: string) => void;\n  handleAddChildBlock: (parentId: string, blockType: BlockType) => Promise<void>;\n  handleCloseAddChildDialog: () => void;\n  \n  // Template operations\n  handleApplyTemplate: (template: BlockTemplate) => Promise<void>;\n  \n  // Drag and drop\n  handleDragStart: (event: any) => void;\n  handleDragEnd: (event: any) => Promise<void>;\n}\n\nconst PageActionsContext = createContext<PageActionsContextType | undefined>(undefined);\n\ninterface PageActionsProviderProps {\n  children: ReactNode;\n  pageId?: string;\n}\n\nexport function PageActionsProvider({ children, pageId }: PageActionsProviderProps) {\n  const router = useRouter();\n  const pageState = usePageState();\n  const templateState = useTemplate();\n  const uiState = useUIState();\n  const history = useHistory();\n  \n  const { createPage, updatePage, deletePage } = usePageOperations();\n  // Initialize with pageId from props, but fall back to state's page ID\n  const effectivePageId = pageId || pageState.page?.id || '';\n  const { addBlock, updateBlock, deleteBlock, updateBlocksOrder } = useBlockOperations(effectivePageId);\n  const nestedOps = useNestedBlockOperations(effectivePageId);\n  \n  // Page operations\n  const handlePageSave = useCallback(async () => {\n    try {\n      const { editingPage, isNewPageMode, blocks, refetch, setEditingPage } = pageState;\n      \n      if (!editingPage) {\n        toast.error('No page to save');\n        return;\n      }\n      \n      if (isNewPageMode) {\n        const input: CreatePageInput = {\n          title: editingPage.title,\n          slug: editingPage.slug,\n          content: editingPage.content || {},\n          status: editingPage.status,\n          seoTitle: editingPage.seoTitle,\n          seoDescription: editingPage.seoDescription,\n          seoKeywords: editingPage.seoKeywords || [],\n          isHomepage: editingPage.isHomepage || false,\n        };\n        \n        const result = await createPage(input);\n        pageBuilderLogger.success(LOG_OPERATIONS.PAGE_CREATE, 'Page created successfully', result);\n        toast.success('Page created successfully!');\n        \n        if (result?.data?.createPage) {\n          const newPage = result.data.createPage;\n          setEditingPage(newPage);\n          // After creating a new page, redirect to the new page's editor\n          if (newPage?.id) {\n            router.push(`/admin/pagebuilder/${newPage.id}`);\n          }\n          // After creating a new page, we've exited \"new page mode\" since we now have an ID\n          // Do not call refetch here since it will try to query with the old empty pageId\n          // The page state will be automatically updated through the context\n        }\n      } else {\n        const input: UpdatePageInput = {\n          title: editingPage.title,\n          slug: editingPage.slug,\n          content: editingPage.content || {},\n          status: editingPage.status,\n          seoTitle: editingPage.seoTitle,\n          seoDescription: editingPage.seoDescription,\n          seoKeywords: editingPage.seoKeywords || [],\n          isHomepage: editingPage.isHomepage || false,\n        };\n        \n        await updatePage(editingPage.id, input);\n        pageBuilderLogger.success(LOG_OPERATIONS.PAGE_UPDATE, 'Page updated successfully', { pageId: editingPage.id });\n        toast.success('Page saved successfully!');\n        \n        // For existing pages, refetch to sync state\n        await refetch();\n      }\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.PAGE_UPDATE, 'Failed to save page', { error });\n      toast.error(error?.message || 'Failed to save page');\n    }\n  }, [pageState, createPage, updatePage, router]);\n  \n  const handlePageDelete = useCallback(async () => {\n    try {\n      const { page } = pageState;\n      if (!page?.id) return;\n      \n      await deletePage(page.id);\n      pageBuilderLogger.success(LOG_OPERATIONS.PAGE_DELETE, 'Page deleted', { pageId: page.id });\n      toast.success('Page deleted successfully!');\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.PAGE_DELETE, 'Failed to delete page', { error });\n      toast.error(error?.message || 'Failed to delete page');\n    }\n  }, [pageState, deletePage]);\n  \n  // Block operations\n  const handleAddBlock = useCallback(async (blockType: BlockType) => {\n    try {\n      const { page, refetch, blocks } = pageState;\n      \n      if (!page?.id) {\n        toast.error('Please create a page first');\n        console.warn('[PageBuilder] Cannot add block: no page ID', { page });\n        return;\n      }\n      \n      let defaultContent = DEFAULT_BLOCK_CONTENT[blockType as keyof typeof DEFAULT_BLOCK_CONTENT] || {};\n      \n      // For Dynamic Blocks, start with basic empty template\n      // User will choose template in the dialog\n      if (blockType === BlockType.DYNAMIC) {\n        defaultContent = {\n          componentType: 'template',\n          templateId: null,\n          templateName: 'New Dynamic Block',\n          template: '<div class=\"p-6 border-2 border-dashed border-gray-300 rounded-lg text-center\"><h3 class=\"text-lg font-semibold mb-2\">Dynamic Block</h3><p class=\"text-gray-600\">Select a template or paste your HTML template here.</p></div>',\n          dataSource: { type: 'static', data: {} },\n          variables: {},\n          style: {},\n        } as any;\n        console.log('[PageBuilder] Dynamic Block created - user will pick template');\n      }\n      \n      // Don't send order - let backend calculate it to avoid race conditions\n      const input = {\n        type: blockType,\n        content: defaultContent,\n        // order is NOT sent, backend will auto-calculate based on block count\n      };\n      \n      console.log('[PageBuilder] Adding block:', { blockType, pageId: page.id });\n      \n      const result = await addBlock(input);\n      pageBuilderLogger.success(LOG_OPERATIONS.BLOCK_CREATE, 'Block added', { blockType });\n      toast.success(blockType === BlockType.DYNAMIC ? '✨ Dynamic Block added - pick a template!' : 'Block added successfully!');\n      \n      console.log('[PageBuilder] Block added successfully:', result);\n      await refetch();\n      \n      // Push to history after successful add\n      const newBlocks = await refetch();\n      if (newBlocks?.data?.page?.blocks) {\n        history.pushHistory(newBlocks.data.page.blocks, `Added ${blockType} block`);\n      }\n    } catch (error: any) {\n      console.error('[PageBuilder] Block add error:', error);\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_CREATE, 'Failed to add block', { error });\n      toast.error(error?.message || 'Failed to add block');\n    }\n  }, [pageState, addBlock, history]);\n  \n  const handleAddTemplateBlock = useCallback(async (templateConfig: any) => {\n    try {\n      const { page, refetch } = pageState;\n      \n      if (!page?.id) {\n        toast.error('Please create a page first');\n        return;\n      }\n      \n      const input = {\n        type: BlockType.DYNAMIC,\n        content: {\n          ...DEFAULT_BLOCK_CONTENT[BlockType.DYNAMIC],\n          ...templateConfig,\n        },\n        // order is NOT sent, backend will auto-calculate\n      };\n      \n      await addBlock(input);\n      pageBuilderLogger.success(LOG_OPERATIONS.BLOCK_CREATE, 'Template block added', templateConfig);\n      toast.success('Template block added!');\n      await refetch();\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_CREATE, 'Failed to add template block', { error });\n      toast.error(error?.message || 'Failed to add template block');\n    }\n  }, [pageState, addBlock]);\n  \n  const handleBlockUpdate = useCallback(async (blockId: string, content: any, style?: any) => {\n    try {\n      const input: any = { content };\n      if (style !== undefined) {\n        input.style = style;\n      }\n      \n      // If content has config property, extract and save it separately\n      if (content?.config !== undefined) {\n        input.config = content.config;\n      }\n      \n      await updateBlock(blockId, input);\n      pageBuilderLogger.debug(LOG_OPERATIONS.BLOCK_UPDATE, 'Block updated', { blockId, content, style });\n      const result = await pageState.refetch();\n      \n      // Push to history after successful update\n      if (result?.data?.page?.blocks) {\n        history.pushHistory(result.data.page.blocks, `Updated block`);\n      }\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_UPDATE, 'Failed to update block', { error });\n      toast.error(error?.message || 'Failed to update block');\n    }\n  }, [updateBlock, pageState, history]);\n  \n  const handleBlockDelete = useCallback(async (blockId: string) => {\n    try {\n      await deleteBlock(blockId);\n      pageBuilderLogger.success(LOG_OPERATIONS.BLOCK_DELETE, 'Block deleted', { blockId });\n      toast.success('Block deleted!');\n      const result = await pageState.refetch();\n      \n      // Push to history after successful delete\n      if (result?.data?.page?.blocks) {\n        history.pushHistory(result.data.page.blocks, `Deleted block`);\n      }\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_DELETE, 'Failed to delete block', { error });\n      toast.error(error?.message || 'Failed to delete block');\n    }\n  }, [deleteBlock, pageState, history]);\n  \n  const handleBlocksReorder = useCallback(async (newBlocks: PageBlock[]) => {\n    try {\n      const { page, setBlocks, refetch } = pageState;\n      \n      if (!page?.id) return;\n      \n      setBlocks(newBlocks);\n      \n      const updates = newBlocks.map((b, index) => ({\n        id: b.id,\n        order: index,\n      }));\n      await updateBlocksOrder(updates);\n      \n      pageBuilderLogger.debug(LOG_OPERATIONS.BLOCK_REORDER, 'Blocks reordered', { count: newBlocks.length });\n      const result = await refetch();\n      \n      // Push to history after successful reorder\n      if (result?.data?.page?.blocks) {\n        history.pushHistory(result.data.page.blocks, `Reordered blocks`);\n      }\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_REORDER, 'Failed to reorder blocks', { error });\n      toast.error('Failed to reorder blocks');\n    }\n  }, [pageState, updateBlocksOrder]);\n  \n  const handleSelectBlock = useCallback((blockId: string | null) => {\n    pageState.setSelectedBlockId(blockId);\n  }, [pageState]);\n  \n  const handleUpdateBlockStyle = useCallback(async (blockId: string, style: any) => {\n    try {\n      const { refetch } = pageState;\n      \n      const input: any = { style };\n      await updateBlock(blockId, input);\n      pageBuilderLogger.debug(LOG_OPERATIONS.BLOCK_STYLE_UPDATE, 'Block style updated', { blockId, style });\n      const result = await refetch();\n      \n      // Push to history after successful style update\n      if (result?.data?.page?.blocks) {\n        history.pushHistory(result.data.page.blocks, `Updated block style`);\n      }\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_STYLE_UPDATE, 'Failed to update style', { error });\n      toast.error('Failed to update style');\n    }\n  }, [pageState, updateBlock, history]);\n  \n  // History operations\n  const handleUndo = useCallback(async () => {\n    try {\n      const previousBlocks = history.undo();\n      \n      if (!previousBlocks) {\n        toast.info('Nothing to undo');\n        return;\n      }\n      \n      // Update blocks state\n      pageState.setBlocks(previousBlocks);\n      \n      // Sync with backend\n      const updates = previousBlocks.map((b, index) => ({\n        id: b.id,\n        order: index,\n      }));\n      await updateBlocksOrder(updates);\n      await pageState.refetch();\n      \n      const action = history.getUndoAction();\n      toast.success(`Undo: ${action || 'Previous action'}`);\n      pageBuilderLogger.debug('UNDO', 'Undo performed', { action });\n    } catch (error: any) {\n      pageBuilderLogger.error('UNDO', 'Failed to undo', { error });\n      toast.error('Failed to undo');\n    }\n  }, [history, pageState, updateBlocksOrder]);\n  \n  const handleRedo = useCallback(async () => {\n    try {\n      const nextBlocks = history.redo();\n      \n      if (!nextBlocks) {\n        toast.info('Nothing to redo');\n        return;\n      }\n      \n      // Update blocks state\n      pageState.setBlocks(nextBlocks);\n      \n      // Sync with backend\n      const updates = nextBlocks.map((b, index) => ({\n        id: b.id,\n        order: index,\n      }));\n      await updateBlocksOrder(updates);\n      await pageState.refetch();\n      \n      const action = history.getRedoAction();\n      toast.success(`Redo: ${action || 'Next action'}`);\n      pageBuilderLogger.debug('REDO', 'Redo performed', { action });\n    } catch (error: any) {\n      pageBuilderLogger.error('REDO', 'Failed to redo', { error });\n      toast.error('Failed to redo');\n    }\n  }, [history, pageState, updateBlocksOrder]);\n  \n  // Nested block operations\n  const handleAddChild = useCallback((parentId: string) => {\n    console.log(`[PageActionsContext] handleAddChild called with parentId:`, parentId);\n    // Use atomic operation to set both states together\n    uiState.openAddChildDialog(parentId);\n    console.log(`[PageActionsContext] openAddChildDialog called`);\n  }, [uiState]);\n  \n  const handleAddChildBlock = useCallback(async (parentId: string, blockType: BlockType) => {\n    try {\n      const { refetch } = pageState;\n      \n      const defaultContent = DEFAULT_BLOCK_CONTENT[blockType as keyof typeof DEFAULT_BLOCK_CONTENT] || {};\n      \n      await nestedOps.addChildBlock(\n        parentId,\n        blockType,\n        defaultContent,\n        {}\n      );\n      \n      pageBuilderLogger.success(LOG_OPERATIONS.BLOCK_CREATE, 'Child block added', { parentId, blockType });\n      toast.success('Child block added!');\n      \n      // Use atomic close operation\n      uiState.closeAddChildDialog();\n      \n      await refetch();\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_CREATE, 'Failed to add child block', { error });\n      toast.error('Failed to add child block');\n    }\n  }, [pageState, uiState, nestedOps]);\n  \n  const handleCloseAddChildDialog = useCallback(() => {\n    uiState.closeAddChildDialog();\n  }, [uiState]);\n  \n  // Template operations\n  const handleApplyTemplate = useCallback(async (template: BlockTemplate) => {\n    try {\n      const { page, editingPage, isNewPageMode, refetch } = pageState;\n      const { setIsApplyingTemplate, setShowPreviewModal } = templateState;\n      \n      if (!editingPage?.id && !isNewPageMode) {\n        toast.error('Please create a page first');\n        return;\n      }\n      \n      setIsApplyingTemplate(true);\n      \n      const currentPageId = page?.id || editingPage?.id;\n      if (!currentPageId) {\n        toast.error('Page ID not found');\n        return;\n      }\n      \n      for (const block of template.blocks) {\n        await addBlock({\n          type: block.type,\n          content: block.content,\n          order: block.order,\n        });\n      }\n      \n      pageBuilderLogger.success(LOG_OPERATIONS.TEMPLATE_APPLY, 'Template applied', { templateId: template.id });\n      toast.success(`Template \"${template.name}\" applied!`);\n      \n      setShowPreviewModal(false);\n      await refetch();\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.TEMPLATE_APPLY, 'Failed to apply template', { error });\n      toast.error('Failed to apply template');\n    } finally {\n      templateState.setIsApplyingTemplate(false);\n    }\n  }, [pageState, templateState, addBlock]);\n  \n  // Drag and drop\n  const handleDragStart = useCallback((event: any) => {\n    const { active } = event;\n    const { blocks, setDraggedBlock } = pageState;\n    \n    // Debug: Log the entire active object structure\n    console.log('[PageBuilder] handleDragStart full active object:', active);\n    console.log('[PageBuilder] handleDragStart active.data:', active.data);\n    \n    const dragType = active.data?.type;\n    const blockType = active.data?.blockType;\n    \n    console.log('[PageBuilder] Drag started:', {\n      activeId: active.id,\n      activeType: dragType,\n      activeBlockType: blockType,\n      fullData: active.data,\n    });\n    \n    // Handle existing block drag\n    if (dragType !== 'new-block') {\n      const draggedBlock = blocks.find(b => b.id === active.id);\n      if (draggedBlock) {\n        setDraggedBlock(draggedBlock);\n      }\n    }\n    // For new blocks from LeftPanel, no need to set draggedBlock\n  }, [pageState]);\n  \n  const handleDragEnd = useCallback(async (event: any) => {\n    const { active, over } = event;\n    const { blocks, setDraggedBlock } = pageState;\n    \n    // Debug: Log full event structure\n    console.log('[PageBuilder] handleDragEnd full event:', event);\n    console.log('[PageBuilder] handleDragEnd active:', active);\n    console.log('[PageBuilder] handleDragEnd over:', over);\n    \n    const dragType = active.data?.type;\n    const blockType = active.data?.blockType;\n    \n    console.log('[PageBuilder] Drag ended:', {\n      activeId: active.id,\n      activeType: dragType,\n      activeBlockType: blockType,\n      overId: over?.id,\n      overType: over?.data?.type,\n    });\n    \n    setDraggedBlock(null);\n    \n    if (!over) {\n      console.warn('[PageBuilder] No drop target');\n      return;\n    }\n    \n    // Handle new block from LeftPanel\n    // Check if the draggable ID starts with 'element-' which indicates a library element\n    const isLibraryElement = active.id?.toString().startsWith('element-');\n    \n    if (isLibraryElement || dragType === 'new-block') {\n      // Extract BlockType from active.id if data is missing\n      // Format: 'element-TEXT', 'element-CAROUSEL', etc.\n      let blockTypeValue = blockType;\n      \n      if (!blockTypeValue && isLibraryElement) {\n        const typeStr = active.id.replace('element-', '');\n        // Try to find the BlockType enum value by name\n        blockTypeValue = (BlockType as any)[typeStr];\n        console.log('[PageBuilder] Extracted BlockType from ID:', { typeStr, blockTypeValue });\n      }\n      \n      console.log('[PageBuilder] New block detected:', { blockTypeValue, targetId: over.id, dragType, isLibraryElement });\n      \n      // Only accept drop on canvas-droppable\n      if (blockTypeValue !== undefined && over.id === 'canvas-droppable') {\n        console.log('[PageBuilder] Adding new block:', blockTypeValue);\n        await handleAddBlock(blockTypeValue);\n      } else {\n        console.warn('[PageBuilder] New block rejected:', { \n          reason: over.id !== 'canvas-droppable' ? 'wrong-target' : 'no-blocktype',\n          targetId: over.id,\n          blockTypeValue,\n          isDefined: blockTypeValue !== undefined,\n        });\n      }\n      return;\n    }\n    \n    // Handle existing block reorder\n    if (active.id === over.id) {\n      console.log('[PageBuilder] Same block, no reorder');\n      return;\n    }\n    \n    const oldIndex = blocks.findIndex(b => b.id === active.id);\n    const newIndex = blocks.findIndex(b => b.id === over.id);\n    \n    if (oldIndex === -1 || newIndex === -1) {\n      console.warn('[PageBuilder] Invalid block indices:', { oldIndex, newIndex });\n      return;\n    }\n    \n    const newBlocks = [...blocks];\n    const [movedBlock] = newBlocks.splice(oldIndex, 1);\n    newBlocks.splice(newIndex, 0, movedBlock);\n    \n    handleBlocksReorder(newBlocks);\n  }, [pageState, handleBlocksReorder, handleAddBlock]);\n  \n  const value: PageActionsContextType = {\n    handlePageSave,\n    handlePageDelete,\n    handleAddBlock,\n    handleAddTemplateBlock,\n    handleBlockUpdate,\n    handleBlockDelete,\n    handleBlocksReorder,\n    handleSelectBlock,\n    handleUpdateBlockStyle,\n    handleUndo,\n    handleRedo,\n    handleAddChild,\n    handleAddChildBlock,\n    handleCloseAddChildDialog,\n    handleApplyTemplate,\n    handleDragStart,\n    handleDragEnd,\n  };\n  \n  return (\n    <PageActionsContext.Provider value={value}>\n      {children}\n    </PageActionsContext.Provider>\n  );\n}\n\nexport function usePageActions() {\n  const context = useContext(PageActionsContext);\n  if (context === undefined) {\n    // Return default values instead of throwing during SSR or initial render\n    if (typeof window === 'undefined') {\n      return {\n        handlePageSave: async () => {},\n        handlePageDelete: async () => {},\n        handleAddBlock: async () => {},\n        handleAddTemplateBlock: async () => {},\n        handleBlockUpdate: async () => {},\n        handleBlockDelete: async () => {},\n        handleBlocksReorder: async () => {},\n        handleSelectBlock: () => {},\n        handleUpdateBlockStyle: async () => {},\n        handleUndo: async () => {},\n        handleRedo: async () => {},\n        handleAddChild: () => {},\n        handleAddChildBlock: async () => {},\n        handleCloseAddChildDialog: () => {},\n        handleApplyTemplate: async () => {},\n        handleDragStart: () => {},\n        handleDragEnd: async () => {},\n      } as PageActionsContextType;\n    }\n    throw new Error(\n      'usePageActions must be used within a PageActionsProvider. ' +\n      'Make sure your component is wrapped with <PageBuilderProvider>'\n    );\n  }\n  return context;\n}\n","/**\n * PageBuilder Template System - Import Template Dialog\n * Phase 5.3: Template Operations\n * \n * Dialog for importing templates from JSON files\n */\n\n'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { PageTemplate, TemplateCategory, ImportTemplateData } from '@/types/template';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Upload, FileText, AlertCircle, CheckCircle, X, Download } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\ninterface ImportTemplateDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onImport: (templateData: ImportTemplateData) => Promise<boolean>;\n}\n\nexport function ImportTemplateDialog({\n  isOpen,\n  onClose,\n  onImport,\n}: ImportTemplateDialogProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [previewData, setPreviewData] = useState<PageTemplate | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isImporting, setIsImporting] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Validate template structure\n  const validateTemplate = (data: any): string | null => {\n    if (!data.name || typeof data.name !== 'string') {\n      return 'Template must have a name';\n    }\n    if (!data.category || typeof data.category !== 'string') {\n      return 'Template must have a category';\n    }\n    if (!Array.isArray(data.structure)) {\n      return 'Template must have a structure array';\n    }\n    if (data.structure.length === 0) {\n      return 'Template structure cannot be empty';\n    }\n\n    // Validate structure elements\n    for (const element of data.structure) {\n      if (!element.id || !element.type) {\n        return 'All elements must have id and type';\n      }\n    }\n\n    return null;\n  };\n\n  // Handle file selection\n  const handleFileChange = async (selectedFile: File) => {\n    setError(null);\n    setPreviewData(null);\n\n    // Check file type\n    if (!selectedFile.name.endsWith('.json')) {\n      setError('Please select a JSON file');\n      return;\n    }\n\n    // Check file size (max 5MB)\n    if (selectedFile.size > 5 * 1024 * 1024) {\n      setError('File size must be less than 5MB');\n      return;\n    }\n\n    setFile(selectedFile);\n\n    // Read and parse file\n    try {\n      const text = await selectedFile.text();\n      const data = JSON.parse(text);\n\n      // Validate structure\n      const validationError = validateTemplate(data);\n      if (validationError) {\n        setError(validationError);\n        setFile(null);\n        return;\n      }\n\n      // Set preview data\n      setPreviewData(data as PageTemplate);\n    } catch (err) {\n      if (err instanceof SyntaxError) {\n        setError('Invalid JSON file format');\n      } else {\n        setError('Failed to read file');\n      }\n      setFile(null);\n    }\n  };\n\n  // Handle drag and drop\n  const handleDragEnter = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n\n    const files = e.dataTransfer.files;\n    if (files && files.length > 0) {\n      handleFileChange(files[0]);\n    }\n  };\n\n  // Handle import\n  const handleImport = async () => {\n    if (!previewData) return;\n\n    setIsImporting(true);\n    setError(null);\n\n    try {\n      const importData: ImportTemplateData = {\n        template: previewData,\n        replaceExisting: false, // Could be made configurable\n      };\n\n      const success = await onImport(importData);\n\n      if (success) {\n        handleClose();\n      } else {\n        setError('Failed to import template. Please try again.');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  // Handle close\n  const handleClose = () => {\n    setFile(null);\n    setPreviewData(null);\n    setError(null);\n    setIsDragging(false);\n    onClose();\n  };\n\n  // Count elements\n  const countElements = (elements: any[]): number => {\n    let count = elements.length;\n    elements.forEach(el => {\n      if (el.children && Array.isArray(el.children)) {\n        count += countElements(el.children);\n      }\n    });\n    return count;\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Import Template</DialogTitle>\n          <DialogDescription>\n            Import a template from a JSON file. The file will be validated before import.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Error Alert */}\n          {error && (\n            <Alert className=\"border-destructive\">\n              <AlertCircle className=\"h-4 w-4 text-destructive\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          {/* File Upload Area */}\n          {!file && (\n            <div\n              className={`\n                border-2 border-dashed rounded-lg p-8 text-center cursor-pointer\n                transition-colors duration-200\n                ${isDragging\n                  ? 'border-blue-500 bg-blue-50'\n                  : 'border-gray-300 hover:border-gray-400'\n                }\n              `}\n              onDragEnter={handleDragEnter}\n              onDragLeave={handleDragLeave}\n              onDragOver={handleDragOver}\n              onDrop={handleDrop}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <Upload className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n              <p className=\"text-lg font-medium text-gray-700 mb-2\">\n                {isDragging ? 'Drop file here' : 'Drop JSON file here'}\n              </p>\n              <p className=\"text-sm text-gray-500 mb-4\">or click to browse</p>\n              <Button variant=\"outline\" size=\"sm\">\n                <FileText className=\"w-4 h-4 mr-2\" />\n                Select File\n              </Button>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".json\"\n                onChange={(e) => {\n                  const files = e.target.files;\n                  if (files && files.length > 0) {\n                    handleFileChange(files[0]);\n                  }\n                }}\n                className=\"hidden\"\n              />\n            </div>\n          )}\n\n          {/* Preview */}\n          {previewData && (\n            <div className=\"space-y-4\">\n              {/* Success Badge */}\n              <Alert className=\"border-green-200 bg-green-50\">\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                <AlertDescription className=\"text-green-800\">\n                  Template file validated successfully\n                </AlertDescription>\n              </Alert>\n\n              {/* File Info */}\n              <div className=\"bg-gray-50 border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <FileText className=\"w-5 h-5 text-gray-600\" />\n                    <span className=\"font-medium text-gray-900\">{file?.name}</span>\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setFile(null);\n                      setPreviewData(null);\n                      setError(null);\n                    }}\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n                <p className=\"text-xs text-gray-500\">\n                  {(file!.size / 1024).toFixed(2)} KB\n                </p>\n              </div>\n\n              {/* Template Details */}\n              <div className=\"border rounded-lg p-4 space-y-3\">\n                <div>\n                  <h4 className=\"font-semibold text-gray-900 mb-1\">\n                    {previewData.name}\n                  </h4>\n                  <p className=\"text-sm text-gray-600\">{previewData.description}</p>\n                </div>\n\n                {/* Metadata Grid */}\n                <div className=\"grid grid-cols-2 gap-4 pt-3 border-t\">\n                  <div>\n                    <p className=\"text-xs text-gray-500\">Category</p>\n                    <Badge variant=\"outline\" className=\"mt-1\">\n                      {previewData.category}\n                    </Badge>\n                  </div>\n                  <div>\n                    <p className=\"text-xs text-gray-500\">Elements</p>\n                    <p className=\"text-sm font-medium text-gray-900 mt-1\">\n                      {countElements(previewData.structure)}\n                    </p>\n                  </div>\n                  {previewData.author && (\n                    <div>\n                      <p className=\"text-xs text-gray-500\">Author</p>\n                      <p className=\"text-sm font-medium text-gray-900 mt-1\">\n                        {previewData.author}\n                      </p>\n                    </div>\n                  )}\n                  {previewData.createdAt && (\n                    <div>\n                      <p className=\"text-xs text-gray-500\">Created</p>\n                      <p className=\"text-sm font-medium text-gray-900 mt-1\">\n                        {new Date(previewData.createdAt).toLocaleDateString()}\n                      </p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Tags */}\n                {previewData.tags && previewData.tags.length > 0 && (\n                  <div className=\"pt-3 border-t\">\n                    <p className=\"text-xs text-gray-500 mb-2\">Tags</p>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {previewData.tags.map((tag, index) => (\n                        <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n                          {tag}\n                        </Badge>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleClose} disabled={isImporting}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleImport}\n            disabled={!previewData || isImporting}\n            className=\"bg-blue-600 hover:bg-blue-700\"\n          >\n            {isImporting ? (\n              <>\n                <Download className=\"w-4 h-4 mr-2 animate-pulse\" />\n                Importing...\n              </>\n            ) : (\n              <>\n                <Download className=\"w-4 h-4 mr-2\" />\n                Import Template\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","export { PageStateProvider, usePageState } from './PageStateContext';\nexport { UIStateProvider, useUIState } from './UIStateContext';\nexport { TemplateProvider, useTemplate } from './TemplateContext';\nexport { PageActionsProvider, usePageActions, DEFAULT_BLOCK_CONTENT } from './PageActionsContext';\nexport { HistoryProvider, useHistory } from './HistoryContext';\n","'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useMemo, ReactNode } from 'react';\n\n/**\n * UI State Context - Manages UI state (modals, dialogs, panels)\n */\ninterface UIStateContextType {\n  // UI state\n  showPageSettings: boolean;\n  showPreview: boolean;\n  showAddChildDialog: boolean;\n  addChildParentId: string | null;\n  \n  // State setters\n  setShowPageSettings: (show: boolean) => void;\n  setShowPreview: (show: boolean) => void;\n  setShowAddChildDialog: (show: boolean) => void;\n  setAddChildParentId: (id: string | null) => void;\n  \n  // Combined setter for atomic updates\n  openAddChildDialog: (parentId: string) => void;\n  closeAddChildDialog: () => void;\n}\n\nconst UIStateContext = createContext<UIStateContextType | undefined>(undefined);\n\ninterface UIStateProviderProps {\n  children: ReactNode;\n}\n\nexport function UIStateProvider({ children }: UIStateProviderProps) {\n  const [showPageSettings, setShowPageSettingsState] = useState(false);\n  const [showPreview, setShowPreviewState] = useState(false);\n  const [showAddChildDialog, setShowAddChildDialogState] = useState(false);\n  const [addChildParentId, setAddChildParentIdState] = useState<string | null>(null);\n  \n  // Version counter to force context updates\n  const [version, setVersion] = useState(0);\n  \n  // Debug: Log state changes\n  React.useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`[UIStateContext] State changed:`, {\n        showAddChildDialog,\n        addChildParentId,\n        version,\n        timestamp: Date.now(),\n      });\n    }\n    // Increment version when critical state changes\n    setVersion(v => v + 1);\n  }, [showAddChildDialog, addChildParentId]);\n  \n  // Memoized setters for stable references - prevents unnecessary re-renders\n  const setShowPageSettings = useCallback((show: boolean) => {\n    setShowPageSettingsState(show);\n  }, []);\n  \n  const setShowPreview = useCallback((show: boolean) => {\n    setShowPreviewState(show);\n  }, []);\n  \n  const setShowAddChildDialog = useCallback((show: boolean) => {\n    console.log(`[UIStateContext] setShowAddChildDialog called with:`, show);\n    setShowAddChildDialogState(show);\n    console.log(`[UIStateContext] showAddChildDialog state will be:`, show);\n  }, []);\n  \n  const setAddChildParentId = useCallback((id: string | null) => {\n    console.log(`[UIStateContext] setAddChildParentId called with:`, id);\n    setAddChildParentIdState(id);\n  }, []);\n  \n  // Atomic operations for Add Child Dialog\n  const openAddChildDialog = useCallback((parentId: string) => {\n    console.log(`[UIStateContext] openAddChildDialog called with parentId:`, parentId);\n    \n    // Use functional updates to ensure both states update together\n    setAddChildParentIdState(parentId);\n    setShowAddChildDialogState(true);\n    \n    console.log(`[UIStateContext] Dialog should open for parent:`, parentId);\n  }, []); // Empty deps - uses setter functions which are stable\n  \n  const closeAddChildDialog = useCallback(() => {\n    console.log(`[UIStateContext] closeAddChildDialog called`);\n    setShowAddChildDialogState(false);\n    setAddChildParentIdState(null);\n  }, []);\n  \n  // Context value WITHOUT memoization for testing\n  // This ensures consumers always get fresh state\n  // Include version to force new object reference\n  const value: UIStateContextType = {\n    showPageSettings,\n    showPreview,\n    showAddChildDialog,\n    addChildParentId,\n    setShowPageSettings,\n    setShowPreview,\n    setShowAddChildDialog,\n    setAddChildParentId,\n    openAddChildDialog,\n    closeAddChildDialog,\n    _version: version, // Internal version tracker\n  } as any;\n  \n  // Log when context value changes\n  React.useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`[UIStateContext] Context value updated (v${version}):`, {\n        showAddChildDialog: value.showAddChildDialog,\n        addChildParentId: value.addChildParentId,\n      });\n    }\n  }, [value.showAddChildDialog, value.addChildParentId, version]);\n  \n  return (\n    <UIStateContext.Provider value={value}>\n      {children}\n    </UIStateContext.Provider>\n  );\n}\n\nexport function useUIState() {\n  const context = useContext(UIStateContext);\n  if (context === undefined) {\n    // Return default values instead of throwing during SSR or initial render\n    if (typeof window === 'undefined') {\n      return {\n        showPageSettings: false,\n        showPreview: false,\n        showAddChildDialog: false,\n        addChildParentId: null,\n        setShowPageSettings: () => {},\n        setShowPreview: () => {},\n        setShowAddChildDialog: () => {},\n        setAddChildParentId: () => {},\n        openAddChildDialog: () => {},\n        closeAddChildDialog: () => {},\n      } as UIStateContextType;\n    }\n    throw new Error(\n      'useUIState must be used within a UIStateProvider. ' +\n      'Make sure your component is wrapped with <PageBuilderProvider>'\n    );\n  }\n  return context;\n}\n","import { BlockType, CreatePageBlockInput } from '@/types/page-builder';\nimport { getThumbnailDataURL } from '@/utils/templateThumbnails';\n\n/**\n * Template Category Type\n */\nexport type TemplateCategory = 'hero' | 'features' | 'pricing' | 'team' | 'contact' | 'testimonials' | 'cta' | 'faq' | 'footer' | 'newsletter' | 'custom';\n\n/**\n * Block Template Interface\n */\nexport interface BlockTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: TemplateCategory;\n  thumbnail?: string;\n  blocks: TemplateBlockDefinition[];\n}\n\nexport interface TemplateBlockDefinition {\n  type: BlockType;\n  content: any;\n  style?: any;\n  order: number;\n  depth: number;\n  parentId?: string; // Relative ID for template structure\n  children?: TemplateBlockDefinition[];\n}\n\n/**\n * Pre-defined Block Templates\n */\nexport const BLOCK_TEMPLATES: BlockTemplate[] = [\n  // Hero Section Template\n  {\n    id: 'hero-centered',\n    name: 'Centered Hero',\n    description: 'Hero section với tiêu đề, mô tả và CTA button ở giữa',\n    category: 'hero',\n    thumbnail: getThumbnailDataURL('hero-centered'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: true,\n          containerWidth: 'lg',\n          backgroundColor: '#f8fafc',\n          padding: { top: 120, bottom: 120 },\n          style: {}\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              layout: 'stack',\n              gap: 24,\n              padding: 32,\n              backgroundColor: 'transparent',\n              maxWidth: '800px',\n              alignment: 'center',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h1 style=\"text-align: center; font-size: 3rem; font-weight: bold; margin: 0;\">Chào mừng đến với trang của chúng tôi</h1>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.TEXT,\n                order: 1,\n                depth: 2,\n                content: {\n                  content: '<p style=\"text-align: center; font-size: 1.25rem; color: #64748b;\">Giải pháp tốt nhất cho doanh nghiệp của bạn. Bắt đầu ngay hôm nay và trải nghiệm sự khác biệt.</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.BUTTON,\n                order: 2,\n                depth: 2,\n                content: {\n                  text: 'Bắt đầu ngay',\n                  href: '#',\n                  variant: 'primary',\n                  style: {\n                    backgroundColor: '#3b82f6',\n                    color: 'white',\n                    padding: '16px 32px',\n                    fontSize: '1.125rem',\n                    borderRadius: '8px'\n                  }\n                }\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n\n  // Features Grid Template\n  {\n    id: 'features-3col',\n    name: 'Features 3 Columns',\n    description: '3 tính năng nổi bật với icon, tiêu đề và mô tả',\n    category: 'features',\n    thumbnail: getThumbnailDataURL('features-3col'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: false,\n          containerWidth: 'lg',\n          backgroundColor: 'white',\n          padding: { top: 80, bottom: 80 },\n          style: {}\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              layout: 'stack',\n              gap: 48,\n              padding: 0,\n              backgroundColor: 'transparent',\n              maxWidth: '100%',\n              alignment: 'center',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"text-align: center; font-size: 2.5rem; font-weight: bold;\">Tính năng nổi bật</h2>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.GRID,\n                order: 1,\n                depth: 2,\n                content: {\n                  columns: 3,\n                  gap: 32,\n                  responsive: { sm: 1, md: 2, lg: 3 },\n                  style: {}\n                },\n                children: [\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f8fafc',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"width: 48px; height: 48px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;\">🚀</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; margin: 0;\">Nhanh chóng</h3>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #64748b; line-height: 1.6;\">Tốc độ xử lý siêu nhanh, tối ưu hiệu suất tối đa.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  },\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f8fafc',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"width: 48px; height: 48px; background: #10b981; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;\">🔒</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; margin: 0;\">Bảo mật</h3>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #64748b; line-height: 1.6;\">Bảo vệ dữ liệu với công nghệ mã hóa hiện đại.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  },\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 2,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f8fafc',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"width: 48px; height: 48px; background: #f59e0b; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;\">⚡</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; margin: 0;\">Dễ sử dụng</h3>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #64748b; line-height: 1.6;\">Giao diện trực quan, dễ dàng sử dụng cho mọi người.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n\n  // Pricing Table Template\n  {\n    id: 'pricing-3tier',\n    name: 'Pricing 3 Tiers',\n    description: 'Bảng giá 3 gói với highlight gói phổ biến',\n    category: 'pricing',\n    thumbnail: getThumbnailDataURL('pricing-3tier'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: false,\n          containerWidth: 'lg',\n          backgroundColor: '#f8fafc',\n          padding: { top: 80, bottom: 80 },\n          style: {}\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              layout: 'stack',\n              gap: 48,\n              padding: 0,\n              backgroundColor: 'transparent',\n              maxWidth: '100%',\n              alignment: 'center',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"text-align: center; font-size: 2.5rem; font-weight: bold;\">Chọn gói phù hợp</h2>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.GRID,\n                order: 1,\n                depth: 2,\n                content: {\n                  columns: 3,\n                  gap: 24,\n                  responsive: { sm: 1, md: 2, lg: 3 },\n                  style: {}\n                },\n                children: [\n                  // Starter Plan\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 24,\n                      padding: 32,\n                      backgroundColor: 'white',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px', border: '2px solid #e2e8f0' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold;\">Starter</h3><p style=\"color: #64748b;\">Cho cá nhân</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"font-size: 3rem; font-weight: bold;\">$9<span style=\"font-size: 1rem; color: #64748b;\">/tháng</span></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<ul style=\"list-style: none; padding: 0;\"><li style=\"padding: 8px 0;\">✓ 10 projects</li><li style=\"padding: 8px 0;\">✓ 5GB storage</li><li style=\"padding: 8px 0;\">✓ Email support</li></ul>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.BUTTON,\n                        order: 3,\n                        depth: 4,\n                        content: {\n                          text: 'Bắt đầu',\n                          href: '#',\n                          variant: 'primary',\n                          style: {\n                            width: '100%',\n                            padding: '12px 24px',\n                            backgroundColor: '#3b82f6',\n                            color: 'white',\n                            borderRadius: '8px'\n                          }\n                        }\n                      }\n                    ]\n                  },\n                  // Pro Plan (Popular)\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 24,\n                      padding: 32,\n                      backgroundColor: 'white',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px', border: '3px solid #3b82f6', position: 'relative' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"position: absolute; top: -12px; right: 20px; background: #3b82f6; color: white; padding: 4px 12px; border-radius: 999px; font-size: 0.875rem; font-weight: bold;\">PHỔ BIẾN</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold;\">Pro</h3><p style=\"color: #64748b;\">Cho doanh nghiệp nhỏ</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"font-size: 3rem; font-weight: bold;\">$29<span style=\"font-size: 1rem; color: #64748b;\">/tháng</span></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 3,\n                        depth: 4,\n                        content: {\n                          content: '<ul style=\"list-style: none; padding: 0;\"><li style=\"padding: 8px 0;\">✓ Unlimited projects</li><li style=\"padding: 8px 0;\">✓ 50GB storage</li><li style=\"padding: 8px 0;\">✓ Priority support</li><li style=\"padding: 8px 0;\">✓ Advanced analytics</li></ul>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.BUTTON,\n                        order: 4,\n                        depth: 4,\n                        content: {\n                          text: 'Bắt đầu',\n                          href: '#',\n                          variant: 'primary',\n                          style: {\n                            width: '100%',\n                            padding: '12px 24px',\n                            backgroundColor: '#3b82f6',\n                            color: 'white',\n                            borderRadius: '8px'\n                          }\n                        }\n                      }\n                    ]\n                  },\n                  // Enterprise Plan\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 2,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 24,\n                      padding: 32,\n                      backgroundColor: 'white',\n                      maxWidth: '100%',\n                      alignment: 'left',\n                      style: { borderRadius: '12px', border: '2px solid #e2e8f0' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold;\">Enterprise</h3><p style=\"color: #64748b;\">Cho tổ chức lớn</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"font-size: 3rem; font-weight: bold;\">$99<span style=\"font-size: 1rem; color: #64748b;\">/tháng</span></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<ul style=\"list-style: none; padding: 0;\"><li style=\"padding: 8px 0;\">✓ Unlimited everything</li><li style=\"padding: 8px 0;\">✓ 500GB storage</li><li style=\"padding: 8px 0;\">✓ 24/7 phone support</li><li style=\"padding: 8px 0;\">✓ Custom integrations</li><li style=\"padding: 8px 0;\">✓ Dedicated account manager</li></ul>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.BUTTON,\n                        order: 3,\n                        depth: 4,\n                        content: {\n                          text: 'Liên hệ',\n                          href: '#',\n                          variant: 'primary',\n                          style: {\n                            width: '100%',\n                            padding: '12px 24px',\n                            backgroundColor: '#3b82f6',\n                            color: 'white',\n                            borderRadius: '8px'\n                          }\n                        }\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n\n  // Call-to-Action Template\n  {\n    id: 'cta-centered',\n    name: 'Centered CTA',\n    description: 'Call-to-action section với background màu và buttons',\n    category: 'custom',\n    thumbnail: getThumbnailDataURL('cta-centered'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: true,\n          containerWidth: 'lg',\n          backgroundColor: '#3b82f6',\n          padding: { top: 80, bottom: 80 },\n          style: {}\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              layout: 'stack',\n              gap: 24,\n              padding: 32,\n              backgroundColor: 'transparent',\n              maxWidth: '800px',\n              alignment: 'center',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"text-align: center; font-size: 2.5rem; font-weight: bold; color: white; margin: 0;\">Sẵn sàng bắt đầu?</h2>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.TEXT,\n                order: 1,\n                depth: 2,\n                content: {\n                  content: '<p style=\"text-align: center; font-size: 1.25rem; color: rgba(255,255,255,0.9);\">Tham gia cùng hàng nghìn khách hàng đang sử dụng sản phẩm của chúng tôi.</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.FLEX_ROW,\n                order: 2,\n                depth: 2,\n                content: {\n                  direction: 'row',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  wrap: true,\n                  gap: 16,\n                  style: {}\n                },\n                children: [\n                  {\n                    type: BlockType.BUTTON,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      text: 'Dùng thử miễn phí',\n                      href: '#',\n                      variant: 'primary',\n                      style: {\n                        padding: '16px 32px',\n                        backgroundColor: 'white',\n                        color: '#3b82f6',\n                        borderRadius: '8px',\n                        fontSize: '1.125rem',\n                        fontWeight: 'bold'\n                      }\n                    }\n                  },\n                  {\n                    type: BlockType.BUTTON,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      text: 'Tìm hiểu thêm',\n                      href: '#',\n                      variant: 'secondary',\n                      style: {\n                        padding: '16px 32px',\n                        backgroundColor: 'transparent',\n                        color: 'white',\n                        border: '2px solid white',\n                        borderRadius: '8px',\n                        fontSize: '1.125rem'\n                      }\n                    }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  \n  // Template 5: Team Section\n  {\n    id: 'team-3members',\n    name: 'Team 3 Members',\n    description: 'Giới thiệu đội ngũ với 3 thành viên, ảnh đại diện và thông tin liên hệ',\n    category: 'team',\n    thumbnail: getThumbnailDataURL('team-3members'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: false,\n          containerWidth: 'lg',\n          backgroundColor: 'white',\n          padding: { top: 80, bottom: 80 }\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              alignment: 'center',\n              maxWidth: '1200px',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;\">Đội Ngũ Của Chúng Tôi</h2><p style=\"text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;\">Gặp gỡ những con người tài năng đằng sau thành công của chúng tôi</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.GRID,\n                order: 1,\n                depth: 2,\n                content: {\n                  columns: 3,\n                  gap: 32,\n                  responsive: { sm: 1, md: 2, lg: 3 },\n                  style: { marginTop: '48px' }\n                },\n                children: [\n                  // Member 1\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f9fafb',\n                      alignment: 'center',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.IMAGE,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          src: 'https://via.placeholder.com/200x200',\n                          alt: 'Team Member 1',\n                          style: { \n                            width: '150px', \n                            height: '150px', \n                            borderRadius: '50%',\n                            objectFit: 'cover',\n                            margin: '0 auto'\n                          }\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;\">Nguyễn Văn A</h3><p style=\"text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;\">CEO & Founder</p><p style=\"text-align: center; color: #64748b; font-size: 0.875rem;\">Chuyên gia với hơn 10 năm kinh nghiệm trong lĩnh vực công nghệ và quản lý.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  },\n                  // Member 2\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f9fafb',\n                      alignment: 'center',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.IMAGE,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          src: 'https://via.placeholder.com/200x200',\n                          alt: 'Team Member 2',\n                          style: { \n                            width: '150px', \n                            height: '150px', \n                            borderRadius: '50%',\n                            objectFit: 'cover',\n                            margin: '0 auto'\n                          }\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;\">Trần Thị B</h3><p style=\"text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;\">CTO</p><p style=\"text-align: center; color: #64748b; font-size: 0.875rem;\">Kiến trúc sư phần mềm hàng đầu với đam mê xây dựng sản phẩm chất lượng.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  },\n                  // Member 3\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 2,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 16,\n                      padding: 24,\n                      backgroundColor: '#f9fafb',\n                      alignment: 'center',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.IMAGE,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          src: 'https://via.placeholder.com/200x200',\n                          alt: 'Team Member 3',\n                          style: { \n                            width: '150px', \n                            height: '150px', \n                            borderRadius: '50%',\n                            objectFit: 'cover',\n                            margin: '0 auto'\n                          }\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;\">Lê Văn C</h3><p style=\"text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;\">Head of Design</p><p style=\"text-align: center; color: #64748b; font-size: 0.875rem;\">Nhà thiết kế sáng tạo với tầm nhìn thẩm mỹ độc đáo và tinh tế.</p>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  \n  // Template 6: Contact Section\n  {\n    id: 'contact-form',\n    name: 'Contact Form & Info',\n    description: 'Form liên hệ kết hợp với thông tin liên lạc và bản đồ',\n    category: 'contact',\n    thumbnail: getThumbnailDataURL('contact-form'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: false,\n          containerWidth: 'lg',\n          backgroundColor: '#f9fafb',\n          padding: { top: 80, bottom: 80 }\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              alignment: 'center',\n              maxWidth: '1200px',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;\">Liên Hệ Với Chúng Tôi</h2><p style=\"text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;\">Chúng tôi luôn sẵn sàng lắng nghe và hỗ trợ bạn</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.GRID,\n                order: 1,\n                depth: 2,\n                content: {\n                  columns: 2,\n                  gap: 48,\n                  responsive: { sm: 1, md: 2, lg: 2 },\n                  style: { marginTop: '48px' }\n                },\n                children: [\n                  // Contact Info\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 32,\n                      padding: 32,\n                      backgroundColor: 'white',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;\">Thông Tin Liên Hệ</h3>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"display: flex; align-items: start; gap: 16px; margin-bottom: 20px;\"><div style=\"width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;\">📍</div><div><strong style=\"display: block; margin-bottom: 4px;\">Địa chỉ</strong><span style=\"color: #64748b;\">123 Đường ABC, Quận 1, TP.HCM</span></div></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"display: flex; align-items: start; gap: 16px; margin-bottom: 20px;\"><div style=\"width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;\">📞</div><div><strong style=\"display: block; margin-bottom: 4px;\">Điện thoại</strong><span style=\"color: #64748b;\">+84 123 456 789</span></div></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 3,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"display: flex; align-items: start; gap: 16px;\"><div style=\"width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;\">✉️</div><div><strong style=\"display: block; margin-bottom: 4px;\">Email</strong><span style=\"color: #64748b;\">contact@example.com</span></div></div>',\n                          style: {}\n                        }\n                      }\n                    ]\n                  },\n                  // Contact Form Placeholder\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 20,\n                      padding: 32,\n                      backgroundColor: 'white',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<h3 style=\"font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;\">Gửi Tin Nhắn</h3><p style=\"color: #64748b; margin-bottom: 1.5rem;\">Điền thông tin bên dưới để gửi tin nhắn cho chúng tôi</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"margin-bottom: 16px;\"><label style=\"display: block; margin-bottom: 8px; font-weight: 600;\">Họ và tên</label><input type=\"text\" placeholder=\"Nhập họ và tên\" style=\"width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;\" /></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"margin-bottom: 16px;\"><label style=\"display: block; margin-bottom: 8px; font-weight: 600;\">Email</label><input type=\"email\" placeholder=\"Nhập email\" style=\"width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;\" /></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 3,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"margin-bottom: 16px;\"><label style=\"display: block; margin-bottom: 8px; font-weight: 600;\">Tin nhắn</label><textarea placeholder=\"Nhập tin nhắn của bạn\" rows=\"4\" style=\"width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem; resize: vertical;\"></textarea></div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.BUTTON,\n                        order: 4,\n                        depth: 4,\n                        content: {\n                          text: 'Gửi tin nhắn',\n                          href: '#',\n                          variant: 'primary',\n                          style: {\n                            width: '100%',\n                            padding: '14px 24px',\n                            backgroundColor: '#3b82f6',\n                            color: 'white',\n                            borderRadius: '8px',\n                            fontSize: '1rem',\n                            fontWeight: 'bold'\n                          }\n                        }\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  \n  // Template 7: Testimonials\n  {\n    id: 'testimonials-3col',\n    name: 'Testimonials 3 Reviews',\n    description: 'Phần đánh giá của khách hàng với 3 reviews và rating',\n    category: 'custom',\n    thumbnail: getThumbnailDataURL('testimonials-3col'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: false,\n          containerWidth: 'lg',\n          backgroundColor: 'white',\n          padding: { top: 80, bottom: 80 }\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              alignment: 'center',\n              maxWidth: '1200px',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;\">Khách Hàng Nói Gì Về Chúng Tôi</h2><p style=\"text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;\">Hàng ngàn khách hàng hài lòng đã tin tưởng và sử dụng dịch vụ của chúng tôi</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.GRID,\n                order: 1,\n                depth: 2,\n                content: {\n                  columns: 3,\n                  gap: 32,\n                  responsive: { sm: 1, md: 2, lg: 3 },\n                  style: { marginTop: '48px' }\n                },\n                children: [\n                  // Review 1\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 0,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 20,\n                      padding: 32,\n                      backgroundColor: '#f9fafb',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;\">⭐⭐⭐⭐⭐</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;\">\"Sản phẩm tuyệt vời! Giúp công việc của tôi hiệu quả hơn rất nhiều. Đội ngũ hỗ trợ cũng rất tận tình.\"</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.FLEX_ROW,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          direction: 'row',\n                          justifyContent: 'start',\n                          alignItems: 'center',\n                          gap: 12,\n                          style: {}\n                        },\n                        children: [\n                          {\n                            type: BlockType.IMAGE,\n                            order: 0,\n                            depth: 5,\n                            content: {\n                              src: 'https://via.placeholder.com/50x50',\n                              alt: 'Customer 1',\n                              style: { \n                                width: '50px', \n                                height: '50px', \n                                borderRadius: '50%',\n                                objectFit: 'cover'\n                              }\n                            }\n                          },\n                          {\n                            type: BlockType.TEXT,\n                            order: 1,\n                            depth: 5,\n                            content: {\n                              content: '<div><strong style=\"display: block; font-size: 1rem;\">Nguyễn Minh A</strong><span style=\"color: #64748b; font-size: 0.875rem;\">CEO tại ABC Corp</span></div>',\n                              style: {}\n                            }\n                          }\n                        ]\n                      }\n                    ]\n                  },\n                  // Review 2\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 1,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 20,\n                      padding: 32,\n                      backgroundColor: '#f9fafb',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;\">⭐⭐⭐⭐⭐</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;\">\"Giao diện đẹp, dễ sử dụng và tính năng đầy đủ. Tôi đã giới thiệu cho nhiều đồng nghiệp.\"</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.FLEX_ROW,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          direction: 'row',\n                          justifyContent: 'start',\n                          alignItems: 'center',\n                          gap: 12,\n                          style: {}\n                        },\n                        children: [\n                          {\n                            type: BlockType.IMAGE,\n                            order: 0,\n                            depth: 5,\n                            content: {\n                              src: 'https://via.placeholder.com/50x50',\n                              alt: 'Customer 2',\n                              style: { \n                                width: '50px', \n                                height: '50px', \n                                borderRadius: '50%',\n                                objectFit: 'cover'\n                              }\n                            }\n                          },\n                          {\n                            type: BlockType.TEXT,\n                            order: 1,\n                            depth: 5,\n                            content: {\n                              content: '<div><strong style=\"display: block; font-size: 1rem;\">Trần Thị B</strong><span style=\"color: #64748b; font-size: 0.875rem;\">Marketing Manager</span></div>',\n                              style: {}\n                            }\n                          }\n                        ]\n                      }\n                    ]\n                  },\n                  // Review 3\n                  {\n                    type: BlockType.CONTAINER,\n                    order: 2,\n                    depth: 3,\n                    content: {\n                      layout: 'stack',\n                      gap: 20,\n                      padding: 32,\n                      backgroundColor: '#f9fafb',\n                      style: { borderRadius: '12px' }\n                    },\n                    children: [\n                      {\n                        type: BlockType.TEXT,\n                        order: 0,\n                        depth: 4,\n                        content: {\n                          content: '<div style=\"color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;\">⭐⭐⭐⭐⭐</div>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.TEXT,\n                        order: 1,\n                        depth: 4,\n                        content: {\n                          content: '<p style=\"color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;\">\"ROI tuyệt vời! Chỉ sau 2 tháng sử dụng, doanh thu của chúng tôi đã tăng 30%.\"</p>',\n                          style: {}\n                        }\n                      },\n                      {\n                        type: BlockType.FLEX_ROW,\n                        order: 2,\n                        depth: 4,\n                        content: {\n                          direction: 'row',\n                          justifyContent: 'start',\n                          alignItems: 'center',\n                          gap: 12,\n                          style: {}\n                        },\n                        children: [\n                          {\n                            type: BlockType.IMAGE,\n                            order: 0,\n                            depth: 5,\n                            content: {\n                              src: 'https://via.placeholder.com/50x50',\n                              alt: 'Customer 3',\n                              style: { \n                                width: '50px', \n                                height: '50px', \n                                borderRadius: '50%',\n                                objectFit: 'cover'\n                              }\n                            }\n                          },\n                          {\n                            type: BlockType.TEXT,\n                            order: 1,\n                            depth: 5,\n                            content: {\n                              content: '<div><strong style=\"display: block; font-size: 1rem;\">Lê Văn C</strong><span style=\"color: #64748b; font-size: 0.875rem;\">Founder tại XYZ Startup</span></div>',\n                              style: {}\n                            }\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n\n  // Carousel Template\n  {\n    id: 'carousel-hero',\n    name: 'Hero Carousel',\n    description: 'Carousel với 3 slides hero section, tự động chuyển slide',\n    category: 'hero',\n    thumbnail: getThumbnailDataURL('carousel-hero'),\n    blocks: [\n      {\n        type: BlockType.CAROUSEL,\n        order: 0,\n        depth: 0,\n        content: {\n          slides: [\n            {\n              id: '1',\n              title: 'Khuyến Mãi Đặc Biệt',\n              subtitle: 'Giảm giá lên đến 50% cho tất cả sản phẩm',\n              description: 'Ưu đãi có thời hạn - Nhanh tay đặt hàng ngay hôm nay!',\n              image: 'https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop',\n              cta: { \n                text: 'Mua Ngay', \n                link: '#products' \n              },\n              badge: 'HOT',\n              bgColor: 'bg-gradient-to-r from-red-500 to-pink-600'\n            },\n            {\n              id: '2',\n              title: 'Sản Phẩm Mới 2024',\n              subtitle: 'Bộ sưu tập mới nhất',\n              description: 'Khám phá những sản phẩm chất lượng cao với thiết kế hiện đại',\n              image: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop',\n              cta: { \n                text: 'Khám Phá', \n                link: '#new-arrivals' \n              },\n              badge: 'NEW',\n              bgColor: 'bg-gradient-to-r from-blue-500 to-cyan-600'\n            },\n            {\n              id: '3',\n              title: 'Chất Lượng Đảm Bảo',\n              subtitle: 'Cam kết 100% chính hãng',\n              description: 'Tất cả sản phẩm đều được kiểm định chất lượng nghiêm ngặt',\n              image: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=400&fit=crop',\n              cta: { \n                text: 'Tìm Hiểu Thêm', \n                link: '#quality' \n              },\n              badge: 'QUALITY',\n              bgColor: 'bg-gradient-to-r from-green-500 to-emerald-600'\n            }\n          ],\n          autoPlay: true,\n          autoPlayInterval: 5000,\n          showIndicators: true,\n          showArrows: true,\n          loop: true,\n          style: {}\n        }\n      }\n    ]\n  },\n\n  // Featured Products Carousel Template\n  {\n    id: 'carousel-featured-products',\n    name: 'Featured Products Carousel',\n    description: 'Carousel tự động hiển thị sản phẩm nổi bật từ database',\n    category: 'custom',\n    thumbnail: getThumbnailDataURL('carousel-featured-products'),\n    blocks: [\n      {\n        type: BlockType.SECTION,\n        order: 0,\n        depth: 0,\n        content: {\n          fullWidth: true,\n          containerWidth: 'xl',\n          backgroundColor: '#ffffff',\n          padding: { top: 80, bottom: 80 },\n          style: {}\n        },\n        children: [\n          {\n            type: BlockType.CONTAINER,\n            order: 0,\n            depth: 1,\n            content: {\n              layout: 'stack',\n              gap: 32,\n              padding: 0,\n              backgroundColor: 'transparent',\n              style: {}\n            },\n            children: [\n              {\n                type: BlockType.TEXT,\n                order: 0,\n                depth: 2,\n                content: {\n                  content: '<h2 style=\"text-align: center; font-size: 2.5rem; font-weight: bold; margin: 0 0 16px 0;\">Sản Phẩm Nổi Bật</h2>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.TEXT,\n                order: 1,\n                depth: 2,\n                content: {\n                  content: '<p style=\"text-align: center; font-size: 1.125rem; color: #64748b; margin: 0 0 32px 0;\">Khám phá những sản phẩm được yêu thích nhất</p>',\n                  style: {}\n                }\n              },\n              {\n                type: BlockType.CAROUSEL,\n                order: 2,\n                depth: 2,\n                content: {\n                  slides: [], // Empty - will be loaded from database\n                  dataSource: {\n                    type: 'database',\n                    queryType: 'featured',\n                    limit: 12,\n                    titleField: 'name',\n                    descriptionField: 'shortDesc',\n                    imageField: 'thumbnail',\n                    badgeField: 'isFeatured'\n                  },\n                  autoPlay: true,\n                  autoPlayInterval: 4000,\n                  showIndicators: true,\n                  showArrows: true,\n                  loop: true,\n                  height: 'lg',\n                  transition: 'slide',\n                  indicatorStyle: 'dots',\n                  arrowStyle: 'circle',\n                  slidesPerView: 3,\n                  animationType: 'fade',\n                  animationDuration: 600,\n                  style: {}\n                }\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n];\n\n/**\n * Get templates by category\n */\nexport const getTemplatesByCategory = (category: string) => {\n  return BLOCK_TEMPLATES.filter(t => t.category === category);\n};\n\n/**\n * Get template by ID\n */\nexport const getTemplateById = (id: string) => {\n  return BLOCK_TEMPLATES.find(t => t.id === id);\n};\n","'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useApolloClient } from '@apollo/client';\nimport { BLOCK_TEMPLATES, BlockTemplate } from '@/data/blockTemplates';\nimport { \n  CustomTemplatesService,\n  initCustomTemplatesService,\n  TemplateBlocksData,\n  CreateTemplateInput,\n} from '@/utils/customTemplates';\n\n/**\n * Template Context - Manages template state and operations\n * NOW WITH DATABASE STORAGE - Uses GraphQL for persistence\n */\ninterface TemplateContextType {\n  // Template state\n  allTemplates: BlockTemplate[];\n  customTemplates: TemplateBlocksData[];\n  selectedTemplate: BlockTemplate | null;\n  templateSearchQuery: string;\n  selectedTemplateCategory: string;\n  showPreviewModal: boolean;\n  isApplyingTemplate: boolean;\n  showSaveTemplateDialog: boolean;\n  isSavingTemplate: boolean;\n  isLoadingTemplates: boolean;\n  \n  // State setters\n  setTemplateSearchQuery: (query: string) => void;\n  setSelectedTemplateCategory: (category: string) => void;\n  setShowPreviewModal: (show: boolean) => void;\n  setSelectedTemplate: (template: BlockTemplate | null) => void;\n  setIsApplyingTemplate: (applying: boolean) => void;\n  setShowSaveTemplateDialog: (show: boolean) => void;\n  setIsSavingTemplate: (saving: boolean) => void;\n  \n  // Template operations\n  handlePreviewTemplate: (template: BlockTemplate) => void;\n  handleClosePreview: () => void;\n  handleSaveAsTemplate: (template: CreateTemplateInput) => Promise<void>;\n  handleDeleteCustomTemplate: (id: string) => Promise<void>;\n  handleDuplicateTemplate: (id: string, newName?: string) => Promise<void>;\n  refreshTemplates: () => Promise<void>;\n}\n\nconst TemplateContext = createContext<TemplateContextType | undefined>(undefined);\n\ninterface TemplateProviderProps {\n  children: ReactNode;\n}\n\nexport function TemplateProvider({ children }: TemplateProviderProps) {\n  // Get Apollo client for GraphQL operations\n  const apolloClient = useApolloClient();\n  \n  // Initialize service on mount\n  useEffect(() => {\n    initCustomTemplatesService(apolloClient as any);\n  }, [apolloClient]);\n  \n  // Template state\n  const [templateSearchQuery, setTemplateSearchQuery] = useState('');\n  const [selectedTemplateCategory, setSelectedTemplateCategory] = useState<string>('all');\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<BlockTemplate | null>(null);\n  const [isApplyingTemplate, setIsApplyingTemplate] = useState(false);\n  const [showSaveTemplateDialog, setShowSaveTemplateDialog] = useState(false);\n  const [isSavingTemplate, setIsSavingTemplate] = useState(false);\n  const [isLoadingTemplates, setIsLoadingTemplates] = useState(false);\n  const [customTemplates, setCustomTemplates] = useState<TemplateBlocksData[]>([]);\n  const [allTemplates, setAllTemplates] = useState<BlockTemplate[]>(BLOCK_TEMPLATES);\n  \n  // Load custom templates from database\n  const refreshTemplates = React.useCallback(async () => {\n    try {\n      setIsLoadingTemplates(true);\n      \n      // Initialize service\n      const service = new CustomTemplatesService(apolloClient as any);\n      \n      // Note: initSampleTemplates requires client and userId - should be called elsewhere\n      // in a hook that has access to current user context\n      \n      const custom = await service.getMyTemplates();\n      \n      setCustomTemplates(custom);\n      \n      // Merge with default templates\n      const merged: BlockTemplate[] = [\n        ...BLOCK_TEMPLATES,\n        ...custom.map((ct: TemplateBlocksData) => ({\n          id: ct.id,\n          name: ct.name,\n          description: ct.description,\n          category: ct.category as any,\n          thumbnail: ct.thumbnail || '/placeholder-template.png',\n          blocks: [], // Will be loaded on demand\n          isCustom: true,\n        })),\n      ];\n      \n      setAllTemplates(merged);\n    } catch (error) {\n      console.error('Error loading templates from database:', error);\n    } finally {\n      setIsLoadingTemplates(false);\n    }\n  }, [apolloClient]);\n  \n  // Load custom templates on mount\n  useEffect(() => {\n    refreshTemplates();\n  }, [refreshTemplates]);\n  \n  // Template operations\n  const handlePreviewTemplate = React.useCallback((template: BlockTemplate) => {\n    setSelectedTemplate(template);\n    setShowPreviewModal(true);\n  }, []);\n  \n  const handleClosePreview = React.useCallback(() => {\n    setShowPreviewModal(false);\n    setSelectedTemplate(null);\n  }, []);\n  \n  // Save new template to database\n  const handleSaveAsTemplate = React.useCallback(async (template: CreateTemplateInput) => {\n    try {\n      setIsSavingTemplate(true);\n      \n      const service = new CustomTemplatesService(apolloClient as any);\n      await service.createTemplate(template);\n      \n      console.log(`Template \"${template.name}\" saved successfully!`);\n      \n      // Refresh templates list\n      await refreshTemplates();\n      setShowSaveTemplateDialog(false);\n    } catch (error) {\n      console.error('Error saving template:', error);\n    } finally {\n      setIsSavingTemplate(false);\n    }\n  }, [apolloClient, refreshTemplates]);\n  \n  // Delete template from database\n  const handleDeleteCustomTemplate = React.useCallback(async (id: string) => {\n    try {\n      const confirmed = window.confirm('Are you sure you want to delete this template?');\n      if (!confirmed) return;\n      \n      const service = new CustomTemplatesService(apolloClient as any);\n      await service.deleteTemplate(id);\n      \n      console.log('Template deleted successfully');\n      \n      // Refresh templates list\n      await refreshTemplates();\n    } catch (error) {\n      console.error('Error deleting template:', error);\n    }\n  }, [apolloClient, refreshTemplates]);\n  \n  // Duplicate template\n  const handleDuplicateTemplate = React.useCallback(async (id: string, newName?: string) => {\n    try {\n      const service = new CustomTemplatesService(apolloClient as any);\n      await service.duplicateTemplate(id, newName);\n      \n      console.log('Template duplicated successfully');\n      \n      // Refresh templates list\n      await refreshTemplates();\n    } catch (error) {\n      console.error('Error duplicating template:', error);\n    }\n  }, [apolloClient, refreshTemplates]);\n  \n  const value: TemplateContextType = {\n    allTemplates,\n    customTemplates,\n    selectedTemplate,\n    templateSearchQuery,\n    selectedTemplateCategory,\n    showPreviewModal,\n    isApplyingTemplate,\n    showSaveTemplateDialog,\n    isSavingTemplate,\n    isLoadingTemplates,\n    setTemplateSearchQuery,\n    setSelectedTemplateCategory,\n    setShowPreviewModal,\n    setSelectedTemplate,\n    setIsApplyingTemplate,\n    setShowSaveTemplateDialog,\n    setIsSavingTemplate,\n    handlePreviewTemplate,\n    handleClosePreview,\n    handleSaveAsTemplate,\n    handleDeleteCustomTemplate,\n    handleDuplicateTemplate,\n    refreshTemplates,\n  };\n  \n  return (\n    <TemplateContext.Provider value={value}>\n      {children}\n    </TemplateContext.Provider>\n  );\n}\n\nexport function useTemplate() {\n  const context = useContext(TemplateContext);\n  if (context === undefined) {\n    // Return default values instead of throwing during SSR or initial render\n    if (typeof window === 'undefined') {\n      return {\n        allTemplates: [],\n        customTemplates: [],\n        selectedTemplate: null,\n        templateSearchQuery: '',\n        selectedTemplateCategory: 'all',\n        showPreviewModal: false,\n        isApplyingTemplate: false,\n        showSaveTemplateDialog: false,\n        isSavingTemplate: false,\n        isLoadingTemplates: false,\n        setTemplateSearchQuery: () => {},\n        setSelectedTemplateCategory: () => {},\n        setShowPreviewModal: () => {},\n        setSelectedTemplate: () => {},\n        setIsApplyingTemplate: () => {},\n        setShowSaveTemplateDialog: () => {},\n        setIsSavingTemplate: () => {},\n        handlePreviewTemplate: () => {},\n        handleClosePreview: () => {},\n        handleSaveAsTemplate: async () => {},\n        handleDeleteCustomTemplate: async () => {},\n        handleDuplicateTemplate: async () => {},\n        refreshTemplates: async () => {},\n      } as TemplateContextType;\n    }\n    throw new Error(\n      'useTemplate must be used within a TemplateProvider. ' +\n      'Make sure your component is wrapped with <PageBuilderProvider>'\n    );\n  }\n  return context;\n}\n","'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useEffect, ReactNode } from 'react';\nimport { PageBlock } from '@/types/page-builder';\n\n/**\n * History State Interface\n */\ninterface HistoryState {\n  blocks: PageBlock[];\n  timestamp: number;\n  action: string; // Description of the action\n}\n\n/**\n * History Context Type\n */\ninterface HistoryContextType {\n  // History state\n  canUndo: boolean;\n  canRedo: boolean;\n  historyIndex: number;\n  historySize: number;\n  \n  // Actions\n  undo: () => PageBlock[] | null;\n  redo: () => PageBlock[] | null;\n  pushHistory: (blocks: PageBlock[], action: string) => void;\n  clearHistory: () => void;\n  \n  // Get current state info\n  getCurrentAction: () => string;\n  getUndoAction: () => string | null;\n  getRedoAction: () => string | null;\n}\n\nconst HistoryContext = createContext<HistoryContextType | undefined>(undefined);\n\nexport { HistoryContext };\n\ninterface HistoryProviderProps {\n  children: ReactNode;\n  maxHistorySize?: number; // Maximum history items to keep (default: 50)\n}\n\n/**\n * History Provider Component\n * \n * Implements undo/redo functionality for page builder\n * - Maintains history stack with configurable size limit\n * - Tracks current position in history\n * - Provides undo/redo capabilities\n * - Smart memory management (removes old entries)\n */\nexport function HistoryProvider({ children, maxHistorySize = 50 }: HistoryProviderProps) {\n  // History stack - array of historical states\n  const [history, setHistory] = useState<HistoryState[]>([]);\n  \n  // Current position in history (index)\n  const [historyIndex, setHistoryIndex] = useState<number>(-1);\n  \n  /**\n   * Push new state to history\n   * - Clears any redo history when new action is performed\n   * - Maintains max size limit\n   */\n  const pushHistory = useCallback((blocks: PageBlock[], action: string) => {\n    setHistory((prevHistory) => {\n      // Remove any redo entries (everything after current index)\n      const newHistory = prevHistory.slice(0, historyIndex + 1);\n      \n      // Add new state\n      newHistory.push({\n        blocks: JSON.parse(JSON.stringify(blocks)), // Deep clone to prevent mutations\n        timestamp: Date.now(),\n        action,\n      });\n      \n      // Trim history if exceeds max size\n      if (newHistory.length > maxHistorySize) {\n        return newHistory.slice(newHistory.length - maxHistorySize);\n      }\n      \n      return newHistory;\n    });\n    \n    // Move index to new position\n    setHistoryIndex((prevIndex) => {\n      const newLength = Math.min(historyIndex + 2, maxHistorySize);\n      return newLength - 1;\n    });\n  }, [historyIndex, maxHistorySize]);\n  \n  /**\n   * Undo - Go back one step in history\n   */\n  const undo = useCallback((): PageBlock[] | null => {\n    if (historyIndex <= 0) return null;\n    \n    const previousIndex = historyIndex - 1;\n    setHistoryIndex(previousIndex);\n    \n    // Return the previous state's blocks\n    return JSON.parse(JSON.stringify(history[previousIndex].blocks));\n  }, [historyIndex, history]);\n  \n  /**\n   * Redo - Go forward one step in history\n   */\n  const redo = useCallback((): PageBlock[] | null => {\n    if (historyIndex >= history.length - 1) return null;\n    \n    const nextIndex = historyIndex + 1;\n    setHistoryIndex(nextIndex);\n    \n    // Return the next state's blocks\n    return JSON.parse(JSON.stringify(history[nextIndex].blocks));\n  }, [historyIndex, history]);\n  \n  /**\n   * Clear all history\n   */\n  const clearHistory = useCallback(() => {\n    setHistory([]);\n    setHistoryIndex(-1);\n  }, []);\n  \n  /**\n   * Get current action description\n   */\n  const getCurrentAction = useCallback((): string => {\n    if (historyIndex < 0 || historyIndex >= history.length) return '';\n    return history[historyIndex].action;\n  }, [historyIndex, history]);\n  \n  /**\n   * Get undo action description (what will be undone)\n   */\n  const getUndoAction = useCallback((): string | null => {\n    if (historyIndex <= 0) return null;\n    return history[historyIndex].action;\n  }, [historyIndex, history]);\n  \n  /**\n   * Get redo action description (what will be redone)\n   */\n  const getRedoAction = useCallback((): string | null => {\n    if (historyIndex >= history.length - 1) return null;\n    return history[historyIndex + 1].action;\n  }, [historyIndex, history]);\n  \n  // Computed properties\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < history.length - 1;\n  const historySize = history.length;\n  \n  const value: HistoryContextType = {\n    canUndo,\n    canRedo,\n    historyIndex,\n    historySize,\n    undo,\n    redo,\n    pushHistory,\n    clearHistory,\n    getCurrentAction,\n    getUndoAction,\n    getRedoAction,\n  };\n  \n  return (\n    <HistoryContext.Provider value={value}>\n      {children}\n    </HistoryContext.Provider>\n  );\n}\n\n/**\n * Hook to use History Context\n */\nexport function useHistory() {\n  const context = useContext(HistoryContext);\n  if (context === undefined) {\n    // Return default values for SSR or when not wrapped in provider\n    if (typeof window === 'undefined') {\n      return {\n        canUndo: false,\n        canRedo: false,\n        historyIndex: -1,\n        historySize: 0,\n        undo: () => null,\n        redo: () => null,\n        pushHistory: () => {},\n        clearHistory: () => {},\n        getCurrentAction: () => '',\n        getUndoAction: () => null,\n        getRedoAction: () => null,\n      } as HistoryContextType;\n    }\n    throw new Error(\n      'useHistory must be used within a HistoryProvider. ' +\n      'Make sure your component is wrapped with <PageBuilderProvider>'\n    );\n  }\n  return context;\n}\n","/**\n * PageBuilder Template System - Template Library Component\n * Phase 5.2: UI Components\n * \n * Main template browser with grid, search, and filtering\n */\n\n'use client';\n\nimport React, { useState, useMemo } from 'react';\nimport { useTemplates } from '@/hooks/useTemplates';\nimport { PageTemplate, TemplateCategory } from '@/types/template';\nimport { TemplateCard } from './TemplateCard';\nimport { TemplateCategoryFilter } from './TemplateCategoryFilter';\nimport { TemplatePreview } from './TemplatePreview';\nimport { ConfirmationDialog } from './ConfirmationDialog';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Search, Plus, Upload, Download, Loader2 } from 'lucide-react';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { StorageWarning } from '../StorageWarning';\n\ninterface TemplateLibraryProps {\n  onTemplateSelect?: (template: PageTemplate) => void;\n  onCreateNew?: () => void;\n  onImport?: () => void;\n}\n\nexport function TemplateLibrary({\n  onTemplateSelect,\n  onCreateNew,\n  onImport,\n}: TemplateLibraryProps) {\n  const {\n    templates,\n    filteredTemplates,\n    isLoading,\n    filter,\n    setFilter,\n    exportTemplate,\n    duplicate,\n    removeTemplate,\n  } = useTemplates();\n\n  const [searchQuery, setSearchQuery] = useState('');\n  const [previewTemplate, setPreviewTemplate] = useState<PageTemplate | null>(null);\n  const [deleteConfirmation, setDeleteConfirmation] = useState<{\n    isOpen: boolean;\n    template: PageTemplate | null;\n  }>({\n    isOpen: false,\n    template: null,\n  });\n\n  // Category counts\n  const categoryCounts = useMemo(() => {\n    const counts: Record<TemplateCategory, number> = {\n      all: templates.length,\n      landing: 0,\n      blog: 0,\n      ecommerce: 0,\n      portfolio: 0,\n      marketing: 0,\n      custom: 0,\n    };\n\n    templates.forEach((template) => {\n      counts[template.category] = (counts[template.category] || 0) + 1;\n    });\n\n    return counts;\n  }, [templates]);\n\n  // Handle search\n  const handleSearchChange = (value: string) => {\n    setSearchQuery(value);\n    setFilter({ search: value });\n  };\n\n  // Handle category change\n  const handleCategoryChange = (category: TemplateCategory) => {\n    setFilter({ category });\n  };\n\n  // Handle sort change\n  const handleSortChange = (value: string) => {\n    const [sortBy, sortOrder] = value.split('-') as [any, 'asc' | 'desc'];\n    setFilter({ sortBy, sortOrder });\n  };\n\n  // Handle template use\n  const handleUseTemplate = (template: PageTemplate) => {\n    if (onTemplateSelect) {\n      onTemplateSelect(template);\n    }\n    setPreviewTemplate(null);\n  };\n\n  // Handle template duplicate\n  const handleDuplicate = async (template: PageTemplate) => {\n    await duplicate(template.id);\n  };\n\n  // Handle template delete\n  const handleDelete = (template: PageTemplate) => {\n    setDeleteConfirmation({\n      isOpen: true,\n      template,\n    });\n  };\n\n  const confirmDelete = async () => {\n    if (deleteConfirmation.template) {\n      await removeTemplate(deleteConfirmation.template.id);\n      setDeleteConfirmation({ isOpen: false, template: null });\n    }\n  };\n\n  const cancelDelete = () => {\n    setDeleteConfirmation({ isOpen: false, template: null });\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Loading templates...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Storage Warning */}\n      <StorageWarning threshold={80} />\n      \n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Template Library</h2>\n          <p className=\"text-gray-600 mt-1\">Choose a template to get started quickly</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {onImport && (\n            <Button variant=\"outline\" onClick={onImport}>\n              <Upload className=\"w-4 h-4 mr-2\" />\n              Import\n            </Button>\n          )}\n          {onCreateNew && (\n            <Button onClick={onCreateNew} className=\"bg-blue-600 hover:bg-blue-700\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create New\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"space-y-4\">\n        {/* Search Bar */}\n        <div className=\"flex items-center gap-4\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <Input\n              placeholder=\"Search templates by name, description, or tags...\"\n              value={searchQuery}\n              onChange={(e) => handleSearchChange(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n          <Select\n            value={`${filter.sortBy}-${filter.sortOrder}`}\n            onValueChange={handleSortChange}\n          >\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Sort by\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"date-desc\">Newest First</SelectItem>\n              <SelectItem value=\"date-asc\">Oldest First</SelectItem>\n              <SelectItem value=\"name-asc\">Name (A-Z)</SelectItem>\n              <SelectItem value=\"name-desc\">Name (Z-A)</SelectItem>\n              <SelectItem value=\"category-asc\">Category</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Category Filter */}\n        <TemplateCategoryFilter\n          activeCategory={filter.category || 'all'}\n          onCategoryChange={handleCategoryChange}\n          counts={categoryCounts}\n        />\n      </div>\n\n      {/* Results Count */}\n      <div className=\"flex items-center justify-between text-sm text-gray-600\">\n        <span>\n          Showing {filteredTemplates.length} of {templates.length} templates\n        </span>\n      </div>\n\n      {/* Template Grid */}\n      {filteredTemplates.length === 0 ? (\n        <div className=\"text-center py-16\">\n          <div className=\"text-6xl mb-4\">📭</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No templates found</h3>\n          <p className=\"text-gray-600 mb-6\">\n            {searchQuery\n              ? 'Try adjusting your search or filters'\n              : 'Start by creating your first template'}\n          </p>\n          {onCreateNew && (\n            <Button onClick={onCreateNew} className=\"bg-blue-600 hover:bg-blue-700\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create Template\n            </Button>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {filteredTemplates.map((template) => (\n            <TemplateCard\n              key={template.id}\n              template={template}\n              onUse={handleUseTemplate}\n              onPreview={setPreviewTemplate}\n              onExport={exportTemplate}\n              onDuplicate={handleDuplicate}\n              onDelete={handleDelete}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Preview Modal */}\n      <TemplatePreview\n        template={previewTemplate}\n        isOpen={!!previewTemplate}\n        onClose={() => setPreviewTemplate(null)}\n        onUse={handleUseTemplate}\n      />\n\n      {/* Delete Confirmation Dialog */}\n      <ConfirmationDialog\n        isOpen={deleteConfirmation.isOpen}\n        title=\"Delete Template\"\n        description={`Are you sure you want to delete \"${deleteConfirmation.template?.name}\"? This action cannot be undone.`}\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        variant=\"destructive\"\n        onConfirm={confirmDelete}\n        onCancel={cancelDelete}\n      />\n    </div>\n  );\n}\n","/**\n * PageBuilder Template System - Save Template Dialog\n * Phase 5.3: Template Operations\n * \n * Dialog for saving current page as a template\n */\n\n'use client';\n\nimport React, { useState } from 'react';\nimport { PageTemplate, TemplateCategory, TEMPLATE_CATEGORIES, PageElement } from '@/types/template';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Save, X, AlertCircle, Loader2 } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { generateTemplateId } from '@/lib/templateStore';\n\ninterface SaveTemplateDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (template: PageTemplate) => Promise<boolean>;\n  currentPageStructure: PageElement[];\n  currentPageStyles?: any;\n}\n\nexport function SaveTemplateDialog({\n  isOpen,\n  onClose,\n  onSave,\n  currentPageStructure,\n  currentPageStyles,\n}: SaveTemplateDialogProps) {\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState<TemplateCategory>('custom');\n  const [tags, setTags] = useState('');\n  const [author, setAuthor] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Validation\n  const isValid = name.trim().length > 0 && description.trim().length > 0 && category !== 'all';\n\n  // Parse tags from comma-separated string\n  const parsedTags = tags\n    .split(',')\n    .map(tag => tag.trim())\n    .filter(tag => tag.length > 0);\n\n  // Handle save\n  const handleSave = async () => {\n    if (!isValid) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    setIsSaving(true);\n    setError(null);\n\n    try {\n      const template: PageTemplate = {\n        id: generateTemplateId(),\n        name: name.trim(),\n        description: description.trim(),\n        category: category as Exclude<TemplateCategory, 'all'>,\n        structure: currentPageStructure,\n        styles: currentPageStyles,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        author: author.trim() || undefined,\n        tags: parsedTags.length > 0 ? parsedTags : undefined,\n        isDefault: false,\n      };\n\n      const success = await onSave(template);\n\n      if (success) {\n        // Reset form\n        setName('');\n        setDescription('');\n        setCategory('custom');\n        setTags('');\n        setAuthor('');\n        onClose();\n      } else {\n        setError('Failed to save template. Please try again.');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Handle cancel\n  const handleCancel = () => {\n    setName('');\n    setDescription('');\n    setCategory('custom');\n    setTags('');\n    setAuthor('');\n    setError(null);\n    onClose();\n  };\n\n  // Count elements\n  const countElements = (elements: PageElement[]): number => {\n    let count = elements.length;\n    elements.forEach(el => {\n      if (el.children && Array.isArray(el.children)) {\n        count += countElements(el.children);\n      }\n    });\n    return count;\n  };\n\n  const elementCount = countElements(currentPageStructure);\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Save as Template</DialogTitle>\n          <DialogDescription>\n            Save your current page design as a reusable template. This includes all elements and styles.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Error Alert */}\n          {error && (\n            <Alert className=\"border-destructive\">\n              <AlertCircle className=\"h-4 w-4 text-destructive\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          {/* Template Info */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex-1\">\n                <p className=\"text-sm text-blue-900 font-medium mb-1\">\n                  Current Page Structure\n                </p>\n                <p className=\"text-sm text-blue-700\">\n                  {elementCount} elements will be saved in this template\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Template Name */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"template-name\">\n              Template Name <span className=\"text-red-500\">*</span>\n            </Label>\n            <Input\n              id=\"template-name\"\n              placeholder=\"e.g., My Landing Page\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              maxLength={100}\n            />\n            <p className=\"text-xs text-gray-500\">\n              Choose a descriptive name for your template\n            </p>\n          </div>\n\n          {/* Description */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"template-description\">\n              Description <span className=\"text-red-500\">*</span>\n            </Label>\n            <Textarea\n              id=\"template-description\"\n              placeholder=\"Describe what this template is for and what it includes...\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              maxLength={500}\n            />\n            <p className=\"text-xs text-gray-500\">\n              {description.length}/500 characters\n            </p>\n          </div>\n\n          {/* Category and Author */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-category\">\n                Category <span className=\"text-red-500\">*</span>\n              </Label>\n              <Select value={category} onValueChange={(value: TemplateCategory) => setCategory(value)}>\n                <SelectTrigger id=\"template-category\">\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {TEMPLATE_CATEGORIES.filter(c => c.value !== 'all').map((cat) => (\n                    <SelectItem key={cat.value} value={cat.value}>\n                      {cat.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-author\">Author (optional)</Label>\n              <Input\n                id=\"template-author\"\n                placeholder=\"Your name\"\n                value={author}\n                onChange={(e) => setAuthor(e.target.value)}\n                maxLength={50}\n              />\n            </div>\n          </div>\n\n          {/* Tags */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"template-tags\">Tags (optional)</Label>\n            <Input\n              id=\"template-tags\"\n              placeholder=\"e.g., modern, minimal, hero\"\n              value={tags}\n              onChange={(e) => setTags(e.target.value)}\n            />\n            <p className=\"text-xs text-gray-500\">\n              Separate tags with commas. Tags help organize and search templates.\n            </p>\n            {parsedTags.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {parsedTags.map((tag, index) => (\n                  <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n                    {tag}\n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleCancel} disabled={isSaving}>\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSave}\n            disabled={!isValid || isSaving}\n            className=\"bg-blue-600 hover:bg-blue-700\"\n          >\n            {isSaving ? (\n              <>\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save Template\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","'use client';\n\nimport React, { ReactNode } from 'react';\nimport { DndContext, DragOverlay, closestCorners } from '@dnd-kit/core';\nimport { GripVertical } from 'lucide-react';\nimport { Card } from '@/components/ui/card';\nimport {\n  PageStateProvider,\n  UIStateProvider,\n  TemplateProvider,\n  PageActionsProvider,\n  HistoryProvider,\n  usePageState,\n  usePageActions,\n  useUIState,\n  useTemplate,\n  useHistory,\n} from './contexts';\nimport ErrorBoundary from './ErrorBoundary';\nimport { pageBuilderLogger } from './utils/pageBuilderLogger';\n\n/**\n * PageBuilder Provider Props\n */\ninterface PageBuilderProviderProps {\n  children: ReactNode;\n  pageId?: string;\n}\n\n/**\n * Refactored PageBuilder Provider Component\n * \n * Now uses 4 separate contexts for better organization:\n * - PageStateContext: Page and blocks state\n * - UIStateContext: UI state (modals, dialogs)\n * - TemplateContext: Template operations\n * - PageActionsContext: All CRUD operations\n * \n * Wrapped with Single Error Boundary for robust error handling\n */\nexport function PageBuilderProvider({ children, pageId }: PageBuilderProviderProps) {\n  return (\n    <ErrorBoundary>\n      <PageStateProvider pageId={pageId}>\n        <UIStateProvider>\n          <TemplateProvider>\n            <HistoryProvider maxHistorySize={50}>\n              <PageActionsProvider pageId={pageId}>\n                <DndContextWrapper>\n                  {children}\n                </DndContextWrapper>\n              </PageActionsProvider>\n            </HistoryProvider>\n          </TemplateProvider>\n        </UIStateProvider>\n      </PageStateProvider>\n    </ErrorBoundary>\n  );\n}\n\n/**\n * DnD Context Wrapper\n * Handles drag and drop functionality\n * \n * Important: handleDragEnd is async but DndContext onDragEnd doesn't wait for async.\n * We wrap it to ensure proper handling of the async operations.\n */\nfunction DndContextWrapper({ children }: { children: ReactNode }) {\n  const { draggedBlock } = usePageState();\n  const { handleDragStart, handleDragEnd: handleDragEndAsync } = usePageActions();\n\n  // Wrap async handler since DndContext doesn't wait for async callbacks\n  // Fire and forget - let the async operation complete in the background\n  const handleDragEnd = React.useCallback((event: any) => {\n    handleDragEndAsync(event).catch((error: any) => {\n      pageBuilderLogger.error('DRAG_END', 'Error in drag and drop operation', { event, error });\n    });\n  }, [handleDragEndAsync]);\n\n  return (\n    <DndContext\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n      collisionDetection={closestCorners}\n    >\n      {children}\n      \n      {/* Drag Overlay - Visual feedback during drag */}\n      {/* Memoized to prevent unnecessary re-renders and memory leaks */}\n      <DragOverlayContent draggedBlock={draggedBlock} />\n    </DndContext>\n  );\n}\n\n/**\n * Memoized DragOverlay Content Component\n * Prevents memory leaks and unnecessary re-renders during drag operations\n */\nconst DragOverlayContent = React.memo(function DragOverlayContent({ draggedBlock }: { draggedBlock: any }) {\n  return (\n    <DragOverlay dropAnimation={null}>\n      {draggedBlock ? (\n        <div className=\"animate-pulse pointer-events-none\">\n          <Card className=\"p-4 bg-gradient-to-r from-blue-500 to-blue-600 shadow-2xl border-2 border-blue-300 text-white min-w-xs\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-white/20 rounded-lg\">\n                <GripVertical className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <span className=\"text-sm font-bold block\">Moving Block</span>\n                <span className=\"text-xs opacity-90\">{draggedBlock.type}</span>\n              </div>\n              <div className=\"ml-auto text-2xl\">📦</div>\n            </div>\n          </Card>\n        </div>\n      ) : null}\n    </DragOverlay>\n  );\n});\n// Export individual hooks for better tree-shaking and clear API\nexport { usePageState, useUIState, useTemplate, usePageActions, useHistory } from './contexts';\n","'use client';\n\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2, Link2 } from 'lucide-react';\nimport type { DynamicConfig, DataBinding, PageBlock } from '@/types/page-builder';\n\ninterface DynamicPageConfigProps {\n  config?: DynamicConfig;\n  blocks?: PageBlock[];\n  onChange: (config: DynamicConfig) => void;\n}\n\nexport function DynamicPageConfig({ config, blocks = [], onChange }: DynamicPageConfigProps) {\n  const [localConfig, setLocalConfig] = React.useState<DynamicConfig>(\n    config || {\n      dataSource: 'product',\n      slugPattern: '',\n      slugField: 'slug',\n      dataBindings: [],\n    }\n  );\n\n  const updateConfig = (updates: Partial<DynamicConfig>) => {\n    const newConfig = { ...localConfig, ...updates };\n    setLocalConfig(newConfig);\n    onChange(newConfig);\n  };\n\n  const addBinding = () => {\n    const newBinding: DataBinding = {\n      blockId: '',\n      sourceField: '',\n      targetProperty: 'content.html',\n    };\n    updateConfig({\n      dataBindings: [...localConfig.dataBindings, newBinding],\n    });\n  };\n\n  const updateBinding = (index: number, updates: Partial<DataBinding>) => {\n    const newBindings = [...localConfig.dataBindings];\n    newBindings[index] = { ...newBindings[index], ...updates };\n    updateConfig({ dataBindings: newBindings });\n  };\n\n  const removeBinding = (index: number) => {\n    updateConfig({\n      dataBindings: localConfig.dataBindings.filter((_, i) => i !== index),\n    });\n  };\n\n  return (\n    <div className=\"space-y-4 border-l-4 border-blue-500 pl-4\">\n      <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n        <Link2 className=\"w-4 h-4\" />\n        Dynamic Configuration\n      </h3>\n\n      {/* Data Source */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm\">Data Source</Label>\n        <Select\n          value={localConfig.dataSource}\n          onValueChange={(value) => updateConfig({ dataSource: value as any })}\n        >\n          <SelectTrigger>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"product\">Product</SelectItem>\n            <SelectItem value=\"post\">Blog Post</SelectItem>\n            <SelectItem value=\"category\">Category</SelectItem>\n            <SelectItem value=\"custom\">Custom API</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Slug Pattern */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm\">URL Pattern</Label>\n        <Input\n          value={localConfig.slugPattern}\n          onChange={(e) => updateConfig({ slugPattern: e.target.value })}\n          placeholder=\"/product/:productSlug\"\n          className=\"font-mono text-sm\"\n        />\n        <p className=\"text-xs text-gray-500\">\n          Use <code className=\"bg-gray-100 px-1 rounded\">:paramName</code> for dynamic segments\n        </p>\n      </div>\n\n      {/* Slug Field */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm\">Slug Field Name</Label>\n        <Input\n          value={localConfig.slugField}\n          onChange={(e) => updateConfig({ slugField: e.target.value })}\n          placeholder=\"slug\"\n          className=\"font-mono text-sm\"\n        />\n      </div>\n\n      {/* Data Bindings */}\n      <div className=\"space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <Label className=\"text-sm font-semibold\">Data Bindings</Label>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={addBinding}\n            className=\"gap-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Add Binding\n          </Button>\n        </div>\n\n        {localConfig.dataBindings.map((binding, index) => (\n          <div\n            key={index}\n            className=\"grid grid-cols-12 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200\"\n          >\n            {/* Block Selection */}\n            <div className=\"col-span-4\">\n              <Label className=\"text-xs text-gray-600\">Block</Label>\n              <Select\n                value={binding.blockId}\n                onValueChange={(value) => updateBinding(index, { blockId: value })}\n              >\n                <SelectTrigger className=\"h-8 text-xs\">\n                  <SelectValue placeholder=\"Select block\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {blocks.map((block) => (\n                    <SelectItem key={block.id} value={block.id}>\n                      {block.type} - {block.id.slice(0, 8)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Source Field */}\n            <div className=\"col-span-3\">\n              <Label className=\"text-xs text-gray-600\">Source Field</Label>\n              <Input\n                value={binding.sourceField}\n                onChange={(e) => updateBinding(index, { sourceField: e.target.value })}\n                placeholder=\"name\"\n                className=\"h-8 text-xs font-mono\"\n              />\n            </div>\n\n            {/* Target Property */}\n            <div className=\"col-span-4\">\n              <Label className=\"text-xs text-gray-600\">Target Property</Label>\n              <Input\n                value={binding.targetProperty}\n                onChange={(e) => updateBinding(index, { targetProperty: e.target.value })}\n                placeholder=\"content.html\"\n                className=\"h-8 text-xs font-mono\"\n              />\n            </div>\n\n            {/* Remove Button */}\n            <div className=\"col-span-1 flex items-end\">\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => removeBinding(index)}\n                className=\"h-8 w-8 text-red-600 hover:bg-red-50\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        ))}\n\n        {localConfig.dataBindings.length === 0 && (\n          <div className=\"text-center py-6 text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg\">\n            No data bindings configured. Click &quot;Add Binding&quot; to start.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Switch } from '@/components/ui/switch';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { AlertCircle, CheckCircle, Lock } from 'lucide-react';\nimport { Page, PageStatus, DynamicConfig } from '@/types/page-builder';\nimport { DynamicPageConfig } from './DynamicPageConfig';\n\n/**\n * Vietnamese character transliteration map\n * Converts Vietnamese characters to their ASCII equivalents\n */\nconst VIETNAMESE_CHAR_MAP: Record<string, string> = {\n  // Lowercase\n  'à': 'a', 'á': 'a', 'ả': 'a', 'ã': 'a', 'ạ': 'a',\n  'ă': 'a', 'ằ': 'a', 'ắ': 'a', 'ẳ': 'a', 'ẵ': 'a', 'ặ': 'a',\n  'â': 'a', 'ầ': 'a', 'ấ': 'a', 'ẩ': 'a', 'ẫ': 'a', 'ậ': 'a',\n  'đ': 'd',\n  'è': 'e', 'é': 'e', 'ẻ': 'e', 'ẽ': 'e', 'ẹ': 'e',\n  'ê': 'e', 'ề': 'e', 'ế': 'e', 'ể': 'e', 'ễ': 'e', 'ệ': 'e',\n  'ì': 'i', 'í': 'i', 'ỉ': 'i', 'ĩ': 'i', 'ị': 'i',\n  'ò': 'o', 'ó': 'o', 'ỏ': 'o', 'õ': 'o', 'ọ': 'o',\n  'ô': 'o', 'ồ': 'o', 'ố': 'o', 'ổ': 'o', 'ỗ': 'o', 'ộ': 'o',\n  'ơ': 'o', 'ờ': 'o', 'ớ': 'o', 'ở': 'o', 'ỡ': 'o', 'ợ': 'o',\n  'ù': 'u', 'ú': 'u', 'ủ': 'u', 'ũ': 'u', 'ụ': 'u',\n  'ư': 'u', 'ừ': 'u', 'ứ': 'u', 'ử': 'u', 'ữ': 'u', 'ự': 'u',\n  'ỳ': 'y', 'ý': 'y', 'ỷ': 'y', 'ỹ': 'y', 'ỵ': 'y',\n  // Uppercase\n  'À': 'a', 'Á': 'a', 'Ả': 'a', 'Ã': 'a', 'Ạ': 'a',\n  'Ă': 'a', 'Ằ': 'a', 'Ắ': 'a', 'Ẳ': 'a', 'Ẵ': 'a', 'Ặ': 'a',\n  'Â': 'a', 'Ầ': 'a', 'Ấ': 'a', 'Ẩ': 'a', 'Ẫ': 'a', 'Ậ': 'a',\n  'Đ': 'd',\n  'È': 'e', 'É': 'e', 'Ẻ': 'e', 'Ẽ': 'e', 'Ẹ': 'e',\n  'Ê': 'e', 'Ề': 'e', 'Ế': 'e', 'Ể': 'e', 'Ễ': 'e', 'Ệ': 'e',\n  'Ì': 'i', 'Í': 'i', 'Ỉ': 'i', 'Ĩ': 'i', 'Ị': 'i',\n  'Ò': 'o', 'Ó': 'o', 'Ỏ': 'o', 'Õ': 'o', 'Ọ': 'o',\n  'Ô': 'o', 'Ồ': 'o', 'Ố': 'o', 'Ổ': 'o', 'Ỗ': 'o', 'Ộ': 'o',\n  'Ơ': 'o', 'Ờ': 'o', 'Ớ': 'o', 'Ở': 'o', 'Ỡ': 'o', 'Ợ': 'o',\n  'Ù': 'u', 'Ú': 'u', 'Ủ': 'u', 'Ũ': 'u', 'Ụ': 'u',\n  'Ư': 'u', 'Ừ': 'u', 'Ứ': 'u', 'Ử': 'u', 'Ữ': 'u', 'Ự': 'u',\n  'Ỳ': 'y', 'Ý': 'y', 'Ỷ': 'y', 'Ỹ': 'y', 'Ỵ': 'y',\n};\n\n/**\n * Transliterate Vietnamese text to ASCII slug format\n * Example: \"Về Chúng Tôi\" -> \"ve-chung-toi\"\n */\nfunction transliterateToSlug(text: string): string {\n  if (!text) return '';\n  \n  // Convert Vietnamese characters to ASCII\n  let slug = text\n    .split('')\n    .map(char => VIETNAMESE_CHAR_MAP[char] || char)\n    .join('');\n  \n  // Convert to lowercase\n  slug = slug.toLowerCase();\n  \n  // Replace spaces and non-alphanumeric characters with hyphens\n  slug = slug\n    .replace(/[^a-z0-9\\s-]/g, '') // Remove special characters\n    .replace(/\\s+/g, '-')           // Replace spaces with hyphens\n    .replace(/-+/g, '-')            // Replace multiple hyphens with single\n    .trim();\n  \n  // Remove leading/trailing hyphens\n  slug = slug.replace(/^-+|-+$/g, '');\n  \n  return slug;\n}\n\n/**\n * Page Settings Form Component\n * \n * Form for editing page metadata:\n * - General: Title, slug, status, description\n * - SEO: SEO title, description, keywords\n * - Layout: Header/Footer settings\n * \n * Features:\n * - Status change confirmation with visual feedback\n * - Auto-generate slug from title\n * - Layout settings for header/footer customization\n * - SEO metadata editing\n */\ninterface PageSettingsFormProps {\n  page: Page;\n  onUpdate: (page: Page) => void;\n}\n\n// Helper function to get status information with icons and descriptions\nconst getStatusDescription = (status: PageStatus) => {\n  switch (status) {\n    case PageStatus.DRAFT:\n      return {\n        title: 'Draft (Bản Nháp)',\n        description: 'Trang này đang được soạn thảo. Không hiển thị công khai cho khách truy cập.',\n        icon: <AlertCircle className=\"w-5 h-5\" />,\n        color: 'text-yellow-600',\n      };\n    case PageStatus.PUBLISHED:\n      return {\n        title: 'Published (Xuất Bản)',\n        description: 'Trang này đang hiển thị công khai. Tất cả khách truy cập có thể xem.',\n        icon: <CheckCircle className=\"w-5 h-5\" />,\n        color: 'text-green-600',\n      };\n    case PageStatus.ARCHIVED:\n      return {\n        title: 'Archived (Lưu Trữ)',\n        description: 'Trang này được lưu trữ. Không hiển thị công khai nhưng vẫn có thể khôi phục.',\n        icon: <Lock className=\"w-5 h-5\" />,\n        color: 'text-gray-600',\n      };\n  }\n};\n\nexport default function PageSettingsForm({ page, onUpdate }: PageSettingsFormProps) {\n  const [formData, setFormData] = useState({\n    title: page.title || '',\n    slug: page.slug || '',\n    content: (page.content && typeof page.content === 'string') ? page.content : '',\n    status: page.status,\n    isHomepage: page.isHomepage ?? false,\n    isDynamic: page.isDynamic ?? false, // 🆕\n    dynamicConfig: page.dynamicConfig, // 🆕\n    seoTitle: page.seoTitle || '',\n    seoDescription: page.seoDescription || '',\n    seoKeywords: (page.seoKeywords || []).join(', '),\n    layoutSettings: {\n      hasHeader: page.layoutSettings?.hasHeader ?? true,\n      hasFooter: page.layoutSettings?.hasFooter ?? true,\n      headerMenuId: page.layoutSettings?.headerMenuId || null,\n      footerMenuId: page.layoutSettings?.footerMenuId || null,\n      headerStyle: page.layoutSettings?.headerStyle || 'default',\n      footerStyle: page.layoutSettings?.footerStyle || 'default',\n    },\n  });\n\n  const [isSlugAutoGenerated, setIsSlugAutoGenerated] = useState(page.slug === '' || page.slug?.startsWith('untitled'));\n  const [showStatusChangeDialog, setShowStatusChangeDialog] = useState(false);\n  const [pendingStatus, setPendingStatus] = useState<PageStatus | null>(null);\n\n  const currentStatusInfo = getStatusDescription(formData.status);\n\n  const handleInputChange = (field: keyof typeof formData, value: any) => {\n    // Special handling for status change - show confirmation dialog\n    if (field === 'status' && value !== formData.status) {\n      setPendingStatus(value as PageStatus);\n      setShowStatusChangeDialog(true);\n      return;\n    }\n\n    const newFormData = { ...formData, [field]: value };\n    \n    // Auto-generate slug from title when title changes and slug was auto-generated\n    if (field === 'title' && isSlugAutoGenerated) {\n      const generatedSlug = transliterateToSlug(value);\n      newFormData.slug = generatedSlug;\n    }\n    \n    // Mark slug as manually edited if user changes it directly\n    if (field === 'slug') {\n      setIsSlugAutoGenerated(false);\n    }\n    \n    setFormData(newFormData);\n    \n    // Update parent immediately\n    const updatedPage = {\n      ...page,\n      ...newFormData,\n      content: field === 'content' && !value ? undefined : (field === 'content' ? value : page.content),\n      seoKeywords: field === 'seoKeywords' ? value.split(',').map((k: string) => k.trim()).filter(Boolean) : page.seoKeywords,\n    };\n    onUpdate(updatedPage);\n  };\n\n  // Confirm status change\n  const handleConfirmStatusChange = () => {\n    if (pendingStatus) {\n      setFormData({ ...formData, status: pendingStatus });\n      const updatedPage = {\n        ...page,\n        ...formData,\n        status: pendingStatus,\n        seoKeywords: formData.seoKeywords.split(',').map((k: string) => k.trim()).filter(Boolean),\n      };\n      onUpdate(updatedPage);\n    }\n    setShowStatusChangeDialog(false);\n    setPendingStatus(null);\n  };\n\n  // Cancel status change\n  const handleCancelStatusChange = () => {\n    setShowStatusChangeDialog(false);\n    setPendingStatus(null);\n  };\n\n  const handleLayoutChange = (field: string, value: any) => {\n    const newLayoutSettings = { ...formData.layoutSettings, [field]: value };\n    setFormData({ ...formData, layoutSettings: newLayoutSettings });\n    \n    const updatedPage = {\n      ...page,\n      ...formData,\n      layoutSettings: newLayoutSettings,\n      seoKeywords: formData.seoKeywords.split(',').map((k: string) => k.trim()).filter(Boolean),\n    };\n    onUpdate(updatedPage);\n  };\n\n  const generateSlugFromTitle = () => {\n    const slug = transliterateToSlug(formData.title);\n    handleInputChange('slug', slug);\n    setIsSlugAutoGenerated(true);\n  };\n\n  return (\n    <>\n      <Tabs defaultValue=\"general\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"general\">General</TabsTrigger>\n          <TabsTrigger value=\"layout\">Layout</TabsTrigger>\n          <TabsTrigger value=\"seo\">SEO</TabsTrigger>\n        </TabsList>\n        \n        <TabsContent value=\"general\" className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"title\">Page Title</Label>\n            <Input\n              id=\"title\"\n              value={formData.title}\n              onChange={(e) => handleInputChange('title', e.target.value)}\n              placeholder=\"Enter page title\"\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"slug\">URL Slug</Label>\n            <div className=\"flex space-x-2\">\n              <Input\n                id=\"slug\"\n                value={formData.slug}\n                onChange={(e) => handleInputChange('slug', e.target.value)}\n                placeholder=\"page-url-slug\"\n              />\n              <Button type=\"button\" variant=\"outline\" onClick={generateSlugFromTitle}>\n                Generate\n              </Button>\n            </div>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"status\">Page Status</Label>\n            <div className=\"space-y-3\">\n              {/* Current Status Display */}\n              <div className={`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-start space-x-3 ${currentStatusInfo.color}`}>\n                {currentStatusInfo.icon}\n                <div className=\"flex-1\">\n                  <p className=\"font-semibold text-sm\">{currentStatusInfo.title}</p>\n                  <p className=\"text-xs text-gray-600 mt-1\">{currentStatusInfo.description}</p>\n                </div>\n              </div>\n\n              {/* Status Selector */}\n              <Select \n                value={formData.status} \n                onValueChange={(value) => handleInputChange('status', value as PageStatus)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value={PageStatus.DRAFT}>\n                    <div className=\"flex items-center space-x-2\">\n                      <AlertCircle size={14} />\n                      <span>Draft - Đang Soạn Thảo</span>\n                    </div>\n                  </SelectItem>\n                  <SelectItem value={PageStatus.PUBLISHED}>\n                    <div className=\"flex items-center space-x-2\">\n                      <CheckCircle size={14} />\n                      <span>Published - Xuất Bản</span>\n                    </div>\n                  </SelectItem>\n                  <SelectItem value={PageStatus.ARCHIVED}>\n                    <div className=\"flex items-center space-x-2\">\n                      <Lock size={14} />\n                      <span>Archived - Lưu Trữ</span>\n                    </div>\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"content\">Page Description</Label>\n            <Textarea\n              id=\"content\"\n              value={formData.content}\n              onChange={(e) => handleInputChange('content', e.target.value)}\n              placeholder=\"Optional page description\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label htmlFor=\"isHomepage\">Set as Homepage</Label>\n                <p className=\"text-xs text-gray-500\">Make this page accessible at http://localhost:12000/</p>\n              </div>\n              <Switch\n                id=\"isHomepage\"\n                checked={formData.isHomepage}\n                onCheckedChange={(checked) => {\n                  setFormData({ ...formData, isHomepage: checked });\n                  const updatedPage = {\n                    ...page,\n                    ...formData,\n                    isHomepage: checked,\n                    seoKeywords: formData.seoKeywords.split(',').map((k: string) => k.trim()).filter(Boolean),\n                  };\n                  onUpdate(updatedPage);\n                }}\n              />\n            </div>\n            {formData.isHomepage && (\n              <div className=\"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200\">\n                <p className=\"text-sm text-blue-900\">\n                  ✓ Trang này sẽ được hiển thị là trang chủ (homepage) khi truy cập vào root URL. \n                  Chỉ một trang có thể được đặt làm trang chủ.\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* 🆕 Dynamic Page Template Toggle */}\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label htmlFor=\"isDynamic\">Dynamic Page Template</Label>\n                <p className=\"text-xs text-gray-500\">Use this page as a template for multiple items with different slugs</p>\n              </div>\n              <Switch\n                id=\"isDynamic\"\n                checked={formData.isDynamic || false}\n                onCheckedChange={(checked) => {\n                  setFormData({ ...formData, isDynamic: checked });\n                }}\n              />\n            </div>\n            {formData.isDynamic && (\n              <div className=\"mt-4\">\n                <DynamicPageConfig\n                  config={formData.dynamicConfig}\n                  blocks={page.blocks}\n                  onChange={(config) => {\n                    setFormData({ ...formData, dynamicConfig: config });\n                  }}\n                />\n              </div>\n            )}\n          </div>\n        </TabsContent>\n        \n        <TabsContent value=\"layout\" className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-semibold text-gray-900\">Header Settings</h3>\n            \n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label htmlFor=\"hasHeader\">Show Header</Label>\n                <p className=\"text-xs text-gray-500\">Display website header on this page</p>\n              </div>\n              <Switch\n                id=\"hasHeader\"\n                checked={formData.layoutSettings.hasHeader}\n                onCheckedChange={(checked) => handleLayoutChange('hasHeader', checked)}\n              />\n            </div>\n            \n            {formData.layoutSettings.hasHeader && (\n              <>\n                <div>\n                  <Label htmlFor=\"headerStyle\">Header Style</Label>\n                  <Select \n                    value={formData.layoutSettings.headerStyle} \n                    onValueChange={(value) => handleLayoutChange('headerStyle', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"default\">Default</SelectItem>\n                      <SelectItem value=\"transparent\">Transparent</SelectItem>\n                      <SelectItem value=\"fixed\">Fixed Top</SelectItem>\n                      <SelectItem value=\"sticky\">Sticky</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Default: Normal header | Transparent: Overlay on hero | Fixed/Sticky: Stay on scroll\n                  </p>\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"headerMenuId\">Header Menu (Optional)</Label>\n                  <Input\n                    id=\"headerMenuId\"\n                    value={formData.layoutSettings.headerMenuId || ''}\n                    onChange={(e) => handleLayoutChange('headerMenuId', e.target.value || null)}\n                    placeholder=\"Leave empty for default menu\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Custom menu ID to use for this page's header\n                  </p>\n                </div>\n              </>\n            )}\n          </div>\n          \n          <div className=\"border-t pt-6 space-y-4\">\n            <h3 className=\"text-sm font-semibold text-gray-900\">Footer Settings</h3>\n            \n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label htmlFor=\"hasFooter\">Show Footer</Label>\n                <p className=\"text-xs text-gray-500\">Display website footer on this page</p>\n              </div>\n              <Switch\n                id=\"hasFooter\"\n                checked={formData.layoutSettings.hasFooter}\n                onCheckedChange={(checked) => handleLayoutChange('hasFooter', checked)}\n              />\n            </div>\n            \n            {formData.layoutSettings.hasFooter && (\n              <>\n                <div>\n                  <Label htmlFor=\"footerStyle\">Footer Style</Label>\n                  <Select \n                    value={formData.layoutSettings.footerStyle} \n                    onValueChange={(value) => handleLayoutChange('footerStyle', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"default\">Default</SelectItem>\n                      <SelectItem value=\"minimal\">Minimal</SelectItem>\n                      <SelectItem value=\"extended\">Extended</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Default: Standard footer | Minimal: Compact | Extended: Full with columns\n                  </p>\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"footerMenuId\">Footer Menu (Optional)</Label>\n                  <Input\n                    id=\"footerMenuId\"\n                    value={formData.layoutSettings.footerMenuId || ''}\n                    onChange={(e) => handleLayoutChange('footerMenuId', e.target.value || null)}\n                    placeholder=\"Leave empty for default menu\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Custom menu ID to use for this page's footer\n                  </p>\n                </div>\n              </>\n            )}\n          </div>\n        </TabsContent>\n        \n        <TabsContent value=\"seo\" className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"seoTitle\">SEO Title</Label>\n            <Input\n              id=\"seoTitle\"\n              value={formData.seoTitle}\n              onChange={(e) => handleInputChange('seoTitle', e.target.value)}\n              placeholder=\"SEO optimized title\"\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"seoDescription\">SEO Description</Label>\n            <Textarea\n              id=\"seoDescription\"\n              value={formData.seoDescription}\n              onChange={(e) => handleInputChange('seoDescription', e.target.value)}\n              placeholder=\"SEO meta description\"\n              rows={3}\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"seoKeywords\">SEO Keywords</Label>\n            <Input\n              id=\"seoKeywords\"\n              value={formData.seoKeywords}\n              onChange={(e) => handleInputChange('seoKeywords', e.target.value)}\n              placeholder=\"keyword1, keyword2, keyword3\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">Separate keywords with commas</p>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* Status Change Confirmation Dialog */}\n      <Dialog open={showStatusChangeDialog} onOpenChange={setShowStatusChangeDialog}>\n        <DialogContent className=\"max-w-sm\">\n          <DialogHeader>\n            <DialogTitle>Xác Nhận Thay Đổi Trạng Thái</DialogTitle>\n            <DialogDescription>\n              Bạn đang chuẩn bị thay đổi trạng thái trang. Vui lòng xác nhận hành động này.\n            </DialogDescription>\n          </DialogHeader>\n\n          {pendingStatus && (\n            <div className=\"space-y-4 py-4\">\n              {/* Current Status */}\n              <div>\n                <p className=\"text-sm font-medium text-gray-600 mb-2\">Trạng Thái Hiện Tại</p>\n                <div className={`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${getStatusDescription(formData.status).color}`}>\n                  {getStatusDescription(formData.status).icon}\n                  <span className=\"text-sm\">{getStatusDescription(formData.status).title}</span>\n                </div>\n              </div>\n\n              {/* Arrow */}\n              <div className=\"text-center text-gray-400\">↓</div>\n\n              {/* New Status */}\n              <div>\n                <p className=\"text-sm font-medium text-gray-600 mb-2\">Trạng Thái Mới</p>\n                <div className={`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${getStatusDescription(pendingStatus).color}`}>\n                  {getStatusDescription(pendingStatus).icon}\n                  <span className=\"text-sm\">{getStatusDescription(pendingStatus).title}</span>\n                </div>\n              </div>\n\n              {/* Status Info */}\n              <div className=\"p-3 rounded-lg bg-blue-50 border border-blue-200\">\n                <p className=\"text-sm text-blue-900\">{getStatusDescription(pendingStatus).description}</p>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleCancelStatusChange}>\n              Hủy Bỏ\n            </Button>\n            <Button onClick={handleConfirmStatusChange}>\n              Xác Nhận\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","'use client';\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useQuery } from '@apollo/client';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport {\n  Eye,\n  Code,\n  Monitor,\n  Tablet,\n  Smartphone,\n  Undo,\n  Redo,\n  Save,\n  X,\n  PanelLeftClose,\n  PanelLeftOpen,\n  PanelRightClose,\n  PanelRightOpen,\n  Settings,\n  FileDown,\n  FileUp,\n  Archive,\n  ChevronDown,\n  Loader2,\n  AlertCircle,\n  Home,\n} from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogTrigger,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { SaveTemplateDialog } from '@/components/page-builder/templates';\nimport { ImportTemplateDialog } from '@/components/page-builder/templates';\nimport { PageTemplate, PageElement, ImportTemplateData } from '@/types/template';\nimport { useTemplates } from '@/hooks/useTemplates';\nimport { useToast } from '@/hooks/use-toast';\nimport { GET_PAGE_BY_ID } from '@/graphql/queries/pages';\nimport { usePageState, useUIState, usePageActions, useHistory } from './PageBuilderProvider';\nimport { PageStatus } from '@/types/page-builder';\nimport PageSettingsForm from './PageSettingsForm';\n\ninterface PageBuilderTopBarProps {\n  // Editor mode\n  editorMode?: 'visual' | 'code';\n  onModeChange?: (mode: 'visual' | 'code') => void;\n  \n  // Device mode\n  device?: 'desktop' | 'tablet' | 'mobile';\n  onDeviceChange?: (device: 'desktop' | 'tablet' | 'mobile') => void;\n  \n  // Panel controls\n  leftPanelOpen?: boolean;\n  onToggleLeftPanel?: () => void;\n  rightPanelOpen?: boolean;\n  onToggleRightPanel?: () => void;\n  \n  // Actions\n  onSave?: () => void | Promise<void>;\n  onExit?: () => void;\n  \n  // Template\n  currentPageStructure?: PageElement[];\n  currentPageStyles?: any;\n  onApplyTemplate?: (template: PageTemplate) => void;\n  \n  // Page info (optional, for non-fullscreen mode)\n  onPreviewToggle?: (showing: boolean) => void;\n  isLoading?: boolean;\n  \n  // Global settings callback\n  onSettingsSave?: (settings: any) => void;\n  \n  // Show/hide sections\n  showEditorControls?: boolean; // Hide mode/device/panels in normal mode\n  showPageInfo?: boolean; // Show title/status/preview in fullscreen\n}\n\n/**\n * MEMOIZED SUB-COMPONENT: ToolbarLeftSection\n * Displays page title, status badge, homepage badge, and preview toggle\n */\nconst ToolbarLeftSection = React.memo(function ToolbarLeftSection({\n  showPageInfo,\n  editingPage,\n  showPreview,\n  onPreviewToggle,\n  loading,\n}: {\n  showPageInfo?: boolean;\n  editingPage: any;\n  showPreview: boolean;\n  onPreviewToggle?: (showing: boolean) => void;\n  loading: boolean;\n}) {\n  const statusBadgeVariant = useMemo(() => {\n    if (!editingPage?.status) return 'secondary';\n    return editingPage.status === PageStatus.PUBLISHED ? 'default' : 'secondary';\n  }, [editingPage?.status]);\n\n  const statusDisplay = useMemo(() => {\n    if (!editingPage?.status) return '';\n    const status = editingPage.status as unknown as string;\n    return status.charAt(0).toUpperCase() + status.slice(1).toLowerCase();\n  }, [editingPage?.status]);\n\n  const handlePreviewToggle = useCallback(() => {\n    onPreviewToggle?.(!showPreview);\n  }, [showPreview, onPreviewToggle]);\n\n  if (!showPageInfo) return null;\n\n  return (\n    <div className=\"flex items-center space-x-3 min-w-0 flex-1 px-4 border-r border-gray-200\">\n      <h1 className=\"text-lg sm:text-xl font-bold text-gray-900 truncate\">\n        Page Builder\n      </h1>\n\n      {editingPage && (\n        <div className=\"flex items-center space-x-2 min-w-0 flex-1\">\n          {/* Status Badge */}\n          <Badge\n            variant={statusBadgeVariant}\n            className=\"flex-shrink-0\"\n            title={`Page status: ${statusDisplay}`}\n          >\n            {statusDisplay}\n          </Badge>\n\n          {/* Homepage Badge */}\n          {editingPage.isHomepage && (\n            <Badge\n              className=\"bg-orange-100 text-orange-800 hover:bg-orange-100 flex-shrink-0\"\n              title=\"This is the homepage\"\n            >\n              <Home size={14} className=\"mr-1\" />\n              <span>Home</span>\n            </Badge>\n          )}\n\n          {/* Page Title Display */}\n          {editingPage.title && (\n            <span className=\"text-sm text-gray-600 truncate hidden sm:inline\">\n              — {editingPage.title}\n            </span>\n          )}\n        </div>\n      )}\n\n      {/* Preview Toggle */}\n      <Button\n        variant={showPreview ? 'default' : 'outline'}\n        size=\"sm\"\n        onClick={handlePreviewToggle}\n        className=\"flex-shrink-0\"\n        title={showPreview ? 'Back to edit mode' : 'Preview page'}\n        disabled={loading}\n      >\n        <Eye size={16} />\n      </Button>\n    </div>\n  );\n});\n\n/**\n * MEMOIZED SUB-COMPONENT: ToolbarCenterSection\n * Displays editor mode tabs (Visual/Code) and device selector\n */\nconst ToolbarCenterSection = React.memo(function ToolbarCenterSection({\n  editorMode,\n  onModeChange,\n  device,\n  onDeviceChange,\n  isLoading,\n}: {\n  editorMode: 'visual' | 'code';\n  onModeChange: (mode: 'visual' | 'code') => void;\n  device: 'desktop' | 'tablet' | 'mobile';\n  onDeviceChange: (device: 'desktop' | 'tablet' | 'mobile') => void;\n  isLoading: boolean;\n}) {\n  return (\n    <div className=\"flex items-center space-x-4 flex-shrink-0 px-4 border-r border-gray-200\">\n      {/* Mode Tabs */}\n      <Tabs\n        value={editorMode}\n        onValueChange={(v) => onModeChange(v as 'visual' | 'code')}\n      >\n        <TabsList className=\"bg-gray-100\">\n          <TabsTrigger value=\"visual\" className=\"gap-2\">\n            <Eye className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline text-xs\">Visual</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"code\" className=\"gap-2\">\n            <Code className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline text-xs\">Code</span>\n          </TabsTrigger>\n        </TabsList>\n      </Tabs>\n\n      {/* Device Tabs */}\n      <Tabs\n        value={device}\n        onValueChange={(v) => onDeviceChange(v as 'desktop' | 'tablet' | 'mobile')}\n      >\n        <TabsList className=\"bg-gray-100\">\n          <TabsTrigger value=\"desktop\" className=\"gap-1\">\n            <Monitor className=\"w-4 h-4\" />\n            <span className=\"hidden md:inline text-xs\">Desktop</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"tablet\" className=\"gap-1\">\n            <Tablet className=\"w-4 h-4\" />\n            <span className=\"hidden md:inline text-xs\">Tablet</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"mobile\" className=\"gap-1\">\n            <Smartphone className=\"w-4 h-4\" />\n            <span className=\"hidden md:inline text-xs\">Mobile</span>\n          </TabsTrigger>\n        </TabsList>\n      </Tabs>\n    </div>\n  );\n});\n\n/**\n * MEMOIZED SUB-COMPONENT: TemplatesMenu\n * Dropdown menu for saving and importing templates\n */\nconst TemplatesMenu = React.memo(function TemplatesMenu({\n  onSaveClick,\n  onImportClick,\n}: {\n  onSaveClick: () => void;\n  onImportClick: () => void;\n}) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"gap-1\" title=\"Template options\">\n          <Archive className=\"w-4 h-4\" />\n          <span className=\"hidden sm:inline text-xs\">Templates</span>\n          <ChevronDown className=\"w-3 h-3\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\n        <DropdownMenuItem onClick={onSaveClick}>\n          <FileDown className=\"w-4 h-4 mr-2\" />\n          Save as Template\n          <span className=\"ml-auto text-xs text-gray-500\">⇧⌘S</span>\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={onImportClick}>\n          <FileUp className=\"w-4 h-4 mr-2\" />\n          Import Template\n          <span className=\"ml-auto text-xs text-gray-500\">⇧⌘O</span>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n});\n\n/**\n * MEMOIZED SUB-COMPONENT: UnifiedSettingsDialog\n * Consolidated dialog combining Page Settings (with embedded tabs) + Page Options + Custom Code\n * \n * ✅ OPTIMIZED - Senior Level Implementation:\n * ✅ Embedded PageSettingsForm directly (with 3 tabs: General, Layout, SEO)\n * ✅ Page Options section for visibility & access control\n * ✅ Custom Code section for developers\n * ✅ Tab-based organization within Page Settings\n * ✅ Proper scrollable content with fixed header/footer\n * \n * Structure:\n * - Dialog Header (fixed)\n * - Scrollable Content with 3 tabs (General, Layout, SEO) + Page Options + Custom Code\n * - Dialog Footer (fixed)\n */\nconst UnifiedSettingsDialog = React.memo(function UnifiedSettingsDialog({\n  isOpen,\n  onOpenChange,\n  editingPage,\n  onPageUpdate,\n  pageSettings,\n  onSettingChange,\n  isLoading,\n  onSave,\n}: {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  editingPage: any;\n  onPageUpdate: (page: any) => void;\n  pageSettings: any;\n  onSettingChange: (field: string, value: any) => void;\n  isLoading: boolean;\n  onSave: () => Promise<void>;\n}) {\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSave = useCallback(async () => {\n    setIsSaving(true);\n    try {\n      await onSave();\n    } finally {\n      setIsSaving(false);\n    }\n  }, [onSave]);\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent className=\"flex flex-col max-w-4xl max-h-[90vh] p-0 gap-0\">\n        {/* Fixed Header */}\n        <DialogHeader className=\"border-b border-gray-200 px-6 py-4 flex-shrink-0 bg-white\">\n          <DialogTitle className=\"flex items-center gap-2 text-lg font-semibold\">\n            <Settings className=\"w-5 h-5 text-gray-700\" />\n            Page Settings\n          </DialogTitle>\n          <DialogDescription className=\"text-sm text-gray-500 mt-1\">\n            Configure page information, layout, SEO, visibility, and custom code\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* Scrollable Content Area with Tabs */}\n        <div className=\"flex-1 overflow-y-auto bg-white\">\n          {!editingPage ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"text-center space-y-2\">\n                <div className=\"text-4xl text-gray-300\">📭</div>\n                <p className=\"text-gray-500 font-medium\">No page selected</p>\n                <p className=\"text-xs text-gray-400\">Please select a page to edit settings</p>\n              </div>\n            </div>\n          ) : (\n            <Tabs defaultValue=\"page-settings\" className=\"w-full\">\n              {/* Tabs Navigation - Fixed position */}\n              <div className=\"sticky top-0 bg-white border-b border-gray-200\">\n                <TabsList className=\"grid w-full grid-cols-2 rounded-none bg-white p-0 h-auto\">\n                  <TabsTrigger \n                    value=\"page-settings\" \n                    className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white\"\n                  >\n                    📄 Page Settings\n                  </TabsTrigger>\n                  <TabsTrigger \n                    value=\"advanced\" \n                    className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white\"\n                  >\n                    ⚙️ Advanced Options\n                  </TabsTrigger>\n                </TabsList>\n              </div>\n\n              {/* PAGE SETTINGS TAB - Contains PageSettingsForm */}\n              <TabsContent value=\"page-settings\" className=\"px-6 py-6 m-0\">\n                <PageSettingsForm\n                  page={editingPage}\n                  onUpdate={onPageUpdate}\n                />\n              </TabsContent>\n\n              {/* ADVANCED OPTIONS TAB - Page Options + Custom Code */}\n              <TabsContent value=\"advanced\" className=\"px-6 py-6 m-0 space-y-8\">\n                {/* PAGE OPTIONS SECTION */}\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                    <span>🎛️</span>\n                    Page Visibility & Access\n                  </h3>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n                      <div className=\"space-y-0.5\">\n                        <Label className=\"text-sm font-medium text-gray-900\">Published</Label>\n                        <p className=\"text-xs text-gray-500\">Make this page publicly visible</p>\n                      </div>\n                      <Switch\n                        checked={pageSettings.isPublished}\n                        onCheckedChange={(checked) => onSettingChange('isPublished', checked)}\n                        disabled={isLoading || isSaving}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n                      <div className=\"space-y-0.5\">\n                        <Label className=\"text-sm font-medium text-gray-900\">Show in Navigation</Label>\n                        <p className=\"text-xs text-gray-500\">Include in main navigation menu</p>\n                      </div>\n                      <Switch\n                        checked={pageSettings.showInNavigation}\n                        onCheckedChange={(checked) => onSettingChange('showInNavigation', checked)}\n                        disabled={isLoading || isSaving}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n                      <div className=\"space-y-0.5\">\n                        <Label className=\"text-sm font-medium text-gray-900\">Allow Indexing</Label>\n                        <p className=\"text-xs text-gray-500\">Allow search engines to index this page</p>\n                      </div>\n                      <Switch\n                        checked={pageSettings.allowIndexing}\n                        onCheckedChange={(checked) => onSettingChange('allowIndexing', checked)}\n                        disabled={isLoading || isSaving}\n                        defaultChecked\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\">\n                      <div className=\"space-y-0.5\">\n                        <Label className=\"text-sm font-medium text-gray-900\">Require Authentication</Label>\n                        <p className=\"text-xs text-gray-500\">Require users to login to view</p>\n                      </div>\n                      <Switch\n                        checked={pageSettings.requireAuth}\n                        onCheckedChange={(checked) => onSettingChange('requireAuth', checked)}\n                        disabled={isLoading || isSaving}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                {/* CUSTOM CODE SECTION */}\n                <div className=\"space-y-4 border-t pt-8\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                    <span>💻</span>\n                    Custom Code\n                  </h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"custom-css\" className=\"text-sm font-medium text-gray-700\">\n                        Custom CSS\n                      </Label>\n                      <Textarea\n                        id=\"custom-css\"\n                        placeholder=\".my-class { color: red; }\"\n                        value={pageSettings.customCSS}\n                        onChange={(e) => onSettingChange('customCSS', e.target.value)}\n                        disabled={isLoading || isSaving}\n                        rows={4}\n                        className=\"w-full font-mono text-xs bg-gray-50\"\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"custom-js\" className=\"text-sm font-medium text-gray-700\">\n                        Custom JavaScript\n                      </Label>\n                      <Textarea\n                        id=\"custom-js\"\n                        placeholder=\"console.log('Hello');\"\n                        value={pageSettings.customJS}\n                        onChange={(e) => onSettingChange('customJS', e.target.value)}\n                        disabled={isLoading || isSaving}\n                        rows={4}\n                        className=\"w-full font-mono text-xs bg-gray-50\"\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"head-code\" className=\"text-sm font-medium text-gray-700\">\n                        Head Code (Meta tags, Analytics)\n                      </Label>\n                      <Textarea\n                        id=\"head-code\"\n                        placeholder=\"<meta name='description' content='...' />\"\n                        value={pageSettings.headCode}\n                        onChange={(e) => onSettingChange('headCode', e.target.value)}\n                        disabled={isLoading || isSaving}\n                        rows={4}\n                        className=\"w-full font-mono text-xs bg-gray-50\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          )}\n        </div>\n\n        {/* Fixed Footer */}\n        <DialogFooter className=\"border-t border-gray-200 px-6 py-4 bg-gray-50 flex-shrink-0 gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isLoading || isSaving}\n            className=\"text-sm\"\n          >\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSave} \n            disabled={isLoading || isSaving}\n            className=\"text-sm gap-2\"\n          >\n            {isSaving ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                <span>Saving...</span>\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4\" />\n                <span>Save Settings</span>\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n});\n\n/**\n * MEMOIZED SUB-COMPONENT: ToolbarRightSection\n * Action buttons (panels, undo/redo, templates, settings, save, exit)\n */\nconst ToolbarRightSection = React.memo(function ToolbarRightSection({\n  leftPanelOpen,\n  onToggleLeftPanel,\n  rightPanelOpen,\n  onToggleRightPanel,\n  onSave,\n  onExit,\n  onTemplateClick,\n  onSettingsClick,\n  isSaving,\n  isLoading,\n  showEditorControls,\n}: {\n  leftPanelOpen?: boolean;\n  onToggleLeftPanel?: () => void;\n  rightPanelOpen?: boolean;\n  onToggleRightPanel?: () => void;\n  onSave?: () => void | Promise<void>;\n  onExit?: () => void;\n  onTemplateClick?: () => void;\n  onSettingsClick?: () => void;\n  isSaving: boolean;\n  isLoading: boolean;\n  showEditorControls?: boolean;\n}) {\n  // Get history and actions from context\n  const history = useHistory();\n  const pageActions = usePageActions();\n  \n  return (\n    <div className=\"flex items-center space-x-2 flex-shrink-0 px-4\">\n      {/* Panel Toggles - Only show in fullscreen with editor controls */}\n      {showEditorControls && (\n        <>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onToggleLeftPanel}\n            title={leftPanelOpen ? 'Hide left panel' : 'Show left panel'}\n            disabled={isLoading}\n          >\n            {leftPanelOpen ? (\n              <PanelLeftClose className=\"w-4 h-4\" />\n            ) : (\n              <PanelLeftOpen className=\"w-4 h-4\" />\n            )}\n          </Button>\n\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onToggleRightPanel}\n            title={rightPanelOpen ? 'Hide right panel' : 'Show right panel'}\n            disabled={isLoading}\n          >\n            {rightPanelOpen ? (\n              <PanelRightClose className=\"w-4 h-4\" />\n            ) : (\n              <PanelRightOpen className=\"w-4 h-4\" />\n            )}\n          </Button>\n\n          <div className=\"w-px h-6 bg-gray-300\" />\n\n          {/* Undo/Redo with History */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={pageActions.handleUndo}\n            disabled={!history.canUndo || isLoading}\n            title={`Undo${history.canUndo ? `: ${history.getUndoAction()}` : ''} (Ctrl+Z)`}\n          >\n            <Undo className=\"w-4 h-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={pageActions.handleRedo}\n            disabled={!history.canRedo || isLoading}\n            title={`Redo${history.canRedo ? `: ${history.getRedoAction()}` : ''} (Ctrl+Y)`}\n          >\n            <Redo className=\"w-4 h-4\" />\n          </Button>\n\n          <div className=\"w-px h-6 bg-gray-300\" />\n\n          {/* Templates Menu */}\n          <TemplatesMenu\n            onSaveClick={onTemplateClick || (() => {})}\n            onImportClick={() => {}}\n          />\n        </>\n      )}\n      {/* Global Settings */}\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        title=\"Global Settings (SEO, Code)\"\n        onClick={onSettingsClick}\n        disabled={isLoading}\n      >\n        <Settings className=\"w-4 h-4\" />\n      </Button>\n\n      {/* Save */}\n      <Button\n        variant=\"default\"\n        size=\"sm\"\n        onClick={onSave}\n        className=\"gap-1\"\n        disabled={isSaving || isLoading}\n        title=\"Save page (Ctrl+S)\"\n      >\n        {isSaving ? (\n          <>\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n            <span className=\"hidden sm:inline text-xs\">Saving...</span>\n          </>\n        ) : (\n          <>\n            <Save className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline text-xs\">Save</span>\n          </>\n        )}\n      </Button>\n\n      {/* Exit - Only show if onExit provided */}\n      {onExit && (\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onExit}\n          title=\"Exit Fullscreen (ESC)\"\n        >\n          <X className=\"w-4 h-4\" />\n        </Button>\n      )}\n    </div>\n  );\n});\n\n/**\n * PAGE BUILDER TOP BAR (Consolidated & Optimized)\n * \n * Senior-Level Implementation combining PageBuilderHeader + EditorToolbar\n * \n * Features:\n * ✅ Unified toolbar eliminates duplicate buttons\n * ✅ Memoized sub-components for performance\n * ✅ Smart responsive design (adapts to screen size)\n * ✅ Clear visual hierarchy with sections\n * ✅ Flexible: works with or without editor controls\n * ✅ Keyboard shortcuts (Ctrl+Shift+S/O)\n * ✅ Global settings dialog (SEO, Code, Options)\n * ✅ Page settings dialog (Title, Slug, Status)\n * ✅ Error handling and loading states\n * \n * Optimizations:\n * ✅ Memoized sub-components prevent re-renders\n * ✅ useCallback for stable references\n * ✅ useMemo for computed values\n * ✅ Single state source (context + local)\n * ✅ Proper cleanup (keyboard listeners)\n * ✅ No prop drilling (context usage)\n * \n * Structure:\n * LEFT      [Page Title | Status | Preview Toggle]\n * CENTER    [Mode Tabs | Device Tabs]\n * CENTER-R  (Panels, Undo/Redo, Templates)\n * RIGHT     [Settings | Save | Exit]\n */\nexport function PageBuilderTopBar(props: PageBuilderTopBarProps) {\n  const {\n    editorMode = 'visual',\n    onModeChange = () => {},\n    device = 'desktop',\n    onDeviceChange = () => {},\n    leftPanelOpen = false,\n    onToggleLeftPanel = () => {},\n    rightPanelOpen = false,\n    onToggleRightPanel = () => {},\n    onSave = async () => {},\n    onExit,\n    currentPageStructure = [],\n    currentPageStyles,\n    onApplyTemplate,\n    onPreviewToggle,\n    isLoading = false,\n    onSettingsSave,\n    showEditorControls = true,\n    showPageInfo = true,\n  } = props;\n\n  // Context\n  const { editingPage, blocks, setEditingPage } = usePageState();\n  const { showPreview, setShowPreview } = useUIState();\n  const { toast } = useToast();\n  const { addTemplate, importFromJSON } = useTemplates();\n\n  // Local state\n  const [isSaveDialogOpen, setIsSaveDialogOpen] = useState(false);\n  const [isImportDialogOpen, setIsImportDialogOpen] = useState(false);\n  const [isUnifiedSettingsOpen, setIsUnifiedSettingsOpen] = useState(false);\n  const [isSettingsLoading, setIsSettingsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n\n  // Global settings state (developer-focused only)\n  const [pageSettings, setPageSettings] = useState({\n    seoTitle: '',\n    seoDescription: '',\n    seoKeywords: '',\n    isPublished: true,\n    showInNavigation: true,\n    allowIndexing: true,\n    requireAuth: false,\n    customCSS: '',\n    customJS: '',\n    headCode: '',\n  });\n\n  // GraphQL query\n  const { data: pageData } = useQuery(GET_PAGE_BY_ID, {\n    variables: { id: editingPage?.id },\n    skip: !editingPage?.id,\n    errorPolicy: 'all',\n  });\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'S') {\n        e.preventDefault();\n        setIsSaveDialogOpen(true);\n      }\n      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'O') {\n        e.preventDefault();\n        setIsImportDialogOpen(true);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // Sync page data\n  useEffect(() => {\n    if (pageData?.getPageById) {\n      const page = pageData.getPageById;\n      setPageSettings((prev) => ({\n        ...prev,\n        seoTitle: page.seoTitle || '',\n        seoDescription: page.seoDescription || '',\n        seoKeywords: Array.isArray(page.seoKeywords) ? page.seoKeywords.join(', ') : '',\n      }));\n    }\n  }, [pageData]);\n\n  // Event handlers\n  const handleSettingChange = useCallback((field: string, value: any) => {\n    setPageSettings((prev) => ({ ...prev, [field]: value }));\n  }, []);\n\n  const handleSaveTemplate = useCallback(\n    async (template: PageTemplate) => {\n      try {\n        const success = await addTemplate(template);\n        if (success) {\n          toast({\n            title: 'Template saved',\n            description: `\"${template.name}\" has been saved to your template library.`,\n            type: 'success',\n          });\n        } else {\n          toast({\n            title: 'Error',\n            description: 'Failed to save template. Please try again.',\n            type: 'error',\n          });\n        }\n        return success;\n      } catch (error) {\n        toast({\n          title: 'Error',\n          description: 'Failed to save template. Please try again.',\n          type: 'error',\n        });\n        return false;\n      }\n    },\n    [addTemplate, toast]\n  );\n\n  const handleImportTemplate = useCallback(\n    async (data: ImportTemplateData) => {\n      try {\n        const jsonString = JSON.stringify(data.template);\n        const result = await importFromJSON(jsonString);\n\n        if (result.success) {\n          toast({\n            title: 'Template imported',\n            description: `\"${data.template.name}\" has been imported successfully.`,\n            type: 'success',\n          });\n          return true;\n        } else {\n          toast({\n            title: 'Error',\n            description: result.error || 'Failed to import template. Please try again.',\n            type: 'error',\n          });\n          return false;\n        }\n      } catch (error) {\n        toast({\n          title: 'Error',\n          description: 'Failed to import template. Please try again.',\n          type: 'error',\n        });\n        return false;\n      }\n    },\n    [importFromJSON, toast]\n  );\n\n  const handleSaveSettings = useCallback(async () => {\n    try {\n      // Check if page exists (can be new page without ID)\n      if (!editingPage) {\n        throw new Error('No page selected. Please select a page first.');\n      }\n\n      setIsSettingsLoading(true);\n      \n      // Update only the fields that exist in Page interface\n      // Handle seoKeywords - can be string or array\n      const seoKeywordsArray = Array.isArray(pageSettings.seoKeywords)\n        ? pageSettings.seoKeywords\n        : (pageSettings.seoKeywords || '')\n            .split(',')\n            .map((k: string) => k.trim())\n            .filter((k: string) => k.length > 0);\n\n      const updatedPage: typeof editingPage = {\n        ...editingPage,\n        seoTitle: pageSettings.seoTitle || undefined,\n        seoDescription: pageSettings.seoDescription || undefined,\n        seoKeywords: seoKeywordsArray,\n      };\n\n      // Update page state\n      setEditingPage(updatedPage);\n\n      // Call parent handler if provided\n      if (onSettingsSave) {\n        await onSettingsSave({\n          ...updatedPage,\n          customCSS: pageSettings.customCSS,\n          customJS: pageSettings.customJS,\n          headCode: pageSettings.headCode,\n          isPublished: pageSettings.isPublished,\n          showInNavigation: pageSettings.showInNavigation,\n          allowIndexing: pageSettings.allowIndexing,\n          requireAuth: pageSettings.requireAuth,\n        });\n      }\n\n      // Save page via main handler\n      await onSave?.();\n\n      toast({\n        title: 'Settings saved',\n        description: 'Page settings have been updated and saved successfully.',\n        type: 'success',\n      });\n      \n      setIsUnifiedSettingsOpen(false);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to save settings';\n      toast({\n        title: 'Error',\n        description: message,\n        type: 'error',\n      });\n      console.error('Save settings error:', error);\n    } finally {\n      setIsSettingsLoading(false);\n    }\n  }, [editingPage, pageSettings, onSettingsSave, onSave, setEditingPage, toast]);\n\n  const handleSavePage = useCallback(async () => {\n    setIsSaving(true);\n    setSaveError(null);\n    try {\n      await onSave();\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to save page';\n      setSaveError(message);\n      console.error('Save error:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  }, [onSave]);\n\n  const hasBlocks = useMemo(() => blocks?.length > 0, [blocks?.length]);\n\n  return (\n    <>\n      {/* Main Top Bar */}\n      <div className=\"bg-white border-b border-gray-200 flex flex-col\">\n        {/* First row: Main toolbar */}\n        <div className=\"h-14 flex items-center justify-between overflow-x-auto\">\n          {/* Left Section */}\n          <ToolbarLeftSection\n            showPageInfo={showPageInfo}\n            editingPage={editingPage}\n            showPreview={showPreview}\n            onPreviewToggle={onPreviewToggle || setShowPreview}\n            loading={isLoading}\n          />\n\n          {/* Center Section */}\n          {showEditorControls && (\n            <ToolbarCenterSection\n              editorMode={editorMode}\n              onModeChange={onModeChange}\n              device={device}\n              onDeviceChange={onDeviceChange}\n              isLoading={isLoading}\n            />\n          )}\n\n          {/* Right Section */}\n          <ToolbarRightSection\n            leftPanelOpen={leftPanelOpen}\n            onToggleLeftPanel={onToggleLeftPanel}\n            rightPanelOpen={rightPanelOpen}\n            onToggleRightPanel={onToggleRightPanel}\n            onSave={handleSavePage}\n            onExit={onExit}\n            onTemplateClick={() => setIsSaveDialogOpen(true)}\n            onSettingsClick={() => setIsUnifiedSettingsOpen(true)}\n            isSaving={isSaving}\n            isLoading={isLoading}\n            showEditorControls={showEditorControls}\n          />\n        </div>\n\n        {/* Error Message Row */}\n        {saveError && (\n          <div className=\"px-4 py-2 bg-red-50 border-t border-red-200 flex items-center space-x-2 text-red-700 text-sm\">\n            <AlertCircle size={16} className=\"flex-shrink-0\" />\n            <span className=\"flex-1\">{saveError}</span>\n            <button\n              onClick={() => setSaveError(null)}\n              className=\"text-red-700 hover:text-red-900 font-medium\"\n            >\n              Dismiss\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Page Settings Dialog */}\n      {/* CONSOLIDATED: Merged Page Settings + Global Settings into UnifiedSettingsDialog */}\n      <UnifiedSettingsDialog\n        isOpen={isUnifiedSettingsOpen}\n        onOpenChange={setIsUnifiedSettingsOpen}\n        editingPage={editingPage}\n        onPageUpdate={(updatedPage) => {\n          // Update editing page in context\n          setEditingPage(updatedPage);\n          \n          // Also sync to global settings if SEO fields changed\n          setPageSettings((prev) => ({\n            ...prev,\n            seoTitle: updatedPage.seoTitle || '',\n            seoDescription: updatedPage.seoDescription || '',\n            seoKeywords: Array.isArray(updatedPage.seoKeywords) \n              ? updatedPage.seoKeywords.join(', ') \n              : '',\n          }));\n        }}\n        pageSettings={pageSettings}\n        onSettingChange={handleSettingChange}\n        isLoading={isLoading || isSettingsLoading}\n        onSave={handleSaveSettings}\n      />\n\n      {/* Template Dialogs */}\n      <SaveTemplateDialog\n        isOpen={isSaveDialogOpen}\n        onClose={() => setIsSaveDialogOpen(false)}\n        onSave={handleSaveTemplate}\n        currentPageStructure={currentPageStructure}\n        currentPageStyles={currentPageStyles}\n      />\n\n      <ImportTemplateDialog\n        isOpen={isImportDialogOpen}\n        onClose={() => setIsImportDialogOpen(false)}\n        onImport={handleImportTemplate}\n      />\n    </>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport { Card } from '@/components/ui/card';\nimport { PageBlock } from '@/types/page-builder';\nimport { usePageState } from '../PageBuilderProvider';\nimport { PageBuilderCanvas } from '../PageBuilderCanvas';\n\ninterface EditorCanvasProps {\n  editorMode: 'visual' | 'code';\n  device: 'desktop' | 'tablet' | 'mobile';\n  selectedBlockId: string | null;\n  onSelectBlock: (id: string | null) => void;\n}\n\nconst deviceWidths = {\n  desktop: '100%',\n  tablet: '768px',\n  mobile: '375px',\n};\n\nexport function EditorCanvas({\n  editorMode,\n  device,\n  selectedBlockId,\n  onSelectBlock,\n}: EditorCanvasProps) {\n  const { blocks, loading } = usePageState();\n\n  if (loading) {\n    return (\n      <div className=\"h-full bg-gray-100 flex items-center justify-center\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n          <p className=\"text-sm text-gray-600\">Loading page...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (editorMode === 'code') {\n    return (\n      <div className=\"h-full bg-gray-900 text-white p-4 overflow-auto\">\n        <pre className=\"text-sm font-mono\">\n          {JSON.stringify(blocks, null, 2)}\n        </pre>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full bg-gray-100 overflow-auto flex\">\n      <div className=\"min-h-full flex items-start justify-center p-8 flex-1\">\n        {/* Device Frame */}\n        <div\n          className=\"bg-white shadow-xl transition-all duration-300 min-h-[600px] rounded-md relative\"\n          style={{\n            width: deviceWidths[device],\n            maxWidth: '100%',\n          }}\n        >\n          {/* Canvas Content */}\n          <PageBuilderCanvas />\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Layers,\n  List,\n  History,\n  HelpCircle,\n  ChevronUp,\n  ZoomIn,\n  ZoomOut,\n} from 'lucide-react';\n\ninterface EditorFooterProps {\n  selectedBlockId: string | null;\n  device: 'desktop' | 'tablet' | 'mobile';\n}\n\nexport function EditorFooter({\n  selectedBlockId,\n  device,\n}: EditorFooterProps) {\n  const [activeTab, setActiveTab] = useState<'structure' | 'layers' | 'history' | null>(null);\n  const [zoom, setZoom] = useState(100);\n\n  const toggleTab = (tab: 'structure' | 'layers' | 'history') => {\n    setActiveTab(activeTab === tab ? null : tab);\n  };\n\n  return (\n    <>\n      {/* Expandable Panel */}\n      {activeTab && (\n        <div className=\"h-48 bg-white border-t border-gray-200 overflow-auto\">\n          <div className=\"p-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"font-semibold capitalize\">{activeTab}</h3>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => setActiveTab(null)}\n              >\n                <ChevronUp className=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            {activeTab === 'structure' && (\n              <div className=\"text-sm text-gray-600\">\n                Structure tree view will be here\n              </div>\n            )}\n\n            {activeTab === 'layers' && (\n              <div className=\"text-sm text-gray-600\">\n                Layers panel will be here\n              </div>\n            )}\n\n            {activeTab === 'history' && (\n              <div className=\"text-sm text-gray-600\">\n                History panel will be here\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Footer Bar */}\n      <div className=\"h-10 bg-white border-t border-gray-200 flex items-center justify-between px-4\">\n        {/* Left Section - Tabs */}\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={activeTab === 'structure' ? 'secondary' : 'ghost'}\n            size=\"sm\"\n            onClick={() => toggleTab('structure')}\n            className=\"gap-2\"\n          >\n            <List className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Structure</span>\n          </Button>\n\n          <Button\n            variant={activeTab === 'layers' ? 'secondary' : 'ghost'}\n            size=\"sm\"\n            onClick={() => toggleTab('layers')}\n            className=\"gap-2\"\n          >\n            <Layers className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Layers</span>\n          </Button>\n\n          <Button\n            variant={activeTab === 'history' ? 'secondary' : 'ghost'}\n            size=\"sm\"\n            onClick={() => toggleTab('history')}\n            className=\"gap-2\"\n          >\n            <History className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">History</span>\n          </Button>\n        </div>\n\n        {/* Center Section - Selection Info */}\n        <div className=\"text-xs text-gray-500\">\n          {selectedBlockId ? (\n            <span>Selected: {selectedBlockId}</span>\n          ) : (\n            <span>No block selected</span>\n          )}\n        </div>\n\n        {/* Right Section - Zoom & Help */}\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setZoom(Math.max(50, zoom - 10))}\n            disabled={zoom <= 50}\n          >\n            <ZoomOut className=\"w-4 h-4\" />\n          </Button>\n\n          <span className=\"text-sm font-mono w-12 text-center\">\n            {zoom}%\n          </span>\n\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setZoom(Math.min(200, zoom + 10))}\n            disabled={zoom >= 200}\n          >\n            <ZoomIn className=\"w-4 h-4\" />\n          </Button>\n\n          <div className=\"w-px h-6 bg-gray-300 mx-2\" />\n\n          <Button variant=\"ghost\" size=\"icon\" title=\"Help\">\n            <HelpCircle className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n","'use client';\n\nimport { useMemo } from 'react';\n\n/**\n * Shared hook for filtering and grouping items\n * Used by SavedBlocksLibrary, TemplatesLibrary, ElementsLibrary\n */\n\nexport interface FilteredAndGroupedResult<T> {\n  groupedItems: Record<string, T[]>;\n  itemCount: number;\n  groupCount: number;\n  isEmpty: boolean;\n}\n\ninterface UseFilteredAndGroupedOptions {\n  searchFields?: string[];\n  groupByField?: string;\n  caseSensitive?: boolean;\n}\n\nexport function useFilteredAndGrouped<\n  T extends Record<string, any> = any\n>(\n  items: T[] | undefined | null,\n  searchQuery: string = '',\n  options: UseFilteredAndGroupedOptions = {}\n): FilteredAndGroupedResult<T> {\n  const {\n    searchFields = ['name', 'description'],\n    groupByField = 'category',\n    caseSensitive = false,\n  } = options;\n\n  return useMemo(() => {\n    if (!items || items.length === 0) {\n      return {\n        groupedItems: {},\n        itemCount: 0,\n        groupCount: 0,\n        isEmpty: true,\n      };\n    }\n\n    // Step 1: Filter items based on search query\n    const filteredItems = items.filter((item) => {\n      if (!searchQuery) return true;\n\n      const query = caseSensitive ? searchQuery : searchQuery.toLowerCase();\n\n      return searchFields.some((field) => {\n        const value = item[field];\n        if (typeof value === 'string') {\n          const fieldValue = caseSensitive ? value : value.toLowerCase();\n          return fieldValue.includes(query);\n        }\n        if (Array.isArray(value)) {\n          return value.some((v) => {\n            const str = typeof v === 'string' ? v : String(v);\n            const fieldValue = caseSensitive ? str : str.toLowerCase();\n            return fieldValue.includes(query);\n          });\n        }\n        return false;\n      });\n    });\n\n    // Step 2: Group items by field\n    const grouped = filteredItems.reduce(\n      (acc, item) => {\n        const group = String(item[groupByField] || 'Other');\n        if (!acc[group]) {\n          acc[group] = [];\n        }\n        acc[group].push(item);\n        return acc;\n      },\n      {} as Record<string, T[]>\n    );\n\n    // Sort groups and items within groups\n    const sortedGroups = Object.keys(grouped).sort();\n    const sortedGrouped = sortedGroups.reduce(\n      (acc, key) => {\n        acc[key] = grouped[key];\n        return acc;\n      },\n      {} as Record<string, T[]>\n    );\n\n    return {\n      groupedItems: sortedGrouped,\n      itemCount: filteredItems.length,\n      groupCount: Object.keys(sortedGrouped).length,\n      isEmpty: filteredItems.length === 0,\n    };\n  }, [items, searchQuery, searchFields, groupByField, caseSensitive]);\n}\n","'use client';\n\nimport { useState, useCallback } from 'react';\n\n/**\n * Shared hook for managing category expansion state\n * Used by SavedBlocksLibrary, TemplatesLibrary, ElementsLibrary\n */\n\nexport interface UseCategoryToggleOptions {\n  defaultExpanded?: boolean;\n  initialState?: Record<string, boolean>;\n}\n\nexport interface UseCategoryToggleResult {\n  expandedCategories: Record<string, boolean>;\n  toggleCategory: (category: string) => void;\n  expandAll: (categories: string[]) => void;\n  collapseAll: () => void;\n  setExpandedCategories: (state: Record<string, boolean>) => void;\n  isExpanded: (category: string) => boolean;\n}\n\nexport function useCategoryToggle(\n  options: UseCategoryToggleOptions = {}\n): UseCategoryToggleResult {\n  const { defaultExpanded = false, initialState = {} } = options;\n\n  const [expandedCategories, setExpandedCategories] = useState<Record<string, boolean>>(\n    initialState\n  );\n\n  const toggleCategory = useCallback((category: string) => {\n    setExpandedCategories((prev) => ({\n      ...prev,\n      [category]: !prev[category],\n    }));\n  }, []);\n\n  const expandAll = useCallback((categories: string[]) => {\n    setExpandedCategories(\n      categories.reduce(\n        (acc, cat) => ({\n          ...acc,\n          [cat]: true,\n        }),\n        {}\n      )\n    );\n  }, []);\n\n  const collapseAll = useCallback(() => {\n    setExpandedCategories({});\n  }, []);\n\n  const isExpanded = useCallback(\n    (category: string) => {\n      return expandedCategories[category] ?? defaultExpanded;\n    },\n    [expandedCategories, defaultExpanded]\n  );\n\n  return {\n    expandedCategories,\n    toggleCategory,\n    expandAll,\n    collapseAll,\n    setExpandedCategories,\n    isExpanded,\n  };\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { useDraggable } from '@dnd-kit/core';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Type,\n  Heading,\n  Image,\n  MousePointer,\n  Minus,\n  Square,\n  Columns,\n  Layout,\n  MoveVertical,\n  Grid3x3,\n  Images,\n  Video,\n  Users,\n  BarChart,\n  Search,\n  ShoppingCart,\n  Package,\n  Zap,\n  ChevronDown,\n  Copy,\n  Sparkles,\n  FileText,\n  Quote,\n  List,\n} from 'lucide-react';\nimport { BlockType } from '@/types/page-builder';\nimport { usePageActions } from '../../PageBuilderProvider';\nimport { useFilteredAndGrouped } from '@/components/page-builder/hooks/useFilteredAndGrouped';\nimport { useCategoryToggle } from '@/components/page-builder/hooks/useCategoryToggle';\nimport { cn } from '@/lib/utils';\n\ninterface ElementConfig {\n  id: BlockType;\n  icon: any;\n  label: string;\n  description?: string;\n  category: 'basic' | 'layout' | 'content' | 'advanced' | 'ecommerce';\n  popularity?: 'hot' | 'new' | null;\n}\n\ninterface CategoryConfig {\n  id: string;\n  label: string;\n  icon?: any;\n  description?: string;\n}\n\nconst CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  basic: {\n    id: 'basic',\n    label: 'Basic Elements',\n    icon: Zap,\n    description: 'Core building blocks for your content',\n  },\n  layout: {\n    id: 'layout',\n    label: 'Layout',\n    icon: Layout,\n    description: 'Structure and organize your content',\n  },\n  content: {\n    id: 'content',\n    label: 'Content',\n    icon: Images,\n    description: 'Rich media and dynamic content',\n  },\n  advanced: {\n    id: 'advanced',\n    label: 'Advanced',\n    icon: Sparkles,\n    description: 'Advanced components and features',\n  },\n  ecommerce: {\n    id: 'ecommerce',\n    label: 'E-commerce',\n    icon: ShoppingCart,\n    description: 'Product and commerce elements',\n  },\n};\n\nconst elements: ElementConfig[] = [\n  // Basic Elements - Optimized & Essential Only\n  { \n    id: BlockType.RICH_TEXT, \n    icon: FileText, \n    label: 'Rich Text', \n    description: 'BlockNote-style editor with advanced formatting', \n    category: 'basic', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.TEXT, \n    icon: Type, \n    label: 'Simple Text', \n    description: 'Plain text block for basic content', \n    category: 'basic' \n  },\n  { \n    id: BlockType.HERO, \n    icon: Heading, \n    label: 'Hero Section', \n    description: 'Large hero banner with heading', \n    category: 'basic', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.BUTTON, \n    icon: MousePointer, \n    label: 'Button', \n    description: 'Call-to-action button', \n    category: 'basic', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.IMAGE, \n    icon: Image, \n    label: 'Image', \n    description: 'Single image with caption', \n    category: 'basic' \n  },\n  { \n    id: BlockType.DIVIDER, \n    icon: Minus, \n    label: 'Divider', \n    description: 'Horizontal separator line', \n    category: 'basic' \n  },\n\n  // Layout Elements - Container & Structure\n  { \n    id: BlockType.SECTION, \n    icon: Square, \n    label: 'Section', \n    description: 'Full-width page section', \n    category: 'layout', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.CONTAINER, \n    icon: Layout, \n    label: 'Container', \n    description: 'Content container with max-width', \n    category: 'layout' \n  },\n  { \n    id: BlockType.GRID, \n    icon: Grid3x3, \n    label: 'Grid', \n    description: 'Responsive grid layout', \n    category: 'layout', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.FLEX_ROW, \n    icon: Columns, \n    label: 'Flex Row', \n    description: 'Horizontal flex container', \n    category: 'layout' \n  },\n  { \n    id: BlockType.FLEX_COLUMN, \n    icon: MoveVertical, \n    label: 'Flex Column', \n    description: 'Vertical flex container', \n    category: 'layout' \n  },\n  { \n    id: BlockType.SPACER, \n    icon: MoveVertical, \n    label: 'Spacer', \n    description: 'Vertical spacing control', \n    category: 'layout' \n  },\n\n  // Content Elements - Rich Media\n  { \n    id: BlockType.CAROUSEL, \n    icon: Images, \n    label: 'Carousel', \n    description: 'Image slider with controls', \n    category: 'content', \n    popularity: 'new' \n  },\n  { \n    id: BlockType.GALLERY, \n    icon: Images, \n    label: 'Gallery', \n    description: 'Image gallery grid', \n    category: 'content' \n  },\n  { \n    id: BlockType.VIDEO, \n    icon: Video, \n    label: 'Video', \n    description: 'Video player (YouTube/Vimeo)', \n    category: 'content' \n  },\n  { \n    id: BlockType.CARD, \n    icon: Quote, \n    label: 'Card', \n    description: 'Content card with image/text', \n    category: 'content', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.TESTIMONIAL, \n    icon: Quote, \n    label: 'Testimonial', \n    description: 'Customer testimonial block', \n    category: 'content' \n  },\n  { \n    id: BlockType.TEAM, \n    icon: Users, \n    label: 'Team', \n    description: 'Team member showcase', \n    category: 'content' \n  },\n  { \n    id: BlockType.STATS, \n    icon: BarChart, \n    label: 'Stats', \n    description: 'Statistics counter display', \n    category: 'content' \n  },\n  { \n    id: BlockType.FAQ, \n    icon: List, \n    label: 'FAQ', \n    description: 'Accordion FAQ section', \n    category: 'content' \n  },\n\n  // Advanced Elements - Dynamic & Forms\n  { \n    id: BlockType.CONTACT_FORM, \n    icon: FileText, \n    label: 'Contact Form', \n    description: 'Dynamic contact form', \n    category: 'advanced', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.DYNAMIC, \n    icon: Sparkles, \n    label: 'Dynamic Block', \n    description: 'Template-based dynamic content', \n    category: 'advanced', \n    popularity: 'new' \n  },\n  \n  // E-commerce Elements - Product Display\n  { \n    id: BlockType.PRODUCT_LIST, \n    icon: ShoppingCart, \n    label: 'Product List', \n    description: 'Grid of products with filters', \n    category: 'ecommerce', \n    popularity: 'hot' \n  },\n  { \n    id: BlockType.PRODUCT_DETAIL, \n    icon: Package, \n    label: 'Product Detail', \n    description: 'Single product showcase', \n    category: 'ecommerce' \n  },\n];\n\nfunction DraggableElement({ element }: { element: ElementConfig }) {\n  const { handleAddBlock } = usePageActions();\n  const [isAdding, setIsAdding] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const { attributes, listeners, setNodeRef, transform, isDragging } = useDraggable({\n    id: `element-${element.id}`,\n    data: {\n      type: 'new-block',\n      blockType: element.id,\n    },\n  });\n\n  const style = transform\n    ? {\n        transform: `translate3d(${transform.x}px, ${transform.y}px, 0)`,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: 1000,\n      }\n    : undefined;\n\n  const Icon = element.icon;\n\n  const handleDoubleClick = async () => {\n    if (isAdding) return;\n    \n    try {\n      setIsAdding(true);\n      await handleAddBlock(element.id);\n    } catch (error) {\n      console.error('[ElementsLibrary] Error adding block:', error);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  return (\n    <div className=\"relative group/item\">\n      <button\n        ref={setNodeRef}\n        {...listeners}\n        {...attributes}\n        style={style}\n        onDoubleClick={handleDoubleClick}\n        onMouseEnter={() => setShowTooltip(true)}\n        onMouseLeave={() => setShowTooltip(false)}\n        className={cn(\n          'w-full flex items-start gap-3 p-3 rounded-lg border transition-all duration-200',\n          'text-left select-none group/btn',\n          // Mobile-first: min 44px height for touch targets\n          'min-h-[44px] sm:min-h-[48px]',\n          isDragging && 'bg-blue-50 border-blue-400 shadow-lg scale-105 z-50',\n          isAdding && 'bg-green-50 border-green-400 shadow-lg',\n          !isDragging && !isAdding && 'border-gray-200 bg-white hover:bg-gradient-to-br hover:from-blue-50 hover:to-transparent hover:border-blue-300 hover:shadow-md',\n          // Touch feedback\n          'active:scale-[0.98] touch-manipulation'\n        )}\n        title=\"Double-click to add • Drag to canvas\"\n      >\n        {/* Icon Container - Mobile optimized */}\n        <div className={cn(\n          'flex-shrink-0 w-10 h-10 sm:w-11 sm:h-11 rounded-md flex items-center justify-center transition-all duration-200',\n          isDragging && 'bg-blue-500 text-white scale-110 shadow-lg',\n          isAdding && 'bg-green-500 text-white scale-110',\n          !isDragging && !isAdding && 'bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover/btn:bg-blue-400 group-hover/btn:text-white group-hover/btn:shadow-md'\n        )}>\n          <Icon className=\"w-5 h-5 sm:w-6 sm:h-6\" />\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            <span className=\"font-semibold text-sm sm:text-base text-gray-900 truncate\">\n              {element.label}\n            </span>\n            {element.popularity === 'hot' && (\n              <span className=\"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700\">\n                🔥 Hot\n              </span>\n            )}\n            {element.popularity === 'new' && (\n              <span className=\"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700\">\n                ✨ New\n              </span>\n            )}\n          </div>\n          {element.description && (\n            <p className=\"text-xs sm:text-sm text-gray-500 line-clamp-1 mt-0.5\">\n              {element.description}\n            </p>\n          )}\n        </div>\n\n        {/* Status Badge */}\n        {isDragging && (\n          <div className=\"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-blue-500 text-white rounded text-xs font-semibold whitespace-nowrap\">\n            <Zap className=\"w-3 h-3\" />\n            <span className=\"hidden sm:inline\">Dragging</span>\n          </div>\n        )}\n        {isAdding && (\n          <div className=\"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-500 text-white rounded text-xs font-semibold whitespace-nowrap animate-pulse\">\n            <Copy className=\"w-3 h-3\" />\n            <span className=\"hidden sm:inline\">Adding</span>\n          </div>\n        )}\n      </button>\n\n      {/* Tooltip - Hidden on mobile */}\n      {showTooltip && !isDragging && !isAdding && (\n        <div className=\"hidden sm:block absolute bottom-full left-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap z-50 pointer-events-none\">\n          Double-click to add • Drag to canvas\n          <div className=\"absolute top-full left-0 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900\"></div>\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface CategoryGroupProps {\n  category: string;\n  config: CategoryConfig;\n  elements: ElementConfig[];\n  isExpanded: boolean;\n  onToggle: () => void;\n  count: number;\n}\n\nfunction CategoryGroup({ category, config, elements, isExpanded, onToggle, count }: CategoryGroupProps) {\n  const Icon = config.icon;\n\n  return (\n    <div className=\"space-y-2\">\n      {/* Category Header - Mobile optimized with 44px min height */}\n      <button\n        onClick={onToggle}\n        className={cn(\n          'w-full flex items-center gap-2 px-3 py-2.5 rounded-lg transition-all duration-200',\n          'text-sm font-semibold text-gray-700 hover:bg-gray-100 group/cat',\n          // Mobile-first: min 44px touch target\n          'min-h-[44px] touch-manipulation active:scale-[0.98]',\n          isExpanded && 'bg-blue-50 text-primary'\n        )}\n      >\n        {Icon && (\n          <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 text-gray-400 group-hover/cat:text-gray-600\" />\n        )}\n        <span className=\"flex-1 text-left text-sm sm:text-base\">{config.label}</span>\n        <span className={cn(\n          'inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-700',\n          isExpanded && 'bg-blue-200 text-primary'\n        )}>\n          {count}\n        </span>\n        <ChevronDown className={cn(\n          'w-4 h-4 flex-shrink-0 text-gray-400 transition-transform duration-200',\n          isExpanded && 'rotate-180 text-primary'\n        )} />\n      </button>\n\n      {/* Category Description */}\n      {isExpanded && config.description && (\n        <p className=\"text-xs sm:text-sm text-gray-500 px-3\">\n          {config.description}\n        </p>\n      )}\n\n      {/* Elements List */}\n      {isExpanded && (\n        <div className=\"pl-2 space-y-2 border-l-2 border-gray-200\">\n          {elements.map((element) => (\n            <DraggableElement key={element.id} element={element} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function ElementsLibrary() {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Use shared hooks for category toggle and filtering\n  const { expandedCategories, toggleCategory } = useCategoryToggle({\n    initialState: { 'basic': true, 'layout': true },\n  });\n\n  const { groupedItems, itemCount: totalElements } = useFilteredAndGrouped(\n    elements,\n    searchQuery,\n    {\n      searchFields: ['label', 'description'],\n      groupByField: 'category',\n    }\n  );\n\n  // Create grouped view with config\n  const groupedElements = Object.entries(groupedItems).map(([category, items]) => ({\n    category,\n    config: CATEGORY_CONFIG[category],\n    elements: items as ElementConfig[],\n  }));\n\n  return (\n    <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 bg-white border-b border-gray-200 px-4 py-3\">\n        <div className=\"space-y-3\">\n          <div>\n            <h2 className=\"text-base font-bold text-gray-900\">Elements</h2>\n            <p className=\"text-xs text-gray-500 mt-0.5\">\n              {totalElements} element{totalElements !== 1 ? 's' : ''} available\n            </p>\n          </div>\n\n          {/* Search Input */}\n          <div className=\"relative group\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\" />\n            <Input\n              placeholder=\"Search elements...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-9 h-9 text-sm bg-gray-50 border-gray-300 rounded-lg group-focus-within:bg-white group-focus-within:border-blue-400 group-focus-within:ring-1 group-focus-within:ring-blue-200 transition-all\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-h-0 overflow-y-auto\">\n        {totalElements === 0 ? (\n          // Empty State\n          <div className=\"flex flex-col items-center justify-center text-gray-400 py-12 px-4\">\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 mb-3\">\n              <Search className=\"w-6 h-6\" />\n            </div>\n            <p className=\"font-semibold text-gray-600\">No elements found</p>\n            <p className=\"text-sm mt-1\">Try a different search term</p>\n          </div>\n        ) : (\n          // Categories\n          <div className=\"space-y-4 p-4\">\n            {groupedElements.map((group) => (\n              <CategoryGroup\n                key={group.category}\n                category={group.category}\n                config={group.config}\n                elements={group.elements}\n                isExpanded={expandedCategories[group.category] || false}\n                onToggle={() => toggleCategory(group.category)}\n                count={group.elements.length}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer Info */}\n      <div className=\"flex-shrink-0 border-t border-gray-200 bg-white px-4 py-2.5\">\n        <div className=\"flex items-center justify-between gap-2 text-xs text-gray-500\">\n          <div className=\"flex items-center gap-2\">\n            <Zap className=\"w-3.5 h-3.5\" />\n            <span>Double-click to add</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Copy className=\"w-3.5 h-3.5\" />\n            <span>Drag to canvas</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Search,\n  Sparkles,\n  ShoppingBag,\n  LayoutDashboard,\n  Newspaper,\n  Building2,\n  TrendingUp,\n  Eye,\n  Copy,\n  Check,\n  X,\n  ChevronDown,\n} from 'lucide-react';\nimport { usePageActions } from '../../PageBuilderProvider';\nimport { BlockType } from '@/types/page-builder';\nimport { useFilteredAndGrouped } from '@/components/page-builder/hooks/useFilteredAndGrouped';\nimport { useCategoryToggle } from '@/components/page-builder/hooks/useCategoryToggle';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\nimport { pageBuilderLogger, LOG_OPERATIONS } from '../../utils/pageBuilderLogger';\n\ninterface TemplateBlock {\n  type: BlockType;\n  content: any;\n  style?: any;\n}\n\ninterface TemplateConfig {\n  id: string;\n  name: string;\n  description: string;\n  category: 'ecommerce' | 'productivity' | 'landing' | 'business' | 'marketing';\n  preview: string;\n  blockCount: number;\n  blocks: TemplateBlock[];\n  color: string;\n  popularity?: 'hot' | 'new' | null;\n}\n\ninterface CategoryConfig {\n  id: string;\n  label: string;\n  icon: React.ComponentType<{ className?: string }>;\n  description: string;\n}\n\nconst templates: TemplateConfig[] = [\n  // E-commerce Templates\n  {\n    id: 'product-grid',\n    name: 'Product Grid',\n    description: 'Responsive product showcase with 3-column layout',\n    category: 'ecommerce',\n    preview: '🛍️',\n    blockCount: 6,\n    color: 'from-blue-500 to-cyan-500',\n    popularity: 'hot' as const,\n    blocks: [\n      { type: BlockType.HERO, content: { title: 'Our Products', subtitle: 'Discover our latest collection', style: {} } },\n      { type: BlockType.GRID, content: { columns: 3, gap: '20px', style: {} } },\n      { type: BlockType.IMAGE, content: { src: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400', alt: 'Product 1', style: {} } },\n      { type: BlockType.IMAGE, content: { src: 'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400', alt: 'Product 2', style: {} } },\n      { type: BlockType.IMAGE, content: { src: 'https://images.unsplash.com/photo-1560343090-f0409e92791a?w=400', alt: 'Product 3', style: {} } },\n      { type: BlockType.BUTTON, content: { text: 'View All Products', link: '#', variant: 'primary', style: {} } },\n    ],\n  },\n  {\n    id: 'category-showcase',\n    name: 'Category Showcase',\n    description: 'Highlight product categories with images',\n    category: 'ecommerce',\n    preview: '🏪',\n    blockCount: 4,\n    color: 'from-purple-500 to-pink-500',\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h2>Shop by Category</h2>', style: {} } },\n      { type: BlockType.GRID, content: { columns: 2, gap: '16px', style: {} } },\n      { type: BlockType.IMAGE, content: { src: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400', alt: 'Category 1', style: {} } },\n      { type: BlockType.IMAGE, content: { src: 'https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=400', alt: 'Category 2', style: {} } },\n    ],\n  },\n\n  // Productivity Templates\n  {\n    id: 'task-dashboard',\n    name: 'Task Dashboard',\n    description: 'Kanban-style task management interface',\n    category: 'productivity',\n    preview: '✅',\n    blockCount: 8,\n    color: 'from-green-500 to-emerald-500',\n    popularity: 'hot' as const,\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h1>Task Dashboard</h1>', style: {} } },\n      { type: BlockType.STATS, content: { title: 'Project Stats', stats: [{ label: 'Tasks', value: '24' }, { label: 'Completed', value: '12' }], style: {} } },\n      { type: BlockType.FLEX_ROW, content: { justifyContent: 'space-between', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>To Do</h3>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>In Progress</h3>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>Done</h3>', style: {} } },\n      { type: BlockType.DIVIDER, content: { thickness: 1, color: '#e5e7eb', style: {} } },\n      { type: BlockType.BUTTON, content: { text: 'Add New Task', link: '#', variant: 'primary', style: {} } },\n    ],\n  },\n\n  // Landing Page Templates\n  {\n    id: 'hero-section',\n    name: 'Hero Section',\n    description: 'Eye-catching hero with CTA buttons',\n    category: 'landing',\n    preview: '🚀',\n    blockCount: 3,\n    color: 'from-orange-500 to-red-500',\n    popularity: 'hot' as const,\n    blocks: [\n      { type: BlockType.HERO, content: { title: 'Welcome to Our Platform', subtitle: 'The best solution for your business', description: 'Start today and see the difference', buttonText: 'Get Started', buttonLink: '#', style: {} } },\n      { type: BlockType.SPACER, content: { height: 60, style: {} } },\n      { type: BlockType.TEXT, content: { content: '<p style=\"text-align: center;\">Trusted by thousands of companies worldwide</p>', style: {} } },\n    ],\n  },\n  {\n    id: 'contact-form',\n    name: 'Contact Form',\n    description: 'Professional contact form with validation',\n    category: 'landing',\n    preview: '📧',\n    blockCount: 5,\n    color: 'from-indigo-500 to-blue-500',\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h2 style=\"text-align: center;\">Get in Touch</h2>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<p style=\"text-align: center;\">We\\'d love to hear from you</p>', style: {} } },\n      { type: BlockType.CONTACT_INFO, content: { email: 'contact@example.com', phone: '+1 234 567 8900', address: '123 Main St, City, Country', style: {} } },\n      { type: BlockType.SPACER, content: { height: 40, style: {} } },\n      { type: BlockType.BUTTON, content: { text: 'Send Message', link: '#', variant: 'primary', style: {} } },\n    ],\n  },\n  {\n    id: 'testimonials',\n    name: 'Testimonials',\n    description: 'Customer reviews in card layout',\n    category: 'landing',\n    preview: '⭐',\n    blockCount: 4,\n    color: 'from-yellow-500 to-orange-500',\n    popularity: 'new' as const,\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h2 style=\"text-align: center;\">What Our Customers Say</h2>', style: {} } },\n      { type: BlockType.SPACER, content: { height: 40, style: {} } },\n      { type: BlockType.GRID, content: { columns: 2, gap: '24px', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<blockquote>\"Amazing service! Highly recommended.\" - John Doe</blockquote>', style: {} } },\n    ],\n  },\n\n  // Business Templates\n  {\n    id: 'faq-section',\n    name: 'FAQ Section',\n    description: 'Accordion-style frequently asked questions',\n    category: 'business',\n    preview: '❓',\n    blockCount: 6,\n    color: 'from-teal-500 to-cyan-500',\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h2 style=\"text-align: center;\">Frequently Asked Questions</h2>', style: {} } },\n      { type: BlockType.SPACER, content: { height: 40, style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>How does it work?</h3><p>Our platform is designed to be intuitive and easy to use.</p>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>What are the pricing plans?</h3><p>We offer flexible pricing to suit your needs.</p>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<h3>How can I get support?</h3><p>Our support team is available 24/7 to help you.</p>', style: {} } },\n      { type: BlockType.BUTTON, content: { text: 'Contact Support', link: '#', variant: 'outline', style: {} } },\n    ],\n  },\n\n  // Marketing Templates\n  {\n    id: 'newsletter',\n    name: 'Newsletter Signup',\n    description: 'Email subscription form with benefits',\n    category: 'marketing',\n    preview: '📰',\n    blockCount: 3,\n    color: 'from-pink-500 to-rose-500',\n    popularity: 'new' as const,\n    blocks: [\n      { type: BlockType.TEXT, content: { content: '<h2 style=\"text-align: center;\">Subscribe to Our Newsletter</h2>', style: {} } },\n      { type: BlockType.TEXT, content: { content: '<p style=\"text-align: center;\">Get the latest updates and exclusive offers</p>', style: {} } },\n      { type: BlockType.BUTTON, content: { text: 'Subscribe Now', link: '#', variant: 'primary', style: {} } },\n    ],\n  },\n];\n\nconst categoryIcons = {\n  ecommerce: ShoppingBag,\n  productivity: LayoutDashboard,\n  landing: Sparkles,\n  business: Building2,\n  marketing: TrendingUp,\n};\n\nconst categoryLabels = {\n  ecommerce: 'E-commerce',\n  productivity: 'Productivity',\n  landing: 'Landing Page',\n  business: 'Business',\n  marketing: 'Marketing',\n};\n\nconst CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  ecommerce: {\n    id: 'ecommerce',\n    label: 'E-commerce',\n    icon: ShoppingBag,\n    description: 'Product showcase and shopping templates',\n  },\n  productivity: {\n    id: 'productivity',\n    label: 'Productivity',\n    icon: LayoutDashboard,\n    description: 'Task management and productivity tools',\n  },\n  landing: {\n    id: 'landing',\n    label: 'Landing Page',\n    icon: Newspaper,\n    description: 'Landing pages and marketing sites',\n  },\n  business: {\n    id: 'business',\n    label: 'Business',\n    icon: Building2,\n    description: 'Business and company templates',\n  },\n  marketing: {\n    id: 'marketing',\n    label: 'Marketing',\n    icon: TrendingUp,\n    description: 'Marketing and promotion templates',\n  },\n};\n\nfunction TemplateCard({ template, onInsert, onPreview }: { template: TemplateConfig; onInsert: (template: TemplateConfig) => void; onPreview: (template: TemplateConfig) => void }) {\n  const [isHovered, setIsHovered] = useState(false);\n  const [isInserted, setIsInserted] = useState(false);\n\n  const handleInsert = () => {\n    onInsert(template);\n    setIsInserted(true);\n    setTimeout(() => setIsInserted(false), 2000);\n  };\n\n  const handlePreview = () => {\n    onPreview(template);\n  };\n\n  // Handle double-click to insert template directly\n  const handleDoubleClick = () => {\n    pageBuilderLogger.info('TEMPLATE_INSERT', 'Double-click inserting template', { templateId: template.id });\n    handleInsert();\n  };\n\n  return (\n    <div\n      className=\"group relative bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg hover:border-primary/50 transition-all duration-300 cursor-pointer\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onDoubleClick={handleDoubleClick}\n      title=\"Double-click to insert template\"\n    >\n      {/* Preview Area */}\n      <div className={`relative h-24 sm:h-28 bg-gradient-to-br ${template.color} flex items-center justify-center`}>\n        <div className=\"text-4xl sm:text-5xl\">{template.preview}</div>\n        \n        {/* Popularity Badge */}\n        {template.popularity && (\n          <div className=\"absolute top-2 left-2\">\n            <Badge className={cn('text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2', \n              template.popularity === 'hot' ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'\n            )}>\n              {template.popularity === 'hot' ? '🔥 Hot' : '✨ New'}\n            </Badge>\n          </div>\n        )}\n        \n        {/* Hover Overlay */}\n        {isHovered && (\n          <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center gap-2 animate-in fade-in duration-200\">\n            <Button\n              size=\"sm\"\n              variant=\"secondary\"\n              className=\"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5\"\n              onClick={handleInsert}\n            >\n              {isInserted ? (\n                <>\n                  <Check className=\"w-3 h-3\" />\n                  <span className=\"hidden sm:inline\">Inserted</span>\n                </>\n              ) : (\n                <>\n                  <Copy className=\"w-3 h-3\" />\n                  <span className=\"hidden sm:inline\">Insert</span>\n                </>\n              )}\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"secondary\"\n              className=\"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5\"\n              onClick={handlePreview}\n            >\n              <Eye className=\"w-3 h-3\" />\n              <span className=\"hidden sm:inline\">Preview</span>\n            </Button>\n          </div>\n        )}\n\n        {/* Block Count Badge */}\n        <div className={cn('absolute top-2 right-2', template.popularity && 'top-10 sm:top-12')}>\n          <Badge variant=\"secondary\" className=\"text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2 bg-white/90 backdrop-blur-sm\">\n            {template.blockCount} blocks\n          </Badge>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"p-3 sm:p-4\">\n        <h3 className=\"font-semibold text-sm sm:text-base mb-1 truncate group-hover:text-primary transition-colors\">\n          {template.name}\n        </h3>\n        <p className=\"text-[10px] sm:text-xs text-gray-500 line-clamp-2 mb-2 sm:mb-3\">\n          {template.description}\n        </p>\n        \n        {/* Category Badge */}\n        <div className=\"flex items-center gap-1.5\">\n          {React.createElement(CATEGORY_CONFIG[template.category].icon, {\n            className: 'w-3 h-3 sm:w-3.5 sm:h-3.5 text-gray-400',\n          })}\n          <span className=\"text-[10px] sm:text-xs text-gray-500\">\n            {CATEGORY_CONFIG[template.category].label}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function TemplatesLibrary() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [activeCategory, setActiveCategory] = useState<string>('all');\n  const [previewTemplate, setPreviewTemplate] = useState<TemplateConfig | null>(null);\n  const [isInserting, setIsInserting] = useState(false);\n\n  // Use shared hooks for category toggle and filtering\n  const { expandedCategories, toggleCategory } = useCategoryToggle({\n    initialState: { 'all': true, 'ecommerce': true, 'landing': true },\n  });\n\n  // Get page actions\n  const { handleApplyTemplate } = usePageActions();\n\n  // Filter templates based on search + category\n  const visibleTemplates = templates.filter((template) => {\n    const matchesSearch =\n      template.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      template.description.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesCategory = activeCategory === 'all' || template.category === activeCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Group templates by category when viewing all\n  const { groupedItems: groupedTemplates } = useFilteredAndGrouped(\n    activeCategory === 'all' ? templates : [],\n    searchQuery,\n    {\n      searchFields: ['name', 'description'],\n      groupByField: 'category',\n    }\n  );\n\n  const handleInsertTemplate = async (template: TemplateConfig) => {\n    setIsInserting(true);\n    \n    try {\n      // Convert our template format to BlockTemplate format for context\n      const blockTemplate = {\n        id: template.id,\n        name: template.name,\n        description: template.description,\n        category: 'custom' as const,\n        blocks: template.blocks.map((block, index) => ({\n          type: block.type,\n          content: block.content,\n          style: block.style || {},\n          order: index,\n          depth: 0,\n        })),\n      };\n      \n      await handleApplyTemplate(blockTemplate);\n      toast.success(`Template \"${template.name}\" inserted successfully!`);\n    } catch (error: any) {\n      pageBuilderLogger.error(LOG_OPERATIONS.TEMPLATE_ADD, 'Failed to insert template', { templateId: template.id, error });\n      toast.error(error.message || 'Failed to insert template');\n    } finally {\n      setIsInserting(false);\n    }\n  };\n\n  const handlePreviewTemplate = (template: TemplateConfig) => {\n    setPreviewTemplate(template);\n  };\n\n  const handleClosePreview = () => {\n    setPreviewTemplate(null);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4\">\n        <div className=\"flex items-center gap-2\">\n          <Sparkles className=\"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0\" />\n          <h2 className=\"font-semibold text-sm sm:text-base\">Templates</h2>\n          <Badge variant=\"secondary\" className=\"ml-auto text-[10px] sm:text-xs\">\n            {templates.length} available\n          </Badge>\n        </div>\n        \n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none\" />\n          <Input\n            placeholder=\"Search templates or description...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary\"\n          />\n        </div>\n      </div>\n\n      {/* Category Tabs - Horizontal Scroll */}\n      <div className=\"flex-shrink-0 flex gap-1.5 sm:gap-2 p-2 sm:p-3 border-b border-gray-200 overflow-x-auto bg-white scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\n        <Button\n          variant={activeCategory === 'all' ? 'default' : 'outline'}\n          size=\"sm\"\n          onClick={() => setActiveCategory('all')}\n          className=\"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5\"\n        >\n          <Sparkles className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n          <span className=\"hidden sm:inline\">All Templates</span>\n          <span className=\"sm:hidden\">All</span>\n        </Button>\n        \n        {Object.keys(CATEGORY_CONFIG).map((categoryId) => {\n          const config = CATEGORY_CONFIG[categoryId];\n          const Icon = config.icon;\n          return (\n            <Button\n              key={categoryId}\n              variant={activeCategory === categoryId ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setActiveCategory(categoryId)}\n              className=\"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5\"\n            >\n              <Icon className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n              <span className=\"hidden sm:inline\">{config.label}</span>\n              <span className=\"sm:hidden\">{config.label.split(' ')[0]}</span>\n            </Button>\n          );\n        })}\n      </div>\n\n      {/* Templates Grid */}\n      <div className=\"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\n        {activeCategory === 'all' ? (\n          // Grouped view by category\n          <div className=\"space-y-6 sm:space-y-8\">\n            {Object.keys(CATEGORY_CONFIG).map((categoryId) => {\n              const categoryTemplates = groupedTemplates[categoryId] || [];\n              if (categoryTemplates.length === 0) return null;\n              \n              const config = CATEGORY_CONFIG[categoryId];\n              const Icon = config.icon;\n              const isExpanded = expandedCategories[categoryId] || false;\n\n              return (\n                <div key={categoryId}>\n                  <button\n                    onClick={() => toggleCategory(categoryId)}\n                    className=\"flex items-center gap-2 mb-3 sm:mb-4 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full\"\n                  >\n                    <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0\" />\n                    <span>{config.label}</span>\n                    <Badge variant=\"secondary\" className=\"text-[10px] sm:text-xs ml-auto\">\n                      {categoryTemplates.length}\n                    </Badge>\n                    <ChevronDown\n                      className={cn('w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0',\n                        isExpanded ? 'rotate-0' : '-rotate-90'\n                      )}\n                    />\n                  </button>\n                  \n                  {isExpanded && (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2\">\n                      {categoryTemplates.map((template) => (\n                        <TemplateCard\n                          key={template.id}\n                          template={template}\n                          onInsert={handleInsertTemplate}\n                          onPreview={handlePreviewTemplate}\n                        />\n                      ))}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        ) : (\n          // Single category flat view\n          visibleTemplates.length > 0 ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4\">\n              {visibleTemplates.map((template: TemplateConfig) => (\n                <TemplateCard\n                  key={template.id}\n                  template={template}\n                  onInsert={handleInsertTemplate}\n                  onPreview={handlePreviewTemplate}\n                />\n              ))}\n            </div>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12\">\n              <Search className=\"w-8 h-8 sm:w-10 sm:h-10 mb-2 opacity-50\" />\n              <p className=\"font-medium\">No templates found</p>\n              <p className=\"text-[10px] sm:text-xs mt-1\">Try a different search term or category</p>\n            </div>\n          )\n        )}\n      </div>\n\n      {/* Footer Info */}\n      <div className=\"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white\">\n        <div className=\"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500\">\n          <Sparkles className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0\" />\n          <span>\n            Double-click to insert | 👁️ Preview for details\n          </span>\n        </div>\n      </div>\n\n      {/* Preview Modal */}\n      <Dialog open={!!previewTemplate} onOpenChange={() => handleClosePreview()}>\n        <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-auto\">\n          {previewTemplate && (\n            <>\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-2\">\n                  <span className=\"text-2xl\">{previewTemplate.preview}</span>\n                  {previewTemplate.name}\n                </DialogTitle>\n                <DialogDescription>\n                  {previewTemplate.description}\n                </DialogDescription>\n              </DialogHeader>\n              \n              <div className=\"space-y-4 mt-4\">\n                {/* Template Info */}\n                <div className=\"flex items-center gap-4 text-sm flex-wrap\">\n                  <Badge variant=\"secondary\" className=\"gap-1.5\">\n                    {React.createElement(CATEGORY_CONFIG[previewTemplate.category].icon, {\n                      className: 'w-3.5 h-3.5',\n                    })}\n                    {CATEGORY_CONFIG[previewTemplate.category].label}\n                  </Badge>\n                  <Badge variant=\"outline\">\n                    {previewTemplate.blockCount} blocks\n                  </Badge>\n                  {previewTemplate.popularity && (\n                    <Badge className={previewTemplate.popularity === 'hot' ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'}>\n                      {previewTemplate.popularity === 'hot' ? '🔥 Hot' : '✨ New'}\n                    </Badge>\n                  )}\n                </div>\n\n                {/* Block List */}\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-semibold text-sm\">Blocks included:</h4>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {previewTemplate.blocks.map((block, index) => (\n                      <div\n                        key={index}\n                        className=\"flex items-center gap-2 p-2 bg-gray-50 rounded text-xs\"\n                      >\n                        <div className=\"w-6 h-6 rounded bg-primary/10 flex items-center justify-center text-primary font-semibold\">\n                          {index + 1}\n                        </div>\n                        <span className=\"capitalize\">{block.type.replace('_', ' ')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Preview Gradient */}\n                <div className={`h-32 rounded-lg bg-gradient-to-br ${previewTemplate.color} flex items-center justify-center`}>\n                  <div className=\"text-6xl\">{previewTemplate.preview}</div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex gap-2 pt-4\">\n                  <Button\n                    onClick={() => {\n                      handleInsertTemplate(previewTemplate);\n                      handleClosePreview();\n                    }}\n                    disabled={isInserting}\n                    className=\"flex-1\"\n                  >\n                    {isInserting ? (\n                      <>\n                        <span className=\"animate-spin mr-2\">⏳</span>\n                        Inserting...\n                      </>\n                    ) : (\n                      <>\n                        <Copy className=\"w-4 h-4 mr-2\" />\n                        Insert Template\n                      </>\n                    )}\n                  </Button>\n                  <Button\n                    onClick={handleClosePreview}\n                    variant=\"outline\"\n                  >\n                    <X className=\"w-4 h-4 mr-2\" />\n                    Close\n                  </Button>\n                </div>\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { MoreVertical } from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { cn } from '@/lib/utils';\n\n/**\n * Generic library card component\n * Used by SavedBlocksLibrary, TemplatesLibrary, ElementsLibrary\n */\n\nexport interface LibraryCardAction {\n  label: string;\n  icon?: React.ReactNode;\n  onClick: () => void;\n  separator?: boolean;\n  variant?: 'default' | 'destructive';\n}\n\nexport interface LibraryCardProps {\n  id: string;\n  title: string;\n  description?: string;\n  subtitle?: string;\n  badge?: {\n    label: string;\n    variant?: 'default' | 'secondary' | 'outline' | 'destructive';\n  };\n  color?: string; // Gradient class like \"from-blue-500 to-cyan-500\"\n  icon?: React.ReactNode;\n  metadata?: {\n    label: string;\n    value: string | number;\n  }[];\n  isBookmarked?: boolean;\n  onBookmarkToggle?: () => void;\n  onDoubleClick?: () => void;\n  onPrimaryAction?: () => void;\n  actions?: LibraryCardAction[];\n  className?: string;\n}\n\nexport function LibraryCard({\n  id,\n  title,\n  description,\n  subtitle,\n  badge,\n  color,\n  icon,\n  metadata,\n  isBookmarked,\n  onBookmarkToggle,\n  onDoubleClick,\n  onPrimaryAction,\n  actions = [],\n  className,\n}: LibraryCardProps) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  return (\n    <Card\n      className={cn(\n        'overflow-hidden hover:border-primary/50 hover:shadow-md transition-all cursor-pointer',\n        isHovered && 'border-primary/50 shadow-md',\n        className\n      )}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onDoubleClick={onDoubleClick}\n      title={onDoubleClick ? 'Double-click to apply' : undefined}\n    >\n      {/* Color Bar */}\n      {color && (\n        <div className={cn('h-1 bg-gradient-to-r', color)} />\n      )}\n\n      {/* Content */}\n      <div className=\"p-2.5 sm:p-3\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-1.5 sm:mb-2 gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-1.5 mb-0.5\">\n              {icon && <span className=\"flex-shrink-0\">{icon}</span>}\n              <h4 className=\"font-semibold text-xs sm:text-sm truncate\">{title}</h4>\n              {badge && (\n                <Badge\n                  className={cn(\n                    'text-[9px] sm:text-[10px] h-4 sm:h-5 px-1 flex-shrink-0',\n                    badge.variant === 'destructive' && 'bg-red-500 hover:bg-red-600',\n                    badge.variant === 'secondary' && 'bg-gray-500 hover:bg-gray-600',\n                    !badge.variant && 'bg-blue-500 hover:bg-blue-600'\n                  )}\n                >\n                  {badge.label}\n                </Badge>\n              )}\n            </div>\n            \n            {subtitle && (\n              <p className=\"text-[10px] sm:text-xs text-gray-500 mb-1\">{subtitle}</p>\n            )}\n            \n            {description && (\n              <p className=\"text-[10px] sm:text-xs text-gray-600 line-clamp-2\">\n                {description}\n              </p>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center gap-1 flex-shrink-0\">\n            {onBookmarkToggle && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className={cn(\n                  'h-6 w-6 sm:h-8 sm:w-8 transition-colors',\n                  isBookmarked\n                    ? 'text-red-500 hover:text-red-600'\n                    : 'text-gray-400 hover:text-red-500'\n                )}\n                onClick={() => onBookmarkToggle?.()}\n              >\n                <Heart\n                  className={cn(\n                    'h-4 w-4 sm:h-5 sm:w-5',\n                    isBookmarked && 'fill-current'\n                  )}\n                />\n              </Button>\n            )}\n\n            {actions.length > 0 && (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className={cn(\n                      'h-6 w-6 sm:h-8 sm:w-8 transition-opacity',\n                      isHovered ? 'opacity-100' : 'opacity-0'\n                    )}\n                  >\n                    <MoreVertical className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-40\">\n                  {actions.map((action, idx) => (\n                    <React.Fragment key={`${id}-action-${idx}`}>\n                      {action.separator && <DropdownMenuSeparator />}\n                      <DropdownMenuItem\n                        onClick={action.onClick}\n                        className={cn(\n                          'text-xs sm:text-sm',\n                          action.variant === 'destructive' && 'text-red-600'\n                        )}\n                      >\n                        {action.icon && <span className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-2\">{action.icon}</span>}\n                        {action.label}\n                      </DropdownMenuItem>\n                    </React.Fragment>\n                  ))}\n                </DropdownMenuContent>\n              </DropdownMenu>\n            )}\n          </div>\n        </div>\n\n        {/* Metadata */}\n        {metadata && metadata.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mt-2 text-[9px] sm:text-[10px]\">\n            {metadata.map((item, idx) => (\n              <span key={`${id}-meta-${idx}`} className=\"text-gray-500\">\n                <span className=\"font-medium text-gray-700\">{item.label}:</span> {item.value}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n\n// Icon imports helper\nimport { Heart } from 'lucide-react';\n","/**\n * SavedBlocksLibrary Component\n * Manages user-saved block combinations for quick reuse\n * Features: search, filter, export/import, double-click apply\n * \n * Refactored to use shared hooks:\n * - useFilteredAndGrouped: Filtering and grouping logic\n * - useCategoryToggle: Category expansion state\n */\n\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { \n  Plus, \n  Search, \n  Copy, \n  Trash2, \n  Calendar,\n  Download,\n  Upload,\n  ChevronDown,\n  Package,\n  Zap,\n} from 'lucide-react';\nimport { usePageState, usePageActions } from '@/components/page-builder/PageBuilderProvider';\nimport { useFilteredAndGrouped } from '@/components/page-builder/hooks/useFilteredAndGrouped';\nimport { useCategoryToggle } from '@/components/page-builder/hooks/useCategoryToggle';\nimport { LibraryCard } from '@/components/page-builder/components/LibraryCard';\nimport { cn } from '@/lib/utils';\nimport { toast } from 'sonner';\nimport { pageBuilderLogger, LOG_OPERATIONS } from '@/components/page-builder/utils/pageBuilderLogger';\n\ninterface SavedBlock {\n  id: string;\n  name: string;\n  description: string;\n  thumbnail?: string;\n  blocks: any[]; // Block data structure\n  createdAt: string;\n  updatedAt: string;\n  category: string;\n  tags: string[];\n  popularity?: 'hot' | 'new' | null;\n  isBookmarked?: boolean; // NEW: bookmark flag\n}\n\nconst SAVED_BLOCKS_KEY = 'kata_saved_blocks';\n\nexport function SavedBlocksLibrary() {\n  const [savedBlocks, setSavedBlocks] = useState<SavedBlock[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const { blocks } = usePageState();\n  const { handleAddBlock } = usePageActions();\n\n  // Load saved blocks from localStorage\n  useEffect(() => {\n    loadSavedBlocks();\n  }, []);\n\n  const loadSavedBlocks = () => {\n    try {\n      const stored = localStorage.getItem(SAVED_BLOCKS_KEY);\n      if (stored) {\n        setSavedBlocks(JSON.parse(stored));\n      }\n    } catch (error) {\n      pageBuilderLogger.error('SAVED_BLOCKS_LOAD', 'Error loading saved blocks', { error });\n      toast.error('Failed to load saved blocks');\n    }\n  };\n\n  const saveSavedBlocks = (blocks: SavedBlock[]) => {\n    try {\n      localStorage.setItem(SAVED_BLOCKS_KEY, JSON.stringify(blocks));\n      setSavedBlocks(blocks);\n    } catch (error) {\n      pageBuilderLogger.error('SAVED_BLOCKS_SAVE', 'Error saving blocks', { error });\n      toast.error('Failed to save blocks');\n    }\n  };\n\n  const saveCurrentSelection = () => {\n    if (blocks.length === 0) {\n      toast.error('No blocks to save. Add some blocks to your page first.');\n      return;\n    }\n\n    const name = prompt('Enter a name for this saved block combination:');\n    if (!name) return;\n\n    const description = prompt('Enter a description (optional):') || '';\n\n    const newSavedBlock: SavedBlock = {\n      id: `saved-${Date.now()}`,\n      name,\n      description,\n      blocks: [...blocks],\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      category: 'custom',\n      tags: [],\n      popularity: 'new' as const,\n    };\n\n    const updated = [...savedBlocks, newSavedBlock];\n    saveSavedBlocks(updated);\n    toast.success(`\"${name}\" saved successfully!`);\n  };\n\n  const applySavedBlock = async (savedBlock: SavedBlock) => {\n    try {\n      // Apply each block from the saved combination\n      for (const block of savedBlock.blocks) {\n        await handleAddBlock(block.type);\n      }\n      toast.success(`Applied \"${savedBlock.name}\" to page`);\n    } catch (error: any) {\n      pageBuilderLogger.error('SAVED_BLOCK_APPLY', 'Error applying saved block', { blockId: savedBlock.id, error });\n      toast.error('Failed to apply saved block');\n    }\n  };\n\n  const duplicateSavedBlock = (savedBlock: SavedBlock) => {\n    const duplicate: SavedBlock = {\n      ...savedBlock,\n      id: `saved-${Date.now()}`,\n      name: `${savedBlock.name} (Copy)`,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      popularity: null,\n    };\n\n    const updated = [...savedBlocks, duplicate];\n    saveSavedBlocks(updated);\n    toast.success('Block duplicated');\n  };\n\n  const deleteSavedBlock = (id: string) => {\n    if (confirm('Delete this saved block? This cannot be undone.')) {\n      const updated = savedBlocks.filter(b => b.id !== id);\n      saveSavedBlocks(updated);\n      toast.success('Block deleted');\n    }\n  };\n\n  const toggleBookmarkBlock = (id: string) => {\n    const updated = savedBlocks.map(b => \n      b.id === id ? { ...b, isBookmarked: !b.isBookmarked } : b\n    );\n    saveSavedBlocks(updated);\n    \n    const block = savedBlocks.find(b => b.id === id);\n    if (block?.isBookmarked) {\n      toast.success('Bookmark removed');\n    } else {\n      toast.success('Block bookmarked!');\n    }\n  };\n\n  const exportSavedBlocks = () => {\n    if (savedBlocks.length === 0) {\n      toast.error('No saved blocks to export');\n      return;\n    }\n\n    const dataStr = JSON.stringify(savedBlocks, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\n    \n    const exportFileDefaultName = `saved-blocks-${new Date().toISOString().split('T')[0]}.json`;\n    \n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n    toast.success('Blocks exported');\n  };\n\n  const importSavedBlocks = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          try {\n            const imported = JSON.parse(e.target?.result as string);\n            const updated = [...savedBlocks, ...imported];\n            saveSavedBlocks(updated);\n            toast.success(`Imported ${imported.length} blocks`);\n          } catch (error) {\n            toast.error('Invalid file format. Please check the file.');\n          }\n        };\n        reader.readAsText(file);\n      }\n    };\n    input.click();\n  };\n\n  // Use shared hooks for filtering, grouping, and category toggle\n  const { expandedCategories, toggleCategory, expandAll, collapseAll } = useCategoryToggle({\n    initialState: { 'custom': true },\n  });\n\n  const { groupedItems: groupedBlocks, isEmpty } = useFilteredAndGrouped(\n    savedBlocks,\n    searchQuery,\n    {\n      searchFields: ['name', 'description', 'tags'],\n      groupByField: 'category',\n    }\n  );\n\n  const categories = Object.keys(groupedBlocks);\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Package className=\"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0\" />\n            <h2 className=\"font-semibold text-sm sm:text-base\">Saved Blocks</h2>\n            <Badge variant=\"secondary\" className=\"ml-1 text-[10px] sm:text-xs\">\n              {savedBlocks.length}\n            </Badge>\n          </div>\n          \n          <div className=\"flex gap-1 sm:gap-1.5\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={exportSavedBlocks}\n              disabled={savedBlocks.length === 0}\n              className=\"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0\"\n              title=\"Export blocks\"\n            >\n              <Download className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={importSavedBlocks}\n              className=\"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0\"\n              title=\"Import blocks\"\n            >\n              <Upload className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={saveCurrentSelection}\n              disabled={blocks.length === 0}\n              className=\"h-7 sm:h-8 px-2 sm:px-3 text-xs gap-1 flex-shrink-0\"\n              title=\"Save current page blocks\"\n            >\n              <Plus className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n              <span className=\"hidden sm:inline\">Save</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none\" />\n          <Input\n            placeholder=\"Search blocks or tags...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary\"\n          />\n        </div>\n      </div>\n\n      {/* Saved Blocks Content */}\n      <div className=\"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\n        {savedBlocks.length === 0 ? (\n          // Empty State\n          <div className=\"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12\">\n            <Package className=\"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50\" />\n            <p className=\"font-medium text-gray-600\">No saved blocks yet</p>\n            <p className=\"text-[10px] sm:text-xs text-gray-500 mt-1 text-center\">\n              Create block combinations and save them for quick reuse\n            </p>\n            <Button\n              onClick={saveCurrentSelection}\n              disabled={blocks.length === 0}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"text-xs gap-1.5 mt-3 sm:mt-4\"\n            >\n              <Plus className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n              Save Current Selection\n            </Button>\n          </div>\n        ) : isEmpty ? (\n          // No Results\n          <div className=\"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12\">\n            <Search className=\"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50\" />\n            <p className=\"font-medium text-gray-600\">No blocks found</p>\n            <p className=\"text-[10px] sm:text-xs text-gray-500 mt-1\">Try a different search term</p>\n          </div>\n        ) : (\n          // Category Groups\n          <div className=\"space-y-4 sm:space-y-6\">\n            {categories.map((category) => {\n              const categoryBlocks = groupedBlocks[category] || [];\n              const expanded = expandedCategories[category] || false;\n\n              return (\n                <div key={category}>\n                  <button\n                    onClick={() => toggleCategory(category)}\n                    className=\"flex items-center gap-2 mb-2 sm:mb-3 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full\"\n                  >\n                    <Package className=\"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0\" />\n                    <span className=\"capitalize\">{category}</span>\n                    <Badge variant=\"secondary\" className=\"text-[10px] sm:text-xs ml-auto\">\n                      {categoryBlocks.length}\n                    </Badge>\n                    <ChevronDown\n                      className={cn('w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0',\n                        expanded ? 'rotate-0' : '-rotate-90'\n                      )}\n                    />\n                  </button>\n\n                  {expanded && (\n                    <div className=\"space-y-2 sm:space-y-2.5 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2\">\n                      {categoryBlocks.map((block: SavedBlock) => {\n                        const daysAgo = Math.floor((Date.now() - new Date(block.createdAt).getTime()) / (1000 * 60 * 60 * 24));\n                        const badge = daysAgo <= 7 ? { label: '✨ New', variant: 'default' as const } : undefined;\n\n                        return (\n                          <LibraryCard\n                            key={block.id}\n                            id={block.id}\n                            title={block.name}\n                            description={block.description}\n                            badge={badge}\n                            isBookmarked={block.isBookmarked}\n                            onBookmarkToggle={() => toggleBookmarkBlock(block.id)}\n                            onDoubleClick={() => {\n                              pageBuilderLogger.info('BLOCK_APPLY', 'Double-click applying saved block', { blockId: block.id });\n                              applySavedBlock(block);\n                            }}\n                            metadata={[\n                              { label: 'Blocks', value: block.blocks.length },\n                              { label: 'Created', value: new Date(block.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) },\n                            ]}\n                            actions={[\n                              {\n                                label: 'Apply to Page',\n                                icon: <Plus className=\"w-4 h-4\" />,\n                                onClick: () => applySavedBlock(block),\n                              },\n                              {\n                                label: 'Duplicate',\n                                icon: <Copy className=\"w-4 h-4\" />,\n                                onClick: () => duplicateSavedBlock(block),\n                              },\n                              { separator: true, label: '', onClick: () => {} },\n                              {\n                                label: 'Delete',\n                                icon: <Trash2 className=\"w-4 h-4\" />,\n                                variant: 'destructive',\n                                onClick: () => deleteSavedBlock(block.id),\n                              },\n                            ]}\n                          />\n                        );\n                      })}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Footer Info */}\n      {savedBlocks.length > 0 && (\n        <div className=\"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white\">\n          <div className=\"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500\">\n            <Zap className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0\" />\n            <span>\n              Double-click to apply | 📋 Drag to canvas\n            </span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","'use client';\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { X, Layers, Sparkles, Bookmark } from 'lucide-react';\nimport { ElementsLibrary } from './ElementsLibrary';\nimport { TemplatesLibrary } from './TemplatesLibrary';\nimport { SavedBlocksLibrary } from './SavedBlocksLibrary';\n\ninterface LeftPanelProps {\n  onClose: () => void;\n}\n\nexport function LeftPanel({ onClose }: LeftPanelProps) {\n  const [activeTab, setActiveTab] = useState<'elements' | 'templates' | 'saved'>('elements');\n\n  return (\n    <div className=\"w-full sm:w-80 md:w-96 bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 flex flex-col shadow-lg\">\n      {/* Panel Header */}\n      <div className=\"h-11 sm:h-12 border-b border-gray-200 flex items-center justify-between px-3 sm:px-4 bg-gradient-to-r from-blue-50 via-white to-white\">\n        <h2 className=\"font-semibold text-sm sm:text-base flex items-center gap-2\">\n          <Layers className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600\" />\n          <span className=\"bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text text-transparent\">Components</span>\n        </h2>\n        <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"h-8 w-8 sm:h-9 sm:w-9 hover:bg-red-100 hover:text-red-600\">\n          <X className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n        </Button>\n      </div>\n\n      {/* Tabs */}\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as any)} className=\"flex-1 min-h-0 overflow-y-auto\">\n        <TabsList className=\"w-full justify-start rounded-none border-b bg-white h-auto p-1\">\n          <TabsTrigger value=\"elements\" className=\"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700\">\n            <Layers className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            <span className=\"hidden sm:inline\">Elements</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"templates\" className=\"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700\">\n            <Sparkles className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            <span className=\"hidden sm:inline\">Templates</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"saved\" className=\"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700\">\n            <Bookmark className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            <span className=\"hidden sm:inline\">Saved</span>\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"flex-1 overflow-y-auto min-h-0 bg-gradient-to-b from-white to-gray-50\">\n          <TabsContent value=\"elements\" className=\"mt-0 h-full data-[state=inactive]:hidden\">\n            <ElementsLibrary />\n          </TabsContent>\n\n          <TabsContent value=\"templates\" className=\"mt-0 h-full data-[state=inactive]:hidden\">\n            <TemplatesLibrary />\n          </TabsContent>\n\n          <TabsContent value=\"saved\" className=\"mt-0 h-full data-[state=inactive]:hidden\">\n            <SavedBlocksLibrary />\n          </TabsContent>\n        </div>\n      </Tabs>\n    </div>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  AlignStartVertical,\n  AlignCenterVertical,\n  AlignEndVertical,\n  StretchHorizontal,\n  LayoutGrid,\n  Rows,\n  Columns,\n} from 'lucide-react';\n\ninterface LayoutValue {\n  display?: 'flex' | 'grid' | 'block' | 'inline-block';\n  flexDirection?: 'row' | 'column' | 'row-reverse' | 'column-reverse';\n  justifyContent?: 'flex-start' | 'center' | 'flex-end' | 'space-between' | 'space-around' | 'space-evenly';\n  alignItems?: 'flex-start' | 'center' | 'flex-end' | 'stretch';\n  gap?: number;\n  gridTemplateColumns?: string;\n  gridTemplateRows?: string;\n  flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse';\n}\n\ninterface LayoutEditorProps {\n  value: Partial<LayoutValue>;\n  onChange: (value: Partial<LayoutValue>) => void;\n}\n\nexport function LayoutEditor({ value, onChange }: LayoutEditorProps) {\n  const display = value.display || 'flex';\n  const isFlex = display === 'flex';\n  const isGrid = display === 'grid';\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Display Mode */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium\">Display</Label>\n        <Tabs value={display} onValueChange={(v) => onChange({ display: v as any })}>\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"block\" className=\"text-xs\">Block</TabsTrigger>\n            <TabsTrigger value=\"flex\" className=\"text-xs\">Flex</TabsTrigger>\n            <TabsTrigger value=\"grid\" className=\"text-xs\">Grid</TabsTrigger>\n            <TabsTrigger value=\"inline-block\" className=\"text-xs\">Inline</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      {/* Flexbox Controls */}\n      {isFlex && (\n        <div className=\"space-y-4\">\n          {/* Flex Direction */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Direction</Label>\n            <div className=\"grid grid-cols-4 gap-1\">\n              <Button\n                variant={value.flexDirection === 'row' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ flexDirection: 'row' })}\n                className=\"h-8\"\n              >\n                <Rows className=\"h-4 w-4 rotate-90\" />\n              </Button>\n              <Button\n                variant={value.flexDirection === 'column' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ flexDirection: 'column' })}\n                className=\"h-8\"\n              >\n                <Columns className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.flexDirection === 'row-reverse' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ flexDirection: 'row-reverse' })}\n                className=\"h-8\"\n              >\n                <Rows className=\"h-4 w-4 rotate-90 scale-x-[-1]\" />\n              </Button>\n              <Button\n                variant={value.flexDirection === 'column-reverse' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ flexDirection: 'column-reverse' })}\n                className=\"h-8\"\n              >\n                <Columns className=\"h-4 w-4 scale-y-[-1]\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Justify Content */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Justify</Label>\n            <div className=\"grid grid-cols-3 gap-1\">\n              <Button\n                variant={value.justifyContent === 'flex-start' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ justifyContent: 'flex-start' })}\n                className=\"h-8\"\n              >\n                <AlignLeft className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.justifyContent === 'center' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ justifyContent: 'center' })}\n                className=\"h-8\"\n              >\n                <AlignCenter className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.justifyContent === 'flex-end' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ justifyContent: 'flex-end' })}\n                className=\"h-8\"\n              >\n                <AlignRight className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.justifyContent === 'space-between' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ justifyContent: 'space-between' })}\n                className=\"h-8 col-span-3\"\n              >\n                <AlignJustify className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Align Items */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Align</Label>\n            <div className=\"grid grid-cols-4 gap-1\">\n              <Button\n                variant={value.alignItems === 'flex-start' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ alignItems: 'flex-start' })}\n                className=\"h-8\"\n              >\n                <AlignStartVertical className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.alignItems === 'center' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ alignItems: 'center' })}\n                className=\"h-8\"\n              >\n                <AlignCenterVertical className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.alignItems === 'flex-end' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ alignItems: 'flex-end' })}\n                className=\"h-8\"\n              >\n                <AlignEndVertical className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant={value.alignItems === 'stretch' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => onChange({ alignItems: 'stretch' })}\n                className=\"h-8\"\n              >\n                <StretchHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Flex Wrap */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Wrap</Label>\n            <Tabs\n              value={value.flexWrap || 'nowrap'}\n              onValueChange={(v) => onChange({ flexWrap: v as any })}\n            >\n              <TabsList className=\"grid w-full grid-cols-3\">\n                <TabsTrigger value=\"nowrap\" className=\"text-xs\">No Wrap</TabsTrigger>\n                <TabsTrigger value=\"wrap\" className=\"text-xs\">Wrap</TabsTrigger>\n                <TabsTrigger value=\"wrap-reverse\" className=\"text-xs\">Reverse</TabsTrigger>\n              </TabsList>\n            </Tabs>\n          </div>\n\n          {/* Gap */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Gap</Label>\n            <div className=\"flex items-center gap-2\">\n              <Input\n                type=\"number\"\n                min=\"0\"\n                value={value.gap || 0}\n                onChange={(e) => onChange({ gap: parseInt(e.target.value) || 0 })}\n                className=\"h-8 text-xs\"\n              />\n              <span className=\"text-xs text-gray-500\">px</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Grid Controls */}\n      {isGrid && (\n        <div className=\"space-y-4\">\n          {/* Grid Columns */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Columns</Label>\n            <Input\n              value={value.gridTemplateColumns || 'repeat(3, 1fr)'}\n              onChange={(e) => onChange({ gridTemplateColumns: e.target.value })}\n              placeholder=\"repeat(3, 1fr)\"\n              className=\"h-8 text-xs font-mono\"\n            />\n            <div className=\"flex gap-1\">\n              {[1, 2, 3, 4, 6].map((cols) => (\n                <Button\n                  key={cols}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => onChange({ gridTemplateColumns: `repeat(${cols}, 1fr)` })}\n                  className=\"h-6 px-2 text-xs\"\n                >\n                  {cols}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* Grid Rows */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Rows</Label>\n            <Input\n              value={value.gridTemplateRows || 'auto'}\n              onChange={(e) => onChange({ gridTemplateRows: e.target.value })}\n              placeholder=\"auto\"\n              className=\"h-8 text-xs font-mono\"\n            />\n          </div>\n\n          {/* Gap */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium\">Gap</Label>\n            <div className=\"flex items-center gap-2\">\n              <Input\n                type=\"number\"\n                min=\"0\"\n                value={value.gap || 0}\n                onChange={(e) => onChange({ gap: parseInt(e.target.value) || 0 })}\n                className=\"h-8 text-xs\"\n              />\n              <span className=\"text-xs text-gray-500\">px</span>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Link, Unlink } from 'lucide-react';\n\ninterface SpacingValue {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}\n\ninterface VisualSpacingEditorProps {\n  type: 'padding' | 'margin';\n  value: SpacingValue;\n  onChange: (value: SpacingValue) => void;\n}\n\nexport function VisualSpacingEditor({ type, value, onChange }: VisualSpacingEditorProps) {\n  const [isLinked, setIsLinked] = useState(true);\n\n  const handleChange = (side: keyof SpacingValue, val: number) => {\n    if (isLinked) {\n      onChange({ top: val, right: val, bottom: val, left: val });\n    } else {\n      onChange({ ...value, [side]: val });\n    }\n  };\n\n  const handleInputChange = (side: keyof SpacingValue, inputVal: string) => {\n    const num = parseInt(inputVal) || 0;\n    handleChange(side, num);\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-between\">\n        <Label className=\"text-xs font-medium capitalize\">{type}</Label>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setIsLinked(!isLinked)}\n          className=\"h-6 px-2\"\n        >\n          {isLinked ? <Link className=\"h-3 w-3\" /> : <Unlink className=\"h-3 w-3\" />}\n        </Button>\n      </div>\n\n      {/* Visual Box Model */}\n      <div className=\"relative bg-gray-50 rounded-lg p-4\">\n        {/* Top */}\n        <div className=\"flex justify-center mb-2\">\n          <div className=\"flex items-center gap-1\">\n            <Input\n              type=\"number\"\n              value={value.top}\n              onChange={(e) => handleInputChange('top', e.target.value)}\n              className=\"w-16 h-6 text-xs text-center\"\n              min=\"0\"\n            />\n            <span className=\"text-xs text-gray-500\">px</span>\n          </div>\n        </div>\n\n        {/* Middle (Left, Center, Right) */}\n        <div className=\"flex items-center justify-between mb-2\">\n          <div className=\"flex items-center gap-1\">\n            <Input\n              type=\"number\"\n              value={value.left}\n              onChange={(e) => handleInputChange('left', e.target.value)}\n              className=\"w-16 h-6 text-xs text-center\"\n              min=\"0\"\n            />\n            <span className=\"text-xs text-gray-500\">px</span>\n          </div>\n\n          {/* Center Box */}\n          <div className={`px-4 py-3 rounded border-2 ${\n            type === 'padding' ? 'bg-blue-50 border-blue-300' : 'bg-orange-50 border-orange-300'\n          }`}>\n            <div className=\"text-xs font-medium text-center text-gray-600\">\n              {type === 'padding' ? 'Content' : 'Element'}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-1\">\n            <Input\n              type=\"number\"\n              value={value.right}\n              onChange={(e) => handleInputChange('right', e.target.value)}\n              className=\"w-16 h-6 text-xs text-center\"\n              min=\"0\"\n            />\n            <span className=\"text-xs text-gray-500\">px</span>\n          </div>\n        </div>\n\n        {/* Bottom */}\n        <div className=\"flex justify-center\">\n          <div className=\"flex items-center gap-1\">\n            <Input\n              type=\"number\"\n              value={value.bottom}\n              onChange={(e) => handleInputChange('bottom', e.target.value)}\n              className=\"w-16 h-6 text-xs text-center\"\n              min=\"0\"\n            />\n            <span className=\"text-xs text-gray-500\">px</span>\n          </div>\n        </div>\n\n        {/* Labels */}\n        <div className=\"absolute top-1 left-2 text-[10px] text-gray-400\">T</div>\n        <div className=\"absolute bottom-1 left-2 text-[10px] text-gray-400\">B</div>\n        <div className=\"absolute top-1/2 -translate-y-1/2 left-1 text-[10px] text-gray-400\">L</div>\n        <div className=\"absolute top-1/2 -translate-y-1/2 right-1 text-[10px] text-gray-400\">R</div>\n      </div>\n\n      {/* Quick Presets */}\n      <div className=\"flex gap-2\">\n        {[0, 4, 8, 16, 24, 32].map((preset) => (\n          <Button\n            key={preset}\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => onChange({ top: preset, right: preset, bottom: preset, left: preset })}\n            className=\"h-6 px-2 text-xs\"\n          >\n            {preset}\n          </Button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","/**\n * PageBuilder Template System - Confirmation Dialog Component\n * Phase 5.4: Integration\n * \n * Reusable confirmation dialog for destructive operations\n */\n\n'use client';\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { AlertCircle } from 'lucide-react';\n\nexport interface ConfirmationDialogProps {\n  isOpen: boolean;\n  title: string;\n  description: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'default' | 'destructive';\n  onConfirm: () => void;\n  onCancel: () => void;\n}\n\nexport function ConfirmationDialog({\n  isOpen,\n  title,\n  description,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  variant = 'default',\n  onConfirm,\n  onCancel,\n}: ConfirmationDialogProps) {\n  return (\n    <Dialog open={isOpen} onOpenChange={onCancel}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {variant === 'destructive' && (\n              <AlertCircle className=\"w-5 h-5 text-red-600\" />\n            )}\n            {title}\n          </DialogTitle>\n          <DialogDescription>{description}</DialogDescription>\n        </DialogHeader>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onCancel}>\n            {cancelText}\n          </Button>\n          <Button\n            variant={variant === 'destructive' ? 'destructive' : 'default'}\n            onClick={onConfirm}\n          >\n            {confirmText}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * PageBuilder Template System - Template Preview Modal\n * Phase 5.2: UI Components\n * \n * Full-screen preview modal with template details\n */\n\n'use client';\n\nimport React from 'react';\nimport { PageTemplate } from '@/types/template';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { X, Calendar, User, Tag, FileText } from 'lucide-react';\nimport { ScrollArea } from '@/components/ui/scroll-area';\n\ninterface TemplatePreviewProps {\n  template: PageTemplate | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onUse?: (template: PageTemplate) => void;\n}\n\nexport function TemplatePreview({ template, isOpen, onClose, onUse }: TemplatePreviewProps) {\n  if (!template) return null;\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { \n      month: 'long', \n      day: 'numeric', \n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const countElements = (elements: any[]): number => {\n    let count = elements.length;\n    elements.forEach(el => {\n      if (el.children && Array.isArray(el.children)) {\n        count += countElements(el.children);\n      }\n    });\n    return count;\n  };\n\n  const elementCount = countElements(template.structure);\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] p-0\">\n        {/* Header */}\n        <DialogHeader className=\"px-6 pt-6 pb-4 border-b\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <DialogTitle className=\"text-2xl\">{template.name}</DialogTitle>\n                {template.isDefault && (\n                  <Badge variant=\"secondary\" className=\"bg-blue-600 text-white\">\n                    Default\n                  </Badge>\n                )}\n                <Badge className=\"capitalize\">{template.category}</Badge>\n              </div>\n              <DialogDescription className=\"text-base\">\n                {template.description}\n              </DialogDescription>\n            </div>\n          </div>\n        </DialogHeader>\n\n        <ScrollArea className=\"flex-1 px-6\">\n          {/* Preview Image */}\n          <div className=\"mb-6\">\n            <div className=\"relative aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg overflow-hidden border border-gray-200\">\n              {template.thumbnail ? (\n                <img\n                  src={template.thumbnail}\n                  alt={template.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                  <div className=\"text-center\">\n                    <div className=\"text-6xl mb-4\">📄</div>\n                    <div className=\"text-lg\">No Preview Available</div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Metadata Grid */}\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            {template.author && (\n              <div className=\"flex items-start gap-3 p-3 bg-gray-50 rounded-lg\">\n                <User className=\"w-5 h-5 text-gray-500 mt-0.5\" />\n                <div>\n                  <div className=\"text-xs text-gray-500 mb-1\">Author</div>\n                  <div className=\"text-sm font-medium text-gray-900\">{template.author}</div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 rounded-lg\">\n              <Calendar className=\"w-5 h-5 text-gray-500 mt-0.5\" />\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1\">Last Updated</div>\n                <div className=\"text-sm font-medium text-gray-900\">{formatDate(template.updatedAt)}</div>\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 rounded-lg\">\n              <FileText className=\"w-5 h-5 text-gray-500 mt-0.5\" />\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1\">Elements</div>\n                <div className=\"text-sm font-medium text-gray-900\">{elementCount} elements</div>\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3 p-3 bg-gray-50 rounded-lg\">\n              <Calendar className=\"w-5 h-5 text-gray-500 mt-0.5\" />\n              <div>\n                <div className=\"text-xs text-gray-500 mb-1\">Created</div>\n                <div className=\"text-sm font-medium text-gray-900\">{formatDate(template.createdAt)}</div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tags */}\n          {template.tags && template.tags.length > 0 && (\n            <div className=\"mb-6\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Tag className=\"w-4 h-4 text-gray-500\" />\n                <h3 className=\"text-sm font-medium text-gray-700\">Tags</h3>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {template.tags.map((tag) => (\n                  <Badge key={tag} variant=\"outline\" className=\"text-sm\">\n                    {tag}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Structure Preview */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3\">Template Structure</h3>\n            <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n              <div className=\"space-y-2 text-sm font-mono text-gray-600\">\n                {template.structure.map((element, index) => (\n                  <div key={element.id} className=\"pl-4 border-l-2 border-blue-300\">\n                    <span className=\"text-blue-600\">{element.type}</span>\n                    {element.content && (\n                      <span className=\"text-gray-500 ml-2\">\n                        \"{element.content.slice(0, 30)}{element.content.length > 30 ? '...' : ''}\"\n                      </span>\n                    )}\n                    {element.children && element.children.length > 0 && (\n                      <span className=\"text-gray-400 ml-2\">\n                        ({element.children.length} children)\n                      </span>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </ScrollArea>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between gap-4 px-6 py-4 border-t bg-gray-50\">\n          <Button variant=\"outline\" onClick={onClose}>\n            Close\n          </Button>\n          {onUse && (\n            <Button onClick={() => onUse(template)} className=\"bg-blue-600 hover:bg-blue-700\">\n              Use This Template\n            </Button>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * PageBuilder Template System - Category Filter Component\n * Phase 5.2: UI Components\n * \n * Category selector with active state and counts\n */\n\n'use client';\n\nimport React from 'react';\nimport { TemplateCategory, TEMPLATE_CATEGORIES } from '@/types/template';\nimport { Badge } from '@/components/ui/badge';\n\ninterface TemplateCategoryFilterProps {\n  activeCategory: TemplateCategory;\n  onCategoryChange: (category: TemplateCategory) => void;\n  counts?: Record<TemplateCategory, number>;\n}\n\nexport function TemplateCategoryFilter({\n  activeCategory,\n  onCategoryChange,\n  counts,\n}: TemplateCategoryFilterProps) {\n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      {TEMPLATE_CATEGORIES.map((category) => {\n        const isActive = activeCategory === category.value;\n        const count = counts?.[category.value] || 0;\n\n        return (\n          <button\n            key={category.value}\n            onClick={() => onCategoryChange(category.value)}\n            className={`\n              px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200\n              flex items-center gap-2\n              ${\n                isActive\n                  ? 'bg-blue-600 text-white shadow-sm'\n                  : 'bg-white text-gray-700 border border-gray-200 hover:border-blue-300 hover:bg-blue-50'\n              }\n            `}\n          >\n            <span>{category.label}</span>\n            {count > 0 && (\n              <Badge\n                variant={isActive ? 'secondary' : 'outline'}\n                className={`\n                  text-xs px-1.5 py-0.5 min-w-[20px] justify-center\n                  ${isActive ? 'bg-white/20 text-white border-white/30' : 'bg-gray-100 text-gray-600'}\n                `}\n              >\n                {count}\n              </Badge>\n            )}\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","/**\n * PageBuilder Template System - Template Card Component\n * Phase 5.2: UI Components\n * \n * Individual template preview card with actions\n */\n\n'use client';\n\nimport React from 'react';\nimport { PageTemplate } from '@/types/template';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Eye, Download, Copy, Trash2, Calendar, User } from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { MoreVertical } from 'lucide-react';\n\ninterface TemplateCardProps {\n  template: PageTemplate;\n  onUse?: (template: PageTemplate) => void;\n  onPreview?: (template: PageTemplate) => void;\n  onExport?: (template: PageTemplate) => void;\n  onDuplicate?: (template: PageTemplate) => void;\n  onDelete?: (template: PageTemplate) => void;\n}\n\nexport function TemplateCard({\n  template,\n  onUse,\n  onPreview,\n  onExport,\n  onDuplicate,\n  onDelete,\n}: TemplateCardProps) {\n  const categoryColors: Record<string, string> = {\n    landing: 'bg-blue-100 text-blue-800',\n    blog: 'bg-purple-100 text-purple-800',\n    ecommerce: 'bg-green-100 text-green-800',\n    portfolio: 'bg-orange-100 text-orange-800',\n    marketing: 'bg-pink-100 text-pink-800',\n    custom: 'bg-gray-100 text-gray-800',\n  };\n\n  const categoryColor = categoryColors[template.category] || 'bg-gray-100 text-gray-800';\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  return (\n    <div className=\"group relative bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-200 hover:border-blue-300\">\n      {/* Thumbnail */}\n      <div className=\"relative aspect-video bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden\">\n        {template.thumbnail ? (\n          <img\n            src={template.thumbnail}\n            alt={template.name}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-2\">📄</div>\n              <div className=\"text-sm\">No Preview</div>\n            </div>\n          </div>\n        )}\n\n        {/* Hover Overlay */}\n        <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2\">\n          {onPreview && (\n            <Button\n              size=\"sm\"\n              variant=\"secondary\"\n              onClick={() => onPreview(template)}\n              className=\"bg-white/90 hover:bg-white\"\n            >\n              <Eye className=\"w-4 h-4 mr-1\" />\n              Preview\n            </Button>\n          )}\n          {onUse && (\n            <Button\n              size=\"sm\"\n              onClick={() => onUse(template)}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n            >\n              Use Template\n            </Button>\n          )}\n        </div>\n\n        {/* Default Badge */}\n        {template.isDefault && (\n          <div className=\"absolute top-2 left-2\">\n            <Badge variant=\"secondary\" className=\"bg-blue-600 text-white text-xs\">\n              Default\n            </Badge>\n          </div>\n        )}\n\n        {/* Category Badge */}\n        <div className=\"absolute top-2 right-2\">\n          <Badge className={`${categoryColor} text-xs capitalize`}>\n            {template.category}\n          </Badge>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"p-4\">\n        {/* Title and Actions */}\n        <div className=\"flex items-start justify-between gap-2 mb-2\">\n          <h3 className=\"font-semibold text-gray-900 line-clamp-1 flex-1\">\n            {template.name}\n          </h3>\n\n          {/* Actions Menu */}\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity\"\n              >\n                <MoreVertical className=\"w-4 h-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {onPreview && (\n                <DropdownMenuItem onClick={() => onPreview(template)}>\n                  <Eye className=\"w-4 h-4 mr-2\" />\n                  Preview\n                </DropdownMenuItem>\n              )}\n              {onExport && (\n                <DropdownMenuItem onClick={() => onExport(template)}>\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Export\n                </DropdownMenuItem>\n              )}\n              {onDuplicate && (\n                <DropdownMenuItem onClick={() => onDuplicate(template)}>\n                  <Copy className=\"w-4 h-4 mr-2\" />\n                  Duplicate\n                </DropdownMenuItem>\n              )}\n              {onDelete && !template.isDefault && (\n                <>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem\n                    onClick={() => onDelete(template)}\n                    className=\"text-red-600 focus:text-red-600\"\n                  >\n                    <Trash2 className=\"w-4 h-4 mr-2\" />\n                    Delete\n                  </DropdownMenuItem>\n                </>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n\n        {/* Description */}\n        <p className=\"text-sm text-gray-600 line-clamp-2 mb-3\">\n          {template.description}\n        </p>\n\n        {/* Metadata */}\n        <div className=\"flex items-center gap-3 text-xs text-gray-500\">\n          {template.author && (\n            <div className=\"flex items-center gap-1\">\n              <User className=\"w-3 h-3\" />\n              <span className=\"truncate max-w-[100px]\">{template.author}</span>\n            </div>\n          )}\n          <div className=\"flex items-center gap-1\">\n            <Calendar className=\"w-3 h-3\" />\n            <span>{formatDate(template.updatedAt)}</span>\n          </div>\n        </div>\n\n        {/* Tags */}\n        {template.tags && template.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mt-3\">\n            {template.tags.slice(0, 3).map((tag) => (\n              <span\n                key={tag}\n                className=\"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded\"\n              >\n                {tag}\n              </span>\n            ))}\n            {template.tags.length > 3 && (\n              <span className=\"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded\">\n                +{template.tags.length - 3}\n              </span>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * PageBuilder Template System - React Hook\n * Phase 5.1: Template Data Layer\n * \n * Hook for managing template state and operations\n */\n\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { PageTemplate, TemplateFilter, TemplateCategory } from '@/types/template';\nimport {\n  getAllTemplates,\n  saveTemplate,\n  deleteTemplate,\n  duplicateTemplate,\n  importTemplate,\n  downloadTemplate,\n  initializeStorage,\n} from '@/lib/templateStore';\nimport { DEFAULT_TEMPLATES } from '@/lib/templateDefaults';\n\nexport interface UseTemplatesResult {\n  // State\n  templates: PageTemplate[];\n  filteredTemplates: PageTemplate[];\n  isLoading: boolean;\n  error: string | null;\n\n  // Filters\n  filter: TemplateFilter;\n  setFilter: (filter: Partial<TemplateFilter>) => void;\n  resetFilter: () => void;\n\n  // Operations\n  addTemplate: (template: PageTemplate) => Promise<boolean>;\n  updateTemplate: (template: PageTemplate) => Promise<boolean>;\n  removeTemplate: (id: string) => Promise<boolean>;\n  duplicate: (id: string, newName?: string) => Promise<PageTemplate | null>;\n  importFromJSON: (jsonString: string) => Promise<{ success: boolean; template?: PageTemplate; error?: string }>;\n  exportTemplate: (template: PageTemplate) => void;\n  refresh: () => void;\n\n  // Utilities\n  getTemplateById: (id: string) => PageTemplate | undefined;\n  getTemplatesByCategory: (category: TemplateCategory) => PageTemplate[];\n}\n\nconst DEFAULT_FILTER: TemplateFilter = {\n  category: 'all',\n  search: '',\n  tags: [],\n  sortBy: 'date',\n  sortOrder: 'desc',\n};\n\nexport function useTemplates(): UseTemplatesResult {\n  const [templates, setTemplates] = useState<PageTemplate[]>([]);\n  const [filter, setFilterState] = useState<TemplateFilter>(DEFAULT_FILTER);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Load templates on mount\n  useEffect(() => {\n    loadTemplates();\n  }, []);\n\n  const loadTemplates = useCallback(() => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Initialize with defaults if needed\n      initializeStorage(DEFAULT_TEMPLATES);\n\n      // Load all templates\n      const loaded = getAllTemplates();\n      setTemplates(loaded);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load templates');\n      console.error('Error loading templates:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Filter templates based on current filter\n  const filteredTemplates = useCallback(() => {\n    let result = [...templates];\n\n    // Filter by category\n    if (filter.category && filter.category !== 'all') {\n      result = result.filter(t => t.category === filter.category);\n    }\n\n    // Filter by search\n    if (filter.search && filter.search.trim() !== '') {\n      const searchLower = filter.search.toLowerCase();\n      result = result.filter(\n        t =>\n          t.name.toLowerCase().includes(searchLower) ||\n          t.description.toLowerCase().includes(searchLower) ||\n          t.tags?.some(tag => tag.toLowerCase().includes(searchLower))\n      );\n    }\n\n    // Filter by tags\n    if (filter.tags && filter.tags.length > 0) {\n      result = result.filter(t => filter.tags!.some(tag => t.tags?.includes(tag)));\n    }\n\n    // Sort\n    if (filter.sortBy) {\n      result.sort((a, b) => {\n        let comparison = 0;\n\n        switch (filter.sortBy) {\n          case 'name':\n            comparison = a.name.localeCompare(b.name);\n            break;\n          case 'date':\n            comparison = new Date(a.updatedAt).getTime() - new Date(b.updatedAt).getTime();\n            break;\n          case 'category':\n            comparison = a.category.localeCompare(b.category);\n            break;\n        }\n\n        return filter.sortOrder === 'asc' ? comparison : -comparison;\n      });\n    }\n\n    return result;\n  }, [templates, filter])();\n\n  // Add template\n  const addTemplate = useCallback(async (template: PageTemplate): Promise<boolean> => {\n    try {\n      const success = saveTemplate(template);\n      if (success) {\n        loadTemplates();\n      }\n      return success;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add template');\n      return false;\n    }\n  }, [loadTemplates]);\n\n  // Update template\n  const updateTemplate = useCallback(async (template: PageTemplate): Promise<boolean> => {\n    try {\n      const success = saveTemplate(template);\n      if (success) {\n        loadTemplates();\n      }\n      return success;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update template');\n      return false;\n    }\n  }, [loadTemplates]);\n\n  // Remove template\n  const removeTemplate = useCallback(async (id: string): Promise<boolean> => {\n    try {\n      const success = deleteTemplate(id);\n      if (success) {\n        loadTemplates();\n      }\n      return success;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete template');\n      return false;\n    }\n  }, [loadTemplates]);\n\n  // Duplicate template\n  const duplicate = useCallback(async (id: string, newName?: string): Promise<PageTemplate | null> => {\n    try {\n      const duplicated = duplicateTemplate(id, newName);\n      if (duplicated) {\n        loadTemplates();\n      }\n      return duplicated;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to duplicate template');\n      return null;\n    }\n  }, [loadTemplates]);\n\n  // Import from JSON\n  const importFromJSON = useCallback(async (jsonString: string) => {\n    try {\n      const result = importTemplate(jsonString);\n      if (result.success) {\n        loadTemplates();\n      }\n      return result;\n    } catch (err) {\n      return {\n        success: false,\n        error: err instanceof Error ? err.message : 'Failed to import template',\n      };\n    }\n  }, [loadTemplates]);\n\n  // Export template\n  const exportTemplateWrapper = useCallback((template: PageTemplate) => {\n    try {\n      downloadTemplate(template);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to export template');\n    }\n  }, []);\n\n  // Set filter\n  const setFilter = useCallback((newFilter: Partial<TemplateFilter>) => {\n    setFilterState(prev => ({ ...prev, ...newFilter }));\n  }, []);\n\n  // Reset filter\n  const resetFilter = useCallback(() => {\n    setFilterState(DEFAULT_FILTER);\n  }, []);\n\n  // Get template by ID\n  const getTemplateById = useCallback((id: string) => {\n    return templates.find(t => t.id === id);\n  }, [templates]);\n\n  // Get templates by category\n  const getTemplatesByCategory = useCallback((category: TemplateCategory) => {\n    if (category === 'all') {\n      return templates;\n    }\n    return templates.filter(t => t.category === category);\n  }, [templates]);\n\n  return {\n    // State\n    templates,\n    filteredTemplates,\n    isLoading,\n    error,\n\n    // Filters\n    filter,\n    setFilter,\n    resetFilter,\n\n    // Operations\n    addTemplate,\n    updateTemplate,\n    removeTemplate: removeTemplate,\n    duplicate,\n    importFromJSON,\n    exportTemplate: exportTemplateWrapper,\n    refresh: loadTemplates,\n\n    // Utilities\n    getTemplateById,\n    getTemplatesByCategory,\n  };\n}\n","'use client';\n\nimport { Suspense, useState, useEffect } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { FullScreenPageBuilder } from '@/components/page-builder/FullScreenPageBuilder';\nimport { usePages, usePageOperations } from '@/hooks/usePageBuilder';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { Plus, AlertCircle } from 'lucide-react';\nimport { Card } from '@/components/ui/card';\nimport { DataTable } from './data-table';\n\nfunction PageBuilderContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const pageId = searchParams.get('pageId');\n  \n  const [renderError, setRenderError] = useState<string | null>(null);\n  const [isEditorOpen, setIsEditorOpen] = useState(false);\n  \n  const { pages, loading, refetch, error: queryError } = usePages(\n    { page: 1, limit: 100 },\n    undefined,\n    { skip: pageId ? true : false }\n  );\n\n  const { deletePage } = usePageOperations();\n\n  // Open editor dialog when pageId is present\n  useEffect(() => {\n    if (pageId) {\n      setIsEditorOpen(true);\n    }\n  }, [pageId]);\n\n  // Refetch when closing editor\n  useEffect(() => {\n    if (!isEditorOpen && pageId) {\n      refetch();\n    }\n  }, [isEditorOpen, pageId, refetch]);\n\n  const handleCreateNewPage = () => {\n    try {\n      router.push('/admin/pagebuilder');\n      setIsEditorOpen(true);\n    } catch (error) {\n      console.error('Error creating page:', error);\n      setRenderError('Failed to create new page');\n    }\n  };\n\n  const handleEditPage = (id: string) => {\n    try {\n      router.push(`/admin/pagebuilder?pageId=${id}`);\n      setIsEditorOpen(true);\n    } catch (error) {\n      console.error('Error editing page:', error);\n      setRenderError('Failed to edit page');\n    }\n  };\n\n  const handleViewPage = (slug: string) => {\n    try {\n      window.open(`/${slug}`, '_blank');\n    } catch (error) {\n      console.error('Error viewing page:', error);\n    }\n  };\n\n  const handleDeletePage = async (id: string) => {\n    try {\n      await deletePage(id);\n      refetch();\n    } catch (error) {\n      console.error('Error deleting page:', error);\n      throw error;\n    }\n  };\n\n  const handleCloseEditor = () => {\n    setIsEditorOpen(false);\n    router.push('/admin/pagebuilder');\n    refetch();\n  };\n\n  // Error display\n  if (renderError || queryError) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n        <Card className=\"max-w-md w-full p-6\">\n          <div className=\"flex items-center gap-3 text-red-600 mb-4\">\n            <AlertCircle size={24} />\n            <h2 className=\"text-xl font-bold\">Error Loading Pages</h2>\n          </div>\n          <p className=\"text-gray-600 mb-4\">\n            {renderError || queryError?.message || 'An unexpected error occurred'}\n          </p>\n          <div className=\"flex gap-2\">\n            <Button onClick={() => window.location.reload()} className=\"flex-1\">\n              Reload Page\n            </Button>\n            <Button onClick={() => setRenderError(null)} variant=\"outline\">\n              Dismiss\n            </Button>\n          </div>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"min-h-screen bg-gray-50\">\n        {/* Header */}\n        <div className=\"bg-white shadow-sm border-b\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"py-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h1 className=\"text-3xl font-bold text-gray-900\">Pages</h1>\n                  <p className=\"mt-2 text-sm text-gray-600\">\n                    Manage and edit your website pages\n                  </p>\n                </div>\n                <Button \n                  onClick={handleCreateNewPage}\n                  className=\"flex items-center space-x-2\"\n                >\n                  <Plus size={20} />\n                  <span>New Page</span>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <DataTable\n            data={pages?.items || []}\n            isLoading={loading}\n            onEdit={handleEditPage}\n            onView={handleViewPage}\n            onDelete={handleDeletePage}\n            onRefresh={refetch}\n          />\n        </div>\n      </div>\n\n      {/* Fullscreen Editor Dialog */}\n      <Dialog open={isEditorOpen} onOpenChange={(open) => {\n        setIsEditorOpen(open);\n        if (!open) {\n          handleCloseEditor();\n        }\n      }}>\n        <DialogContent \n          className=\"max-w-full w-screen h-screen p-0 m-0 bg-white border-0 rounded-none\"\n          style={{ \n            maxWidth: '100vw', \n            maxHeight: '100vh',\n            width: '100vw',\n            height: '100vh'\n          }}\n        >\n          <VisuallyHidden>\n            <DialogTitle>Page Builder Editor</DialogTitle>\n            <DialogDescription>\n              Edit your page content using the visual page builder interface\n            </DialogDescription>\n          </VisuallyHidden>\n          <div className=\"h-full w-full\">\n            <FullScreenPageBuilder \n              pageId={pageId || undefined}\n              onExit={handleCloseEditor}\n              initialMode=\"visual\"\n            />\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n\nexport default function AdminPageBuilderPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    }>\n      <PageBuilderContent />\n    </Suspense>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { HexColorPicker, RgbaColorPicker } from 'react-colorful';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Pipette, Palette } from 'lucide-react';\n\ninterface AdvancedColorPickerProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  showOpacity?: boolean;\n  showGradient?: boolean;\n}\n\nconst COLOR_PRESETS = [\n  '#000000', '#FFFFFF', '#F3F4F6', '#E5E7EB', '#D1D5DB',\n  '#EF4444', '#F59E0B', '#10B981', '#3B82F6', '#8B5CF6',\n  '#EC4899', '#14B8A6', '#F97316', '#84CC16', '#06B6D4',\n];\n\nexport function AdvancedColorPicker({\n  label,\n  value,\n  onChange,\n  showOpacity = true,\n  showGradient = false,\n}: AdvancedColorPickerProps) {\n  const [colorMode, setColorMode] = useState<'solid' | 'gradient'>('solid');\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Convert hex to rgba if needed\n  const getRgbaFromHex = (hex: string): { r: number; g: number; b: number; a: number } => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? {\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16),\n          a: 1,\n        }\n      : { r: 0, g: 0, b: 0, a: 1 };\n  };\n\n  const [rgbaColor, setRgbaColor] = useState(getRgbaFromHex(value || '#000000'));\n\n  const handleRgbaChange = (color: { r: number; g: number; b: number; a: number }) => {\n    setRgbaColor(color);\n    const { r, g, b, a } = color;\n    if (a < 1) {\n      onChange(`rgba(${r}, ${g}, ${b}, ${a})`);\n    } else {\n      const hex = `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;\n      onChange(hex);\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-xs font-medium\">{label}</Label>\n      \n      <div className=\"flex gap-2\">\n        {/* Color Preview & Picker Trigger */}\n        <Popover open={isOpen} onOpenChange={setIsOpen}>\n          <PopoverTrigger asChild>\n            <Button\n              variant=\"outline\"\n              className=\"w-12 h-9 p-1\"\n              style={{ backgroundColor: value || '#ffffff' }}\n            >\n              <span className=\"sr-only\">Pick color</span>\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-auto p-3\" align=\"start\">\n            <div className=\"space-y-3\">\n              {/* Color Mode Tabs */}\n              {showGradient && (\n                <Tabs value={colorMode} onValueChange={(v) => setColorMode(v as any)}>\n                  <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"solid\">Solid</TabsTrigger>\n                    <TabsTrigger value=\"gradient\">Gradient</TabsTrigger>\n                  </TabsList>\n                </Tabs>\n              )}\n\n              {/* Color Picker */}\n              {colorMode === 'solid' && (\n                <div className=\"space-y-3\">\n                  {showOpacity ? (\n                    <RgbaColorPicker color={rgbaColor} onChange={handleRgbaChange} />\n                  ) : (\n                    <HexColorPicker color={value || '#000000'} onChange={onChange} />\n                  )}\n\n                  {/* Opacity Slider */}\n                  {showOpacity && (\n                    <div className=\"space-y-1\">\n                      <Label className=\"text-xs\">Opacity</Label>\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"range\"\n                          min=\"0\"\n                          max=\"100\"\n                          value={Math.round(rgbaColor.a * 100)}\n                          onChange={(e) => {\n                            const a = parseInt(e.target.value) / 100;\n                            handleRgbaChange({ ...rgbaColor, a });\n                          }}\n                          className=\"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                        />\n                        <span className=\"text-xs w-10 text-right\">\n                          {Math.round(rgbaColor.a * 100)}%\n                        </span>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Color Presets */}\n                  <div>\n                    <Label className=\"text-xs mb-2 block\">Presets</Label>\n                    <div className=\"grid grid-cols-5 gap-1\">\n                      {COLOR_PRESETS.map((preset) => (\n                        <button\n                          key={preset}\n                          onClick={() => onChange(preset)}\n                          className=\"w-full aspect-square rounded border border-gray-200 hover:scale-110 transition-transform\"\n                          style={{ backgroundColor: preset }}\n                          title={preset}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Gradient Editor (placeholder) */}\n              {colorMode === 'gradient' && (\n                <div className=\"text-xs text-gray-500 text-center py-4\">\n                  Gradient editor coming soon\n                </div>\n              )}\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        {/* Hex Input */}\n        <Input\n          value={value || ''}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder=\"#000000\"\n          className=\"flex-1 h-9 text-xs font-mono\"\n        />\n\n        {/* Eyedropper (future) */}\n        <Button variant=\"outline\" size=\"icon\" className=\"h-9 w-9\" disabled>\n          <Pipette className=\"h-4 w-4\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Link, Unlink } from 'lucide-react';\nimport { AdvancedColorPicker } from './AdvancedColorPicker';\n\ninterface BorderValue {\n  width: number;\n  style: string;\n  color: string;\n  radius: {\n    topLeft: number;\n    topRight: number;\n    bottomRight: number;\n    bottomLeft: number;\n  };\n}\n\ninterface BorderEditorProps {\n  value: Partial<BorderValue>;\n  onChange: (value: Partial<BorderValue>) => void;\n}\n\nconst BORDER_STYLES = [\n  { value: 'solid', label: 'Solid' },\n  { value: 'dashed', label: 'Dashed' },\n  { value: 'dotted', label: 'Dotted' },\n  { value: 'double', label: 'Double' },\n  { value: 'groove', label: 'Groove' },\n  { value: 'ridge', label: 'Ridge' },\n  { value: 'inset', label: 'Inset' },\n  { value: 'outset', label: 'Outset' },\n];\n\nconst RADIUS_PRESETS = [0, 4, 8, 12, 16, 24, 32, 9999];\n\nexport function BorderEditor({ value, onChange }: BorderEditorProps) {\n  const [linkedRadius, setLinkedRadius] = useState(true);\n\n  const radius = value.radius || { topLeft: 0, topRight: 0, bottomRight: 0, bottomLeft: 0 };\n\n  const handleRadiusChange = (corner: keyof typeof radius, newValue: number) => {\n    if (linkedRadius) {\n      onChange({\n        ...value,\n        radius: {\n          topLeft: newValue,\n          topRight: newValue,\n          bottomRight: newValue,\n          bottomLeft: newValue,\n        },\n      });\n    } else {\n      onChange({\n        ...value,\n        radius: { ...radius, [corner]: newValue },\n      });\n    }\n  };\n\n  const handlePresetRadius = (preset: number) => {\n    onChange({\n      ...value,\n      radius: {\n        topLeft: preset,\n        topRight: preset,\n        bottomRight: preset,\n        bottomLeft: preset,\n      },\n    });\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Border Width & Style */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium\">Width</Label>\n          <div className=\"flex items-center gap-2\">\n            <Input\n              type=\"number\"\n              min=\"0\"\n              max=\"20\"\n              value={value.width || 0}\n              onChange={(e) => onChange({ width: parseInt(e.target.value) || 0 })}\n              className=\"h-8 text-xs\"\n            />\n            <span className=\"text-xs text-gray-500\">px</span>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium\">Style</Label>\n          <select\n            value={value.style || 'solid'}\n            onChange={(e) => onChange({ style: e.target.value })}\n            className=\"w-full h-8 px-2 text-xs border rounded-md\"\n          >\n            {BORDER_STYLES.map((style) => (\n              <option key={style.value} value={style.value}>\n                {style.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Border Color */}\n      <AdvancedColorPicker\n        label=\"Border Color\"\n        value={value.color || '#000000'}\n        onChange={(color) => onChange({ color })}\n        showOpacity={true}\n      />\n\n      {/* Border Radius Visual Editor */}\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <Label className=\"text-xs font-medium\">Border Radius</Label>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setLinkedRadius(!linkedRadius)}\n            className=\"h-6 px-2\"\n          >\n            {linkedRadius ? (\n              <Link className=\"h-3 w-3\" />\n            ) : (\n              <Unlink className=\"h-3 w-3\" />\n            )}\n          </Button>\n        </div>\n\n        {/* Visual Radius Editor */}\n        <div className=\"relative border-2 border-dashed border-gray-300 rounded-lg p-4\">\n          {/* Top Left */}\n          <div className=\"absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2\">\n            <Input\n              type=\"number\"\n              min=\"0\"\n              value={radius.topLeft}\n              onChange={(e) => handleRadiusChange('topLeft', parseInt(e.target.value) || 0)}\n              className=\"w-14 h-7 text-xs text-center\"\n            />\n          </div>\n\n          {/* Top Right */}\n          <div className=\"absolute top-0 right-0 translate-x-1/2 -translate-y-1/2\">\n            <Input\n              type=\"number\"\n              min=\"0\"\n              value={radius.topRight}\n              onChange={(e) => handleRadiusChange('topRight', parseInt(e.target.value) || 0)}\n              className=\"w-14 h-7 text-xs text-center\"\n            />\n          </div>\n\n          {/* Bottom Right */}\n          <div className=\"absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2\">\n            <Input\n              type=\"number\"\n              min=\"0\"\n              value={radius.bottomRight}\n              onChange={(e) => handleRadiusChange('bottomRight', parseInt(e.target.value) || 0)}\n              className=\"w-14 h-7 text-xs text-center\"\n            />\n          </div>\n\n          {/* Bottom Left */}\n          <div className=\"absolute bottom-0 left-0 -translate-x-1/2 translate-y-1/2\">\n            <Input\n              type=\"number\"\n              min=\"0\"\n              value={radius.bottomLeft}\n              onChange={(e) => handleRadiusChange('bottomLeft', parseInt(e.target.value) || 0)}\n              className=\"w-14 h-7 text-xs text-center\"\n            />\n          </div>\n\n          {/* Preview Box */}\n          <div\n            className=\"w-full h-24 bg-gradient-to-br from-blue-100 to-purple-100 border-4 border-blue-500 transition-all\"\n            style={{\n              borderTopLeftRadius: `${radius.topLeft}px`,\n              borderTopRightRadius: `${radius.topRight}px`,\n              borderBottomRightRadius: `${radius.bottomRight}px`,\n              borderBottomLeftRadius: `${radius.bottomLeft}px`,\n              borderWidth: `${value.width || 0}px`,\n              borderStyle: value.style || 'solid',\n              borderColor: value.color || '#3B82F6',\n            }}\n          />\n        </div>\n\n        {/* Radius Presets */}\n        <div className=\"flex flex-wrap gap-1\">\n          {RADIUS_PRESETS.map((preset) => (\n            <Button\n              key={preset}\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => handlePresetRadius(preset)}\n              className=\"h-7 px-2 text-xs\"\n            >\n              {preset === 9999 ? '∞' : preset}\n            </Button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\nimport { LayoutEditor } from './LayoutEditor';\nimport { VisualSpacingEditor } from './VisualSpacingEditor';\nimport { BorderEditor } from './BorderEditor';\nimport { AdvancedColorPicker } from './AdvancedColorPicker';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Save } from 'lucide-react';\n\ninterface StylePanelProps {\n  selectedBlock: any;\n  onStyleChange: (styles: Record<string, any>) => void;\n}\n\nexport function StylePanel({ selectedBlock, onStyleChange }: StylePanelProps) {\n  // Track pending changes locally before saving\n  const [pendingStyles, setPendingStyles] = useState<Record<string, any>>({});\n  const [hasChanges, setHasChanges] = useState(false);\n  \n  // Reset pending styles when selected block changes\n  useEffect(() => {\n    setPendingStyles({});\n    setHasChanges(false);\n  }, [selectedBlock?.id]);\n  \n  if (!selectedBlock) {\n    return (\n      <div className=\"p-4 text-center text-sm text-gray-500\">\n        Select a block to edit its styles\n      </div>\n    );\n  }\n\n  const currentStyles = selectedBlock.style || {};\n  // Merge current styles with pending changes for display\n  const displayStyles = { ...currentStyles, ...pendingStyles };\n\n  // console.log('StylePanel - selectedBlock:', selectedBlock);\n  // console.log('StylePanel - currentStyles:', currentStyles);\n  // console.log('StylePanel - pendingStyles:', pendingStyles);\n\n  // Update pending styles (not saved yet)\n  const handleStyleUpdate = (updates: Record<string, any>) => {\n    console.log('StylePanel - handleStyleUpdate called with:', updates);\n    setPendingStyles(prev => ({ ...prev, ...updates }));\n    setHasChanges(true);\n  };\n\n  // Save all pending changes\n  const handleSaveStyles = () => {\n    if (!hasChanges) return;\n    console.log('StylePanel - Saving pending styles:', pendingStyles);\n    const mergedStyles = { ...currentStyles, ...pendingStyles };\n    console.log('StylePanel - merged styles:', mergedStyles);\n    onStyleChange(mergedStyles);\n    setPendingStyles({});\n    setHasChanges(false);\n  };\n\n  // Discard pending changes\n  const handleDiscardChanges = () => {\n    setPendingStyles({});\n    setHasChanges(false);\n  };\n\n  return (\n    <div className=\"space-y-3 p-3\">\n      {/* Save/Discard Actions Bar */}\n      {hasChanges && (\n        <div className=\"sticky top-0 z-10 bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Save className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-xs font-medium text-blue-900\">Unsaved changes</span>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={handleDiscardChanges}\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 text-xs\"\n            >\n              Discard\n            </Button>\n            <Button\n              onClick={handleSaveStyles}\n              size=\"sm\"\n              className=\"h-7 text-xs\"\n            >\n              Save\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Style Editors */}\n      <Accordion type=\"multiple\" defaultValue={['layout', 'spacing', 'typography', 'colors']} className=\"w-full\">\n        {/* Layout Section */}\n        <AccordionItem value=\"layout\">\n          <AccordionTrigger className=\"text-sm font-semibold\">🎨 Layout</AccordionTrigger>\n          <AccordionContent>\n            <LayoutEditor\n              value={{\n                display: displayStyles.display,\n                flexDirection: displayStyles.flexDirection,\n                justifyContent: displayStyles.justifyContent,\n                alignItems: displayStyles.alignItems,\n                gap: displayStyles.gap,\n                gridTemplateColumns: displayStyles.gridTemplateColumns,\n                gridTemplateRows: displayStyles.gridTemplateRows,\n                flexWrap: displayStyles.flexWrap,\n              }}\n              onChange={(layout) => handleStyleUpdate(layout)}\n            />\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Spacing Section */}\n        <AccordionItem value=\"spacing\">\n          <AccordionTrigger className=\"text-sm font-semibold\">📐 Spacing</AccordionTrigger>\n          <AccordionContent>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs font-medium mb-2 block\">Padding</Label>\n                <VisualSpacingEditor\n                  type=\"padding\"\n                  value={{\n                    top: displayStyles.paddingTop || 0,\n                    right: displayStyles.paddingRight || 0,\n                    bottom: displayStyles.paddingBottom || 0,\n                    left: displayStyles.paddingLeft || 0,\n                  }}\n                  onChange={(padding) =>\n                    handleStyleUpdate({\n                      paddingTop: padding.top,\n                      paddingRight: padding.right,\n                      paddingBottom: padding.bottom,\n                      paddingLeft: padding.left,\n                    })\n                  }\n                />\n              </div>\n              <div>\n                <Label className=\"text-xs font-medium mb-2 block\">Margin</Label>\n                <VisualSpacingEditor\n                  type=\"margin\"\n                  value={{\n                    top: displayStyles.marginTop || 0,\n                    right: displayStyles.marginRight || 0,\n                    bottom: displayStyles.marginBottom || 0,\n                    left: displayStyles.marginLeft || 0,\n                  }}\n                  onChange={(margin) =>\n                    handleStyleUpdate({\n                      marginTop: margin.top,\n                      marginRight: margin.right,\n                      marginBottom: margin.bottom,\n                      marginLeft: margin.left,\n                    })\n                  }\n                />\n              </div>\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Typography Section */}\n        <AccordionItem value=\"typography\">\n          <AccordionTrigger className=\"text-sm font-semibold\">✍️ Typography</AccordionTrigger>\n          <AccordionContent>\n            <div className=\"space-y-4\">\n              {/* Font Size */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Font Size</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    min=\"8\"\n                    max=\"72\"\n                    value={parseInt(displayStyles.fontSize || 16)}\n                    onChange={(e) => handleStyleUpdate({ fontSize: `${e.target.value}px` })}\n                    className=\"h-8 text-xs\"\n                  />\n                  <span className=\"text-xs text-gray-500\">px</span>\n                </div>\n              </div>\n\n              {/* Font Weight */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Font Weight</Label>\n                <select\n                  value={displayStyles.fontWeight || 'normal'}\n                  onChange={(e) => handleStyleUpdate({ fontWeight: e.target.value })}\n                  className=\"w-full h-8 px-2 text-xs border rounded-md\"\n                >\n                  <option value=\"100\">Thin</option>\n                  <option value=\"300\">Light</option>\n                  <option value=\"normal\">Normal</option>\n                  <option value=\"500\">Medium</option>\n                  <option value=\"600\">Semibold</option>\n                  <option value=\"bold\">Bold</option>\n                  <option value=\"800\">Extra Bold</option>\n                </select>\n              </div>\n\n              {/* Line Height */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Line Height</Label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"3\"\n                  step=\"0.1\"\n                  value={parseFloat(displayStyles.lineHeight || 1.5)}\n                  onChange={(e) => handleStyleUpdate({ lineHeight: e.target.value })}\n                  className=\"h-8 text-xs\"\n                />\n              </div>\n\n              {/* Text Align */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Text Align</Label>\n                <div className=\"grid grid-cols-4 gap-1\">\n                  {['left', 'center', 'right', 'justify'].map((align) => (\n                    <Button\n                      key={align}\n                      variant={displayStyles.textAlign === align ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => handleStyleUpdate({ textAlign: align })}\n                      className=\"h-8 text-xs capitalize\"\n                    >\n                      {align}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Colors Section */}\n        <AccordionItem value=\"colors\">\n          <AccordionTrigger className=\"text-sm font-semibold\">🎨 Colors</AccordionTrigger>\n          <AccordionContent>\n            <div className=\"space-y-4\">\n              <AdvancedColorPicker\n                label=\"Text Color\"\n                value={displayStyles.color || '#000000'}\n                onChange={(color) => handleStyleUpdate({ color })}\n                showOpacity={true}\n              />\n              <AdvancedColorPicker\n                label=\"Background Color\"\n                value={displayStyles.backgroundColor || '#ffffff'}\n                onChange={(backgroundColor) => handleStyleUpdate({ backgroundColor })}\n                showOpacity={true}\n              />\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Border Section */}\n        <AccordionItem value=\"border\">\n          <AccordionTrigger className=\"text-sm font-semibold\">🔲 Border</AccordionTrigger>\n          <AccordionContent>\n            <BorderEditor\n              value={{\n                width: parseInt(displayStyles.borderWidth || 0),\n                style: displayStyles.borderStyle || 'solid',\n                color: displayStyles.borderColor || '#000000',\n                radius: {\n                  topLeft: parseInt(displayStyles.borderTopLeftRadius || 0),\n                  topRight: parseInt(displayStyles.borderTopRightRadius || 0),\n                  bottomRight: parseInt(displayStyles.borderBottomRightRadius || 0),\n                  bottomLeft: parseInt(displayStyles.borderBottomLeftRadius || 0),\n                },\n              }}\n              onChange={(border) =>\n                handleStyleUpdate({\n                  borderWidth: `${border.width}px`,\n                  borderStyle: border.style,\n                  borderColor: border.color,\n                  borderTopLeftRadius: `${border.radius?.topLeft || 0}px`,\n                  borderTopRightRadius: `${border.radius?.topRight || 0}px`,\n                  borderBottomRightRadius: `${border.radius?.bottomRight || 0}px`,\n                  borderBottomLeftRadius: `${border.radius?.bottomLeft || 0}px`,\n                })\n              }\n            />\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Effects Section */}\n        <AccordionItem value=\"effects\">\n          <AccordionTrigger className=\"text-sm font-semibold\">✨ Effects</AccordionTrigger>\n          <AccordionContent>\n            <div className=\"space-y-4\">\n              {/* Opacity */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Opacity</Label>\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={parseFloat(displayStyles.opacity || 1) * 100}\n                    onChange={(e) => handleStyleUpdate({ opacity: parseInt(e.target.value) / 100 })}\n                    className=\"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <span className=\"text-xs w-10 text-right\">\n                    {Math.round(parseFloat(displayStyles.opacity || 1) * 100)}%\n                  </span>\n                </div>\n              </div>\n\n              {/* Box Shadow */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Shadow</Label>\n                <select\n                  value={displayStyles.boxShadow || 'none'}\n                  onChange={(e) => handleStyleUpdate({ boxShadow: e.target.value })}\n                  className=\"w-full h-8 px-2 text-xs border rounded-md\"\n                >\n                  <option value=\"none\">None</option>\n                  <option value=\"0 1px 2px 0 rgb(0 0 0 / 0.05)\">Small</option>\n                  <option value=\"0 4px 6px -1px rgb(0 0 0 / 0.1)\">Medium</option>\n                  <option value=\"0 10px 15px -3px rgb(0 0 0 / 0.1)\">Large</option>\n                  <option value=\"0 20px 25px -5px rgb(0 0 0 / 0.1)\">Extra Large</option>\n                  <option value=\"0 25px 50px -12px rgb(0 0 0 / 0.25)\">2XL</option>\n                </select>\n              </div>\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Size Section */}\n        <AccordionItem value=\"size\">\n          <AccordionTrigger className=\"text-sm font-semibold\">📏 Size</AccordionTrigger>\n          <AccordionContent>\n            <div className=\"space-y-4\">\n              {/* Width */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Width</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    value={displayStyles.width || 'auto'}\n                    onChange={(e) => handleStyleUpdate({ width: e.target.value })}\n                    placeholder=\"auto, 100%, 300px\"\n                    className=\"h-8 text-xs\"\n                  />\n                </div>\n              </div>\n\n              {/* Height */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium\">Height</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    value={displayStyles.height || 'auto'}\n                    onChange={(e) => handleStyleUpdate({ height: e.target.value })}\n                    placeholder=\"auto, 100%, 300px\"\n                    className=\"h-8 text-xs\"\n                  />\n                </div>\n              </div>\n\n              {/* Min/Max Width */}\n              <div className=\"grid grid-cols-2 gap-2\">\n                <div className=\"space-y-2\">\n                  <Label className=\"text-xs font-medium\">Min Width</Label>\n                  <Input\n                    value={displayStyles.minWidth || ''}\n                    onChange={(e) => handleStyleUpdate({ minWidth: e.target.value })}\n                    placeholder=\"0\"\n                    className=\"h-8 text-xs\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label className=\"text-xs font-medium\">Max Width</Label>\n                  <Input\n                    value={displayStyles.maxWidth || ''}\n                    onChange={(e) => handleStyleUpdate({ maxWidth: e.target.value })}\n                    placeholder=\"none\"\n                    className=\"h-8 text-xs\"\n                  />\n                </div>\n              </div>\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n      </Accordion>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Trash2, Download, Filter } from 'lucide-react';\nimport { pageBuilderLogger } from '../utils/pageBuilderLogger';\n\n/**\n * Developer Log Panel\n * Shows real-time logs of page builder operations\n * Only visible in development mode\n */\nexport function DevLogPanel() {\n  const [logs, setLogs] = useState(pageBuilderLogger.getLogs());\n  const [filter, setFilter] = useState<string>('all');\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  // Auto refresh logs\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      setLogs(pageBuilderLogger.getLogs());\n    }, 500);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh]);\n\n  const handleClearLogs = () => {\n    pageBuilderLogger.clearLogs();\n    setLogs([]);\n  };\n\n  const handleExportLogs = () => {\n    const json = pageBuilderLogger.exportLogs();\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `pagebuilder-logs-${new Date().toISOString()}.json`;\n    a.click();\n  };\n\n  const filteredLogs = filter === 'all' \n    ? logs \n    : logs.filter(log => log.level === filter);\n\n  const getLevelColor = (level: string) => {\n    const colors: Record<string, string> = {\n      debug: 'text-gray-500',\n      info: 'text-blue-500',\n      success: 'text-green-500',\n      warning: 'text-yellow-500',\n      error: 'text-red-500',\n    };\n    return colors[level] || 'text-gray-500';\n  };\n\n  const getLevelBg = (level: string) => {\n    const colors: Record<string, string> = {\n      debug: 'bg-gray-50',\n      info: 'bg-blue-50',\n      success: 'bg-green-50',\n      warning: 'bg-yellow-50',\n      error: 'bg-red-50',\n    };\n    return colors[level] || 'bg-gray-50';\n  };\n\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-white\">\n      {/* Header */}\n      <div className=\"p-3 border-b bg-gray-50\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"text-sm font-semibold text-gray-900\">🔍 Dev Logs</h3>\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setAutoRefresh(!autoRefresh)}\n              className={`h-7 text-xs ${autoRefresh ? 'bg-green-100' : ''}`}\n            >\n              {autoRefresh ? '⏸️ Pause' : '▶️ Resume'}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleExportLogs}\n              className=\"h-7 text-xs\"\n            >\n              <Download className=\"w-3 h-3\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleClearLogs}\n              className=\"h-7 text-xs\"\n            >\n              <Trash2 className=\"w-3 h-3\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex items-center gap-1\">\n          {['all', 'debug', 'info', 'success', 'warning', 'error'].map((f) => (\n            <Button\n              key={f}\n              variant={filter === f ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setFilter(f)}\n              className=\"h-6 text-xs px-2\"\n            >\n              {f}\n            </Button>\n          ))}\n        </div>\n\n        <div className=\"mt-2 text-xs text-gray-500\">\n          Total: {logs.length} | Filtered: {filteredLogs.length}\n        </div>\n      </div>\n\n      {/* Logs */}\n      <ScrollArea className=\"flex-1\">\n        <div className=\"p-2 space-y-1\">\n          {filteredLogs.length === 0 ? (\n            <div className=\"text-center text-xs text-gray-400 py-8\">\n              No logs to display\n            </div>\n          ) : (\n            filteredLogs.map((log, index) => (\n              <div\n                key={index}\n                className={`p-2 rounded text-xs ${getLevelBg(log.level)} border border-gray-200`}\n              >\n                <div className=\"flex items-start justify-between gap-2 mb-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className={`font-semibold ${getLevelColor(log.level)}`}>\n                      {log.level.toUpperCase()}\n                    </span>\n                    <span className=\"font-medium text-gray-700\">\n                      [{log.operation}]\n                    </span>\n                  </div>\n                  <span className=\"text-gray-400 text-[10px]\">\n                    {log.timestamp.toLocaleTimeString()}\n                  </span>\n                </div>\n                <div className=\"text-gray-600 mb-1\">{log.message}</div>\n                {log.data && (\n                  <details className=\"mt-1\">\n                    <summary className=\"cursor-pointer text-gray-500 hover:text-gray-700\">\n                      View data\n                    </summary>\n                    <pre className=\"mt-1 p-2 bg-gray-100 rounded text-[10px] overflow-x-auto\">\n                      {JSON.stringify(log.data, null, 2)}\n                    </pre>\n                  </details>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '../../../ui/button';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '../../../ui/tabs';\nimport { Input } from '../../../ui/input';\nimport { Label } from '../../../ui/label';\nimport { Textarea } from '../../../ui/textarea';\nimport { X, Paintbrush, Settings, Trash2, Copy, Eye, EyeOff, Lock, Unlock, FileText, Code2, Zap } from 'lucide-react';\nimport { usePageState, usePageActions } from '../../PageBuilderProvider';\nimport { StylePanel } from '../StylePanel';\nimport { DevLogPanel } from '../DevLogPanel';\n\ninterface RightPanelProps {\n  device: 'desktop' | 'tablet' | 'mobile';\n  onClose: () => void;\n}\n\nexport function RightPanel({ device, onClose }: RightPanelProps) {\n  const [activeTab, setActiveTab] = useState<'style' | 'settings' | 'logs'>('style');\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [isLocked, setIsLocked] = useState(false);\n  const [customClasses, setCustomClasses] = useState('');\n  const [inlineStyles, setInlineStyles] = useState('');\n  \n  // Get selected block and operations from individual hooks\n  const { selectedBlockId, selectedBlock } = usePageState();\n  const { handleUpdateBlockStyle, handleBlockUpdate, handleBlockDelete } = usePageActions();\n\n  // Simplified style update handler\n  const handleStyleChange = (styles: Record<string, any>) => {\n    console.log('RightPanel - handleStyleChange called with:', styles);\n    console.log('RightPanel - selectedBlockId:', selectedBlockId);\n    if (!selectedBlockId) return;\n    handleUpdateBlockStyle(selectedBlockId, styles);\n  };\n\n  // Handle block deletion with confirmation\n  const handleDelete = () => {\n    if (!selectedBlockId) return;\n    if (showDeleteConfirm) {\n      handleBlockDelete(selectedBlockId);\n      setShowDeleteConfirm(false);\n    } else {\n      setShowDeleteConfirm(true);\n      // Auto-hide confirmation after 3 seconds\n      setTimeout(() => setShowDeleteConfirm(false), 3000);\n    }\n  };\n\n  // Handle block duplication\n  const handleDuplicate = () => {\n    if (!selectedBlockId || !selectedBlock) return;\n    // TODO: Implement duplication in PageBuilderContext\n    console.log('Duplicate block:', selectedBlockId);\n    // For now, just log - will implement full duplication later\n  };\n\n  // Handle content update\n  const handleContentChange = (newContent: any) => {\n    if (!selectedBlockId || !selectedBlock) return;\n    handleBlockUpdate(selectedBlockId, newContent, selectedBlock.style);\n  };\n\n  // Toggle lock state\n  const toggleLock = () => {\n    setIsLocked(!isLocked);\n  };\n\n  // Handle custom classes update\n  const handleCustomClassesChange = (value: string) => {\n    setCustomClasses(value);\n    if (!selectedBlockId || !selectedBlock) return;\n    handleUpdateBlockStyle(selectedBlockId, { customClasses: value });\n  };\n\n  // Handle inline styles update\n  const handleInlineStylesChange = (value: string) => {\n    setInlineStyles(value);\n    if (!selectedBlockId || !selectedBlock) return;\n    handleUpdateBlockStyle(selectedBlockId, { inlineStyles: value });\n  };\n\n  // Initialize custom classes and styles when block changes\n  useEffect(() => {\n    if (selectedBlock?.style) {\n      setCustomClasses(selectedBlock.style.customClasses || '');\n      setInlineStyles(selectedBlock.style.inlineStyles || '');\n    } else {\n      setCustomClasses('');\n      setInlineStyles('');\n    }\n  }, [selectedBlockId, selectedBlock]);\n\n  return (\n    <div className=\"w-80 bg-white border-l border-gray-200 flex flex-col h-full overflow-hidden\">\n      {/* Panel Header */}\n      <div className=\"border-b border-gray-200 flex-shrink-0\">\n        <div className=\"h-12 flex items-center justify-between px-4\">\n          <h2 className=\"font-semibold\">Properties</h2>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n        \n        {/* Action Buttons */}\n        {selectedBlockId && (\n          <div className=\"px-4 pb-3 flex gap-2\">\n            <Button\n              onClick={toggleLock}\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"flex-1\"\n              title={isLocked ? 'Unlock block' : 'Lock block'}\n            >\n              {isLocked ? <Lock className=\"w-3.5 h-3.5 mr-1.5\" /> : <Unlock className=\"w-3.5 h-3.5 mr-1.5\" />}\n              <span className=\"text-xs\">{isLocked ? 'Locked' : 'Lock'}</span>\n            </Button>\n            <Button\n              onClick={handleDuplicate}\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"flex-1\"\n              title=\"Duplicate block\"\n              disabled={isLocked}\n            >\n              <Copy className=\"w-3.5 h-3.5 mr-1.5\" />\n              <span className=\"text-xs\">Duplicate</span>\n            </Button>\n            <Button\n              onClick={handleDelete}\n              size=\"sm\"\n              variant={showDeleteConfirm ? 'destructive' : 'outline'}\n              className=\"flex-1\"\n              title=\"Delete block\"\n              disabled={isLocked}\n            >\n              <Trash2 className=\"w-3.5 h-3.5 mr-1.5\" />\n              <span className=\"text-xs\">{showDeleteConfirm ? 'Confirm?' : 'Delete'}</span>\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {selectedBlockId ? (\n        <>\n          {/* Device Indicator */}\n          <div className=\"px-4 py-2 bg-gray-50 border-b border-gray-200 flex-shrink-0\">\n            <p className=\"text-xs text-gray-500\">\n              Editing for: <span className=\"font-semibold capitalize\">{device}</span>\n            </p>\n          </div>\n\n          {/* Tabs */}\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as any)} className=\"flex-1 flex flex-col min-h-0\">\n            <TabsList className=\"w-full justify-start rounded-none border-b flex-shrink-0\">\n              <TabsTrigger value=\"style\" className=\"flex-1 gap-2\">\n                <Paintbrush className=\"w-4 h-4\" />\n                Style\n              </TabsTrigger>\n              <TabsTrigger value=\"settings\" className=\"flex-1 gap-2\">\n                <Settings className=\"w-4 h-4\" />\n                Settings\n              </TabsTrigger>\n              <TabsTrigger value=\"logs\" className=\"flex-1 gap-2\">\n                <FileText className=\"w-4 h-4\" />\n                Logs\n              </TabsTrigger>\n            </TabsList>\n\n            <div className=\"flex-1 overflow-y-auto min-h-0\">\n              {/* Style Tab */}\n              <TabsContent value=\"style\" className=\"mt-0 h-full\">\n                <StylePanel\n                  selectedBlock={selectedBlock}\n                  onStyleChange={handleStyleChange}\n                />\n              </TabsContent>\n\n              {/* Settings Tab */}\n              <TabsContent value=\"settings\" className=\"mt-0 p-4 h-full overflow-y-auto\">\n                <div className=\"space-y-6\">\n                  {/* Block Information */}\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                      <Settings className=\"w-4 h-4\" />\n                      Block Information\n                    </h3>\n                    <div className=\"space-y-2 text-sm bg-gray-50 p-3 rounded-lg\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-gray-600\">ID:</span>\n                        <span className=\"font-mono text-xs bg-white px-2 py-1 rounded border\">\n                          {selectedBlockId}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-gray-600\">Type:</span>\n                        <span className=\"font-medium capitalize bg-primary/10 text-primary px-2 py-1 rounded text-xs\">\n                          {selectedBlock?.type?.replace(/_/g, ' ') || 'Unknown'}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-gray-600\">Order:</span>\n                        <span className=\"font-medium\">#{selectedBlock?.order ?? 'N/A'}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-gray-600\">Status:</span>\n                        <span className={`text-xs px-2 py-1 rounded ${isLocked ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>\n                          {isLocked ? 'Locked' : 'Editable'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Quick Content Editor */}\n                  {selectedBlock?.content && !isLocked && (\n                    <div className=\"space-y-3\">\n                      <h3 className=\"text-sm font-semibold text-gray-900\">Quick Edit Content</h3>\n                      <div className=\"space-y-3\">\n                        {/* Text content */}\n                        {selectedBlock.content.text !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-text\" className=\"text-xs\">Text Content</Label>\n                            <Textarea\n                              id=\"block-text\"\n                              value={selectedBlock.content.text || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, text: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              rows={3}\n                              placeholder=\"Enter text...\"\n                            />\n                          </div>\n                        )}\n                        \n                        {/* Title */}\n                        {selectedBlock.content.title !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-title\" className=\"text-xs\">Title</Label>\n                            <Input\n                              id=\"block-title\"\n                              value={selectedBlock.content.title || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, title: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              placeholder=\"Enter title...\"\n                            />\n                          </div>\n                        )}\n                        \n                        {/* Description */}\n                        {selectedBlock.content.description !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-description\" className=\"text-xs\">Description</Label>\n                            <Textarea\n                              id=\"block-description\"\n                              value={selectedBlock.content.description || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, description: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              rows={2}\n                              placeholder=\"Enter description...\"\n                            />\n                          </div>\n                        )}\n                        \n                        {/* URL/Link */}\n                        {selectedBlock.content.url !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-url\" className=\"text-xs\">URL</Label>\n                            <Input\n                              id=\"block-url\"\n                              type=\"url\"\n                              value={selectedBlock.content.url || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, url: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              placeholder=\"https://...\"\n                            />\n                          </div>\n                        )}\n                        \n                        {/* Product Slug (for PRODUCT_DETAIL block) */}\n                        {selectedBlock.content.productSlug !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-productSlug\" className=\"text-xs\">\n                              Product Slug <span className=\"text-red-500\">*</span>\n                            </Label>\n                            <Input\n                              id=\"block-productSlug\"\n                              value={selectedBlock.content.productSlug || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, productSlug: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              placeholder=\"product-slug-example\"\n                            />\n                            <p className=\"text-xs text-gray-500 mt-1\">\n                              Slug của sản phẩm cần hiển thị (vd: \"ao-thun-nam\")\n                            </p>\n                          </div>\n                        )}\n                        \n                        {/* Category ID (for PRODUCT_LIST block) */}\n                        {selectedBlock.content.categoryId !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-categoryId\" className=\"text-xs\">Category ID</Label>\n                            <Input\n                              id=\"block-categoryId\"\n                              value={selectedBlock.content.categoryId || ''}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, categoryId: e.target.value })}\n                              className=\"mt-1 text-sm\"\n                              placeholder=\"Optional category filter\"\n                            />\n                          </div>\n                        )}\n                        \n                        {/* Limit (for PRODUCT_LIST block) */}\n                        {selectedBlock.content.limit !== undefined && (\n                          <div>\n                            <Label htmlFor=\"block-limit\" className=\"text-xs\">Products Limit</Label>\n                            <Input\n                              id=\"block-limit\"\n                              type=\"number\"\n                              value={selectedBlock.content.limit || 12}\n                              onChange={(e) => handleContentChange({ ...selectedBlock.content, limit: parseInt(e.target.value) || 12 })}\n                              className=\"mt-1 text-sm\"\n                              min=\"1\"\n                              max=\"100\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Advanced Settings */}\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                      <Zap className=\"w-4 h-4\" />\n                      Advanced\n                    </h3>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                        <span className=\"text-xs text-gray-600\">Visibility</span>\n                        <Button size=\"sm\" variant=\"ghost\" className=\"h-7\">\n                          <Eye className=\"w-3 h-3 mr-1\" />\n                          <span className=\"text-xs\">Visible</span>\n                        </Button>\n                      </div>\n                      <div className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                        <span className=\"text-xs text-gray-600\">Animation</span>\n                        <Button size=\"sm\" variant=\"ghost\" className=\"h-7\">\n                          <span className=\"text-xs\">None</span>\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Custom CSS Classes */}\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                      <Code2 className=\"w-4 h-4\" />\n                      Custom CSS Classes\n                    </h3>\n                    <div>\n                      <Label htmlFor=\"custom-classes\" className=\"text-xs\">Tailwind Classes</Label>\n                      <Textarea\n                        id=\"custom-classes\"\n                        value={customClasses}\n                        onChange={(e) => handleCustomClassesChange(e.target.value)}\n                        placeholder=\"e.g., hover:shadow-lg hover:scale-105 transition-all duration-300\"\n                        className=\"mt-1 text-xs font-mono\"\n                        rows={3}\n                      />\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        💡 Add Tailwind classes for additional styling (space-separated)\n                      </p>\n                      {customClasses && (\n                        <div className=\"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\n                          <p className=\"text-xs font-semibold text-amber-900 mb-2\">Preview:</p>\n                          <div className=\"flex flex-wrap gap-1\">\n                            {customClasses.split(/\\s+/).filter(Boolean).map((cls, idx) => (\n                              <span key={idx} className=\"px-2 py-1 bg-amber-100 text-amber-800 rounded text-xs font-mono\">\n                                {cls}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Inline Styles */}\n                  <div className=\"space-y-3\">\n                    <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\n                      <Code2 className=\"w-4 h-4\" />\n                      Inline Styles (CSS)\n                    </h3>\n                    <div>\n                      <Label htmlFor=\"inline-styles\" className=\"text-xs\">CSS Properties</Label>\n                      <Textarea\n                        id=\"inline-styles\"\n                        value={inlineStyles}\n                        onChange={(e) => handleInlineStylesChange(e.target.value)}\n                        placeholder={`e.g., box-shadow: 0 10px 30px rgba(0,0,0,0.3);\\nbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);`}\n                        className=\"mt-1 text-xs font-mono\"\n                        rows={4}\n                      />\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        💡 Add inline CSS properties (semicolon-separated)\n                      </p>\n                      {inlineStyles && (\n                        <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                          <p className=\"text-xs font-semibold text-blue-900 mb-2\">Applied Styles:</p>\n                          <pre className=\"text-xs font-mono text-blue-800 overflow-x-auto\">\n                            {inlineStyles.split(';').filter(s => s.trim()).map((style, idx) => (\n                              <div key={idx}>{style.trim()};</div>\n                            ))}\n                          </pre>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* JSON Editor (Collapsible) */}\n                  {selectedBlock?.content && (\n                    <details className=\"space-y-3\">\n                      <summary className=\"text-sm font-semibold text-gray-900 cursor-pointer hover:text-primary\">\n                        JSON Editor (Advanced)\n                      </summary>\n                      <div className=\"bg-gray-900 text-gray-100 p-3 rounded-lg text-xs font-mono overflow-x-auto mt-2\">\n                        <pre className=\"whitespace-pre-wrap break-words\">\n                          {JSON.stringify(selectedBlock.content, null, 2)}\n                        </pre>\n                      </div>\n                    </details>\n                  )}\n\n                  {/* Help Text */}\n                  <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <p className=\"text-xs text-blue-800\">\n                      <strong>💡 Tip:</strong> Use the Style tab for visual customization. \n                      Lock the block to prevent accidental changes.\n                    </p>\n                  </div>\n                </div>\n              </TabsContent>\n\n              {/* Logs Tab */}\n              <TabsContent value=\"logs\" className=\"mt-0 h-full\">\n                <DevLogPanel />\n              </TabsContent>\n            </div>\n          </Tabs>\n        </>\n      ) : (\n        <div className=\"flex-1 flex items-center justify-center p-4\">\n          <p className=\"text-sm text-gray-500 text-center\">\n            Select a block to edit its properties\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { PageBuilderTopBar } from '../PageBuilderTopBar';\nimport { EditorCanvas } from './EditorCanvas';\nimport { EditorFooter } from './EditorFooter';\nimport { LeftPanel } from '../panels/LeftPanel/LeftPanel';\nimport { RightPanel } from '../panels/RightPanel/RightPanel';\nimport { usePageState, usePageActions, useUIState } from '../PageBuilderProvider';\nimport { useToast } from '@/hooks/use-toast';\nimport { UPDATE_PAGE } from '@/graphql/queries/pages';\nimport { UpdatePageInput, BlockType } from '@/types/page-builder';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { BLOCK_TYPES } from '@/constants/blockTypes';\n\ninterface FullScreenLayoutProps {\n  editorMode: 'visual' | 'code';\n  onModeChange: (mode: 'visual' | 'code') => void;\n  onExit: () => void;\n  onSave: () => void;\n}\n\nexport function FullScreenLayout({\n  editorMode,\n  onModeChange,\n  onExit,\n  onSave,\n}: FullScreenLayoutProps) {\n  const [device, setDevice] = useState<'desktop' | 'tablet' | 'mobile'>('desktop');\n  const [leftPanelOpen, setLeftPanelOpen] = useState(true);\n  const [rightPanelOpen, setRightPanelOpen] = useState(true);\n  \n  // Get block selection and loading state from context\n  const { selectedBlockId, loading, editingPage, setEditingPage } = usePageState();\n  const { handleSelectBlock, handleAddChildBlock, handleCloseAddChildDialog } = usePageActions();\n  const { showAddChildDialog, addChildParentId } = useUIState();\n  const { toast } = useToast();\n\n  // GraphQL mutation for updating page\n  const [updatePageMutation] = useMutation(UPDATE_PAGE);\n\n  // Handle saving global page settings\n  const handleSettingsSave = useCallback(async (settings: any) => {\n    if (!editingPage) {\n      toast({\n        title: 'Error',\n        description: 'No page selected',\n        type: 'error',\n      });\n      return;\n    }\n\n    try {\n      // Handle seoKeywords - can be string or array\n      const seoKeywordsArray = Array.isArray(settings.seoKeywords)\n        ? settings.seoKeywords\n        : settings.seoKeywords\n        ? settings.seoKeywords.split(',').map((k: string) => k.trim())\n        : [];\n\n      const updateInput: UpdatePageInput = {\n        title: settings.pageTitle,\n        slug: settings.pageSlug,\n        seoTitle: settings.seoTitle,\n        seoDescription: settings.seoDescription,\n        seoKeywords: seoKeywordsArray,\n      };\n\n      // For new pages (no ID), just update local state\n      if (!editingPage?.id) {\n        setEditingPage({\n          ...editingPage,\n          title: settings.pageTitle,\n          slug: settings.pageSlug,\n          seoTitle: settings.seoTitle,\n          seoDescription: settings.seoDescription,\n          seoKeywords: seoKeywordsArray,\n        });\n        toast({\n          title: 'Success',\n          description: 'Page settings updated',\n          type: 'success',\n        });\n        return;\n      }\n\n      // For existing pages, update via GraphQL\n      await updatePageMutation({\n        variables: {\n          id: editingPage.id,\n          input: updateInput,\n        },\n      });\n\n      // Also update local state\n      setEditingPage({\n        ...editingPage,\n        title: settings.pageTitle,\n        slug: settings.pageSlug,\n        seoTitle: settings.seoTitle,\n        seoDescription: settings.seoDescription,\n        seoKeywords: seoKeywordsArray,\n      });\n\n      toast({\n        title: 'Success',\n        description: 'Global settings saved successfully',\n        type: 'success',\n      });\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to save global settings',\n        type: 'error',\n      });\n      throw error;\n    }\n  }, [editingPage, updatePageMutation, setEditingPage, toast]);\n\n  return (\n    <div className=\"h-screen w-screen bg-gray-50 flex flex-col overflow-hidden\">\n      {/* Unified Top Bar - Consolidated PageBuilderHeader + EditorToolbar */}\n      <PageBuilderTopBar\n        editorMode={editorMode}\n        onModeChange={onModeChange}\n        device={device}\n        onDeviceChange={setDevice}\n        onSave={onSave}\n        onExit={onExit}\n        leftPanelOpen={leftPanelOpen}\n        onToggleLeftPanel={() => setLeftPanelOpen(!leftPanelOpen)}\n        rightPanelOpen={rightPanelOpen}\n        onToggleRightPanel={() => setRightPanelOpen(!rightPanelOpen)}\n        isLoading={loading}\n        onSettingsSave={handleSettingsSave}\n        showEditorControls={true}\n        showPageInfo={true}\n      />\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left Panel - Component Library */}\n        {leftPanelOpen && (\n          <LeftPanel\n            onClose={() => setLeftPanelOpen(false)}\n          />\n        )}\n\n        {/* Center Canvas */}\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          <EditorCanvas\n            editorMode={editorMode}\n            device={device}\n            selectedBlockId={selectedBlockId}\n            onSelectBlock={handleSelectBlock}\n          />\n        </div>\n\n        {/* Right Panel - Style & Settings */}\n        {rightPanelOpen && (\n          <RightPanel\n            device={device}\n            onClose={() => setRightPanelOpen(false)}\n          />\n        )}\n      </div>\n\n      {/* Bottom Footer */}\n      <EditorFooter\n        selectedBlockId={selectedBlockId}\n        device={device}\n      />\n      \n      {/* Add Child Block Dialog */}\n      <Dialog \n        open={showAddChildDialog} \n        onOpenChange={(open) => {\n          console.log(`[FullScreenLayout] Dialog onOpenChange:`, open);\n          if (!open) handleCloseAddChildDialog();\n        }}\n      >\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Add Child Block to Container</DialogTitle>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Select a block type to add to the container\n              {addChildParentId && ` (Parent: ${addChildParentId.substring(0, 8)}...)`}\n            </p>\n          </DialogHeader>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 py-4\">\n            {BLOCK_TYPES.map(({ type, label, icon: Icon, color }) => (\n              <Button\n                key={type}\n                variant=\"outline\"\n                className=\"h-auto p-4 flex flex-col items-center justify-center space-y-2 hover:border-blue-500\"\n                onClick={() => {\n                  console.log(`[FullScreenLayout] Block selected:`, type, 'parentId:', addChildParentId);\n                  if (addChildParentId) {\n                    handleAddChildBlock(addChildParentId, type);\n                  }\n                }}\n              >\n                <div className={`p-3 rounded-lg ${color}`}>\n                  <Icon size={24} />\n                </div>\n                <span className=\"text-sm font-medium text-center\">{label}</span>\n              </Button>\n            ))}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { FullScreenLayout } from './layout/FullScreenLayout';\nimport { PageBuilderProvider, usePageActions } from './PageBuilderProvider';\nimport type { PageBlock } from '@/types/page-builder';\nimport { pageBuilderLogger, LOG_OPERATIONS } from './utils/pageBuilderLogger';\n\ninterface FullScreenPageBuilderProps {\n  pageId?: string;\n  onExit?: () => void;\n  initialMode?: 'visual' | 'code';\n  initialBlocks?: PageBlock[];\n}\n\n/**\n * Internal component that uses the context\n */\nfunction FullScreenPageBuilderInternal({\n  onExit,\n  initialMode = 'visual',\n}: {\n  onExit?: () => void;\n  initialMode?: 'visual' | 'code';\n}) {\n  const router = useRouter();\n  const [editorMode, setEditorMode] = useState<'visual' | 'code'>(initialMode);\n  const { handlePageSave } = usePageActions();\n\n  const handleExit = useCallback(() => {\n    if (onExit) {\n      onExit();\n    } else {\n      router.back();\n    }\n  }, [onExit, router]);\n\n  const handleSave = useCallback(async () => {\n    try {\n      await handlePageSave();\n    } catch (error) {\n      pageBuilderLogger.error(LOG_OPERATIONS.PAGE_SAVE, 'Error saving page', { error });\n    }\n  }, [handlePageSave]);\n\n  return (\n    <FullScreenLayout\n      editorMode={editorMode}\n      onModeChange={setEditorMode}\n      onExit={handleExit}\n      onSave={handleSave}\n    />\n  );\n}\n\n/**\n * Main FullScreen PageBuilder component with Provider\n */\nexport function FullScreenPageBuilder({\n  pageId,\n  onExit,\n  initialMode = 'visual',\n  initialBlocks = [],\n}: FullScreenPageBuilderProps) {\n  return (\n    <PageBuilderProvider pageId={pageId}>\n      <FullScreenPageBuilderInternal\n        onExit={onExit}\n        initialMode={initialMode}\n      />\n    </PageBuilderProvider>\n  );\n}\n","'use client';\n\nimport React, { useMemo, useState, useEffect, useRef } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  ArrowUpDown,\n  ArrowUp,\n  ArrowDown,\n  MoreHorizontal,\n  Edit,\n  Eye,\n  Trash2,\n  ChevronLeft,\n  ChevronRight,\n  ChevronsLeft,\n  ChevronsRight,\n  Search,\n} from 'lucide-react';\nimport { Page, PageStatus } from '@/types/page-builder';\n\ninterface DataTableProps {\n  data: Page[];\n  isLoading: boolean;\n  onEdit: (id: string) => void;\n  onView: (slug: string) => void;\n  onDelete: (id: string) => Promise<void>;\n  onRefresh: () => void;\n}\n\ntype SortField = 'title' | 'slug' | 'status' | 'updatedAt';\ntype SortDirection = 'asc' | 'desc' | null;\n\nconst getStatusColor = (status: PageStatus) => {\n  switch (status) {\n    case PageStatus.PUBLISHED:\n      return 'bg-green-100 text-green-800';\n    case PageStatus.DRAFT:\n      return 'bg-yellow-100 text-yellow-800';\n    case PageStatus.ARCHIVED:\n      return 'bg-gray-100 text-gray-800';\n    default:\n      return 'bg-gray-100 text-gray-800';\n  }\n};\n\nconst getStatusVariant = (status: PageStatus): 'default' | 'secondary' | 'destructive' | 'outline' => {\n  switch (status) {\n    case PageStatus.PUBLISHED:\n      return 'default';\n    case PageStatus.DRAFT:\n      return 'secondary';\n    case PageStatus.ARCHIVED:\n      return 'outline';\n    default:\n      return 'outline';\n  }\n};\n\nexport function DataTable({\n  data,\n  isLoading,\n  onEdit,\n  onView,\n  onDelete,\n  onRefresh,\n}: DataTableProps) {\n  // Create refs to track if component is mounted\n  const isMountedRef = useRef(false);\n  \n  const [globalFilter, setGlobalFilter] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [sortField, setSortField] = useState<SortField>('updatedAt');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [deleteId, setDeleteId] = useState<string | null>(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\n  // Ensure dialog NEVER shows on initial mount\n  useEffect(() => {\n    if (!isMountedRef.current) {\n      isMountedRef.current = true;\n      // Force dialog to be closed on mount\n      setDeleteId(null);\n      setShowDeleteDialog(false);\n    }\n  }, []);\n\n  // Filter data\n  const filteredData = useMemo(() => {\n    let result = data;\n\n    // Status filter\n    if (statusFilter !== 'all') {\n      result = result.filter(page => page.status === statusFilter);\n    }\n\n    // Global search filter\n    if (globalFilter) {\n      const searchLower = globalFilter.toLowerCase();\n      result = result.filter(page =>\n        (page.title?.toLowerCase().includes(searchLower) ||\n        page.slug?.toLowerCase().includes(searchLower))\n      );\n    }\n\n    return result;\n  }, [data, statusFilter, globalFilter]);\n\n  // Sort data\n  const sortedData = useMemo(() => {\n    const sorted = [...filteredData];\n\n    if (sortDirection && sortField) {\n      sorted.sort((a, b) => {\n        let aVal: any = a[sortField as keyof Page];\n        let bVal: any = b[sortField as keyof Page];\n\n        // Handle dates\n        if (sortField === 'updatedAt') {\n          aVal = aVal ? new Date(aVal).getTime() : 0;\n          bVal = bVal ? new Date(bVal).getTime() : 0;\n        }\n\n        // Handle strings\n        if (typeof aVal === 'string') {\n          aVal = aVal.toLowerCase();\n        }\n        if (typeof bVal === 'string') {\n          bVal = bVal.toLowerCase();\n        }\n\n        if (aVal < bVal) {\n          return sortDirection === 'asc' ? -1 : 1;\n        }\n        if (aVal > bVal) {\n          return sortDirection === 'asc' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n\n    return sorted;\n  }, [filteredData, sortField, sortDirection]);\n\n  // Paginate data\n  const paginatedData = useMemo(() => {\n    const start = pageIndex * pageSize;\n    return sortedData.slice(start, start + pageSize);\n  }, [sortedData, pageIndex, pageSize]);\n\n  const totalPages = Math.ceil(sortedData.length / pageSize);\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      // Cycle through: asc -> desc -> null -> asc\n      if (sortDirection === 'asc') {\n        setSortDirection('desc');\n      } else if (sortDirection === 'desc') {\n        setSortDirection(null);\n      } else {\n        setSortDirection('asc');\n      }\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n    setPageIndex(0);\n  };\n\n  const getSortIcon = (field: SortField) => {\n    if (sortField !== field) {\n      return <ArrowUpDown className=\"ml-2 h-4 w-4 opacity-40\" />;\n    }\n    if (sortDirection === 'asc') {\n      return <ArrowUp className=\"ml-2 h-4 w-4\" />;\n    }\n    if (sortDirection === 'desc') {\n      return <ArrowDown className=\"ml-2 h-4 w-4\" />;\n    }\n    return <ArrowUpDown className=\"ml-2 h-4 w-4 opacity-40\" />;\n  };\n\n  const handleDelete = async () => {\n    if (!deleteId) return;\n    setIsDeleting(true);\n    try {\n      await onDelete(deleteId);\n      setDeleteId(null);\n      onRefresh();\n    } catch (error) {\n      console.error('Error deleting page:', error);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Filters */}\n        <div className=\"flex gap-4 flex-col sm:flex-row\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n            <Input\n              placeholder=\"Search title or slug...\"\n              value={globalFilter}\n              onChange={(e) => {\n                setGlobalFilter(e.target.value);\n                setPageIndex(0);\n              }}\n              className=\"pl-10\"\n            />\n          </div>\n\n          <Select value={statusFilter} onValueChange={(value) => {\n            setStatusFilter(value);\n            setPageIndex(0);\n          }}>\n            <SelectTrigger className=\"w-full sm:w-[150px]\">\n              <SelectValue placeholder=\"All Status\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Status</SelectItem>\n              <SelectItem value={PageStatus.DRAFT}>Draft</SelectItem>\n              <SelectItem value={PageStatus.PUBLISHED}>Published</SelectItem>\n              <SelectItem value={PageStatus.ARCHIVED}>Archived</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Table */}\n        <div className=\"rounded-md border\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => handleSort('title')}\n                    className=\"h-8 p-0 hover:bg-transparent\"\n                  >\n                    Title\n                    {getSortIcon('title')}\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => handleSort('slug')}\n                    className=\"h-8 p-0 hover:bg-transparent\"\n                  >\n                    Slug\n                    {getSortIcon('slug')}\n                  </Button>\n                </TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Blocks</TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => handleSort('updatedAt')}\n                    className=\"h-8 p-0 hover:bg-transparent\"\n                  >\n                    Updated\n                    {getSortIcon('updatedAt')}\n                  </Button>\n                </TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {paginatedData.length > 0 ? (\n                paginatedData.map((page) => (\n                  <TableRow key={page.id}>\n                    <TableCell className=\"font-medium\">{page.title || 'Untitled'}</TableCell>\n                    <TableCell className=\"text-sm text-gray-600\">/{page.slug || 'untitled'}</TableCell>\n                    <TableCell>\n                      <Badge variant={getStatusVariant(page.status)} className={getStatusColor(page.status)}>\n                        {page.status.toLowerCase()}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-sm text-gray-600\">\n                      {Array.isArray(page.blocks) ? page.blocks.length : 0}\n                    </TableCell>\n                    <TableCell className=\"text-sm text-gray-600\">\n                      {page.updatedAt ? new Date(page.updatedAt).toLocaleDateString() : 'N/A'}\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem onClick={() => onEdit(page.id)}>\n                            <Edit className=\"mr-2 h-4 w-4\" />\n                            Edit\n                          </DropdownMenuItem>\n                          {page.status === PageStatus.PUBLISHED && page.slug && (\n                            <>\n                              <DropdownMenuSeparator />\n                              <DropdownMenuItem onClick={() => onView(page.slug)}>\n                                <Eye className=\"mr-2 h-4 w-4\" />\n                                View Page\n                              </DropdownMenuItem>\n                            </>\n                          )}\n                          <DropdownMenuSeparator />\n                          <DropdownMenuItem\n                            onClick={() => {\n                              setDeleteId(page.id);\n                              setShowDeleteDialog(true);\n                            }}\n                            className=\"text-red-600 focus:text-red-600\"\n                          >\n                            <Trash2 className=\"mr-2 h-4 w-4\" />\n                            Delete\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </TableCell>\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={6} className=\"h-24 text-center\">\n                    No pages found\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n\n        {/* Pagination */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-gray-600\">\n            {sortedData.length} page(s) total\n            {globalFilter && ` (filtered)`}\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-gray-600\">Rows per page:</span>\n              <Select\n                value={String(pageSize)}\n                onValueChange={(value) => {\n                  setPageSize(Number(value));\n                  setPageIndex(0);\n                }}\n              >\n                <SelectTrigger className=\"w-[70px]\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {[5, 10, 20, 50].map((size) => (\n                    <SelectItem key={size} value={String(size)}>\n                      {size}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"text-sm text-gray-600\">\n              Page {pageIndex + 1} of {totalPages}\n            </div>\n\n            <div className=\"flex gap-1\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPageIndex(0)}\n                disabled={pageIndex === 0}\n              >\n                <ChevronsLeft className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPageIndex(Math.max(0, pageIndex - 1))}\n                disabled={pageIndex === 0}\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPageIndex(Math.min(totalPages - 1, pageIndex + 1))}\n                disabled={pageIndex >= totalPages - 1}\n              >\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPageIndex(totalPages - 1)}\n                disabled={pageIndex >= totalPages - 1}\n              >\n                <ChevronsRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Dialog - Only render when user explicitly opens */}\n      {deleteId !== null && showDeleteDialog && (\n        <AlertDialog open={true} onOpenChange={(open) => {\n          if (!open) {\n            setShowDeleteDialog(false);\n            setDeleteId(null);\n          }\n        }}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Delete Page</AlertDialogTitle>\n              <AlertDialogDescription>\n                Are you sure you want to delete this page? This action cannot be undone.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <div className=\"flex gap-2 justify-end\">\n              <AlertDialogCancel \n                disabled={isDeleting}\n                onClick={() => {\n                  setShowDeleteDialog(false);\n                  setDeleteId(null);\n                }}\n              >\n                Cancel\n              </AlertDialogCancel>\n              <AlertDialogAction\n                onClick={handleDelete}\n                disabled={isDeleting}\n                className=\"bg-red-600 hover:bg-red-700\"\n              >\n                {isDeleting ? 'Deleting...' : 'Delete'}\n              </AlertDialogAction>\n            </div>\n          </AlertDialogContent>\n        </AlertDialog>\n      )}\n    </>\n  );\n}\n","'use client';\n\nimport React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { AlertTriangle, RefreshCw } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\n/**\n * Error Boundary Component for PageBuilder\n * \n * Catches JavaScript errors anywhere in the child component tree,\n * logs those errors, and displays a fallback UI instead of crashing.\n * \n * Usage:\n * <ErrorBoundary>\n *   <PageBuilder />\n * </ErrorBoundary>\n */\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    // Update state so the next render will show the fallback UI\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log error to console in development\n    if (process.env.NODE_ENV === 'development') {\n      console.error('ErrorBoundary caught an error:', error, errorInfo);\n    }\n\n    // Call optional error handler\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n\n    // You can also log to an error reporting service here\n    // Example: logErrorToService(error, errorInfo);\n\n    this.setState({\n      errorInfo,\n    });\n  }\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className=\"flex items-center justify-center min-h-[400px] p-6\">\n          <Card className=\"w-full max-w-2xl\">\n            <CardHeader>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-destructive/10 rounded-lg\">\n                  <AlertTriangle className=\"h-6 w-6 text-destructive\" />\n                </div>\n                <div>\n                  <CardTitle>Something went wrong</CardTitle>\n                  <CardDescription>\n                    An error occurred in the PageBuilder component\n                  </CardDescription>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {this.state.error && (\n                <div className=\"p-4 bg-muted rounded-lg\">\n                  <p className=\"text-sm font-medium text-destructive mb-2\">\n                    Error Message:\n                  </p>\n                  <p className=\"text-sm text-muted-foreground font-mono\">\n                    {this.state.error.toString()}\n                  </p>\n                </div>\n              )}\n\n              {process.env.NODE_ENV === 'development' && this.state.errorInfo && (\n                <details className=\"p-4 bg-muted rounded-lg\">\n                  <summary className=\"text-sm font-medium cursor-pointer mb-2\">\n                    Error Details (Development Only)\n                  </summary>\n                  <pre className=\"text-xs text-muted-foreground overflow-auto max-h-64 mt-2\">\n                    {this.state.errorInfo.componentStack}\n                  </pre>\n                </details>\n              )}\n\n              <div className=\"flex gap-2\">\n                <Button onClick={this.handleReset} variant=\"default\">\n                  <RefreshCw className=\"mr-2 h-4 w-4\" />\n                  Try Again\n                </Button>\n                <Button onClick={() => window.location.reload()} variant=\"outline\">\n                  Reload Page\n                </Button>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <p className=\"text-sm text-muted-foreground\">\n                  If this problem persists, please contact support or check the browser console for more details.\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Hook version for functional components\n */\nexport const useErrorHandler = () => {\n  const [error, setError] = React.useState<Error | null>(null);\n\n  React.useEffect(() => {\n    if (error) {\n      throw error;\n    }\n  }, [error]);\n\n  return setError;\n};\n\nexport default ErrorBoundary;\n","import e,{useRef as r,useMemo as t,useEffect as n,useState as o,useCallback as a,useLayoutEffect as l}from\"react\";function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}function i(e){var t=r(e),n=r(function(e){t.current&&t.current(e)});return t.current=e,n.current}var s=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),e>t?t:e<r?r:e},f=function(e){return\"touches\"in e},v=function(e){return e&&e.ownerDocument.defaultView||self},d=function(e,r,t){var n=e.getBoundingClientRect(),o=f(r)?function(e,r){for(var t=0;t<e.length;t++)if(e[t].identifier===r)return e[t];return e[0]}(r.touches,t):r;return{left:s((o.pageX-(n.left+v(e).pageXOffset))/n.width),top:s((o.pageY-(n.top+v(e).pageYOffset))/n.height)}},h=function(e){!f(e)&&e.preventDefault()},m=e.memo(function(o){var a=o.onMove,l=o.onKey,s=c(o,[\"onMove\",\"onKey\"]),m=r(null),g=i(a),p=i(l),b=r(null),_=r(!1),x=t(function(){var e=function(e){h(e),(f(e)?e.touches.length>0:e.buttons>0)&&m.current?g(d(m.current,e,b.current)):t(!1)},r=function(){return t(!1)};function t(t){var n=_.current,o=v(m.current),a=t?o.addEventListener:o.removeEventListener;a(n?\"touchmove\":\"mousemove\",e),a(n?\"touchend\":\"mouseup\",r)}return[function(e){var r=e.nativeEvent,n=m.current;if(n&&(h(r),!function(e,r){return r&&!f(e)}(r,_.current)&&n)){if(f(r)){_.current=!0;var o=r.changedTouches||[];o.length&&(b.current=o[0].identifier)}n.focus(),g(d(n,r,b.current)),t(!0)}},function(e){var r=e.which||e.keyCode;r<37||r>40||(e.preventDefault(),p({left:39===r?.05:37===r?-.05:0,top:40===r?.05:38===r?-.05:0}))},t]},[p,g]),C=x[0],E=x[1],H=x[2];return n(function(){return H},[H]),e.createElement(\"div\",u({},s,{onTouchStart:C,onMouseDown:C,className:\"react-colorful__interactive\",ref:m,onKeyDown:E,tabIndex:0,role:\"slider\"}))}),g=function(e){return e.filter(Boolean).join(\" \")},p=function(r){var t=r.color,n=r.left,o=r.top,a=void 0===o?.5:o,l=g([\"react-colorful__pointer\",r.className]);return e.createElement(\"div\",{className:l,style:{top:100*a+\"%\",left:100*n+\"%\"}},e.createElement(\"div\",{className:\"react-colorful__pointer-fill\",style:{backgroundColor:t}}))},b=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=Math.pow(10,r)),Math.round(t*e)/t},_={grad:.9,turn:360,rad:360/(2*Math.PI)},x=function(e){return L(C(e))},C=function(e){return\"#\"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?b(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?b(parseInt(e.substring(6,8),16)/255,2):1}},E=function(e,r){return void 0===r&&(r=\"deg\"),Number(e)*(_[r]||1)},H=function(e){var r=/hsla?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?N({h:E(r[1],r[2]),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},M=H,N=function(e){var r=e.s,t=e.l;return{h:e.h,s:(r*=(t<50?t:100-t)/100)>0?2*r/(t+r)*100:0,v:t+r,a:e.a}},w=function(e){return K(I(e))},y=function(e){var r=e.s,t=e.v,n=e.a,o=(200-r)*t/100;return{h:b(e.h),s:b(o>0&&o<200?r*t/100/(o<=100?o:200-o)*100:0),l:b(o/2),a:b(n,2)}},q=function(e){var r=y(e);return\"hsl(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%)\"},k=function(e){var r=y(e);return\"hsla(\"+r.h+\", \"+r.s+\"%, \"+r.l+\"%, \"+r.a+\")\"},I=function(e){var r=e.h,t=e.s,n=e.v,o=e.a;r=r/360*6,t/=100,n/=100;var a=Math.floor(r),l=n*(1-t),u=n*(1-(r-a)*t),c=n*(1-(1-r+a)*t),i=a%6;return{r:b(255*[n,u,l,l,c,n][i]),g:b(255*[c,n,n,u,l,l][i]),b:b(255*[l,l,c,n,n,u][i]),a:b(o,2)}},O=function(e){var r=/hsva?\\(?\\s*(-?\\d*\\.?\\d+)(deg|rad|grad|turn)?[,\\s]+(-?\\d*\\.?\\d+)%?[,\\s]+(-?\\d*\\.?\\d+)%?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?A({h:E(r[1],r[2]),s:Number(r[3]),v:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},j=O,z=function(e){var r=/rgba?\\(?\\s*(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?[,\\s]+(-?\\d*\\.?\\d+)(%)?,?\\s*[/\\s]*(-?\\d*\\.?\\d+)?(%)?\\s*\\)?/i.exec(e);return r?L({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:void 0===r[7]?1:Number(r[7])/(r[8]?100:1)}):{h:0,s:0,v:0,a:1}},B=z,D=function(e){var r=e.toString(16);return r.length<2?\"0\"+r:r},K=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=o<1?D(b(255*o)):\"\";return\"#\"+D(r)+D(t)+D(n)+a},L=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=Math.max(r,t,n),l=a-Math.min(r,t,n),u=l?a===r?(t-n)/l:a===t?2+(n-r)/l:4+(r-t)/l:0;return{h:b(60*(u<0?u+6:u)),s:b(a?l/a*100:0),v:b(a/255*100),a:o}},A=function(e){return{h:b(e.h),s:b(e.s),v:b(e.v),a:b(e.a,2)}},S=e.memo(function(r){var t=r.hue,n=r.onChange,o=g([\"react-colorful__hue\",r.className]);return e.createElement(\"div\",{className:o},e.createElement(m,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:s(t+360*e.left,0,360)})},\"aria-label\":\"Hue\",\"aria-valuenow\":b(t),\"aria-valuemax\":\"360\",\"aria-valuemin\":\"0\"},e.createElement(p,{className:\"react-colorful__hue-pointer\",left:t/360,color:q({h:t,s:100,v:100,a:1})})))}),T=e.memo(function(r){var t=r.hsva,n=r.onChange,o={backgroundColor:q({h:t.h,s:100,v:100,a:1})};return e.createElement(\"div\",{className:\"react-colorful__saturation\",style:o},e.createElement(m,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:s(t.s+100*e.left,0,100),v:s(t.v-100*e.top,0,100)})},\"aria-label\":\"Color\",\"aria-valuetext\":\"Saturation \"+b(t.s)+\"%, Brightness \"+b(t.v)+\"%\"},e.createElement(p,{className:\"react-colorful__saturation-pointer\",top:1-t.v/100,left:t.s/100,color:q(t)})))}),F=function(e,r){if(e===r)return!0;for(var t in e)if(e[t]!==r[t])return!1;return!0},P=function(e,r){return e.replace(/\\s/g,\"\")===r.replace(/\\s/g,\"\")},X=function(e,r){return e.toLowerCase()===r.toLowerCase()||F(C(e),C(r))};function Y(e,t,l){var u=i(l),c=o(function(){return e.toHsva(t)}),s=c[0],f=c[1],v=r({color:t,hsva:s});n(function(){if(!e.equal(t,v.current.color)){var r=e.toHsva(t);v.current={hsva:r,color:t},f(r)}},[t,e]),n(function(){var r;F(s,v.current.hsva)||e.equal(r=e.fromHsva(s),v.current.color)||(v.current={hsva:s,color:r},u(r))},[s,e,u]);var d=a(function(e){f(function(r){return Object.assign({},r,e)})},[]);return[s,d]}var R,V=\"undefined\"!=typeof window?l:n,$=function(){return R||(\"undefined\"!=typeof __webpack_nonce__?__webpack_nonce__:void 0)},G=function(e){R=e},J=new Map,Q=function(e){V(function(){var r=e.current?e.current.ownerDocument:document;if(void 0!==r&&!J.has(r)){var t=r.createElement(\"style\");t.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:\"\";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\\'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill-opacity=\".05\"><path d=\"M8 0h8v8H8zM0 8h8v8H0z\"/></svg>\\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',J.set(r,t);var n=$();n&&t.setAttribute(\"nonce\",n),r.head.appendChild(t)}},[])},U=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h,className:\"react-colorful__last-control\"}))},W={defaultColor:\"000\",toHsva:x,fromHsva:function(e){return w({h:e.h,s:e.s,v:e.v,a:1})},equal:X},Z=function(r){return e.createElement(U,u({},r,{colorModel:W}))},ee=function(r){var t=r.className,n=r.hsva,o=r.onChange,a={backgroundImage:\"linear-gradient(90deg, \"+k(Object.assign({},n,{a:0}))+\", \"+k(Object.assign({},n,{a:1}))+\")\"},l=g([\"react-colorful__alpha\",t]),u=b(100*n.a);return e.createElement(\"div\",{className:l},e.createElement(\"div\",{className:\"react-colorful__alpha-gradient\",style:a}),e.createElement(m,{onMove:function(e){o({a:e.left})},onKey:function(e){o({a:s(n.a+e.left)})},\"aria-label\":\"Alpha\",\"aria-valuetext\":u+\"%\",\"aria-valuenow\":u,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"},e.createElement(p,{className:\"react-colorful__alpha-pointer\",left:n.a,color:k(n)})))},re=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,[\"className\",\"colorModel\",\"color\",\"onChange\"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g([\"react-colorful\",n]);return e.createElement(\"div\",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h}),e.createElement(ee,{hsva:d,onChange:h,className:\"react-colorful__last-control\"}))},te={defaultColor:\"0001\",toHsva:x,fromHsva:w,equal:X},ne=function(r){return e.createElement(re,u({},r,{colorModel:te}))},oe={defaultColor:{h:0,s:0,l:0,a:1},toHsva:N,fromHsva:y,equal:F},ae=function(r){return e.createElement(re,u({},r,{colorModel:oe}))},le={defaultColor:\"hsla(0, 0%, 0%, 1)\",toHsva:H,fromHsva:k,equal:P},ue=function(r){return e.createElement(re,u({},r,{colorModel:le}))},ce={defaultColor:{h:0,s:0,l:0},toHsva:function(e){return N({h:e.h,s:e.s,l:e.l,a:1})},fromHsva:function(e){return{h:(r=y(e)).h,s:r.s,l:r.l};var r},equal:F},ie=function(r){return e.createElement(U,u({},r,{colorModel:ce}))},se={defaultColor:\"hsl(0, 0%, 0%)\",toHsva:M,fromHsva:q,equal:P},fe=function(r){return e.createElement(U,u({},r,{colorModel:se}))},ve={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(e){return e},fromHsva:A,equal:F},de=function(r){return e.createElement(re,u({},r,{colorModel:ve}))},he={defaultColor:\"hsva(0, 0%, 0%, 1)\",toHsva:O,fromHsva:function(e){var r=A(e);return\"hsva(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%, \"+r.a+\")\"},equal:P},me=function(r){return e.createElement(re,u({},r,{colorModel:he}))},ge={defaultColor:{h:0,s:0,v:0},toHsva:function(e){return{h:e.h,s:e.s,v:e.v,a:1}},fromHsva:function(e){var r=A(e);return{h:r.h,s:r.s,v:r.v}},equal:F},pe=function(r){return e.createElement(U,u({},r,{colorModel:ge}))},be={defaultColor:\"hsv(0, 0%, 0%)\",toHsva:j,fromHsva:function(e){var r=A(e);return\"hsv(\"+r.h+\", \"+r.s+\"%, \"+r.v+\"%)\"},equal:P},_e=function(r){return e.createElement(U,u({},r,{colorModel:be}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(r){return e.createElement(re,u({},r,{colorModel:xe}))},Ee={defaultColor:\"rgba(0, 0, 0, 1)\",toHsva:z,fromHsva:function(e){var r=I(e);return\"rgba(\"+r.r+\", \"+r.g+\", \"+r.b+\", \"+r.a+\")\"},equal:P},He=function(r){return e.createElement(re,u({},r,{colorModel:Ee}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return L({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(r=I(e)).r,g:r.g,b:r.b};var r},equal:F},Ne=function(r){return e.createElement(U,u({},r,{colorModel:Me}))},we={defaultColor:\"rgb(0, 0, 0)\",toHsva:B,fromHsva:function(e){var r=I(e);return\"rgb(\"+r.r+\", \"+r.g+\", \"+r.b+\")\"},equal:P},ye=function(r){return e.createElement(U,u({},r,{colorModel:we}))},qe=/^#?([0-9A-F]{3,8})$/i,ke=function(r){var t=r.color,l=void 0===t?\"\":t,s=r.onChange,f=r.onBlur,v=r.escape,d=r.validate,h=r.format,m=r.process,g=c(r,[\"color\",\"onChange\",\"onBlur\",\"escape\",\"validate\",\"format\",\"process\"]),p=o(function(){return v(l)}),b=p[0],_=p[1],x=i(s),C=i(f),E=a(function(e){var r=v(e.target.value);_(r),d(r)&&x(m?m(r):r)},[v,m,d,x]),H=a(function(e){d(e.target.value)||_(v(l)),C(e)},[l,v,d,C]);return n(function(){_(v(l))},[l,v]),e.createElement(\"input\",u({},g,{value:h?h(b):b,spellCheck:\"false\",onChange:E,onBlur:H}))},Ie=function(e){return\"#\"+e},Oe=function(r){var t=r.prefixed,n=r.alpha,o=c(r,[\"prefixed\",\"alpha\"]),l=a(function(e){return e.replace(/([^0-9A-F]+)/gi,\"\").substring(0,n?8:6)},[n]),i=a(function(e){return function(e,r){var t=qe.exec(e),n=t?t[1].length:0;return 3===n||6===n||!!r&&4===n||!!r&&8===n}(e,n)},[n]);return e.createElement(ke,u({},o,{escape:l,format:t?Ie:void 0,process:Ie,validate:i}))};export{ne as HexAlphaColorPicker,Oe as HexColorInput,Z as HexColorPicker,ie as HslColorPicker,fe as HslStringColorPicker,ae as HslaColorPicker,ue as HslaStringColorPicker,pe as HsvColorPicker,_e as HsvStringColorPicker,de as HsvaColorPicker,me as HsvaStringColorPicker,Ne as RgbColorPicker,ye as RgbStringColorPicker,Ce as RgbaColorPicker,He as RgbaStringColorPicker,G as setNonce};\n//# sourceMappingURL=index.module.js.map\n","import { BlockType } from '@/types/page-builder';\nimport {\n  Type,\n  Image,\n  Layout,\n  Square,\n  Users,\n  TrendingUp,\n  Phone,\n  Minus,\n  Space,\n  Box,\n  Columns,\n  Grid3x3,\n  ArrowRightLeft,\n  ArrowUpDown,\n  Code,\n  Presentation,\n  Search,\n  Bookmark,\n  Video,\n  Share2,\n  LayoutGrid,\n  MessageSquare,\n  BarChart3,\n  HelpCircle,\n  Mail,\n  Zap,\n  ShoppingCart,\n} from 'lucide-react';\n\n/**\n * Block Type Definitions - Single Source of Truth\n * Used across all PageBuilder components\n * \n * IMPORTANT: Keep this synchronized with BlockType enum in types/page-builder.ts\n */\nexport const BLOCK_TYPES = [\n  // Content Blocks\n  { type: BlockType.TEXT, label: 'Text Block', icon: Type, color: 'bg-blue-100 text-blue-600' },\n  { type: BlockType.IMAGE, label: 'Image Block', icon: Image, color: 'bg-green-100 text-green-600' },\n  { type: BlockType.VIDEO, label: 'Video', icon: Video, color: 'bg-rose-100 text-rose-600' },\n  { type: BlockType.BUTTON, label: 'Button', icon: Square, color: 'bg-orange-100 text-orange-600' },\n  { type: BlockType.HERO, label: 'Hero Section', icon: Layout, color: 'bg-purple-100 text-purple-600' },\n  { type: BlockType.CAROUSEL, label: 'Carousel', icon: Presentation, color: 'bg-teal-100 text-teal-600' },\n  { type: BlockType.GALLERY, label: 'Gallery', icon: LayoutGrid, color: 'bg-cyan-100 text-cyan-600' },\n  { type: BlockType.CARD, label: 'Card', icon: Box, color: 'bg-violet-100 text-violet-600' },\n  { type: BlockType.TESTIMONIAL, label: 'Testimonial', icon: MessageSquare, color: 'bg-fuchsia-100 text-fuchsia-600' },\n  { type: BlockType.TEAM, label: 'Team Section', icon: Users, color: 'bg-indigo-100 text-indigo-600' },\n  { type: BlockType.STATS, label: 'Stats Section', icon: BarChart3, color: 'bg-emerald-100 text-emerald-600' },\n  { type: BlockType.FAQ, label: 'FAQ', icon: HelpCircle, color: 'bg-sky-100 text-sky-600' },\n  { type: BlockType.CONTACT_FORM, label: 'Contact Form', icon: Mail, color: 'bg-amber-100 text-amber-600' },\n  { type: BlockType.CONTACT_INFO, label: 'Contact Info', icon: Phone, color: 'bg-cyan-100 text-cyan-600' },\n\n  // Container/Layout Blocks\n  { type: BlockType.CONTAINER, label: 'Container', icon: Box, color: 'bg-violet-100 text-violet-600' },\n  { type: BlockType.SECTION, label: 'Section', icon: Columns, color: 'bg-fuchsia-100 text-fuchsia-600' },\n  { type: BlockType.GRID, label: 'Grid Layout', icon: Grid3x3, color: 'bg-pink-100 text-pink-600' },\n  { type: BlockType.FLEX_ROW, label: 'Flex Row', icon: ArrowRightLeft, color: 'bg-rose-100 text-rose-600' },\n  { type: BlockType.FLEX_COLUMN, label: 'Flex Column', icon: ArrowUpDown, color: 'bg-amber-100 text-amber-600' },\n\n  // Utility Blocks\n  { type: BlockType.DIVIDER, label: 'Divider', icon: Minus, color: 'bg-gray-100 text-gray-600' },\n  { type: BlockType.SPACER, label: 'Spacer', icon: Space, color: 'bg-yellow-100 text-yellow-600' },\n\n  // Dynamic & E-commerce\n  { type: BlockType.DYNAMIC, label: 'Dynamic Block', icon: Code, color: 'bg-purple-100 text-purple-600' },\n  { type: BlockType.PRODUCT_LIST, label: 'Product List', icon: ShoppingCart, color: 'bg-green-100 text-green-600' },\n  { type: BlockType.PRODUCT_CAROUSEL, label: 'Product Carousel', icon: Zap, color: 'bg-blue-100 text-blue-600' },\n];\n\n/**\n * Utility function to get block type configuration\n */\nexport function getBlockTypeConfig(type: BlockType) {\n  return BLOCK_TYPES.find(b => b.type === type);\n}\n\n/**\n * Get all block type labels as a record\n */\nexport const BLOCK_TYPE_LABELS: Record<BlockType, string> = Object.fromEntries(\n  BLOCK_TYPES.map(b => [b.type, b.label])\n) as Record<BlockType, string>;\n\n/**\n * Group block types by category for UI organization\n */\nexport const BLOCK_TYPE_GROUPS = [\n  {\n    category: 'Content Blocks',\n    blocks: BLOCK_TYPES.filter(b => \n      [\n        BlockType.TEXT, BlockType.IMAGE, BlockType.VIDEO, BlockType.BUTTON, BlockType.HERO, \n        BlockType.CAROUSEL, BlockType.GALLERY, BlockType.CARD, BlockType.TESTIMONIAL, \n        BlockType.TEAM, BlockType.STATS, BlockType.FAQ, BlockType.CONTACT_FORM, \n        BlockType.CONTACT_INFO\n      ].includes(b.type)\n    )\n  },\n  {\n    category: 'Container & Layout',\n    blocks: BLOCK_TYPES.filter(b => \n      [BlockType.SECTION, BlockType.CONTAINER, BlockType.GRID, BlockType.FLEX_ROW, BlockType.FLEX_COLUMN].includes(b.type)\n    )\n  },\n  {\n    category: 'Utility Blocks',\n    blocks: BLOCK_TYPES.filter(b => \n      [BlockType.DIVIDER, BlockType.SPACER].includes(b.type)\n    )\n  },\n  {\n    category: 'Dynamic & E-commerce',\n    blocks: BLOCK_TYPES.filter(b => \n      [BlockType.DYNAMIC, BlockType.PRODUCT_LIST, BlockType.PRODUCT_CAROUSEL].includes(b.type)\n    )\n  },\n];\n","import React, { useEffect, useState } from 'react';\nimport { AlertTriangle, Trash2, HardDrive } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport StorageManager from '@/utils/storageManager';\nimport { getCustomTemplateStats, clearCustomTemplates } from '@/utils/customTemplates';\n\ninterface StorageWarningProps {\n  threshold?: number; // Show warning when usage exceeds this percentage (default: 80)\n}\n\nexport function StorageWarning({ threshold = 80 }: StorageWarningProps) {\n  const [usage, setUsage] = useState(StorageManager.getStorageUsage());\n  const [showDetails, setShowDetails] = useState(false);\n  const [stats, setStats] = useState(getCustomTemplateStats());\n\n  useEffect(() => {\n    // Update usage periodically\n    const interval = setInterval(() => {\n      setUsage(StorageManager.getStorageUsage());\n      setStats(getCustomTemplateStats());\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Don't show warning if under threshold\n  if (usage.percentage < threshold) {\n    return null;\n  }\n\n  const handleCleanup = () => {\n    if (confirm('Clean up old templates? This will remove the oldest templates to free up space.')) {\n      const freedBytes = StorageManager.cleanup(undefined, false);\n      if (freedBytes > 0) {\n        setUsage(StorageManager.getStorageUsage());\n        setStats(getCustomTemplateStats());\n        alert(`Cleaned up ${StorageManager.formatBytes(freedBytes)}`);\n      } else {\n        alert('No items to cleanup');\n      }\n    }\n  };\n\n  const handleClearAll = () => {\n    if (confirm('⚠️ WARNING: This will delete ALL custom templates. This action cannot be undone!\\n\\nAre you sure?')) {\n      if (confirm('Final confirmation: Delete ALL custom templates?')) {\n        clearCustomTemplates();\n        setUsage(StorageManager.getStorageUsage());\n        setStats(getCustomTemplateStats());\n        alert('All custom templates deleted');\n      }\n    }\n  };\n\n  const getAlertClassName = () => {\n    if (usage.percentage >= 95) return 'mb-4 border-red-500 bg-red-50 dark:bg-red-950';\n    if (usage.percentage >= 90) return 'mb-4 border-orange-500 bg-orange-50 dark:bg-orange-950';\n    return 'mb-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-950';\n  };\n\n  const getAlertIcon = () => {\n    if (usage.percentage >= 90) {\n      return <AlertTriangle className=\"h-5 w-5 text-red-500\" />;\n    }\n    return <HardDrive className=\"h-5 w-5 text-yellow-500\" />;\n  };\n\n  return (\n    <Alert className={getAlertClassName()}>\n      <div className=\"flex items-start gap-3\">\n        {getAlertIcon()}\n        <div className=\"flex-1\">\n          <AlertDescription>\n            <div className=\"font-semibold mb-2\">\n              {usage.percentage >= 95 \n                ? '🔴 Storage Almost Full!' \n                : usage.percentage >= 90\n                ? '⚠️ Storage Nearly Full'\n                : '⚠️ Storage Warning'}\n            </div>\n            \n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <Progress value={usage.percentage} className=\"flex-1 h-2\" />\n                <span className=\"font-mono font-semibold min-w-[60px] text-right\">\n                  {usage.percentage.toFixed(1)}%\n                </span>\n              </div>\n              \n              <div className=\"text-xs text-muted-foreground\">\n                Using {StorageManager.formatBytes(usage.used)} of {StorageManager.formatBytes(StorageManager['MAX_STORAGE_SIZE'])}\n                {' '}<span className=\"font-semibold\">({stats.total} custom templates, {stats.formattedSize})</span>\n              </div>\n\n              {showDetails && (\n                <div className=\"mt-3 p-3 bg-background/50 rounded-md space-y-2 text-xs\">\n                  <div className=\"font-semibold\">Storage Breakdown:</div>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>Custom Templates:</div>\n                    <div className=\"text-right font-mono\">{stats.formattedSize}</div>\n                    \n                    <div>Template Count:</div>\n                    <div className=\"text-right font-mono\">{stats.total}</div>\n                    \n                    <div>Available Space:</div>\n                    <div className=\"text-right font-mono\">\n                      {StorageManager.formatBytes(usage.available)}\n                    </div>\n                  </div>\n                  \n                  {Object.keys(stats.byCategory).length > 0 && (\n                    <div className=\"mt-2\">\n                      <div className=\"font-semibold mb-1\">By Category:</div>\n                      <div className=\"grid grid-cols-2 gap-1\">\n                        {Object.entries(stats.byCategory).map(([category, count]) => (\n                          <div key={category} className=\"flex justify-between\">\n                            <span className=\"capitalize\">{category}:</span>\n                            <span className=\"font-mono\">{count}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              <div className=\"flex gap-2 mt-3\">\n                <Button \n                  size=\"sm\" \n                  variant=\"outline\"\n                  onClick={() => setShowDetails(!showDetails)}\n                >\n                  {showDetails ? 'Hide' : 'Show'} Details\n                </Button>\n                \n                <Button \n                  size=\"sm\" \n                  variant=\"outline\"\n                  onClick={handleCleanup}\n                  disabled={stats.total === 0}\n                >\n                  <Trash2 className=\"h-3 w-3 mr-1\" />\n                  Auto Cleanup\n                </Button>\n                \n                <Button \n                  size=\"sm\" \n                  variant=\"destructive\"\n                  onClick={handleClearAll}\n                  disabled={stats.total === 0}\n                >\n                  Clear All Templates\n                </Button>\n              </div>\n\n              <div className=\"text-xs text-muted-foreground mt-2\">\n                💡 Tip: Export your templates before clearing, or delete old templates manually.\n              </div>\n            </div>\n          </AlertDescription>\n        </div>\n      </div>\n    </Alert>\n  );\n}\n\nexport default StorageWarning;\n","import { BlockTemplate } from '@/data/blockTemplates';\nimport { gql, ApolloClient, NormalizedCacheObject } from '@apollo/client';\nimport { PageBlock } from '@/types/page-builder';\nimport {\n  GET_MY_CUSTOM_TEMPLATES,\n  DUPLICATE_CUSTOM_TEMPLATE,\n  SHARE_TEMPLATE,\n  UNSHARE_TEMPLATE,\n  UPDATE_TEMPLATE_PUBLICITY,\n  INCREMENT_TEMPLATE_USAGE,\n} from '@/lib/graphql/custom-templates.graphql';\n\n/**\n * Unified Custom Templates Module\n * \n * This module provides complete database operations for user-created templates via GraphQL.\n * Features:\n * - Basic CRUD operations (Create, Read, Update, Delete)\n * - Advanced operations (Duplicate, Share, Public/Private)\n * - Usage tracking and statistics\n * - Service class and convenience functions\n * - Backward compatibility with legacy localStorage functions\n * \n * @module utils/customTemplates\n */\n\n// ============================================================================\n// TYPES & INTERFACES\n// ============================================================================\n\n/**\n * Custom template with database metadata\n */\nexport interface CustomTemplate extends BlockTemplate {\n  isCustom: true;\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Template with full metadata and sharing info\n */\nexport interface TemplateBlocksData {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  blocks: PageBlock[];\n  thumbnail?: string;\n  isPublic: boolean;\n  isArchived: boolean;\n  usageCount: number;\n  userId: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Input for creating a template\n */\nexport interface CreateTemplateInput {\n  name: string;\n  description: string;\n  category: string;\n  blocks: PageBlock[];\n  thumbnail?: string;\n}\n\n/**\n * Input for updating a template\n */\nexport interface UpdateTemplateInput {\n  name?: string;\n  description?: string;\n  category?: string;\n  blocks?: PageBlock[];\n  thumbnail?: string;\n  isArchived?: boolean;\n}\n\n/**\n * Statistics for custom templates\n */\nexport interface TemplateStats {\n  total: number;\n  byCategory: Record<string, number>;\n  formattedSize?: string;\n}\n\n/**\n * Template operation response\n */\ninterface TemplateResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\n// ============================================================================\n// GraphQL QUERIES & MUTATIONS\n// ============================================================================\n\n/**\n * Fetch all templates for a user\n */\nexport const GET_CUSTOM_TEMPLATES = gql`\n  query GetCustomTemplates($userId: String!) {\n    customTemplates(userId: $userId) {\n      id\n      name\n      description\n      category\n      blocks\n      thumbnail\n      isCustom\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\n/**\n * Fetch a single template by ID\n */\nexport const GET_CUSTOM_TEMPLATE = gql`\n  query GetCustomTemplate($id: String!) {\n    customTemplate(id: $id) {\n      id\n      name\n      description\n      category\n      blocks\n      thumbnail\n      isCustom\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\n/**\n * Create a new custom template\n */\nexport const CREATE_CUSTOM_TEMPLATE = gql`\n  mutation CreateCustomTemplate($input: CreateTemplateInput!) {\n    createCustomTemplate(input: $input) {\n      id\n      name\n      description\n      category\n      blocks\n      thumbnail\n      isCustom\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\n/**\n * Update an existing template\n */\nexport const UPDATE_CUSTOM_TEMPLATE = gql`\n  mutation UpdateCustomTemplate($id: String!, $input: UpdateTemplateInput!) {\n    updateCustomTemplate(id: $id, input: $input) {\n      id\n      name\n      description\n      category\n      blocks\n      thumbnail\n      isCustom\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\n/**\n * Delete a template\n */\nexport const DELETE_CUSTOM_TEMPLATE = gql`\n  mutation DeleteCustomTemplate($id: String!) {\n    deleteCustomTemplate(id: $id) {\n      success\n      message\n    }\n  }\n`;\n\n/**\n * Get all custom templates with advanced filtering\n */\nexport const GET_MY_CUSTOM_TEMPLATES_QUERY = GET_MY_CUSTOM_TEMPLATES;\n\n// ============================================================================\n// DATABASE OPERATIONS (Low-level)\n// ============================================================================\n\n// Basic CRUD operations moved below service class for organization\n\n// ============================================================================\n// CUSTOM TEMPLATES SERVICE CLASS\n// ============================================================================\n\n/**\n * Service class for managing custom templates\n * Provides object-oriented interface for template operations\n */\nexport class CustomTemplatesService {\n  constructor(private client: ApolloClient<NormalizedCacheObject>) {}\n\n  /**\n   * Get all custom templates for current user\n   */\n  async getMyTemplates(category?: string, archived?: boolean): Promise<TemplateBlocksData[]> {\n    try {\n      const { data } = await this.client.query({\n        query: GET_MY_CUSTOM_TEMPLATES,\n        variables: { category, archived },\n        fetchPolicy: 'network-only',\n      });\n\n      return data.getMyCustomTemplates || [];\n    } catch (error) {\n      console.error('[CustomTemplates] Error fetching custom templates:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get single custom template with blocks\n   */\n  async getTemplate(id: string): Promise<TemplateBlocksData | null> {\n    try {\n      const { data } = await this.client.query({\n        query: GET_CUSTOM_TEMPLATE,\n        variables: { id },\n        fetchPolicy: 'cache-first',\n      });\n\n      return data.getCustomTemplate || null;\n    } catch (error) {\n      console.error('[CustomTemplates] Error fetching template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create new custom template\n   */\n  async createTemplate(input: CreateTemplateInput): Promise<TemplateBlocksData> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: CREATE_CUSTOM_TEMPLATE,\n        variables: { input },\n        refetchQueries: [\n          {\n            query: GET_MY_CUSTOM_TEMPLATES,\n            variables: { archived: false },\n          },\n        ],\n      });\n\n      return data.createCustomTemplate;\n    } catch (error) {\n      console.error('[CustomTemplates] Error creating template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update existing template\n   */\n  async updateTemplate(id: string, input: UpdateTemplateInput): Promise<TemplateBlocksData> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: UPDATE_CUSTOM_TEMPLATE,\n        variables: { id, input },\n      });\n\n      return data.updateCustomTemplate;\n    } catch (error) {\n      console.error('[CustomTemplates] Error updating template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Delete template\n   */\n  async deleteTemplate(id: string): Promise<boolean> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: DELETE_CUSTOM_TEMPLATE,\n        variables: { id },\n        refetchQueries: [\n          {\n            query: GET_MY_CUSTOM_TEMPLATES,\n            variables: { archived: false },\n          },\n        ],\n      });\n\n      return data.deleteCustomTemplate.success;\n    } catch (error) {\n      console.error('[CustomTemplates] Error deleting template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Duplicate template\n   */\n  async duplicateTemplate(id: string, newName?: string): Promise<TemplateBlocksData> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: DUPLICATE_CUSTOM_TEMPLATE,\n        variables: { id, newName },\n        refetchQueries: [\n          {\n            query: GET_MY_CUSTOM_TEMPLATES,\n            variables: { archived: false },\n          },\n        ],\n      });\n\n      return data.duplicateCustomTemplate;\n    } catch (error) {\n      console.error('[CustomTemplates] Error duplicating template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Share template with other users\n   */\n  async shareTemplate(templateId: string, userIds: string[]): Promise<any> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: SHARE_TEMPLATE,\n        variables: { templateId, userIds },\n      });\n\n      return data.shareTemplate;\n    } catch (error) {\n      console.error('[CustomTemplates] Error sharing template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Unshare template from user\n   */\n  async unshareTemplate(templateId: string, userId: string): Promise<boolean> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: UNSHARE_TEMPLATE,\n        variables: { templateId, userId },\n      });\n\n      return data.unshareTemplate.success;\n    } catch (error) {\n      console.error('[CustomTemplates] Error unsharing template:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update template publicity (public/private)\n   */\n  async updatePublicity(id: string, isPublic: boolean): Promise<TemplateBlocksData> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: UPDATE_TEMPLATE_PUBLICITY,\n        variables: { id, isPublic },\n      });\n\n      return data.updateTemplatePublicity;\n    } catch (error) {\n      console.error('[CustomTemplates] Error updating template publicity:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Track template usage\n   */\n  async trackUsage(id: string): Promise<number> {\n    try {\n      const { data } = await this.client.mutate({\n        mutation: INCREMENT_TEMPLATE_USAGE,\n        variables: { id },\n      });\n\n      return data.incrementTemplateUsage.usageCount;\n    } catch (error) {\n      console.error('[CustomTemplates] Error tracking template usage:', error);\n      throw error;\n    }\n  }\n}\n\n/**\n * Fetch all custom templates for a user\n * \n * @param client - Apollo Client instance\n * @param userId - User ID to fetch templates for\n * @returns Array of custom templates, empty array on error\n * \n * @example\n * const templates = await getCustomTemplatesFromDB(client, userId);\n */\nexport async function getCustomTemplatesFromDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  userId: string\n): Promise<CustomTemplate[]> {\n  try {\n    if (!client) {\n      throw new Error('Apollo Client is required');\n    }\n\n    const { data } = await client.query({\n      query: GET_CUSTOM_TEMPLATES,\n      variables: { userId },\n    });\n\n    return data?.customTemplates || [];\n  } catch (error) {\n    console.error('[CustomTemplates] Error loading templates from database:', error);\n    return [];\n  }\n}\n\n/**\n * Fetch a single custom template by ID\n * \n * @param client - Apollo Client instance\n * @param id - Template ID to fetch\n * @returns Custom template or null if not found\n * \n * @example\n * const template = await getCustomTemplateFromDB(client, templateId);\n */\nexport async function getCustomTemplateFromDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  id: string\n): Promise<CustomTemplate | null> {\n  try {\n    if (!client) {\n      throw new Error('Apollo Client is required');\n    }\n\n    const { data } = await client.query({\n      query: GET_CUSTOM_TEMPLATE,\n      variables: { id },\n    });\n\n    return data?.customTemplate || null;\n  } catch (error) {\n    console.error('[CustomTemplates] Error loading template from database:', error);\n    return null;\n  }\n}\n\n/**\n * Create and save a new custom template to database\n * \n * @param client - Apollo Client instance\n * @param template - Template data (name, description, category, blocks)\n * @param userId - User ID creating the template\n * @returns Created template with ID and timestamps, or null on error\n * \n * @example\n * const newTemplate = await saveCustomTemplateToDB(client, {\n *   name: 'My Template',\n *   description: 'Template description',\n *   category: 'hero',\n *   blocks: []\n * }, userId);\n */\nexport async function saveCustomTemplateToDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  template: Omit<BlockTemplate, 'id' | 'thumbnail'>,\n  userId: string\n): Promise<CustomTemplate | null> {\n  try {\n    if (!client) {\n      throw new Error('Apollo Client is required');\n    }\n\n    if (!template.name || !template.category) {\n      throw new Error('Template name and category are required');\n    }\n\n    const { data } = await client.mutate({\n      mutation: CREATE_CUSTOM_TEMPLATE,\n      variables: {\n        input: {\n          name: template.name,\n          description: template.description || '',\n          category: template.category,\n          blocks: template.blocks || [],\n          userId,\n        },\n      },\n      refetchQueries: [\n        {\n          query: GET_CUSTOM_TEMPLATES,\n          variables: { userId },\n        },\n      ],\n    });\n\n    return data?.createCustomTemplate || null;\n  } catch (error: any) {\n    console.error('[CustomTemplates] Error saving template to database:', error?.message || error);\n    throw error;\n  }\n}\n\n/**\n * Update an existing custom template\n * \n * @param client - Apollo Client instance\n * @param id - Template ID to update\n * @param updates - Partial template data to update\n * @param userId - User ID (for refetching)\n * @returns Updated template or null on error\n * \n * @example\n * const updated = await updateCustomTemplateInDB(\n *   client,\n *   templateId,\n *   { name: 'New Name' },\n *   userId\n * );\n */\nexport async function updateCustomTemplateInDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  id: string,\n  updates: Partial<Omit<BlockTemplate, 'id' | 'thumbnail'>>,\n  userId: string\n): Promise<CustomTemplate | null> {\n  try {\n    if (!client) {\n      throw new Error('Apollo Client is required');\n    }\n\n    if (!id) {\n      throw new Error('Template ID is required');\n    }\n\n    const { data } = await client.mutate({\n      mutation: UPDATE_CUSTOM_TEMPLATE,\n      variables: {\n        id,\n        input: updates,\n      },\n      refetchQueries: [\n        {\n          query: GET_CUSTOM_TEMPLATES,\n          variables: { userId },\n        },\n      ],\n    });\n\n    return data?.updateCustomTemplate || null;\n  } catch (error: any) {\n    console.error('[CustomTemplates] Error updating template in database:', error?.message || error);\n    throw error;\n  }\n}\n\n/**\n * Delete a custom template from database\n * \n * @param client - Apollo Client instance\n * @param id - Template ID to delete\n * @param userId - User ID (for refetching)\n * @returns True if deletion was successful\n * \n * @example\n * const success = await deleteCustomTemplateFromDB(client, templateId, userId);\n */\nexport async function deleteCustomTemplateFromDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  id: string,\n  userId: string\n): Promise<boolean> {\n  try {\n    if (!client) {\n      throw new Error('Apollo Client is required');\n    }\n\n    if (!id) {\n      throw new Error('Template ID is required');\n    }\n\n    const { data } = await client.mutate({\n      mutation: DELETE_CUSTOM_TEMPLATE,\n      variables: { id },\n      refetchQueries: [\n        {\n          query: GET_CUSTOM_TEMPLATES,\n          variables: { userId },\n        },\n      ],\n    });\n\n    return data?.deleteCustomTemplate?.success || false;\n  } catch (error: any) {\n    console.error('[CustomTemplates] Error deleting template from database:', error?.message || error);\n    throw error;\n  }\n}\n\n/**\n * Get statistics about user's custom templates\n * \n * @param client - Apollo Client instance\n * @param userId - User ID to get stats for\n * @returns Template statistics including count and breakdown by category\n * \n * @example\n * const stats = await getCustomTemplateStatsFromDB(client, userId);\n * console.log(`Total templates: ${stats.total}`);\n * console.log(`By category:`, stats.byCategory);\n */\nexport async function getCustomTemplateStatsFromDB(\n  client: ApolloClient<NormalizedCacheObject> | any,\n  userId: string\n): Promise<TemplateStats> {\n  try {\n    const templates = await getCustomTemplatesFromDB(client, userId);\n\n    const byCategory = templates.reduce(\n      (acc, template) => {\n        acc[template.category] = (acc[template.category] || 0) + 1;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    return {\n      total: templates.length,\n      byCategory,\n    };\n  } catch (error) {\n    console.error('[CustomTemplates] Error getting template stats from database:', error);\n    return {\n      total: 0,\n      byCategory: {},\n    };\n  }\n}\n\n// ============================================================================\n// LEGACY STORAGE-BASED FUNCTIONS (for backward compatibility)\n// ============================================================================\n\n/**\n * Initialize the service with Apollo client\n * @deprecated Use CustomTemplatesService class directly\n */\nlet apolloClient: ApolloClient<NormalizedCacheObject> | null = null;\n\nexport function initCustomTemplatesService(client: ApolloClient<NormalizedCacheObject>) {\n  apolloClient = client;\n}\n\n/**\n * Get service instance (requires initialization)\n * @deprecated Use CustomTemplatesService class directly\n */\nfunction getService(): CustomTemplatesService {\n  if (!apolloClient) {\n    throw new Error('CustomTemplatesService not initialized. Call initCustomTemplatesService() first.');\n  }\n  return new CustomTemplatesService(apolloClient);\n}\n\n/**\n * Convenience function - Get all templates\n * @deprecated Use CustomTemplatesService or getCustomTemplatesFromDB instead\n */\nexport async function getCustomTemplates(category?: string, archived?: boolean): Promise<TemplateBlocksData[]> {\n  return getService().getMyTemplates(category, archived);\n}\n\n/**\n * Convenience function - Get single template\n * @deprecated Use CustomTemplatesService or getCustomTemplateFromDB instead\n */\nexport async function getCustomTemplate(id: string): Promise<TemplateBlocksData | null> {\n  return getService().getTemplate(id);\n}\n\n/**\n * Convenience function - Create template\n * @deprecated Use CustomTemplatesService or saveCustomTemplateToDB instead\n */\nexport async function saveCustomTemplate(input: CreateTemplateInput): Promise<TemplateBlocksData> {\n  return getService().createTemplate(input);\n}\n\n/**\n * Convenience function - Update template\n * @deprecated Use CustomTemplatesService or updateCustomTemplateInDB instead\n */\nexport async function updateCustomTemplate(id: string, input: UpdateTemplateInput): Promise<TemplateBlocksData> {\n  return getService().updateTemplate(id, input);\n}\n\n/**\n * Convenience function - Delete template\n * @deprecated Use CustomTemplatesService or deleteCustomTemplateFromDB instead\n */\nexport async function deleteCustomTemplate(id: string): Promise<boolean> {\n  return getService().deleteTemplate(id);\n}\n\n/**\n * Convenience function - Duplicate template\n * @deprecated Use CustomTemplatesService instead\n */\nexport async function duplicateCustomTemplate(id: string, newName?: string): Promise<TemplateBlocksData> {\n  return getService().duplicateTemplate(id, newName);\n}\n\n/**\n * Convenience function - Share template\n * @deprecated Use CustomTemplatesService instead\n */\nexport async function shareTemplate(templateId: string, userIds: string[]): Promise<any> {\n  return getService().shareTemplate(templateId, userIds);\n}\n\n/**\n * Convenience function - Unshare template\n * @deprecated Use CustomTemplatesService instead\n */\nexport async function unshareTemplate(templateId: string, userId: string): Promise<boolean> {\n  return getService().unshareTemplate(templateId, userId);\n}\n\n/**\n * Convenience function - Update template publicity\n * @deprecated Use CustomTemplatesService instead\n */\nexport async function updateTemplatePublicity(id: string, isPublic: boolean): Promise<TemplateBlocksData> {\n  return getService().updatePublicity(id, isPublic);\n}\n\n/**\n * Convenience function - Track template usage\n * @deprecated Use CustomTemplatesService instead\n */\nexport async function incrementTemplateUsage(id: string): Promise<number> {\n  return getService().trackUsage(id);\n}\n\n// ============================================================================\n// LEGACY LOCALSTORAGE FUNCTIONS (for backward compatibility)\n// ============================================================================\nexport function getCustomTemplateStats(): TemplateStats {\n  try {\n    const stored = localStorage.getItem('customTemplates');\n    if (!stored) return { total: 0, byCategory: {} };\n\n    const templates = JSON.parse(stored) as CustomTemplate[];\n    const byCategory = templates.reduce(\n      (acc, template) => {\n        acc[template.category] = (acc[template.category] || 0) + 1;\n        return acc;\n      },\n      {} as Record<string, number>\n    );\n\n    const totalSize = new Blob([stored]).size;\n\n    return {\n      total: templates.length,\n      byCategory,\n      formattedSize: formatBytes(totalSize),\n    };\n  } catch (error) {\n    console.error('[CustomTemplates] Error getting template stats:', error);\n    return { total: 0, byCategory: {} };\n  }\n}\n\n/**\n * Clear all custom templates from localStorage\n * @deprecated Use database methods for production\n */\nexport function clearCustomTemplates(): void {\n  try {\n    localStorage.removeItem('customTemplates');\n    console.log('[CustomTemplates] All custom templates cleared');\n  } catch (error) {\n    console.error('[CustomTemplates] Error clearing custom templates:', error);\n  }\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Format bytes to human-readable string\n * @param bytes - Number of bytes\n * @returns Formatted string (e.g., \"2.5 MB\")\n */\nexport function formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n}\n\n/**\n * Validate template data\n * @param template - Template to validate\n * @returns True if valid, false otherwise\n */\nexport function validateTemplate(\n  template: Partial<BlockTemplate>\n): boolean {\n  return !!(\n    template.name &&\n    template.name.trim().length > 0 &&\n    template.category &&\n    Array.isArray(template.blocks)\n  );\n}\n\n/**\n * Create a summary of template sizes\n * @param templates - Array of templates\n * @returns Summary with sizes and counts\n */\nexport function createTemplateSummary(\n  templates: CustomTemplate[]\n): {\n  count: number;\n  categories: Record<string, number>;\n  approximateSize: string;\n} {\n  const summary = templates.reduce(\n    (acc, template) => {\n      acc.categories[template.category] = (acc.categories[template.category] || 0) + 1;\n      return acc;\n    },\n    { categories: {} as Record<string, number> }\n  );\n\n  const totalSize = new Blob([JSON.stringify(templates)]).size;\n\n  return {\n    count: templates.length,\n    categories: summary.categories,\n    approximateSize: formatBytes(totalSize),\n  };\n}\n","import React from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { PageBlock } from '@/types/page-builder';\nimport { BlockRenderer } from './BlockRenderer';\n\ninterface SortableBlockWrapperProps {\n  block: PageBlock;\n  isEditing: boolean;\n  onUpdate: (content: any, style?: any) => void;\n  onDelete: () => void;\n  onAddChild?: (parentId: string) => void;\n  onUpdateChild?: (blockId: string, content: any, style?: any) => void;\n  onDeleteChild?: (blockId: string) => void;\n  onSelect?: (blockId: string | null) => void;\n  depth?: number;\n}\n\nexport function SortableBlockWrapper({\n  block,\n  isEditing,\n  onUpdate,\n  onDelete,\n  onAddChild,\n  onUpdateChild,\n  onDeleteChild,\n  onSelect,\n  depth = 0,\n}: SortableBlockWrapperProps) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({\n    id: block.id,\n    data: {\n      type: 'existing-block',\n      block,\n    },\n  });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n\n  return (\n    <div ref={setNodeRef} style={style} {...attributes}>\n      <div className={`relative group rounded-lg transition-all duration-200 ${\n        isDragging \n          ? 'ring-4 ring-blue-400 shadow-2xl scale-102' \n          : 'hover:ring-2 hover:ring-gray-300'\n      }`}>\n        {/* Drag Handle - Only visible in edit mode */}\n        {isEditing && (\n          <div\n            {...listeners}\n            className={`absolute -left-8 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center transition-all cursor-grab active:cursor-grabbing rounded shadow-sm z-10 ${\n              isDragging\n                ? 'opacity-100 bg-blue-500 border border-blue-600'\n                : 'opacity-0 group-hover:opacity-100 bg-white border border-gray-300 hover:bg-blue-50'\n            }`}\n            title=\"Drag to reorder\"\n          >\n            <svg\n              className={`w-4 h-4 transition-colors ${\n                isDragging ? 'text-white' : 'text-gray-400'\n              }`}\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M8 9h8M8 15h8\"\n              />\n            </svg>\n          </div>\n        )}\n\n        {/* Drag Indicator */}\n        {isDragging && (\n          <div className=\"absolute -top-3 -right-3 bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-bounce z-20\">\n            ⬆️ Reordering\n          </div>\n        )}\n\n        {/* Block Content */}\n        <BlockRenderer\n          block={block}\n          isEditing={isEditing}\n          onUpdate={onUpdate}\n          onDelete={onDelete}\n          onAddChild={onAddChild}\n          onUpdateChild={onUpdateChild}\n          onDeleteChild={onDeleteChild}\n          onSelect={onSelect}\n          depth={depth}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { useMemo, useCallback, useState } from 'react';\nimport {\n  useDroppable,\n} from '@dnd-kit/core';\nimport {\n  SortableContext,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport {\n  Plus,\n  Layout,\n  Search,\n  Star,\n} from 'lucide-react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { cn } from '@/lib/utils';\nimport { usePageState, useUIState, usePageActions } from './contexts';\nimport { BlockRenderer } from './blocks/BlockRenderer';\nimport { SortableBlockWrapper } from './blocks/SortableBlockWrapper';\nimport { \n  DropdownMenu, \n  DropdownMenuContent, \n  DropdownMenuItem, \n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { BlockType } from '@/types/page-builder';\nimport { BLOCK_TYPES, BLOCK_TYPE_GROUPS } from '@/constants/blockTypes';\nimport { pageBuilderLogger, LOG_OPERATIONS } from './utils/pageBuilderLogger';\n\n\n/**\n * PageBuilderCanvas Component\n * \n * The main editing area where blocks are displayed and can be:\n * - Reordered via drag-and-drop\n * - Edited in place\n * - Deleted\n * - Previewed (read-only mode)\n * \n * Features:\n * - Drag-and-drop with visual feedback\n * - Nested block support\n * - Preview mode toggle\n * - Empty state\n * \n * Performance optimizations:\n * - Wrapped with React.memo\n * - useMemo for block IDs array\n * - useCallback for update handlers\n */\nconst PageBuilderCanvasComponent = React.memo(function PageBuilderCanvasComponent() {\n  // Use individual hooks for better performance\n  const { blocks, draggedBlock } = usePageState();\n  const { showPreview } = useUIState();\n  const { handleBlockUpdate, handleBlockDelete, handleAddChild, handleSelectBlock, handleAddBlock } = usePageActions();\n  const [isAddingBlock, setIsAddingBlock] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  // Load bookmarks from localStorage on mount\n  const [bookmarkedBlocks, setBookmarkedBlocks] = useState<Set<BlockType>>(() => {\n    if (typeof window === 'undefined') return new Set();\n    try {\n      const saved = localStorage.getItem('pagebuilder-bookmarks');\n      return saved ? new Set(JSON.parse(saved)) : new Set();\n    } catch {\n      return new Set();\n    }\n  });\n\n  // Save bookmarks to localStorage whenever they change\n  React.useEffect(() => {\n    if (typeof window === 'undefined') return;\n    try {\n      localStorage.setItem('pagebuilder-bookmarks', JSON.stringify(Array.from(bookmarkedBlocks)));\n    } catch (error) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_ADD, 'Failed to save bookmarks', { error });\n    }\n  }, [bookmarkedBlocks]);\n\n  // Memoize block IDs array to prevent SortableContext re-renders\n  const blockIds = useMemo(() => blocks.map(b => b.id), [blocks]);\n\n  // Memoize empty state check\n  const hasBlocks = useMemo(() => blocks.length > 0, [blocks.length]);\n\n  // Main droppable zone for canvas - accepts both existing blocks and new blocks from LeftPanel\n  // IMPORTANT: This droppable is OUTSIDE the SortableContext to properly receive new-block drops\n  const { setNodeRef: setCanvasRef, isOver: isCanvasOver, node: canvasNode } = useDroppable({\n    id: 'canvas-droppable',\n    data: {\n      type: 'canvas',\n      accepts: ['existing-block', 'new-block'],\n    },\n  });\n  \n  // Log droppable setup (dev only to prevent performance overhead)\n  React.useEffect(() => {\n    pageBuilderLogger.debug('CANVAS_SETUP', 'Canvas droppable initialized', {\n      hasRef: !!setCanvasRef,\n      isOver: isCanvasOver,\n    });\n  }, [setCanvasRef, isCanvasOver]);\n\n  // Block types grouped by category with lucide icons\n  const blockTypeGroups = BLOCK_TYPE_GROUPS;\n\n  // Flatten for dropdown rendering\n  const commonBlockTypes = blockTypeGroups.flatMap(group => group.blocks);\n\n  // Handle add block with feedback\n  const handleAddBlockClick = useCallback(async (blockType: BlockType) => {\n    try {\n      await handleAddBlock(blockType);\n      setIsAddingBlock(false);\n      setSearchQuery(''); // Clear search after adding\n    } catch (error) {\n      pageBuilderLogger.error(LOG_OPERATIONS.BLOCK_ADD, 'Failed to add block', { blockType, error });\n    }\n  }, [handleAddBlock]);\n\n  // Toggle bookmark\n  const toggleBookmark = useCallback((blockType: BlockType, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent dropdown item click\n    setBookmarkedBlocks(prev => {\n      const next = new Set(prev);\n      if (next.has(blockType)) {\n        next.delete(blockType);\n      } else {\n        next.add(blockType);\n      }\n      return next;\n    });\n  }, []);\n\n  // Filter blocks based on search query\n  const filteredBlockGroups = useMemo(() => {\n    if (!searchQuery.trim()) {\n      return blockTypeGroups;\n    }\n\n    const query = searchQuery.toLowerCase();\n    return blockTypeGroups.map(group => ({\n      ...group,\n      blocks: group.blocks.filter(block => \n        block.label.toLowerCase().includes(query) ||\n        block.type.toLowerCase().includes(query)\n      )\n    })).filter(group => group.blocks.length > 0);\n  }, [searchQuery, blockTypeGroups]);\n\n  // Get bookmarked blocks\n  const bookmarkedBlocksList = useMemo(() => {\n    if (bookmarkedBlocks.size === 0) return [];\n    \n    return blockTypeGroups.flatMap(group => group.blocks)\n      .filter(block => bookmarkedBlocks.has(block.type));\n  }, [bookmarkedBlocks, blockTypeGroups]);\n\n  // Render dropdown menu content with grouped items\n  const renderDropdownItems = () => {\n    return (\n      <>\n        {/* Bookmarked Blocks Section */}\n        {bookmarkedBlocksList.length > 0 && (\n          <div>\n            <div className=\"px-2 py-1.5 text-xs font-semibold text-yellow-600 uppercase flex items-center gap-1\">\n              <Star size={12} className=\"fill-yellow-500 text-yellow-500\" />\n              Bookmarked\n            </div>\n            {bookmarkedBlocksList.map(({ type, label, icon: IconComponent }) => (\n              <DropdownMenuItem \n                key={type}\n                onClick={() => handleAddBlockClick(type)}\n                className=\"cursor-pointer gap-2 group\"\n              >\n                <IconComponent size={16} className=\"text-gray-600\" />\n                <span className=\"flex-1\">{label}</span>\n                <Star \n                  size={14} \n                  className=\"fill-yellow-500 text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  onClick={(e) => toggleBookmark(type, e)}\n                />\n              </DropdownMenuItem>\n            ))}\n            <div className=\"my-1 mx-0 h-px bg-gray-200\" />\n          </div>\n        )}\n\n        {/* Filtered Block Groups */}\n        {filteredBlockGroups.length === 0 ? (\n          <div className=\"px-4 py-8 text-center text-gray-500 text-sm\">\n            <Search size={32} className=\"mx-auto mb-2 opacity-30\" />\n            No blocks found for \"{searchQuery}\"\n          </div>\n        ) : (\n          filteredBlockGroups.map((group, groupIndex) => (\n            <div key={group.category}>\n              {(groupIndex > 0 || bookmarkedBlocksList.length > 0) && (\n                <div className=\"my-1 mx-0 h-px bg-gray-200\" />\n              )}\n              <div className=\"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase\">\n                {group.category}\n              </div>\n              {group.blocks.map(({ type, label, icon: IconComponent }) => {\n                const isBookmarked = bookmarkedBlocks.has(type);\n                return (\n                  <DropdownMenuItem \n                    key={type}\n                    onClick={() => handleAddBlockClick(type)}\n                    className=\"cursor-pointer gap-2 group\"\n                  >\n                    <IconComponent size={16} className=\"text-gray-600\" />\n                    <span className=\"flex-1\">{label}</span>\n                    <Star \n                      size={14} \n                      className={cn(\n                        \"transition-all\",\n                        isBookmarked \n                          ? \"fill-yellow-500 text-yellow-500\" \n                          : \"text-gray-300 opacity-0 group-hover:opacity-100\"\n                      )}\n                      onClick={(e) => toggleBookmark(type, e)}\n                    />\n                  </DropdownMenuItem>\n                );\n              })}\n            </div>\n          ))\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className=\"flex-1 p-12 overflow-auto bg-gradient-to-br from-gray-50 to-gray-100\">\n      <div className=\"max-w-4xl mx-auto\">\n        {showPreview ? (\n          // Preview Mode - Read-only view\n          <div className=\"bg-white rounded-lg shadow-sm border p-8\">\n            <h2 className=\"text-3xl font-bold mb-6\">Preview</h2>\n            {blocks.map(block => (\n              <BlockRenderer\n                key={block.id}\n                block={block}\n                isEditing={false}\n                onUpdate={() => {}}\n                onDelete={() => {}}\n              />\n            ))}\n          </div>\n        ) : (\n          // Edit Mode - Sortable enabled\n          <SortableContext \n            items={blockIds}\n            strategy={verticalListSortingStrategy}\n          >\n            <div \n              ref={setCanvasRef} \n              className={`space-y-4 min-h-[400px] p-6 rounded-lg transition-all duration-200 ${\n                isCanvasOver \n                  ? 'bg-blue-50 border-2 border-blue-400 border-dashed shadow-lg shadow-blue-200' \n                  : 'bg-white border-2 border-dashed border-gray-200'\n              }`}\n            >\n              {/* Drop zone hint - optimized for performance */}\n              <div className={cn(\n                \"absolute inset-0 pointer-events-none flex items-center justify-center transition-opacity duration-200\",\n                isCanvasOver ? \"opacity-100\" : \"opacity-0\"\n              )}>\n                <div className=\"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg animate-bounce\">\n                  📍 Drop here to add block\n                </div>\n              </div>\n              \n              {!hasBlocks ? (\n                // Empty State - Droppable\n                <Card className={`p-8 text-center border-2 transition-all duration-200 ${\n                  isCanvasOver\n                    ? 'border-blue-400 border-solid bg-blue-50 scale-105'\n                    : 'border-gray-300 border-dashed hover:border-primary hover:bg-primary/5'\n                }`}>\n                  <div className=\"text-gray-500\">\n                    <Layout size={48} className=\"mx-auto mb-4 opacity-50\" />\n                    <p className=\"text-lg font-medium mb-2\">No blocks yet</p>\n                    <p className=\"text-sm mb-6\">Drag and drop blocks from the left panel to start building</p>\n                    {isCanvasOver && (\n                      <p className=\"text-sm text-blue-600 font-semibold mb-4\">🎯 Ready to drop!</p>\n                    )}\n                    \n                    {/* Add Block Dropdown Button */}\n                    <DropdownMenu open={isAddingBlock} onOpenChange={setIsAddingBlock}>\n                      <DropdownMenuTrigger asChild>\n                        <Button \n                          size=\"sm\" \n                          className=\"gap-2\"\n                          variant=\"default\"\n                        >\n                          <Plus size={16} />\n                          Add Block\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"center\" className=\"w-64 max-h-96 overflow-hidden flex flex-col\">\n                        {/* Search Input */}\n                        <div className=\"p-2 border-b sticky top-0 bg-white z-10\">\n                          <div className=\"relative\">\n                            <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\n                            <Input\n                              type=\"text\"\n                              placeholder=\"Search blocks...\"\n                              value={searchQuery}\n                              onChange={(e) => setSearchQuery(e.target.value)}\n                              className=\"pl-9 h-8 text-sm\"\n                              onClick={(e) => e.stopPropagation()}\n                            />\n                          </div>\n                        </div>\n                        \n                        {/* Scrollable Content */}\n                        <div className=\"overflow-y-auto max-h-80\">\n                          {renderDropdownItems()}\n                        </div>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n                </Card>\n              ) : (\n                // Block List with Sortable Wrappers\n                <>\n                  {/* Blocks List */}\n                  <div className=\"space-y-4\">\n                    {blocks.map(block => (\n                      <SortableBlockWrapper\n                        key={block.id}\n                        block={block}\n                        isEditing={true}\n                        onUpdate={(content: any, style: any) => handleBlockUpdate(block.id, content, style)}\n                        onDelete={() => handleBlockDelete(block.id)}\n                        onAddChild={handleAddChild}\n                        onUpdateChild={handleBlockUpdate}\n                        onDeleteChild={handleBlockDelete}\n                        onSelect={handleSelectBlock}\n                        depth={0}\n                      />\n                    ))}\n                    \n                    {/* Add Block Button at Bottom */}\n                    <div className=\"pt-4 border-t border-gray-200 mt-6\">\n                      <DropdownMenu open={isAddingBlock} onOpenChange={setIsAddingBlock}>\n                        <DropdownMenuTrigger asChild>\n                          <Button \n                            size=\"sm\" \n                            className=\"w-full gap-2\"\n                            variant=\"secondary\"\n                          >\n                            <Plus size={16} />\n                            Add New Block\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"center\" className=\"w-64 max-h-96 overflow-hidden flex flex-col\">\n                          {/* Search Input */}\n                          <div className=\"p-2 border-b sticky top-0 bg-white z-10\">\n                            <div className=\"relative\">\n                              <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\n                              <Input\n                                type=\"text\"\n                                placeholder=\"Search blocks...\"\n                                value={searchQuery}\n                                onChange={(e) => setSearchQuery(e.target.value)}\n                                className=\"pl-9 h-8 text-sm\"\n                                onClick={(e) => e.stopPropagation()}\n                              />\n                            </div>\n                          </div>\n                          \n                          {/* Scrollable Content */}\n                          <div className=\"overflow-y-auto max-h-80\">\n                            {renderDropdownItems()}\n                          </div>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </SortableContext>\n        )}\n      </div>\n    </div>\n  );\n});\n\n// Export with React.memo to prevent unnecessary re-renders\n// Only re-renders when blocks, draggedBlock, or showPreview change\nexport const PageBuilderCanvas = PageBuilderCanvasComponent;\n","/**\n * Template Thumbnail Generator\n * Generates SVG thumbnails for block templates\n */\n\nexport const generateThumbnailSVG = (templateId: string): string => {\n  const thumbnails: Record<string, string> = {\n    'hero-centered': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#f8fafc\"/>\n        <rect x=\"50\" y=\"80\" width=\"300\" height=\"40\" rx=\"4\" fill=\"#1e293b\" opacity=\"0.8\"/>\n        <rect x=\"100\" y=\"140\" width=\"200\" height=\"20\" rx=\"4\" fill=\"#64748b\" opacity=\"0.6\"/>\n        <rect x=\"150\" y=\"180\" width=\"100\" height=\"35\" rx=\"6\" fill=\"#3b82f6\"/>\n        <text x=\"200\" y=\"203\" font-family=\"Arial\" font-size=\"14\" fill=\"white\" text-anchor=\"middle\">CTA</text>\n      </svg>\n    `,\n    'features-3col': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <rect x=\"20\" y=\"20\" width=\"110\" height=\"260\" rx=\"8\" fill=\"#f1f5f9\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <circle cx=\"75\" cy=\"60\" r=\"20\" fill=\"#3b82f6\" opacity=\"0.2\"/>\n        <rect x=\"40\" y=\"100\" width=\"70\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"30\" y=\"120\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        \n        <rect x=\"145\" y=\"20\" width=\"110\" height=\"260\" rx=\"8\" fill=\"#f1f5f9\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <circle cx=\"200\" cy=\"60\" r=\"20\" fill=\"#10b981\" opacity=\"0.2\"/>\n        <rect x=\"165\" y=\"100\" width=\"70\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"155\" y=\"120\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        \n        <rect x=\"270\" y=\"20\" width=\"110\" height=\"260\" rx=\"8\" fill=\"#f1f5f9\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <circle cx=\"325\" cy=\"60\" r=\"20\" fill=\"#f59e0b\" opacity=\"0.2\"/>\n        <rect x=\"290\" y=\"100\" width=\"70\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"280\" y=\"120\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n      </svg>\n    `,\n    'pricing-3tier': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <!-- Basic Plan -->\n        <rect x=\"20\" y=\"40\" width=\"110\" height=\"220\" rx=\"8\" fill=\"#ffffff\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <rect x=\"30\" y=\"50\" width=\"90\" height=\"30\" rx=\"4\" fill=\"#f1f5f9\"/>\n        <text x=\"75\" y=\"70\" font-family=\"Arial\" font-size=\"12\" fill=\"#64748b\" text-anchor=\"middle\">Basic</text>\n        <text x=\"75\" y=\"110\" font-family=\"Arial\" font-size=\"24\" fill=\"#1e293b\" text-anchor=\"middle\" font-weight=\"bold\">$9</text>\n        <rect x=\"35\" y=\"130\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"35\" y=\"145\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"35\" y=\"160\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        \n        <!-- Pro Plan (Highlighted) -->\n        <rect x=\"145\" y=\"30\" width=\"110\" height=\"240\" rx=\"8\" fill=\"#3b82f6\" stroke=\"#2563eb\" stroke-width=\"2\"/>\n        <rect x=\"155\" y=\"40\" width=\"90\" height=\"30\" rx=\"4\" fill=\"rgba(255,255,255,0.2)\"/>\n        <text x=\"200\" y=\"60\" font-family=\"Arial\" font-size=\"12\" fill=\"white\" text-anchor=\"middle\" font-weight=\"bold\">Pro</text>\n        <text x=\"200\" y=\"100\" font-family=\"Arial\" font-size=\"24\" fill=\"white\" text-anchor=\"middle\" font-weight=\"bold\">$29</text>\n        <rect x=\"160\" y=\"120\" width=\"80\" height=\"4\" rx=\"2\" fill=\"rgba(255,255,255,0.5)\"/>\n        <rect x=\"160\" y=\"135\" width=\"80\" height=\"4\" rx=\"2\" fill=\"rgba(255,255,255,0.5)\"/>\n        <rect x=\"160\" y=\"150\" width=\"80\" height=\"4\" rx=\"2\" fill=\"rgba(255,255,255,0.5)\"/>\n        \n        <!-- Enterprise Plan -->\n        <rect x=\"270\" y=\"40\" width=\"110\" height=\"220\" rx=\"8\" fill=\"#ffffff\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <rect x=\"280\" y=\"50\" width=\"90\" height=\"30\" rx=\"4\" fill=\"#f1f5f9\"/>\n        <text x=\"325\" y=\"70\" font-family=\"Arial\" font-size=\"12\" fill=\"#64748b\" text-anchor=\"middle\">Enterprise</text>\n        <text x=\"325\" y=\"110\" font-family=\"Arial\" font-size=\"24\" fill=\"#1e293b\" text-anchor=\"middle\" font-weight=\"bold\">$99</text>\n        <rect x=\"285\" y=\"130\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"285\" y=\"145\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"285\" y=\"160\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n      </svg>\n    `,\n    'cta-centered': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#1e293b\"/>\n        <rect x=\"60\" y=\"80\" width=\"280\" height=\"30\" rx=\"4\" fill=\"rgba(255,255,255,0.9)\"/>\n        <rect x=\"80\" y=\"130\" width=\"240\" height=\"15\" rx=\"4\" fill=\"rgba(255,255,255,0.6)\"/>\n        <rect x=\"100\" y=\"155\" width=\"200\" height=\"15\" rx=\"4\" fill=\"rgba(255,255,255,0.6)\"/>\n        <rect x=\"120\" y=\"190\" width=\"160\" height=\"40\" rx=\"8\" fill=\"#3b82f6\"/>\n        <text x=\"200\" y=\"216\" font-family=\"Arial\" font-size=\"14\" fill=\"white\" text-anchor=\"middle\" font-weight=\"bold\">Get Started</text>\n      </svg>\n    `,\n    'team-3members': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <!-- Member 1 -->\n        <circle cx=\"75\" cy=\"80\" r=\"30\" fill=\"#3b82f6\" opacity=\"0.2\"/>\n        <circle cx=\"75\" cy=\"75\" r=\"15\" fill=\"#3b82f6\"/>\n        <rect x=\"40\" y=\"120\" width=\"70\" height=\"10\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"30\" y=\"140\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        \n        <!-- Member 2 -->\n        <circle cx=\"200\" cy=\"80\" r=\"30\" fill=\"#10b981\" opacity=\"0.2\"/>\n        <circle cx=\"200\" cy=\"75\" r=\"15\" fill=\"#10b981\"/>\n        <rect x=\"165\" y=\"120\" width=\"70\" height=\"10\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"155\" y=\"140\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        \n        <!-- Member 3 -->\n        <circle cx=\"325\" cy=\"80\" r=\"30\" fill=\"#f59e0b\" opacity=\"0.2\"/>\n        <circle cx=\"325\" cy=\"75\" r=\"15\" fill=\"#f59e0b\"/>\n        <rect x=\"290\" y=\"120\" width=\"70\" height=\"10\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"280\" y=\"140\" width=\"90\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n      </svg>\n    `,\n    'contact-form': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <!-- Form Section -->\n        <rect x=\"30\" y=\"30\" width=\"200\" height=\"240\" rx=\"8\" fill=\"#f8fafc\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <rect x=\"45\" y=\"50\" width=\"170\" height=\"30\" rx=\"4\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"45\" y=\"90\" width=\"170\" height=\"30\" rx=\"4\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"45\" y=\"130\" width=\"170\" height=\"60\" rx=\"4\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"45\" y=\"200\" width=\"170\" height=\"35\" rx=\"6\" fill=\"#3b82f6\"/>\n        <text x=\"130\" y=\"222\" font-family=\"Arial\" font-size=\"12\" fill=\"white\" text-anchor=\"middle\">Send</text>\n        \n        <!-- Contact Info -->\n        <rect x=\"250\" y=\"70\" width=\"120\" height=\"100\" rx=\"6\" fill=\"#f1f5f9\"/>\n        <circle cx=\"280\" cy=\"95\" r=\"8\" fill=\"#3b82f6\"/>\n        <rect x=\"295\" y=\"90\" width=\"60\" height=\"4\" rx=\"2\" fill=\"#64748b\"/>\n        <circle cx=\"280\" cy=\"125\" r=\"8\" fill=\"#10b981\"/>\n        <rect x=\"295\" y=\"120\" width=\"60\" height=\"4\" rx=\"2\" fill=\"#64748b\"/>\n        <circle cx=\"280\" cy=\"155\" r=\"8\" fill=\"#f59e0b\"/>\n        <rect x=\"295\" y=\"150\" width=\"60\" height=\"4\" rx=\"2\" fill=\"#64748b\"/>\n      </svg>\n    `,\n    'testimonials-3col': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <!-- Testimonial 1 -->\n        <rect x=\"20\" y=\"60\" width=\"110\" height=\"180\" rx=\"8\" fill=\"#ffffff\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <text x=\"75\" y=\"85\" font-family=\"Arial\" font-size=\"24\" fill=\"#f59e0b\" text-anchor=\"middle\">\"</text>\n        <rect x=\"30\" y=\"100\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"35\" y=\"110\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"30\" y=\"120\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <circle cx=\"75\" cy=\"170\" r=\"20\" fill=\"#3b82f6\" opacity=\"0.2\"/>\n        <rect x=\"50\" y=\"200\" width=\"50\" height=\"6\" rx=\"3\" fill=\"#1e293b\"/>\n        <path d=\"M 50 215 L 55 220 L 50 225 M 55 215 L 60 220 L 55 225 M 60 215 L 65 220 L 60 225 M 65 215 L 70 220 L 65 225 M 70 215 L 75 220 L 70 225\" stroke=\"#f59e0b\" stroke-width=\"2\" fill=\"none\"/>\n        \n        <!-- Testimonial 2 -->\n        <rect x=\"145\" y=\"60\" width=\"110\" height=\"180\" rx=\"8\" fill=\"#ffffff\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <text x=\"200\" y=\"85\" font-family=\"Arial\" font-size=\"24\" fill=\"#f59e0b\" text-anchor=\"middle\">\"</text>\n        <rect x=\"155\" y=\"100\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"160\" y=\"110\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"155\" y=\"120\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <circle cx=\"200\" cy=\"170\" r=\"20\" fill=\"#10b981\" opacity=\"0.2\"/>\n        <rect x=\"175\" y=\"200\" width=\"50\" height=\"6\" rx=\"3\" fill=\"#1e293b\"/>\n        <path d=\"M 175 215 L 180 220 L 175 225 M 180 215 L 185 220 L 180 225 M 185 215 L 190 220 L 185 225 M 190 215 L 195 220 L 190 225 M 195 215 L 200 220 L 195 225\" stroke=\"#f59e0b\" stroke-width=\"2\" fill=\"none\"/>\n        \n        <!-- Testimonial 3 -->\n        <rect x=\"270\" y=\"60\" width=\"110\" height=\"180\" rx=\"8\" fill=\"#ffffff\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        <text x=\"325\" y=\"85\" font-family=\"Arial\" font-size=\"24\" fill=\"#f59e0b\" text-anchor=\"middle\">\"</text>\n        <rect x=\"280\" y=\"100\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"285\" y=\"110\" width=\"80\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <rect x=\"280\" y=\"120\" width=\"90\" height=\"4\" rx=\"2\" fill=\"#e2e8f0\"/>\n        <circle cx=\"325\" cy=\"170\" r=\"20\" fill=\"#f59e0b\" opacity=\"0.2\"/>\n        <rect x=\"300\" y=\"200\" width=\"50\" height=\"6\" rx=\"3\" fill=\"#1e293b\"/>\n        <path d=\"M 300 215 L 305 220 L 300 225 M 305 215 L 310 220 L 305 225 M 310 215 L 315 220 L 310 225 M 315 215 L 320 220 L 315 225 M 320 215 L 325 220 L 320 225\" stroke=\"#f59e0b\" stroke-width=\"2\" fill=\"none\"/>\n      </svg>\n    `,\n    'carousel-featured-products': `\n      <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"400\" height=\"300\" fill=\"#ffffff\"/>\n        <!-- Title -->\n        <rect x=\"100\" y=\"20\" width=\"200\" height=\"12\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"120\" y=\"40\" width=\"160\" height=\"8\" rx=\"4\" fill=\"#64748b\" opacity=\"0.5\"/>\n        \n        <!-- Carousel Container -->\n        <rect x=\"20\" y=\"70\" width=\"360\" height=\"200\" rx=\"8\" fill=\"#f8fafc\" stroke=\"#e2e8f0\" stroke-width=\"2\"/>\n        \n        <!-- Product Cards -->\n        <rect x=\"35\" y=\"85\" width=\"100\" height=\"170\" rx=\"6\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"40\" y=\"90\" width=\"90\" height=\"90\" rx=\"4\" fill=\"#e0e7ff\"/>\n        <rect x=\"50\" y=\"100\" width=\"70\" height=\"70\" rx=\"4\" fill=\"#818cf8\" opacity=\"0.3\"/>\n        <rect x=\"45\" y=\"190\" width=\"80\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"45\" y=\"205\" width=\"60\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        <rect x=\"45\" y=\"220\" width=\"50\" height=\"20\" rx=\"4\" fill=\"#3b82f6\"/>\n        <text x=\"70\" y=\"233\" font-family=\"Arial\" font-size=\"10\" fill=\"white\" text-anchor=\"middle\">View</text>\n        \n        <rect x=\"150\" y=\"85\" width=\"100\" height=\"170\" rx=\"6\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"155\" y=\"90\" width=\"90\" height=\"90\" rx=\"4\" fill=\"#dbeafe\"/>\n        <rect x=\"165\" y=\"100\" width=\"70\" height=\"70\" rx=\"4\" fill=\"#60a5fa\" opacity=\"0.3\"/>\n        <rect x=\"160\" y=\"190\" width=\"80\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"160\" y=\"205\" width=\"60\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        <rect x=\"160\" y=\"220\" width=\"50\" height=\"20\" rx=\"4\" fill=\"#3b82f6\"/>\n        <text x=\"185\" y=\"233\" font-family=\"Arial\" font-size=\"10\" fill=\"white\" text-anchor=\"middle\">View</text>\n        \n        <rect x=\"265\" y=\"85\" width=\"100\" height=\"170\" rx=\"6\" fill=\"white\" stroke=\"#cbd5e1\" stroke-width=\"1\"/>\n        <rect x=\"270\" y=\"90\" width=\"90\" height=\"90\" rx=\"4\" fill=\"#fef3c7\"/>\n        <rect x=\"280\" y=\"100\" width=\"70\" height=\"70\" rx=\"4\" fill=\"#fbbf24\" opacity=\"0.3\"/>\n        <rect x=\"275\" y=\"190\" width=\"80\" height=\"8\" rx=\"4\" fill=\"#1e293b\"/>\n        <rect x=\"275\" y=\"205\" width=\"60\" height=\"6\" rx=\"3\" fill=\"#64748b\" opacity=\"0.5\"/>\n        <rect x=\"275\" y=\"220\" width=\"50\" height=\"20\" rx=\"4\" fill=\"#3b82f6\"/>\n        <text x=\"300\" y=\"233\" font-family=\"Arial\" font-size=\"10\" fill=\"white\" text-anchor=\"middle\">View</text>\n        \n        <!-- Navigation Arrows -->\n        <circle cx=\"15\" cy=\"170\" r=\"8\" fill=\"#3b82f6\" opacity=\"0.8\"/>\n        <path d=\"M 17 170 L 14 167 L 14 173 Z\" fill=\"white\"/>\n        <circle cx=\"385\" cy=\"170\" r=\"8\" fill=\"#3b82f6\" opacity=\"0.8\"/>\n        <path d=\"M 383 170 L 386 167 L 386 173 Z\" fill=\"white\"/>\n        \n        <!-- Indicators -->\n        <circle cx=\"180\" cy=\"285\" r=\"4\" fill=\"#3b82f6\"/>\n        <circle cx=\"195\" cy=\"285\" r=\"4\" fill=\"#cbd5e1\"/>\n        <circle cx=\"210\" cy=\"285\" r=\"4\" fill=\"#cbd5e1\"/>\n        <circle cx=\"225\" cy=\"285\" r=\"4\" fill=\"#cbd5e1\"/>\n      </svg>\n    `,\n  };\n\n  return thumbnails[templateId] || generateDefaultThumbnail();\n};\n\nconst generateDefaultThumbnail = (): string => {\n  return `\n    <svg viewBox=\"0 0 400 300\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"400\" height=\"300\" fill=\"#f8fafc\"/>\n      <rect x=\"100\" y=\"100\" width=\"200\" height=\"100\" rx=\"8\" fill=\"#e2e8f0\" stroke=\"#cbd5e1\" stroke-width=\"2\"/>\n      <text x=\"200\" y=\"155\" font-family=\"Arial\" font-size=\"16\" fill=\"#64748b\" text-anchor=\"middle\">Template</text>\n    </svg>\n  `;\n};\n\nexport const getThumbnailDataURL = (templateId: string): string => {\n  const svg = generateThumbnailSVG(templateId);\n  const encodedSvg = encodeURIComponent(svg);\n  return `data:image/svg+xml;charset=utf-8,${encodedSvg}`;\n};\n","/**\n * Storage Manager with Compression and Quota Management\n * Handles localStorage quota limits with automatic cleanup and compression\n */\n\n// Simple compression using LZ-String-like algorithm\nexport class StorageManager {\n  private static readonly MAX_STORAGE_SIZE = 5 * 1024 * 1024; // 5MB (typical localStorage limit)\n  private static readonly WARNING_THRESHOLD = 0.75; // Warn at 75% full\n  private static readonly CLEANUP_THRESHOLD = 0.80; // Auto cleanup at 80% full\n  private static readonly CRITICAL_THRESHOLD = 0.95; // Critical cleanup at 95% full\n  private static readonly SAFE_THRESHOLD = 0.60; // Target safe level after cleanup\n\n  /**\n   * Compress a string using simple run-length encoding and base64\n   */\n  private static compress(str: string): string {\n    try {\n      // Simple compression: JSON -> base64\n      // For better compression, could use LZ-String library\n      return btoa(encodeURIComponent(str));\n    } catch (error) {\n      console.warn('Compression failed, using original:', error);\n      return str;\n    }\n  }\n\n  /**\n   * Decompress a string\n   */\n  private static decompress(str: string): string {\n    try {\n      return decodeURIComponent(atob(str));\n    } catch (error) {\n      // If decompression fails, assume it's not compressed\n      return str;\n    }\n  }\n\n  /**\n   * Get current localStorage usage\n   */\n  static getStorageUsage(): {\n    used: number;\n    available: number;\n    percentage: number;\n    isNearLimit: boolean;\n  } {\n    let used = 0;\n    \n    try {\n      // Calculate total size of all localStorage items\n      for (let key in localStorage) {\n        if (localStorage.hasOwnProperty(key)) {\n          used += (localStorage[key].length + key.length) * 2; // UTF-16 chars = 2 bytes each\n        }\n      }\n    } catch (error) {\n      console.error('Error calculating storage usage:', error);\n    }\n\n    const available = this.MAX_STORAGE_SIZE - used;\n    const percentage = (used / this.MAX_STORAGE_SIZE) * 100;\n    const isNearLimit = percentage >= (this.WARNING_THRESHOLD * 100);\n\n    return { used, available, percentage, isNearLimit };\n  }\n\n  /**\n   * Set item with compression and quota management\n   */\n  static setItem(key: string, value: any, options: {\n    compress?: boolean;\n    autoCleanup?: boolean;\n  } = {}): boolean {\n    const { compress = true, autoCleanup = true } = options;\n\n    try {\n      const jsonString = JSON.stringify(value);\n      const dataToStore = compress ? this.compress(jsonString) : jsonString;\n      \n      // Add metadata for cleanup decisions\n      const itemWithMeta = JSON.stringify({\n        data: dataToStore,\n        compressed: compress,\n        timestamp: Date.now(),\n        size: dataToStore.length,\n      });\n\n      // Check storage before writing\n      const usage = this.getStorageUsage();\n      const itemSize = (itemWithMeta.length + key.length) * 2;\n\n      // ⚠️ CRITICAL: Check if we have enough space BEFORE attempting to write\n      if (usage.percentage >= this.CRITICAL_THRESHOLD * 100 && autoCleanup) {\n        this.cleanup(key, true);\n      } else if (usage.percentage >= this.CLEANUP_THRESHOLD * 100 && autoCleanup) {\n        this.cleanup(key, false);\n      }\n\n      // Re-check after cleanup\n      const postCleanupUsage = this.getStorageUsage();\n      \n      // If still not enough space, prevent the write to avoid quota error\n      if (postCleanupUsage.available < itemSize && autoCleanup) {\n        this.cleanup(key, true);\n      }\n\n      // Try to set the item\n      localStorage.setItem(key, itemWithMeta);\n      \n      return true;\n    } catch (error: any) {\n      if (error.name === 'QuotaExceededError' || error.code === 22) {\n        const usage = this.getStorageUsage();\n        \n        // AGGRESSIVE emergency recovery (silent mode - no error logs)\n        if (options.autoCleanup) {\n          // Step 1: Delete ALL temporary/session data silently\n          const tempKeys = [];\n          for (let k in localStorage) {\n            if (localStorage.hasOwnProperty(k)) {\n              if (k.includes('temp') || k.includes('cache') || k.includes('draft') || k.includes('session')) {\n                try {\n                  localStorage.removeItem(k);\n                  tempKeys.push(k);\n                } catch (e) {\n                  // Silent fail\n                }\n              }\n            }\n          }\n          \n          // Step 2: Run aggressive cleanup if step 1 didn't free enough space\n          let postDeleteUsage = this.getStorageUsage();\n          if (postDeleteUsage.percentage > 70) {\n            this.cleanup(key, true);\n          }\n          \n          // Step 3: Retry the operation\n          try {\n            const jsonString = JSON.stringify(value);\n            const dataToStore = options.compress ? this.compress(jsonString) : jsonString;\n            const itemWithMeta = JSON.stringify({\n              data: dataToStore,\n              compressed: options.compress,\n              timestamp: Date.now(),\n              size: dataToStore.length,\n            });\n            \n            localStorage.setItem(key, itemWithMeta);\n            return true;\n          } catch (retryError: any) {\n            // Step 4: Last resort - try without compression\n            try {\n              if (options.compress) {\n                const jsonString = JSON.stringify(value);\n                \n                // Try to save minimal data first\n                const minimalMeta = JSON.stringify({\n                  data: jsonString,\n                  compressed: false,\n                  timestamp: Date.now(),\n                });\n                \n                localStorage.setItem(key, minimalMeta);\n                return true;\n              }\n            } catch (fallbackError: any) {\n              // Step 5: Complete failure - throw with minimal info\n              const finalUsage = this.getStorageUsage();\n              \n              throw new Error(\n                `Storage full (${finalUsage.percentage.toFixed(0)}%). Clear browser data or delete old templates.`\n              );\n            }\n          }\n        }\n        \n        throw error;\n      }\n      \n      // Other errors - throw silently without console.error\n      throw error;\n    }\n  }\n\n  /**\n   * Get item with automatic decompression\n   */\n  static getItem<T = any>(key: string): T | null {\n    try {\n      const stored = localStorage.getItem(key);\n      if (!stored) return null;\n\n      // Try to parse as metadata object\n      try {\n        const parsed = JSON.parse(stored);\n        \n        // New format with metadata\n        if (parsed.data !== undefined && parsed.compressed !== undefined) {\n          const data = parsed.compressed ? this.decompress(parsed.data) : parsed.data;\n          return JSON.parse(data);\n        }\n        \n        // Old format (direct JSON)\n        return parsed as T;\n      } catch (parseError) {\n        // If parsing fails, return as-is\n        return stored as any;\n      }\n    } catch (error) {\n      console.error('Error getting localStorage item:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Remove item\n   */\n  static removeItem(key: string): void {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      console.error('Error removing localStorage item:', error);\n    }\n  }\n\n  /**\n   * Cleanup old items to free space - IMPROVED with priority-based deletion\n   */\n  static cleanup(protectedKey?: string, aggressive: boolean = false): number {\n    try {\n      const items: { \n        key: string; \n        timestamp: number; \n        size: number;\n        priority: number;\n      }[] = [];\n\n      // Collect all items with timestamps and assign priority\n      for (let key in localStorage) {\n        if (localStorage.hasOwnProperty(key) && key !== protectedKey) {\n          try {\n            const stored = localStorage.getItem(key);\n            if (!stored) continue;\n\n            let timestamp = 0;\n            let size = (stored.length + key.length) * 2;\n            let priority = 0; // Higher = delete first\n\n            try {\n              const parsed = JSON.parse(stored);\n              timestamp = parsed.timestamp || 0;\n              size = parsed.size || size;\n            } catch (e) {\n              // OK, not metadata format\n            }\n\n            // Assign priority: older items = higher priority for deletion\n            const ageInDays = (Date.now() - timestamp) / (1000 * 60 * 60 * 24);\n            priority = ageInDays * 10; // Prioritize very old items\n\n            // Extra priority for cache/temp items\n            if (key.includes('cache') || key.includes('temp') || key.includes('draft')) {\n              priority += 1000; // Delete these FIRST\n            }\n            \n            // Extra priority for session data\n            if (key.includes('session') || key.includes('editor_')) {\n              priority += 500;\n            }\n\n            items.push({ key, timestamp, size, priority });\n          } catch (e) {\n            // Skip items that cause errors\n          }\n        }\n      }\n\n      // Sort by priority FIRST (descending), then by timestamp (oldest first)\n      items.sort((a, b) => {\n        if (b.priority !== a.priority) {\n          return b.priority - a.priority; // Higher priority first\n        }\n        return a.timestamp - b.timestamp; // Then oldest first\n      });\n\n      let freedSpace = 0;\n      const targetPercentage = aggressive ? this.SAFE_THRESHOLD : 0.75; // Free to 60% or 75%\n\n      // Remove items by priority until we reach target\n      for (const item of items) {\n        const currentUsage = this.getStorageUsage();\n        if (currentUsage.percentage <= (targetPercentage * 100)) {\n          break;\n        }\n\n        try {\n          localStorage.removeItem(item.key);\n          freedSpace += item.size;\n        } catch (e) {\n          // Silent fail\n        }\n      }\n\n      return freedSpace;\n    } catch (error) {\n      return 0;\n    }\n  }\n\n  /**\n   * Get storage statistics\n   */\n  static getStats(): {\n    usage: ReturnType<typeof StorageManager.getStorageUsage>;\n    itemCount: number;\n    items: Array<{ key: string; size: number; timestamp?: number }>;\n  } {\n    const usage = this.getStorageUsage();\n    const items: Array<{ key: string; size: number; timestamp?: number }> = [];\n\n    for (let key in localStorage) {\n      if (localStorage.hasOwnProperty(key)) {\n        const stored = localStorage.getItem(key) || '';\n        const size = (stored.length + key.length) * 2;\n        \n        let timestamp: number | undefined;\n        try {\n          const parsed = JSON.parse(stored);\n          timestamp = parsed.timestamp;\n        } catch (e) {\n          // No timestamp available\n        }\n\n        items.push({ key, size, timestamp });\n      }\n    }\n\n    // Sort by size (largest first)\n    items.sort((a, b) => b.size - a.size);\n\n    return {\n      usage,\n      itemCount: items.length,\n      items,\n    };\n  }\n\n  /**\n   * Clear all storage (use with caution!)\n   */\n  static clearAll(): void {\n    try {\n      localStorage.clear();\n      console.log('localStorage cleared');\n    } catch (error) {\n      console.error('Error clearing localStorage:', error);\n    }\n  }\n\n  /**\n   * Format bytes to human readable string\n   */\n  static formatBytes(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n  }\n\n  /**\n   * Proactively monitor and prevent quota issues\n   */\n  static monitorStorage(): void {\n    const usage = this.getStorageUsage();\n    \n    if (usage.percentage >= this.CRITICAL_THRESHOLD * 100) {\n      this.cleanup(undefined, true);\n    } else if (usage.percentage >= this.CLEANUP_THRESHOLD * 100) {\n      // Just cleanup silently, no console logs\n    }\n  }\n\n  /**\n   * Get storage health report\n   */\n  static getHealthReport() {\n    const usage = this.getStorageUsage();\n    const stats = this.getStats();\n    \n    let status = '✅ OK';\n    let recommendation = '';\n\n    if (usage.percentage >= 95) {\n      status = '🚨 CRITICAL';\n      recommendation = 'URGENT: Clear data immediately or quota errors will occur';\n    } else if (usage.percentage >= 85) {\n      status = '⚠️ WARNING';\n      recommendation = 'Storage nearly full, consider deleting old templates';\n    } else if (usage.percentage >= 70) {\n      status = '⚠️ CAUTION';\n      recommendation = 'Monitor usage - consider cleanup soon';\n    }\n\n    return {\n      status,\n      used: this.formatBytes(usage.used),\n      available: this.formatBytes(Math.max(0, usage.available)),\n      percentage: usage.percentage.toFixed(1) + '%',\n      itemCount: stats.itemCount,\n      recommendation,\n      largestItems: stats.items.slice(0, 5).map(i => ({\n        key: i.key,\n        size: this.formatBytes(i.size),\n      })),\n    };\n  }\n}\n\nexport default StorageManager;\n","/**\n * PageBuilder Template System - Local Storage Management\n * Phase 5.1: Template Data Layer\n */\n\nimport { PageTemplate, TemplateStorage, TemplateValidationResult, ValidationError } from '@/types/template';\n\nconst STORAGE_KEY = 'pagebuilder_templates';\nconst STORAGE_VERSION = '1.0.0';\n\n// ============================================================================\n// Storage Operations\n// ============================================================================\n\n/**\n * Get all templates from localStorage\n */\nexport function getAllTemplates(): PageTemplate[] {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY);\n    if (!data) {\n      return [];\n    }\n\n    const storage: TemplateStorage = JSON.parse(data);\n    \n    // Version migration logic here if needed\n    if (storage.version !== STORAGE_VERSION) {\n      console.warn(`Template storage version mismatch. Expected ${STORAGE_VERSION}, got ${storage.version}`);\n    }\n\n    return storage.templates || [];\n  } catch (error) {\n    console.error('Error loading templates:', error);\n    return [];\n  }\n}\n\n/**\n * Save all templates to localStorage\n */\nexport function saveAllTemplates(templates: PageTemplate[]): boolean {\n  try {\n    const storage: TemplateStorage = {\n      templates,\n      lastModified: new Date().toISOString(),\n      version: STORAGE_VERSION,\n    };\n\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(storage));\n    return true;\n  } catch (error) {\n    console.error('Error saving templates:', error);\n    \n    // Check if quota exceeded\n    if (error instanceof DOMException && error.name === 'QuotaExceededError') {\n      console.error('LocalStorage quota exceeded. Consider using IndexedDB.');\n    }\n    \n    return false;\n  }\n}\n\n/**\n * Get a single template by ID\n */\nexport function getTemplateById(id: string): PageTemplate | null {\n  const templates = getAllTemplates();\n  return templates.find(t => t.id === id) || null;\n}\n\n/**\n * Save a single template (create or update)\n */\nexport function saveTemplate(template: PageTemplate): boolean {\n  const templates = getAllTemplates();\n  const existingIndex = templates.findIndex(t => t.id === template.id);\n\n  const updatedTemplate = {\n    ...template,\n    updatedAt: new Date().toISOString(),\n  };\n\n  if (existingIndex >= 0) {\n    // Update existing\n    templates[existingIndex] = updatedTemplate;\n  } else {\n    // Create new\n    templates.push({\n      ...updatedTemplate,\n      createdAt: updatedTemplate.createdAt || new Date().toISOString(),\n    });\n  }\n\n  return saveAllTemplates(templates);\n}\n\n/**\n * Delete a template by ID (prevents deletion of default templates)\n */\nexport function deleteTemplate(id: string): boolean {\n  const templates = getAllTemplates();\n  const template = templates.find(t => t.id === id);\n\n  if (!template) {\n    console.warn(`Template ${id} not found`);\n    return false;\n  }\n\n  if (template.isDefault) {\n    console.warn(`Cannot delete default template: ${template.name}`);\n    return false;\n  }\n\n  const filtered = templates.filter(t => t.id !== id);\n  return saveAllTemplates(filtered);\n}\n\n/**\n * Duplicate a template\n */\nexport function duplicateTemplate(id: string, newName?: string): PageTemplate | null {\n  const template = getTemplateById(id);\n  if (!template) {\n    return null;\n  }\n\n  const duplicate: PageTemplate = {\n    ...template,\n    id: generateTemplateId(),\n    name: newName || `${template.name} (Copy)`,\n    isDefault: false, // Duplicates are always custom\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  };\n\n  if (saveTemplate(duplicate)) {\n    return duplicate;\n  }\n\n  return null;\n}\n\n// ============================================================================\n// Validation\n// ============================================================================\n\n/**\n * Validate template structure\n */\nexport function validateTemplate(template: PageTemplate): TemplateValidationResult {\n  const errors: ValidationError[] = [];\n  const warnings: string[] = [];\n\n  // Required fields\n  if (!template.id || template.id.trim() === '') {\n    errors.push({ field: 'id', message: 'Template ID is required' });\n  }\n\n  if (!template.name || template.name.trim() === '') {\n    errors.push({ field: 'name', message: 'Template name is required' });\n  }\n\n  if (!template.category) {\n    errors.push({ field: 'category', message: 'Template category is required' });\n  }\n\n  if (!template.structure || !Array.isArray(template.structure)) {\n    errors.push({ field: 'structure', message: 'Template structure must be an array' });\n  }\n\n  // Warnings\n  if (!template.description || template.description.trim() === '') {\n    warnings.push('Template description is recommended');\n  }\n\n  if (!template.thumbnail) {\n    warnings.push('Template thumbnail is recommended');\n  }\n\n  if (template.structure && template.structure.length === 0) {\n    warnings.push('Template has no elements');\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors: errors.length > 0 ? errors : undefined,\n    warnings: warnings.length > 0 ? warnings : undefined,\n  };\n}\n\n/**\n * Validate imported template data\n */\nexport function validateImportedTemplate(data: any): TemplateValidationResult {\n  const errors: ValidationError[] = [];\n\n  // Check if data is an object\n  if (!data || typeof data !== 'object') {\n    errors.push({ field: 'root', message: 'Invalid template data format' });\n    return { valid: false, errors };\n  }\n\n  // Check for required export structure\n  if ('template' in data && 'version' in data) {\n    // This is an export format\n    return validateTemplate(data.template);\n  }\n\n  // Assume it's a direct template object\n  return validateTemplate(data);\n}\n\n// ============================================================================\n// Import/Export\n// ============================================================================\n\n/**\n * Export template as JSON\n */\nexport function exportTemplate(template: PageTemplate): string {\n  const exportData = {\n    template,\n    exportedAt: new Date().toISOString(),\n    version: STORAGE_VERSION,\n  };\n\n  return JSON.stringify(exportData, null, 2);\n}\n\n/**\n * Import template from JSON string\n */\nexport function importTemplate(jsonString: string): { success: boolean; template?: PageTemplate; error?: string } {\n  try {\n    const data = JSON.parse(jsonString);\n    \n    // Validate\n    const validation = validateImportedTemplate(data);\n    if (!validation.valid) {\n      return {\n        success: false,\n        error: validation.errors?.map(e => e.message).join(', ') || 'Validation failed',\n      };\n    }\n\n    // Extract template\n    const template: PageTemplate = 'template' in data ? data.template : data;\n\n    // Generate new ID to avoid conflicts\n    const importedTemplate: PageTemplate = {\n      ...template,\n      id: generateTemplateId(),\n      isDefault: false, // Imported templates are custom\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    // Save to storage\n    if (saveTemplate(importedTemplate)) {\n      return { success: true, template: importedTemplate };\n    } else {\n      return { success: false, error: 'Failed to save imported template' };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to parse JSON',\n    };\n  }\n}\n\n/**\n * Download template as JSON file\n */\nexport function downloadTemplate(template: PageTemplate): void {\n  const json = exportTemplate(template);\n  const blob = new Blob([json], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n  \n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `${template.name.toLowerCase().replace(/\\s+/g, '-')}.json`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  \n  URL.revokeObjectURL(url);\n}\n\n// ============================================================================\n// Utilities\n// ============================================================================\n\n/**\n * Generate unique template ID\n */\nexport function generateTemplateId(): string {\n  return `template_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Get storage usage information\n */\nexport function getStorageInfo(): { used: number; total: number; percentage: number } {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY);\n    const used = data ? new Blob([data]).size : 0;\n    const total = 5 * 1024 * 1024; // 5MB typical localStorage limit\n    const percentage = (used / total) * 100;\n\n    return { used, total, percentage };\n  } catch (error) {\n    return { used: 0, total: 5 * 1024 * 1024, percentage: 0 };\n  }\n}\n\n/**\n * Clear all templates (dangerous!)\n */\nexport function clearAllTemplates(): boolean {\n  try {\n    localStorage.removeItem(STORAGE_KEY);\n    return true;\n  } catch (error) {\n    console.error('Error clearing templates:', error);\n    return false;\n  }\n}\n\n/**\n * Clear PageBuilder cache (pagebuilder_templates localStorage)\n * Used to fix cache issues when templates are updated\n */\nexport function clearPageBuilderCache(): boolean {\n  try {\n    // Clear the main storage key\n    localStorage.removeItem(STORAGE_KEY);\n    \n    // Also clear any other related cache keys that might exist\n    const keys = Object.keys(localStorage);\n    const cacheKeysToRemove = keys.filter(key => \n      key.includes('pagebuilder') || \n      key.includes('template') ||\n      key.includes('dynamicblock')\n    );\n    \n    cacheKeysToRemove.forEach(key => {\n      localStorage.removeItem(key);\n    });\n    \n    return true;\n  } catch (error) {\n    console.error('Error clearing PageBuilder cache:', error);\n    return false;\n  }\n}\n\n/**\n * Initialize storage with default templates\n */\nexport function initializeStorage(defaultTemplates: PageTemplate[]): boolean {\n  const existing = getAllTemplates();\n  \n  // Only initialize if empty\n  if (existing.length === 0) {\n    return saveAllTemplates(defaultTemplates);\n  }\n  \n  return true;\n}\n","import { gql } from '@apollo/client';\n\n// ============================================================================\n// PAGE BUILDER - CUSTOM TEMPLATES GRAPHQL\n// ============================================================================\n\n// Fragments\nexport const CUSTOM_TEMPLATE_FRAGMENT = gql`\n  fragment CustomTemplateFields on CustomTemplate {\n    id\n    name\n    description\n    category\n    thumbnail\n    isPublic\n    isArchived\n    usageCount\n    createdAt\n    updatedAt\n    userId\n  }\n`;\n\nexport const TEMPLATE_SHARE_FRAGMENT = gql`\n  fragment TemplateShareFields on TemplateShare {\n    id\n    templateId\n    sharedWith\n    createdAt\n  }\n`;\n\n// Queries\nexport const GET_MY_CUSTOM_TEMPLATES = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  query GetMyCustomTemplates($category: TemplateCategory, $archived: Boolean) {\n    getMyCustomTemplates(category: $category, archived: $archived) {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\nexport const GET_CUSTOM_TEMPLATE = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  query GetCustomTemplate($id: ID!) {\n    getCustomTemplate(id: $id) {\n      ...CustomTemplateFields\n      blocks\n    }\n  }\n`;\n\nexport const GET_PUBLIC_TEMPLATES = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  query GetPublicTemplates($category: TemplateCategory, $limit: Int, $offset: Int) {\n    getPublicTemplates(category: $category, limit: $limit, offset: $offset) {\n      templates {\n        ...CustomTemplateFields\n      }\n      total\n    }\n  }\n`;\n\nexport const GET_SHARED_TEMPLATES = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  query GetSharedTemplates {\n    getSharedTemplates {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\n// Mutations\nexport const CREATE_CUSTOM_TEMPLATE = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  mutation CreateCustomTemplate($input: CreateCustomTemplateInput!) {\n    createCustomTemplate(input: $input) {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\nexport const UPDATE_CUSTOM_TEMPLATE = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  mutation UpdateCustomTemplate($id: ID!, $input: UpdateCustomTemplateInput!) {\n    updateCustomTemplate(id: $id, input: $input) {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\nexport const DELETE_CUSTOM_TEMPLATE = gql`\n  mutation DeleteCustomTemplate($id: ID!) {\n    deleteCustomTemplate(id: $id) {\n      success\n      message\n    }\n  }\n`;\n\nexport const DUPLICATE_CUSTOM_TEMPLATE = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  mutation DuplicateCustomTemplate($id: ID!, $newName: String) {\n    duplicateCustomTemplate(id: $id, newName: $newName) {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\nexport const SHARE_TEMPLATE = gql`\n  ${TEMPLATE_SHARE_FRAGMENT}\n  mutation ShareTemplate($templateId: ID!, $userIds: [String!]!) {\n    shareTemplate(templateId: $templateId, userIds: $userIds) {\n      ...TemplateShareFields\n    }\n  }\n`;\n\nexport const UNSHARE_TEMPLATE = gql`\n  mutation UnshareTemplate($templateId: ID!, $userId: String!) {\n    unshareTemplate(templateId: $templateId, userId: $userId) {\n      success\n      message\n    }\n  }\n`;\n\nexport const UPDATE_TEMPLATE_PUBLICITY = gql`\n  ${CUSTOM_TEMPLATE_FRAGMENT}\n  mutation UpdateTemplatePublicity($id: ID!, $isPublic: Boolean!) {\n    updateTemplatePublicity(id: $id, isPublic: $isPublic) {\n      ...CustomTemplateFields\n    }\n  }\n`;\n\nexport const INCREMENT_TEMPLATE_USAGE = gql`\n  mutation IncrementTemplateUsage($id: ID!) {\n    incrementTemplateUsage(id: $id) {\n      success\n      usageCount\n    }\n  }\n`;\n","/**\n * PageBuilder Template System - Default Templates\n * Phase 5.1: Template Data Layer\n * \n * Pre-made templates for quick page creation\n */\n\nimport { PageTemplate, PageElement } from '@/types/template';\n\n// ============================================================================\n// Template 1: Blank Page\n// ============================================================================\n\nconst blankPageTemplate: PageTemplate = {\n  id: 'template_default_blank',\n  name: 'Blank Page',\n  description: 'Start with a clean slate. Perfect for building custom designs from scratch.',\n  category: 'custom',\n  isDefault: true,\n  createdAt: '2025-10-15T00:00:00.000Z',\n  updatedAt: '2025-10-15T00:00:00.000Z',\n  author: 'PageBuilder Team',\n  tags: ['minimal', 'starter', 'blank'],\n  structure: [\n    {\n      id: 'elem_blank_container',\n      type: 'container',\n      styles: {\n        spacing: {\n          padding: {\n            desktop: { top: 40, right: 20, bottom: 40, left: 20 },\n          },\n        },\n        background: {\n          type: { desktop: 'color' },\n          color: { desktop: '#ffffff' },\n        },\n      },\n      children: [\n        {\n          id: 'elem_blank_text',\n          type: 'paragraph',\n          content: 'Start building your page here...',\n          styles: {\n            typography: {\n              fontSize: { desktop: 16 },\n              lineHeight: { desktop: 1.5 },\n              textAlign: { desktop: 'center' },\n            },\n            color: {\n              textColor: { desktop: '#666666' },\n            },\n          },\n        },\n      ],\n    },\n  ],\n  styles: {\n    fontFamily: 'Inter, sans-serif',\n    fontSize: 16,\n    lineHeight: 1.5,\n    textColor: '#333333',\n    backgroundColor: '#ffffff',\n    maxWidth: 1200,\n    padding: { top: 0, right: 0, bottom: 0, left: 0 },\n  },\n};\n\n// ============================================================================\n// Template 2: Hero Landing Page\n// ============================================================================\n\nconst heroLandingTemplate: PageTemplate = {\n  id: 'template_default_hero',\n  name: 'Hero Landing Page',\n  description: 'Modern landing page with hero section, features, and call-to-action.',\n  category: 'landing',\n  isDefault: true,\n  createdAt: '2025-10-15T00:00:00.000Z',\n  updatedAt: '2025-10-15T00:00:00.000Z',\n  author: 'PageBuilder Team',\n  tags: ['hero', 'landing', 'cta', 'modern'],\n  structure: [\n    // Hero Section\n    {\n      id: 'elem_hero_section',\n      type: 'container',\n      styles: {\n        spacing: {\n          padding: {\n            desktop: { top: 80, right: 20, bottom: 80, left: 20 },\n            tablet: { top: 60, right: 16, bottom: 60, left: 16 },\n            mobile: { top: 40, right: 12, bottom: 40, left: 12 },\n          },\n        },\n        background: {\n          type: { desktop: 'gradient' },\n          gradient: {\n            desktop: {\n              type: 'linear',\n              colors: ['#667eea', '#764ba2'],\n              angle: 135,\n            },\n          },\n        },\n      },\n      children: [\n        {\n          id: 'elem_hero_title',\n          type: 'heading',\n          content: 'Build Amazing Pages',\n          styles: {\n            typography: {\n              fontSize: { desktop: 56, tablet: 42, mobile: 32 },\n              fontWeight: { desktop: 700 },\n              lineHeight: { desktop: 1.2 },\n              textAlign: { desktop: 'center' },\n            },\n            color: {\n              textColor: { desktop: '#ffffff' },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 24, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_hero_subtitle',\n          type: 'paragraph',\n          content: 'Create stunning, responsive websites with our intuitive page builder. No coding required.',\n          styles: {\n            typography: {\n              fontSize: { desktop: 20, tablet: 18, mobile: 16 },\n              lineHeight: { desktop: 1.6 },\n              textAlign: { desktop: 'center' },\n            },\n            color: {\n              textColor: { desktop: '#f0f0f0' },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 40, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_hero_cta',\n          type: 'button',\n          content: 'Get Started Free',\n          styles: {\n            typography: {\n              fontSize: { desktop: 18 },\n              fontWeight: { desktop: 600 },\n            },\n            color: {\n              textColor: { desktop: '#667eea' },\n              backgroundColor: { desktop: '#ffffff' },\n            },\n            spacing: {\n              padding: {\n                desktop: { top: 16, right: 32, bottom: 16, left: 32 },\n              },\n            },\n            border: {\n              radius: {\n                desktop: { topLeft: 8, topRight: 8, bottomRight: 8, bottomLeft: 8 },\n              },\n            },\n            shadow: {\n              boxShadow: {\n                desktop: {\n                  x: 0,\n                  y: 4,\n                  blur: 12,\n                  spread: 0,\n                  color: '#00000020',\n                  inset: false,\n                },\n              },\n            },\n          },\n        },\n      ],\n    },\n\n    // Features Section\n    {\n      id: 'elem_features_section',\n      type: 'container',\n      styles: {\n        spacing: {\n          padding: {\n            desktop: { top: 80, right: 20, bottom: 80, left: 20 },\n          },\n        },\n        background: {\n          type: { desktop: 'color' },\n          color: { desktop: '#f9fafb' },\n        },\n      },\n      children: [\n        {\n          id: 'elem_features_title',\n          type: 'heading',\n          content: 'Features',\n          styles: {\n            typography: {\n              fontSize: { desktop: 36, tablet: 28, mobile: 24 },\n              fontWeight: { desktop: 700 },\n              textAlign: { desktop: 'center' },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 48, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_features_grid',\n          type: 'container',\n          styles: {\n            spacing: {\n              gap: { desktop: 24 },\n            },\n          },\n          children: [\n            {\n              id: 'elem_feature_1',\n              type: 'container',\n              styles: {\n                spacing: {\n                  padding: {\n                    desktop: { top: 32, right: 24, bottom: 32, left: 24 },\n                  },\n                },\n                background: {\n                  type: { desktop: 'color' },\n                  color: { desktop: '#ffffff' },\n                },\n                border: {\n                  radius: {\n                    desktop: { topLeft: 8, topRight: 8, bottomRight: 8, bottomLeft: 8 },\n                  },\n                },\n                shadow: {\n                  boxShadow: {\n                    desktop: {\n                      x: 0,\n                      y: 2,\n                      blur: 8,\n                      spread: 0,\n                      color: '#00000010',\n                      inset: false,\n                    },\n                  },\n                },\n              },\n              children: [\n                {\n                  id: 'elem_feature_1_title',\n                  type: 'heading',\n                  content: 'Easy to Use',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 20 },\n                      fontWeight: { desktop: 600 },\n                    },\n                    spacing: {\n                      margin: {\n                        desktop: { top: 0, right: 0, bottom: 12, left: 0 },\n                      },\n                    },\n                  },\n                },\n                {\n                  id: 'elem_feature_1_desc',\n                  type: 'paragraph',\n                  content: 'Intuitive drag-and-drop interface makes page building a breeze.',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 16 },\n                      lineHeight: { desktop: 1.5 },\n                    },\n                    color: {\n                      textColor: { desktop: '#666666' },\n                    },\n                  },\n                },\n              ],\n            },\n            {\n              id: 'elem_feature_2',\n              type: 'container',\n              styles: {\n                spacing: {\n                  padding: {\n                    desktop: { top: 32, right: 24, bottom: 32, left: 24 },\n                  },\n                },\n                background: {\n                  type: { desktop: 'color' },\n                  color: { desktop: '#ffffff' },\n                },\n                border: {\n                  radius: {\n                    desktop: { topLeft: 8, topRight: 8, bottomRight: 8, bottomLeft: 8 },\n                  },\n                },\n                shadow: {\n                  boxShadow: {\n                    desktop: {\n                      x: 0,\n                      y: 2,\n                      blur: 8,\n                      spread: 0,\n                      color: '#00000010',\n                      inset: false,\n                    },\n                  },\n                },\n              },\n              children: [\n                {\n                  id: 'elem_feature_2_title',\n                  type: 'heading',\n                  content: 'Fully Responsive',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 20 },\n                      fontWeight: { desktop: 600 },\n                    },\n                    spacing: {\n                      margin: {\n                        desktop: { top: 0, right: 0, bottom: 12, left: 0 },\n                      },\n                    },\n                  },\n                },\n                {\n                  id: 'elem_feature_2_desc',\n                  type: 'paragraph',\n                  content: 'Design once, looks perfect on all devices automatically.',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 16 },\n                      lineHeight: { desktop: 1.5 },\n                    },\n                    color: {\n                      textColor: { desktop: '#666666' },\n                    },\n                  },\n                },\n              ],\n            },\n            {\n              id: 'elem_feature_3',\n              type: 'container',\n              styles: {\n                spacing: {\n                  padding: {\n                    desktop: { top: 32, right: 24, bottom: 32, left: 24 },\n                  },\n                },\n                background: {\n                  type: { desktop: 'color' },\n                  color: { desktop: '#ffffff' },\n                },\n                border: {\n                  radius: {\n                    desktop: { topLeft: 8, topRight: 8, bottomRight: 8, bottomLeft: 8 },\n                  },\n                },\n                shadow: {\n                  boxShadow: {\n                    desktop: {\n                      x: 0,\n                      y: 2,\n                      blur: 8,\n                      spread: 0,\n                      color: '#00000010',\n                      inset: false,\n                    },\n                  },\n                },\n              },\n              children: [\n                {\n                  id: 'elem_feature_3_title',\n                  type: 'heading',\n                  content: 'Customizable',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 20 },\n                      fontWeight: { desktop: 600 },\n                    },\n                    spacing: {\n                      margin: {\n                        desktop: { top: 0, right: 0, bottom: 12, left: 0 },\n                      },\n                    },\n                  },\n                },\n                {\n                  id: 'elem_feature_3_desc',\n                  type: 'paragraph',\n                  content: 'Full control over every aspect of your design with advanced styling options.',\n                  styles: {\n                    typography: {\n                      fontSize: { desktop: 16 },\n                      lineHeight: { desktop: 1.5 },\n                    },\n                    color: {\n                      textColor: { desktop: '#666666' },\n                    },\n                  },\n                },\n              ],\n            },\n          ],\n        },\n      ],\n    },\n  ],\n  styles: {\n    fontFamily: 'Inter, sans-serif',\n    fontSize: 16,\n    lineHeight: 1.5,\n    textColor: '#333333',\n    backgroundColor: '#ffffff',\n    maxWidth: 1200,\n    padding: { top: 0, right: 0, bottom: 0, left: 0 },\n  },\n};\n\n// ============================================================================\n// Template 3: Simple Blog Post\n// ============================================================================\n\nconst blogPostTemplate: PageTemplate = {\n  id: 'template_default_blog',\n  name: 'Blog Post',\n  description: 'Clean blog post layout with article header, content sections, and author info.',\n  category: 'blog',\n  isDefault: true,\n  createdAt: '2025-10-15T00:00:00.000Z',\n  updatedAt: '2025-10-15T00:00:00.000Z',\n  author: 'PageBuilder Team',\n  tags: ['blog', 'article', 'content'],\n  structure: [\n    // Article Header\n    {\n      id: 'elem_blog_header',\n      type: 'container',\n      styles: {\n        spacing: {\n          padding: {\n            desktop: { top: 60, right: 20, bottom: 40, left: 20 },\n          },\n          margin: {\n            desktop: { top: 0, right: 0, bottom: 40, left: 0 },\n          },\n        },\n        border: {\n          width: { desktop: 0 },\n          style: { desktop: 'solid' },\n          color: { desktop: '#e5e7eb' },\n        },\n      },\n      children: [\n        {\n          id: 'elem_blog_title',\n          type: 'heading',\n          content: 'How to Build Beautiful Web Pages',\n          styles: {\n            typography: {\n              fontSize: { desktop: 40, tablet: 32, mobile: 28 },\n              fontWeight: { desktop: 700 },\n              lineHeight: { desktop: 1.3 },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 16, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_blog_meta',\n          type: 'paragraph',\n          content: 'By John Doe • October 15, 2025 • 5 min read',\n          styles: {\n            typography: {\n              fontSize: { desktop: 14 },\n            },\n            color: {\n              textColor: { desktop: '#6b7280' },\n            },\n          },\n        },\n      ],\n    },\n\n    // Article Content\n    {\n      id: 'elem_blog_content',\n      type: 'container',\n      styles: {\n        spacing: {\n          padding: {\n            desktop: { top: 0, right: 20, bottom: 60, left: 20 },\n          },\n        },\n      },\n      children: [\n        {\n          id: 'elem_blog_intro',\n          type: 'paragraph',\n          content: 'Creating beautiful web pages has never been easier. With modern page builders, you can design professional-looking websites without writing a single line of code.',\n          styles: {\n            typography: {\n              fontSize: { desktop: 18 },\n              lineHeight: { desktop: 1.7 },\n            },\n            color: {\n              textColor: { desktop: '#4b5563' },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 32, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_blog_section_1',\n          type: 'heading',\n          content: 'Getting Started',\n          styles: {\n            typography: {\n              fontSize: { desktop: 28 },\n              fontWeight: { desktop: 600 },\n              lineHeight: { desktop: 1.3 },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 16, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_blog_section_1_content',\n          type: 'paragraph',\n          content: 'Start by choosing a template that matches your vision. Our library includes designs for landing pages, blogs, portfolios, and more. Each template is fully customizable, so you can make it your own.',\n          styles: {\n            typography: {\n              fontSize: { desktop: 16 },\n              lineHeight: { desktop: 1.7 },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 32, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_blog_section_2',\n          type: 'heading',\n          content: 'Design with Confidence',\n          styles: {\n            typography: {\n              fontSize: { desktop: 28 },\n              fontWeight: { desktop: 600 },\n              lineHeight: { desktop: 1.3 },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 16, left: 0 },\n              },\n            },\n          },\n        },\n        {\n          id: 'elem_blog_section_2_content',\n          type: 'paragraph',\n          content: 'Our responsive design system ensures your pages look perfect on all devices. Edit once, and your design automatically adapts to desktop, tablet, and mobile screens.',\n          styles: {\n            typography: {\n              fontSize: { desktop: 16 },\n              lineHeight: { desktop: 1.7 },\n            },\n            spacing: {\n              margin: {\n                desktop: { top: 0, right: 0, bottom: 32, left: 0 },\n              },\n            },\n          },\n        },\n      ],\n    },\n  ],\n  styles: {\n    fontFamily: 'Inter, sans-serif',\n    fontSize: 16,\n    lineHeight: 1.7,\n    textColor: '#1f2937',\n    backgroundColor: '#ffffff',\n    maxWidth: 800,\n    padding: { top: 0, right: 0, bottom: 0, left: 0 },\n  },\n};\n\n// ============================================================================\n// Export All Default Templates\n// ============================================================================\n\nexport const DEFAULT_TEMPLATES: PageTemplate[] = [\n  blankPageTemplate,\n  heroLandingTemplate,\n  blogPostTemplate,\n];\n\nexport default DEFAULT_TEMPLATES;\n","/**\n * Page Builder Logger\n * \n * Centralized logging system for Page Builder operations.\n * - Development: Shows detailed console logs\n * - Production: Only logs errors, minimal toast notifications\n */\n\ntype LogLevel = 'debug' | 'info' | 'success' | 'warning' | 'error';\n\ninterface LogEntry {\n  level: LogLevel;\n  operation: string;\n  message: string;\n  data?: any;\n  timestamp: Date;\n}\n\nclass PageBuilderLogger {\n  private logs: LogEntry[] = [];\n  private maxLogs = 100;\n  private isDevelopment = process.env.NODE_ENV === 'development';\n\n  /**\n   * Log a message without showing toast\n   */\n  private log(level: LogLevel, operation: string, message: string, data?: any) {\n    const entry: LogEntry = {\n      level,\n      operation,\n      message,\n      data,\n      timestamp: new Date(),\n    };\n\n    // Add to logs array\n    this.logs.unshift(entry);\n    if (this.logs.length > this.maxLogs) {\n      this.logs.pop();\n    }\n\n    // Console output in development\n    if (this.isDevelopment) {\n      const emoji = this.getEmoji(level);\n      const color = this.getColor(level);\n      console.group(`${emoji} [${operation}] ${message}`);\n      console.log('%c' + level.toUpperCase(), `color: ${color}; font-weight: bold`);\n      if (data) {\n        console.log('Data:', data);\n      }\n      console.log('Time:', entry.timestamp.toLocaleTimeString());\n      console.groupEnd();\n    }\n  }\n\n  /**\n   * Debug level - только для development, не показывает toast\n   */\n  debug(operation: string, message: string, data?: any) {\n    if (this.isDevelopment) {\n      this.log('debug', operation, message, data);\n    }\n  }\n\n  /**\n   * Info level - логирует, не показывает toast\n   */\n  info(operation: string, message: string, data?: any) {\n    this.log('info', operation, message, data);\n  }\n\n  /**\n   * Success level - логирует, возвращает нужно ли показать toast\n   */\n  success(operation: string, message: string, data?: any): boolean {\n    this.log('success', operation, message, data);\n    // Only show toast for important operations\n    return this.isImportantOperation(operation);\n  }\n\n  /**\n   * Warning level - логирует, возвращает нужно ли показать toast\n   */\n  warning(operation: string, message: string, data?: any): boolean {\n    this.log('warning', operation, message, data);\n    return true; // Always show warnings\n  }\n\n  /**\n   * Error level - всегда логирует и возвращает true для toast\n   */\n  error(operation: string, message: string, data?: any): boolean {\n    this.log('error', operation, message, data);\n    return true; // Always show errors\n  }\n\n  /**\n   * Get all logs\n   */\n  getLogs(): LogEntry[] {\n    return [...this.logs];\n  }\n\n  /**\n   * Clear all logs\n   */\n  clearLogs() {\n    this.logs = [];\n  }\n\n  /**\n   * Export logs as JSON\n   */\n  exportLogs(): string {\n    return JSON.stringify(this.logs, null, 2);\n  }\n\n  /**\n   * Determine if operation is important enough for toast\n   */\n  private isImportantOperation(operation: string): boolean {\n    const importantOps = [\n      'PAGE_SAVE',\n      'PAGE_CREATE',\n      'PAGE_DELETE',\n      'PAGE_PUBLISH',\n      'TEMPLATE_ADD',\n      'BULK_OPERATION',\n    ];\n    return importantOps.includes(operation);\n  }\n\n  private getEmoji(level: LogLevel): string {\n    const emojis: Record<LogLevel, string> = {\n      debug: '🔍',\n      info: 'ℹ️',\n      success: '✅',\n      warning: '⚠️',\n      error: '❌',\n    };\n    return emojis[level];\n  }\n\n  private getColor(level: LogLevel): string {\n    const colors: Record<LogLevel, string> = {\n      debug: '#6B7280',\n      info: '#3B82F6',\n      success: '#10B981',\n      warning: '#F59E0B',\n      error: '#EF4444',\n    };\n    return colors[level];\n  }\n}\n\n// Singleton instance\nexport const pageBuilderLogger = new PageBuilderLogger();\n\n/**\n * Operation types for better organization\n */\nexport const LOG_OPERATIONS = {\n  // Page operations\n  PAGE_CREATE: 'PAGE_CREATE',\n  PAGE_UPDATE: 'PAGE_UPDATE',\n  PAGE_DELETE: 'PAGE_DELETE',\n  PAGE_SAVE: 'PAGE_SAVE',\n  PAGE_PUBLISH: 'PAGE_PUBLISH',\n  \n  // Block operations\n  BLOCK_ADD: 'BLOCK_ADD',\n  BLOCK_CREATE: 'BLOCK_CREATE',\n  BLOCK_UPDATE: 'BLOCK_UPDATE',\n  BLOCK_DELETE: 'BLOCK_DELETE',\n  BLOCK_REORDER: 'BLOCK_REORDER',\n  BLOCK_STYLE_UPDATE: 'BLOCK_STYLE_UPDATE',\n  \n  // Child block operations\n  CHILD_BLOCK_ADD: 'CHILD_BLOCK_ADD',\n  \n  // Template operations\n  TEMPLATE_ADD: 'TEMPLATE_ADD',\n  TEMPLATE_APPLY: 'TEMPLATE_APPLY',\n  TEMPLATE_SAVE: 'TEMPLATE_SAVE',\n  \n  // Bulk operations\n  BULK_OPERATION: 'BULK_OPERATION',\n} as const;\n","/**\n * PageBuilder Template System - Type Definitions\n * Phase 5.1: Template Data Layer\n */\n\nimport { ResponsiveValue } from '@/components/page-builder/types/responsive';\n\n// ============================================================================\n// Template Categories\n// ============================================================================\n\nexport type TemplateCategory = \n  | 'all'\n  | 'landing'\n  | 'blog'\n  | 'ecommerce'\n  | 'portfolio'\n  | 'marketing'\n  | 'custom';\n\nexport const TEMPLATE_CATEGORIES: { value: TemplateCategory; label: string }[] = [\n  { value: 'all', label: 'All Templates' },\n  { value: 'landing', label: 'Landing Pages' },\n  { value: 'blog', label: 'Blog & Content' },\n  { value: 'ecommerce', label: 'E-commerce' },\n  { value: 'portfolio', label: 'Portfolio' },\n  { value: 'marketing', label: 'Marketing' },\n  { value: 'custom', label: 'My Templates' },\n];\n\n// ============================================================================\n// Element Styles (All responsive-aware)\n// ============================================================================\n\nexport interface TypographySettings {\n  fontSize?: number | ResponsiveValue<number>;\n  fontWeight?: number | ResponsiveValue<number>;\n  lineHeight?: number | ResponsiveValue<number>;\n  letterSpacing?: number | ResponsiveValue<number>;\n  textAlign?: ('left' | 'center' | 'right' | 'justify') | ResponsiveValue<'left' | 'center' | 'right' | 'justify'>;\n  fontFamily?: string | ResponsiveValue<string>;\n  fontStyle?: ('normal' | 'italic') | ResponsiveValue<'normal' | 'italic'>;\n  textTransform?: ('none' | 'uppercase' | 'lowercase' | 'capitalize') | ResponsiveValue<'none' | 'uppercase' | 'lowercase' | 'capitalize'>;\n}\n\nexport interface ColorSettings {\n  textColor?: string | ResponsiveValue<string>;\n  backgroundColor?: string | ResponsiveValue<string>;\n  borderColor?: string | ResponsiveValue<string>;\n  opacity?: number | ResponsiveValue<number>;\n}\n\nexport interface SpacingValue {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}\n\nexport interface SpacingSettings {\n  margin?: SpacingValue | ResponsiveValue<SpacingValue>;\n  padding?: SpacingValue | ResponsiveValue<SpacingValue>;\n  gap?: number | ResponsiveValue<number>;\n}\n\nexport interface BorderRadius {\n  topLeft: number;\n  topRight: number;\n  bottomRight: number;\n  bottomLeft: number;\n}\n\nexport interface BorderSettings {\n  width?: number | ResponsiveValue<number>;\n  style?: ('solid' | 'dashed' | 'dotted' | 'double' | 'none') | ResponsiveValue<'solid' | 'dashed' | 'dotted' | 'double' | 'none'>;\n  color?: string | ResponsiveValue<string>;\n  radius?: BorderRadius | ResponsiveValue<BorderRadius>;\n}\n\nexport interface GradientValue {\n  type: 'linear' | 'radial';\n  colors: string[];\n  angle: number;\n}\n\nexport interface ImageValue {\n  url: string;\n  size: 'cover' | 'contain' | 'auto';\n  position: string;\n  repeat: 'no-repeat' | 'repeat' | 'repeat-x' | 'repeat-y';\n}\n\nexport interface OverlayValue {\n  color: string;\n  opacity: number;\n}\n\nexport interface BackgroundSettings {\n  type?: ('color' | 'gradient' | 'image') | ResponsiveValue<'color' | 'gradient' | 'image'>;\n  color?: string | ResponsiveValue<string>;\n  gradient?: GradientValue | ResponsiveValue<GradientValue>;\n  image?: ImageValue | ResponsiveValue<ImageValue>;\n  overlay?: OverlayValue | ResponsiveValue<OverlayValue>;\n}\n\nexport interface BoxShadow {\n  x: number;\n  y: number;\n  blur: number;\n  spread: number;\n  color: string;\n  inset: boolean;\n}\n\nexport interface TextShadow {\n  x: number;\n  y: number;\n  blur: number;\n  color: string;\n}\n\nexport interface ShadowSettings {\n  boxShadow?: BoxShadow | ResponsiveValue<BoxShadow>;\n  textShadow?: TextShadow | ResponsiveValue<TextShadow>;\n}\n\n// ============================================================================\n// Element Structure\n// ============================================================================\n\nexport interface ElementStyles {\n  typography?: TypographySettings;\n  color?: ColorSettings;\n  spacing?: SpacingSettings;\n  border?: BorderSettings;\n  background?: BackgroundSettings;\n  shadow?: ShadowSettings;\n}\n\nexport interface PageElement {\n  id: string;\n  type: string; // 'heading', 'paragraph', 'button', 'image', 'container', etc.\n  content?: string; // Text content for text elements\n  styles?: ElementStyles;\n  children?: PageElement[];\n  props?: Record<string, any>; // Additional element-specific props\n}\n\n// ============================================================================\n// Global Page Styles\n// ============================================================================\n\nexport interface GlobalStyles {\n  fontFamily?: string;\n  fontSize?: number;\n  lineHeight?: number;\n  textColor?: string;\n  backgroundColor?: string;\n  maxWidth?: number;\n  padding?: SpacingValue;\n}\n\n// ============================================================================\n// Template Definition\n// ============================================================================\n\nexport interface PageTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: TemplateCategory;\n  thumbnail?: string; // Base64 encoded image or URL\n  structure: PageElement[]; // Root-level elements\n  styles?: GlobalStyles; // Global page styles\n  createdAt: string; // ISO date string\n  updatedAt: string; // ISO date string\n  author?: string;\n  tags?: string[];\n  isDefault?: boolean; // True for pre-made templates (cannot be deleted)\n  version?: string; // Template version for compatibility\n}\n\n// ============================================================================\n// Template Metadata (for list display)\n// ============================================================================\n\nexport interface TemplateMetadata {\n  id: string;\n  name: string;\n  description: string;\n  category: TemplateCategory;\n  thumbnail?: string;\n  createdAt: string;\n  updatedAt: string;\n  isDefault?: boolean;\n  elementCount?: number; // Number of elements in template\n}\n\n// ============================================================================\n// Template Operations\n// ============================================================================\n\nexport interface TemplateFilter {\n  category?: TemplateCategory;\n  search?: string;\n  tags?: string[];\n  sortBy?: 'name' | 'date' | 'category';\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface TemplateExport {\n  template: PageTemplate;\n  exportedAt: string;\n  exportedBy?: string;\n  version: string; // Export format version\n}\n\nexport interface ImportTemplateData {\n  template: PageTemplate;\n  replaceExisting?: boolean;\n}\n\nexport interface TemplateImportResult {\n  success: boolean;\n  template?: PageTemplate;\n  error?: string;\n  warnings?: string[];\n}\n\n// ============================================================================\n// Template Storage\n// ============================================================================\n\nexport interface TemplateStorage {\n  templates: PageTemplate[];\n  lastModified: string;\n  version: string; // Storage schema version\n}\n\n// ============================================================================\n// Validation\n// ============================================================================\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface TemplateValidationResult {\n  valid: boolean;\n  errors?: ValidationError[];\n  warnings?: string[];\n}\n"],"names":[],"mappings":"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","ignoreList":[39]}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,996713,e=>{"use strict";var t=e.i(44990),s=e.i(403055),a=e.i(130775),l=e.i(950988),r=e.i(429105),i=e.i(885205),o=e.i(702470),n=e.i(996517),c=e.i(404210),d=e.i(373612),h=e.i(948791),h=h,p=e.i(995555),p=p,m=e.i(487919),m=m,u=e.i(488282),x=e.i(977354),g=e.i(553082),y=e.i(888540),f=e.i(116350),b=e.i(60336),v=e.i(734563),j=e.i(373534),w=e.i(706547),N=e.i(681111),k=e.i(362256),k=k,T=e.i(742049),C=e.i(784386),S=e.i(169989),B=e.i(198513),E=e.i(266459),I=e.i(135369),D=e.i(137651),A=e.i(165429),L=e.i(600547),P=e.i(276664);let R="pagebuilder_templates",O="1.0.0";function F(){try{let e=localStorage.getItem(R);if(!e)return[];let t=JSON.parse(e);return t.version!==O&&console.warn(`Template storage version mismatch. Expected ${O}, got ${t.version}`),t.templates||[]}catch(e){return console.error("Error loading templates:",e),[]}}function z(e){try{let t={templates:e,lastModified:new Date().toISOString(),version:O};return localStorage.setItem(R,JSON.stringify(t)),!0}catch(e){return console.error("Error saving templates:",e),e instanceof DOMException&&"QuotaExceededError"===e.name&&console.error("LocalStorage quota exceeded. Consider using IndexedDB."),!1}}function M(e){let t=F(),s=t.findIndex(t=>t.id===e.id),a={...e,updatedAt:new Date().toISOString()};return s>=0?t[s]=a:t.push({...a,createdAt:a.createdAt||new Date().toISOString()}),z(t)}function _(e){let t=[],s=[];return e.id&&""!==e.id.trim()||t.push({field:"id",message:"Template ID is required"}),e.name&&""!==e.name.trim()||t.push({field:"name",message:"Template name is required"}),e.category||t.push({field:"category",message:"Template category is required"}),e.structure&&Array.isArray(e.structure)||t.push({field:"structure",message:"Template structure must be an array"}),e.description&&""!==e.description.trim()||s.push("Template description is recommended"),e.thumbnail||s.push("Template thumbnail is recommended"),e.structure&&0===e.structure.length&&s.push("Template has no elements"),{valid:0===t.length,errors:t.length>0?t:void 0,warnings:s.length>0?s:void 0}}function H(){return`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}let $=[{id:"template_default_blank",name:"Blank Page",description:"Start with a clean slate. Perfect for building custom designs from scratch.",category:"custom",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["minimal","starter","blank"],structure:[{id:"elem_blank_container",type:"container",styles:{spacing:{padding:{desktop:{top:40,right:20,bottom:40,left:20}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}}},children:[{id:"elem_blank_text",type:"paragraph",content:"Start building your page here...",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#666666"}}}}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.5,textColor:"#333333",backgroundColor:"#ffffff",maxWidth:1200,padding:{top:0,right:0,bottom:0,left:0}}},{id:"template_default_hero",name:"Hero Landing Page",description:"Modern landing page with hero section, features, and call-to-action.",category:"landing",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["hero","landing","cta","modern"],structure:[{id:"elem_hero_section",type:"container",styles:{spacing:{padding:{desktop:{top:80,right:20,bottom:80,left:20},tablet:{top:60,right:16,bottom:60,left:16},mobile:{top:40,right:12,bottom:40,left:12}}},background:{type:{desktop:"gradient"},gradient:{desktop:{type:"linear",colors:["#667eea","#764ba2"],angle:135}}}},children:[{id:"elem_hero_title",type:"heading",content:"Build Amazing Pages",styles:{typography:{fontSize:{desktop:56,tablet:42,mobile:32},fontWeight:{desktop:700},lineHeight:{desktop:1.2},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#ffffff"}},spacing:{margin:{desktop:{top:0,right:0,bottom:24,left:0}}}}},{id:"elem_hero_subtitle",type:"paragraph",content:"Create stunning, responsive websites with our intuitive page builder. No coding required.",styles:{typography:{fontSize:{desktop:20,tablet:18,mobile:16},lineHeight:{desktop:1.6},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#f0f0f0"}},spacing:{margin:{desktop:{top:0,right:0,bottom:40,left:0}}}}},{id:"elem_hero_cta",type:"button",content:"Get Started Free",styles:{typography:{fontSize:{desktop:18},fontWeight:{desktop:600}},color:{textColor:{desktop:"#667eea"},backgroundColor:{desktop:"#ffffff"}},spacing:{padding:{desktop:{top:16,right:32,bottom:16,left:32}}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:4,blur:12,spread:0,color:"#00000020",inset:!1}}}}}]},{id:"elem_features_section",type:"container",styles:{spacing:{padding:{desktop:{top:80,right:20,bottom:80,left:20}}},background:{type:{desktop:"color"},color:{desktop:"#f9fafb"}}},children:[{id:"elem_features_title",type:"heading",content:"Features",styles:{typography:{fontSize:{desktop:36,tablet:28,mobile:24},fontWeight:{desktop:700},textAlign:{desktop:"center"}},spacing:{margin:{desktop:{top:0,right:0,bottom:48,left:0}}}}},{id:"elem_features_grid",type:"container",styles:{spacing:{gap:{desktop:24}}},children:[{id:"elem_feature_1",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_1_title",type:"heading",content:"Easy to Use",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_1_desc",type:"paragraph",content:"Intuitive drag-and-drop interface makes page building a breeze.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]},{id:"elem_feature_2",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_2_title",type:"heading",content:"Fully Responsive",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_2_desc",type:"paragraph",content:"Design once, looks perfect on all devices automatically.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]},{id:"elem_feature_3",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_3_title",type:"heading",content:"Customizable",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_3_desc",type:"paragraph",content:"Full control over every aspect of your design with advanced styling options.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]}]}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.5,textColor:"#333333",backgroundColor:"#ffffff",maxWidth:1200,padding:{top:0,right:0,bottom:0,left:0}}},{id:"template_default_blog",name:"Blog Post",description:"Clean blog post layout with article header, content sections, and author info.",category:"blog",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["blog","article","content"],structure:[{id:"elem_blog_header",type:"container",styles:{spacing:{padding:{desktop:{top:60,right:20,bottom:40,left:20}},margin:{desktop:{top:0,right:0,bottom:40,left:0}}},border:{width:{desktop:0},style:{desktop:"solid"},color:{desktop:"#e5e7eb"}}},children:[{id:"elem_blog_title",type:"heading",content:"How to Build Beautiful Web Pages",styles:{typography:{fontSize:{desktop:40,tablet:32,mobile:28},fontWeight:{desktop:700},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_meta",type:"paragraph",content:"By John Doe ‚Ä¢ October 15, 2025 ‚Ä¢ 5 min read",styles:{typography:{fontSize:{desktop:14}},color:{textColor:{desktop:"#6b7280"}}}}]},{id:"elem_blog_content",type:"container",styles:{spacing:{padding:{desktop:{top:0,right:20,bottom:60,left:20}}}},children:[{id:"elem_blog_intro",type:"paragraph",content:"Creating beautiful web pages has never been easier. With modern page builders, you can design professional-looking websites without writing a single line of code.",styles:{typography:{fontSize:{desktop:18},lineHeight:{desktop:1.7}},color:{textColor:{desktop:"#4b5563"}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}},{id:"elem_blog_section_1",type:"heading",content:"Getting Started",styles:{typography:{fontSize:{desktop:28},fontWeight:{desktop:600},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_section_1_content",type:"paragraph",content:"Start by choosing a template that matches your vision. Our library includes designs for landing pages, blogs, portfolios, and more. Each template is fully customizable, so you can make it your own.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.7}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}},{id:"elem_blog_section_2",type:"heading",content:"Design with Confidence",styles:{typography:{fontSize:{desktop:28},fontWeight:{desktop:600},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_section_2_content",type:"paragraph",content:"Our responsive design system ensures your pages look perfect on all devices. Edit once, and your design automatically adapts to desktop, tablet, and mobile screens.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.7}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.7,textColor:"#1f2937",backgroundColor:"#ffffff",maxWidth:800,padding:{top:0,right:0,bottom:0,left:0}}}],U={category:"all",search:"",tags:[],sortBy:"date",sortOrder:"desc"};var X=e.i(897711),W=e.i(985937),G=e.i(138227);e.i(435635),e.i(909905);var V=e.i(495043);let K=[{value:"all",label:"All Templates"},{value:"landing",label:"Landing Pages"},{value:"blog",label:"Blog & Content"},{value:"ecommerce",label:"E-commerce"},{value:"portfolio",label:"Portfolio"},{value:"marketing",label:"Marketing"},{value:"custom",label:"My Templates"}];e.i(576884);var q=e.i(421329);e.i(632800);var J=e.i(696134),Y=e.i(850384),Q=e.i(606443),Z=e.i(455461),ee=e.i(183194),et=e.i(169100);e.i(296743);var es=e.i(415733);e.i(645030);var ea=e.i(984804);let el=ea.gql`
  fragment CustomTemplateFields on CustomTemplate {
    id
    name
    description
    category
    thumbnail
    isPublic
    isArchived
    usageCount
    createdAt
    updatedAt
    userId
  }
`,er=ea.gql`
  fragment TemplateShareFields on TemplateShare {
    id
    templateId
    sharedWith
    createdAt
  }
`,ei=ea.gql`
  ${el}
  query GetMyCustomTemplates($category: TemplateCategory, $archived: Boolean) {
    getMyCustomTemplates(category: $category, archived: $archived) {
      ...CustomTemplateFields
    }
  }
`;ea.gql`
  ${el}
  query GetCustomTemplate($id: ID!) {
    getCustomTemplate(id: $id) {
      ...CustomTemplateFields
      blocks
    }
  }
`,ea.gql`
  ${el}
  query GetPublicTemplates($category: TemplateCategory, $limit: Int, $offset: Int) {
    getPublicTemplates(category: $category, limit: $limit, offset: $offset) {
      templates {
        ...CustomTemplateFields
      }
      total
    }
  }
`,ea.gql`
  ${el}
  query GetSharedTemplates {
    getSharedTemplates {
      ...CustomTemplateFields
    }
  }
`,ea.gql`
  ${el}
  mutation CreateCustomTemplate($input: CreateCustomTemplateInput!) {
    createCustomTemplate(input: $input) {
      ...CustomTemplateFields
    }
  }
`,ea.gql`
  ${el}
  mutation UpdateCustomTemplate($id: ID!, $input: UpdateCustomTemplateInput!) {
    updateCustomTemplate(id: $id, input: $input) {
      ...CustomTemplateFields
    }
  }
`,ea.gql`
  mutation DeleteCustomTemplate($id: ID!) {
    deleteCustomTemplate(id: $id) {
      success
      message
    }
  }
`;let eo=ea.gql`
  ${el}
  mutation DuplicateCustomTemplate($id: ID!, $newName: String) {
    duplicateCustomTemplate(id: $id, newName: $newName) {
      ...CustomTemplateFields
    }
  }
`,en=ea.gql`
  ${er}
  mutation ShareTemplate($templateId: ID!, $userIds: [String!]!) {
    shareTemplate(templateId: $templateId, userIds: $userIds) {
      ...TemplateShareFields
    }
  }
`,ec=ea.gql`
  mutation UnshareTemplate($templateId: ID!, $userId: String!) {
    unshareTemplate(templateId: $templateId, userId: $userId) {
      success
      message
    }
  }
`,ed=ea.gql`
  ${el}
  mutation UpdateTemplatePublicity($id: ID!, $isPublic: Boolean!) {
    updateTemplatePublicity(id: $id, isPublic: $isPublic) {
      ...CustomTemplateFields
    }
  }
`,eh=ea.gql`
  mutation IncrementTemplateUsage($id: ID!) {
    incrementTemplateUsage(id: $id) {
      success
      usageCount
    }
  }
`;ea.gql`
  query GetCustomTemplates($userId: String!) {
    customTemplates(userId: $userId) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`;let ep=ea.gql`
  query GetCustomTemplate($id: String!) {
    customTemplate(id: $id) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,em=ea.gql`
  mutation CreateCustomTemplate($input: CreateTemplateInput!) {
    createCustomTemplate(input: $input) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,eu=ea.gql`
  mutation UpdateCustomTemplate($id: String!, $input: UpdateTemplateInput!) {
    updateCustomTemplate(id: $id, input: $input) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,ex=ea.gql`
  mutation DeleteCustomTemplate($id: String!) {
    deleteCustomTemplate(id: $id) {
      success
      message
    }
  }
`;class eg{client;constructor(e){this.client=e}async getMyTemplates(e,t){try{let{data:s}=await this.client.query({query:ei,variables:{category:e,archived:t},fetchPolicy:"network-only"});return s.getMyCustomTemplates||[]}catch(e){throw console.error("[CustomTemplates] Error fetching custom templates:",e),e}}async getTemplate(e){try{let{data:t}=await this.client.query({query:ep,variables:{id:e},fetchPolicy:"cache-first"});return t.getCustomTemplate||null}catch(e){throw console.error("[CustomTemplates] Error fetching template:",e),e}}async createTemplate(e){try{let{data:t}=await this.client.mutate({mutation:em,variables:{input:e},refetchQueries:[{query:ei,variables:{archived:!1}}]});return t.createCustomTemplate}catch(e){throw console.error("[CustomTemplates] Error creating template:",e),e}}async updateTemplate(e,t){try{let{data:s}=await this.client.mutate({mutation:eu,variables:{id:e,input:t}});return s.updateCustomTemplate}catch(e){throw console.error("[CustomTemplates] Error updating template:",e),e}}async deleteTemplate(e){try{let{data:t}=await this.client.mutate({mutation:ex,variables:{id:e},refetchQueries:[{query:ei,variables:{archived:!1}}]});return t.deleteCustomTemplate.success}catch(e){throw console.error("[CustomTemplates] Error deleting template:",e),e}}async duplicateTemplate(e,t){try{let{data:s}=await this.client.mutate({mutation:eo,variables:{id:e,newName:t},refetchQueries:[{query:ei,variables:{archived:!1}}]});return s.duplicateCustomTemplate}catch(e){throw console.error("[CustomTemplates] Error duplicating template:",e),e}}async shareTemplate(e,t){try{let{data:s}=await this.client.mutate({mutation:en,variables:{templateId:e,userIds:t}});return s.shareTemplate}catch(e){throw console.error("[CustomTemplates] Error sharing template:",e),e}}async unshareTemplate(e,t){try{let{data:s}=await this.client.mutate({mutation:ec,variables:{templateId:e,userId:t}});return s.unshareTemplate.success}catch(e){throw console.error("[CustomTemplates] Error unsharing template:",e),e}}async updatePublicity(e,t){try{let{data:s}=await this.client.mutate({mutation:ed,variables:{id:e,isPublic:t}});return s.updateTemplatePublicity}catch(e){throw console.error("[CustomTemplates] Error updating template publicity:",e),e}}async trackUsage(e){try{let{data:t}=await this.client.mutate({mutation:eh,variables:{id:e}});return t.incrementTemplateUsage.usageCount}catch(e){throw console.error("[CustomTemplates] Error tracking template usage:",e),e}}}function ey({isOpen:e,onClose:a,onSave:l,currentPageStructure:r,currentPageStyles:n}){let[c,d]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[m,u]=(0,s.useState)("custom"),[x,y]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),k=c.trim().length>0&&h.trim().length>0&&"all"!==m,T=x.split(",").map(e=>e.trim()).filter(e=>e.length>0),C=async()=>{if(!k)return void N("Please fill in all required fields");j(!0),N(null);try{let e={id:H(),name:c.trim(),description:h.trim(),category:m,structure:r,styles:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),author:f.trim()||void 0,tags:T.length>0?T:void 0,isDefault:!1};await l(e)?(d(""),p(""),u("custom"),y(""),b(""),a()):N("Failed to save template. Please try again.")}catch(e){N(e instanceof Error?e.message:"An error occurred")}finally{j(!1)}},E=e=>{let t=e.length;return e.forEach(e=>{e.children&&Array.isArray(e.children)&&(t+=E(e.children))}),t},I=E(r);return(0,t.jsx)(D.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(D.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsx)(D.DialogTitle,{children:"Save as Template"}),(0,t.jsx)(D.DialogDescription,{children:"Save your current page design as a reusable template. This includes all elements and styles."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[w&&(0,t.jsxs)(es.Alert,{className:"border-destructive",children:[(0,t.jsx)(B.AlertCircle,{className:"h-4 w-4 text-destructive"}),(0,t.jsx)(es.AlertDescription,{children:w})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsx)("div",{className:"flex items-start gap-3",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm text-blue-900 font-medium mb-1",children:"Current Page Structure"}),(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[I," elements will be saved in this template"]})]})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(A.Label,{htmlFor:"template-name",children:["Template Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(J.Input,{id:"template-name",placeholder:"e.g., My Landing Page",value:c,onChange:e=>d(e.target.value),maxLength:100}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Choose a descriptive name for your template"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(A.Label,{htmlFor:"template-description",children:["Description ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(L.Textarea,{id:"template-description",placeholder:"Describe what this template is for and what it includes...",value:h,onChange:e=>p(e.target.value),rows:3,maxLength:500}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[h.length,"/500 characters"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(A.Label,{htmlFor:"template-category",children:["Category ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(ee.Select,{value:m,onValueChange:e=>u(e),children:[(0,t.jsx)(ee.SelectTrigger,{id:"template-category",children:(0,t.jsx)(ee.SelectValue,{placeholder:"Select category"})}),(0,t.jsx)(ee.SelectContent,{children:K.filter(e=>"all"!==e.value).map(e=>(0,t.jsx)(ee.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{htmlFor:"template-author",children:"Author (optional)"}),(0,t.jsx)(J.Input,{id:"template-author",placeholder:"Your name",value:f,onChange:e=>b(e.target.value),maxLength:50})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{htmlFor:"template-tags",children:"Tags (optional)"}),(0,t.jsx)(J.Input,{id:"template-tags",placeholder:"e.g., modern, minimal, hero",value:x,onChange:e=>y(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Separate tags with commas. Tags help organize and search templates."}),T.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:T.map((e,s)=>(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:e},s))})]})]}),(0,t.jsxs)(D.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{d(""),p(""),u("custom"),y(""),b(""),N(null),a()},disabled:v,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:C,disabled:!k||v,className:"bg-blue-600 hover:bg-blue-700",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Save,{className:"w-4 h-4 mr-2"}),"Save Template"]})})]})]})})}var ef=e.i(822390);function eb({isOpen:e,onClose:a,onImport:l}){let[r,n]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[m,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),f=(0,s.useRef)(null),b=async e=>{if(p(null),d(null),!e.name.endsWith(".json"))return void p("Please select a JSON file");if(e.size>5242880)return void p("File size must be less than 5MB");n(e);try{let t=await e.text(),s=JSON.parse(t),a=(e=>{if(!e.name||"string"!=typeof e.name)return"Template must have a name";if(!e.category||"string"!=typeof e.category)return"Template must have a category";if(!Array.isArray(e.structure))return"Template must have a structure array";if(0===e.structure.length)return"Template structure cannot be empty";for(let t of e.structure)if(!t.id||!t.type)return"All elements must have id and type";return null})(s);if(a){p(a),n(null);return}d(s)}catch(e){e instanceof SyntaxError?p("Invalid JSON file format"):p("Failed to read file"),n(null)}},v=async()=>{if(c){u(!0),p(null);try{await l({template:c,replaceExisting:!1})?j():p("Failed to import template. Please try again.")}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{u(!1)}}},j=()=>{n(null),d(null),p(null),g(!1),a()},w=e=>{let t=e.length;return e.forEach(e=>{e.children&&Array.isArray(e.children)&&(t+=w(e.children))}),t};return(0,t.jsx)(D.Dialog,{open:e,onOpenChange:j,children:(0,t.jsxs)(D.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsx)(D.DialogTitle,{children:"Import Template"}),(0,t.jsx)(D.DialogDescription,{children:"Import a template from a JSON file. The file will be validated before import."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[h&&(0,t.jsxs)(es.Alert,{className:"border-destructive",children:[(0,t.jsx)(B.AlertCircle,{className:"h-4 w-4 text-destructive"}),(0,t.jsx)(es.AlertDescription,{children:h})]}),!r&&(0,t.jsxs)("div",{className:`
                border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                transition-colors duration-200
                ${x?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
              `,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),g(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),g(!1);let t=e.dataTransfer.files;t&&t.length>0&&b(t[0])},onClick:()=>f.current?.click(),children:[(0,t.jsx)(Z.Upload,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-2",children:x?"Drop file here":"Drop JSON file here"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse"}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(q.FileText,{className:"w-4 h-4 mr-2"}),"Select File"]}),(0,t.jsx)("input",{ref:f,type:"file",accept:".json",onChange:e=>{let t=e.target.files;t&&t.length>0&&b(t[0])},className:"hidden"})]}),c&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(es.Alert,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(ef.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(es.AlertDescription,{className:"text-green-800",children:"Template file validated successfully"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(q.FileText,{className:"w-5 h-5 text-gray-600"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:r?.name})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{n(null),d(null),p(null)},children:(0,t.jsx)(y.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[(r.size/1024).toFixed(2)," KB"]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:c.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:c.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Category"}),(0,t.jsx)(o.Badge,{variant:"outline",className:"mt-1",children:c.category})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Elements"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:w(c.structure)})]}),c.author&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Author"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:c.author})]}),c.createdAt&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Created"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:new Date(c.createdAt).toLocaleDateString()})]})]}),c.tags&&c.tags.length>0&&(0,t.jsxs)("div",{className:"pt-3 border-t",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:c.tags.map((e,s)=>(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:e},s))})]})]})]})]}),(0,t.jsxs)(D.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:j,disabled:m,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:v,disabled:!c||m,className:"bg-blue-600 hover:bg-blue-700",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.Download,{className:"w-4 h-4 mr-2 animate-pulse"}),"Importing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.Download,{className:"w-4 h-4 mr-2"}),"Import Template"]})})]})]})})}var ev=e.i(4993),ej=e.i(390517),ew=e.i(125340),eN=e.i(261597),ek=e.i(775680),eT=e.i(752860);e.i(308140);let eC=(0,s.createContext)(void 0);function eS({children:e}){let[a,l]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!1),[o,n]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[h,p]=(0,s.useState)(0);s.default.useEffect(()=>{p(e=>e+1)},[o,c]);let m=(0,s.useCallback)(e=>{l(e)},[]),u=(0,s.useCallback)(e=>{i(e)},[]),x=(0,s.useCallback)(e=>{console.log("[UIStateContext] setShowAddChildDialog called with:",e),n(e),console.log("[UIStateContext] showAddChildDialog state will be:",e)},[]),g=(0,s.useCallback)(e=>{console.log("[UIStateContext] setAddChildParentId called with:",e),d(e)},[]),y={showPageSettings:a,showPreview:r,showAddChildDialog:o,addChildParentId:c,setShowPageSettings:m,setShowPreview:u,setShowAddChildDialog:x,setAddChildParentId:g,openAddChildDialog:(0,s.useCallback)(e=>{console.log("[UIStateContext] openAddChildDialog called with parentId:",e),d(e),n(!0),console.log("[UIStateContext] Dialog should open for parent:",e)},[]),closeAddChildDialog:(0,s.useCallback)(()=>{console.log("[UIStateContext] closeAddChildDialog called"),n(!1),d(null)},[]),_version:h};return s.default.useEffect(()=>{},[y.showAddChildDialog,y.addChildParentId,h]),(0,t.jsx)(eC.Provider,{value:y,children:e})}function eB(){let e=(0,s.useContext)(eC);if(void 0===e)throw Error("useUIState must be used within a UIStateProvider. Make sure your component is wrapped with <PageBuilderProvider>");return e}var eE=e.i(529590),eI=e.i(351049);let eD=e=>{let t=encodeURIComponent({"hero-centered":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#f8fafc"/>
        <rect x="50" y="80" width="300" height="40" rx="4" fill="#1e293b" opacity="0.8"/>
        <rect x="100" y="140" width="200" height="20" rx="4" fill="#64748b" opacity="0.6"/>
        <rect x="150" y="180" width="100" height="35" rx="6" fill="#3b82f6"/>
        <text x="200" y="203" font-family="Arial" font-size="14" fill="white" text-anchor="middle">CTA</text>
      </svg>
    `,"features-3col":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <rect x="20" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="75" cy="60" r="20" fill="#3b82f6" opacity="0.2"/>
        <rect x="40" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="30" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <rect x="145" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="200" cy="60" r="20" fill="#10b981" opacity="0.2"/>
        <rect x="165" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="155" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <rect x="270" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="325" cy="60" r="20" fill="#f59e0b" opacity="0.2"/>
        <rect x="290" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="280" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
      </svg>
    `,"pricing-3tier":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Basic Plan -->
        <rect x="20" y="40" width="110" height="220" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="30" y="50" width="90" height="30" rx="4" fill="#f1f5f9"/>
        <text x="75" y="70" font-family="Arial" font-size="12" fill="#64748b" text-anchor="middle">Basic</text>
        <text x="75" y="110" font-family="Arial" font-size="24" fill="#1e293b" text-anchor="middle" font-weight="bold">$9</text>
        <rect x="35" y="130" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="145" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="160" width="80" height="4" rx="2" fill="#e2e8f0"/>
        
        <!-- Pro Plan (Highlighted) -->
        <rect x="145" y="30" width="110" height="240" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2"/>
        <rect x="155" y="40" width="90" height="30" rx="4" fill="rgba(255,255,255,0.2)"/>
        <text x="200" y="60" font-family="Arial" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Pro</text>
        <text x="200" y="100" font-family="Arial" font-size="24" fill="white" text-anchor="middle" font-weight="bold">$29</text>
        <rect x="160" y="120" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        <rect x="160" y="135" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        <rect x="160" y="150" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        
        <!-- Enterprise Plan -->
        <rect x="270" y="40" width="110" height="220" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="280" y="50" width="90" height="30" rx="4" fill="#f1f5f9"/>
        <text x="325" y="70" font-family="Arial" font-size="12" fill="#64748b" text-anchor="middle">Enterprise</text>
        <text x="325" y="110" font-family="Arial" font-size="24" fill="#1e293b" text-anchor="middle" font-weight="bold">$99</text>
        <rect x="285" y="130" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="145" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="160" width="80" height="4" rx="2" fill="#e2e8f0"/>
      </svg>
    `,"cta-centered":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#1e293b"/>
        <rect x="60" y="80" width="280" height="30" rx="4" fill="rgba(255,255,255,0.9)"/>
        <rect x="80" y="130" width="240" height="15" rx="4" fill="rgba(255,255,255,0.6)"/>
        <rect x="100" y="155" width="200" height="15" rx="4" fill="rgba(255,255,255,0.6)"/>
        <rect x="120" y="190" width="160" height="40" rx="8" fill="#3b82f6"/>
        <text x="200" y="216" font-family="Arial" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Get Started</text>
      </svg>
    `,"team-3members":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Member 1 -->
        <circle cx="75" cy="80" r="30" fill="#3b82f6" opacity="0.2"/>
        <circle cx="75" cy="75" r="15" fill="#3b82f6"/>
        <rect x="40" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="30" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <!-- Member 2 -->
        <circle cx="200" cy="80" r="30" fill="#10b981" opacity="0.2"/>
        <circle cx="200" cy="75" r="15" fill="#10b981"/>
        <rect x="165" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="155" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <!-- Member 3 -->
        <circle cx="325" cy="80" r="30" fill="#f59e0b" opacity="0.2"/>
        <circle cx="325" cy="75" r="15" fill="#f59e0b"/>
        <rect x="290" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="280" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
      </svg>
    `,"contact-form":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Form Section -->
        <rect x="30" y="30" width="200" height="240" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="45" y="50" width="170" height="30" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="90" width="170" height="30" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="130" width="170" height="60" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="200" width="170" height="35" rx="6" fill="#3b82f6"/>
        <text x="130" y="222" font-family="Arial" font-size="12" fill="white" text-anchor="middle">Send</text>
        
        <!-- Contact Info -->
        <rect x="250" y="70" width="120" height="100" rx="6" fill="#f1f5f9"/>
        <circle cx="280" cy="95" r="8" fill="#3b82f6"/>
        <rect x="295" y="90" width="60" height="4" rx="2" fill="#64748b"/>
        <circle cx="280" cy="125" r="8" fill="#10b981"/>
        <rect x="295" y="120" width="60" height="4" rx="2" fill="#64748b"/>
        <circle cx="280" cy="155" r="8" fill="#f59e0b"/>
        <rect x="295" y="150" width="60" height="4" rx="2" fill="#64748b"/>
      </svg>
    `,"testimonials-3col":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Testimonial 1 -->
        <rect x="20" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="75" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="30" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="30" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="75" cy="170" r="20" fill="#3b82f6" opacity="0.2"/>
        <rect x="50" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 50 215 L 55 220 L 50 225 M 55 215 L 60 220 L 55 225 M 60 215 L 65 220 L 60 225 M 65 215 L 70 220 L 65 225 M 70 215 L 75 220 L 70 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
        
        <!-- Testimonial 2 -->
        <rect x="145" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="200" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="155" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="160" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="155" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="200" cy="170" r="20" fill="#10b981" opacity="0.2"/>
        <rect x="175" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 175 215 L 180 220 L 175 225 M 180 215 L 185 220 L 180 225 M 185 215 L 190 220 L 185 225 M 190 215 L 195 220 L 190 225 M 195 215 L 200 220 L 195 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
        
        <!-- Testimonial 3 -->
        <rect x="270" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="325" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="280" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="280" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="325" cy="170" r="20" fill="#f59e0b" opacity="0.2"/>
        <rect x="300" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 300 215 L 305 220 L 300 225 M 305 215 L 310 220 L 305 225 M 310 215 L 315 220 L 310 225 M 315 215 L 320 220 L 315 225 M 320 215 L 325 220 L 320 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
      </svg>
    `,"carousel-featured-products":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Title -->
        <rect x="100" y="20" width="200" height="12" rx="4" fill="#1e293b"/>
        <rect x="120" y="40" width="160" height="8" rx="4" fill="#64748b" opacity="0.5"/>
        
        <!-- Carousel Container -->
        <rect x="20" y="70" width="360" height="200" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        
        <!-- Product Cards -->
        <rect x="35" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="40" y="90" width="90" height="90" rx="4" fill="#e0e7ff"/>
        <rect x="50" y="100" width="70" height="70" rx="4" fill="#818cf8" opacity="0.3"/>
        <rect x="45" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="45" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="45" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="70" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <rect x="150" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="155" y="90" width="90" height="90" rx="4" fill="#dbeafe"/>
        <rect x="165" y="100" width="70" height="70" rx="4" fill="#60a5fa" opacity="0.3"/>
        <rect x="160" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="160" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="160" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="185" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <rect x="265" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="270" y="90" width="90" height="90" rx="4" fill="#fef3c7"/>
        <rect x="280" y="100" width="70" height="70" rx="4" fill="#fbbf24" opacity="0.3"/>
        <rect x="275" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="275" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="275" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="300" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <!-- Navigation Arrows -->
        <circle cx="15" cy="170" r="8" fill="#3b82f6" opacity="0.8"/>
        <path d="M 17 170 L 14 167 L 14 173 Z" fill="white"/>
        <circle cx="385" cy="170" r="8" fill="#3b82f6" opacity="0.8"/>
        <path d="M 383 170 L 386 167 L 386 173 Z" fill="white"/>
        
        <!-- Indicators -->
        <circle cx="180" cy="285" r="4" fill="#3b82f6"/>
        <circle cx="195" cy="285" r="4" fill="#cbd5e1"/>
        <circle cx="210" cy="285" r="4" fill="#cbd5e1"/>
        <circle cx="225" cy="285" r="4" fill="#cbd5e1"/>
      </svg>
    `}[e]||`
    <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
      <rect width="400" height="300" fill="#f8fafc"/>
      <rect x="100" y="100" width="200" height="100" rx="8" fill="#e2e8f0" stroke="#cbd5e1" stroke-width="2"/>
      <text x="200" y="155" font-family="Arial" font-size="16" fill="#64748b" text-anchor="middle">Template</text>
    </svg>
  `);return`data:image/svg+xml;charset=utf-8,${t}`},eA=[{id:"hero-centered",name:"Centered Hero",description:"Hero section v·ªõi ti√™u ƒë·ªÅ, m√¥ t·∫£ v√† CTA button ·ªü gi·ªØa",category:"hero",thumbnail:eD("hero-centered"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"lg",backgroundColor:"#f8fafc",padding:{top:120,bottom:120},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:24,padding:32,backgroundColor:"transparent",maxWidth:"800px",alignment:"center",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h1 style="text-align: center; font-size: 3rem; font-weight: bold; margin: 0;">Ch√†o m·ª´ng ƒë·∫øn v·ªõi trang c·ªßa ch√∫ng t√¥i</h1>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.25rem; color: #64748b;">Gi·∫£i ph√°p t·ªët nh·∫•t cho doanh nghi·ªáp c·ªßa b·∫°n. B·∫Øt ƒë·∫ßu ngay h√¥m nay v√† tr·∫£i nghi·ªám s·ª± kh√°c bi·ªát.</p>',style:{}}},{type:eI.BlockType.BUTTON,order:2,depth:2,content:{text:"B·∫Øt ƒë·∫ßu ngay",href:"#",variant:"primary",style:{backgroundColor:"#3b82f6",color:"white",padding:"16px 32px",fontSize:"1.125rem",borderRadius:"8px"}}}]}]}]},{id:"features-3col",name:"Features 3 Columns",description:"3 t√≠nh nƒÉng n·ªïi b·∫≠t v·ªõi icon, ti√™u ƒë·ªÅ v√† m√¥ t·∫£",category:"features",thumbnail:eD("features-3col"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:48,padding:0,backgroundColor:"transparent",maxWidth:"100%",alignment:"center",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold;">T√≠nh nƒÉng n·ªïi b·∫≠t</h2>',style:{}}},{type:eI.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">üöÄ</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">Nhanh ch√≥ng</h3>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">T·ªëc ƒë·ªô x·ª≠ l√Ω si√™u nhanh, t·ªëi ∆∞u hi·ªáu su·∫•t t·ªëi ƒëa.</p>',style:{}}}]},{type:eI.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #10b981; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">üîí</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">B·∫£o m·∫≠t</h3>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">B·∫£o v·ªá d·ªØ li·ªáu v·ªõi c√¥ng ngh·ªá m√£ h√≥a hi·ªán ƒë·∫°i.</p>',style:{}}}]},{type:eI.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #f59e0b; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">‚ö°</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">D·ªÖ s·ª≠ d·ª•ng</h3>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">Giao di·ªán tr·ª±c quan, d·ªÖ d√†ng s·ª≠ d·ª•ng cho m·ªçi ng∆∞·ªùi.</p>',style:{}}}]}]}]}]}]},{id:"pricing-3tier",name:"Pricing 3 Tiers",description:"B·∫£ng gi√° 3 g√≥i v·ªõi highlight g√≥i ph·ªï bi·∫øn",category:"pricing",thumbnail:eD("pricing-3tier"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"#f8fafc",padding:{top:80,bottom:80},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:48,padding:0,backgroundColor:"transparent",maxWidth:"100%",alignment:"center",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold;">Ch·ªçn g√≥i ph√π h·ª£p</h2>',style:{}}},{type:eI.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:24,responsive:{sm:1,md:2,lg:3},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"2px solid #e2e8f0"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Starter</h3><p style="color: #64748b;">Cho c√° nh√¢n</p>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$9<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì 10 projects</li><li style="padding: 8px 0;">‚úì 5GB storage</li><li style="padding: 8px 0;">‚úì Email support</li></ul>',style:{}}},{type:eI.BlockType.BUTTON,order:3,depth:4,content:{text:"B·∫Øt ƒë·∫ßu",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]},{type:eI.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"3px solid #3b82f6",position:"relative"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="position: absolute; top: -12px; right: 20px; background: #3b82f6; color: white; padding: 4px 12px; border-radius: 999px; font-size: 0.875rem; font-weight: bold;">PH·ªî BI·∫æN</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Pro</h3><p style="color: #64748b;">Cho doanh nghi·ªáp nh·ªè</p>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$29<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:eI.BlockType.TEXT,order:3,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì Unlimited projects</li><li style="padding: 8px 0;">‚úì 50GB storage</li><li style="padding: 8px 0;">‚úì Priority support</li><li style="padding: 8px 0;">‚úì Advanced analytics</li></ul>',style:{}}},{type:eI.BlockType.BUTTON,order:4,depth:4,content:{text:"B·∫Øt ƒë·∫ßu",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]},{type:eI.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"2px solid #e2e8f0"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Enterprise</h3><p style="color: #64748b;">Cho t·ªï ch·ª©c l·ªõn</p>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$99<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì Unlimited everything</li><li style="padding: 8px 0;">‚úì 500GB storage</li><li style="padding: 8px 0;">‚úì 24/7 phone support</li><li style="padding: 8px 0;">‚úì Custom integrations</li><li style="padding: 8px 0;">‚úì Dedicated account manager</li></ul>',style:{}}},{type:eI.BlockType.BUTTON,order:3,depth:4,content:{text:"Li√™n h·ªá",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]}]}]}]}]},{id:"cta-centered",name:"Centered CTA",description:"Call-to-action section v·ªõi background m√†u v√† buttons",category:"custom",thumbnail:eD("cta-centered"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"lg",backgroundColor:"#3b82f6",padding:{top:80,bottom:80},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:24,padding:32,backgroundColor:"transparent",maxWidth:"800px",alignment:"center",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold; color: white; margin: 0;">S·∫µn s√†ng b·∫Øt ƒë·∫ßu?</h2>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.25rem; color: rgba(255,255,255,0.9);">Tham gia c√πng h√†ng ngh√¨n kh√°ch h√†ng ƒëang s·ª≠ d·ª•ng s·∫£n ph·∫©m c·ªßa ch√∫ng t√¥i.</p>',style:{}}},{type:eI.BlockType.FLEX_ROW,order:2,depth:2,content:{direction:"row",justifyContent:"center",alignItems:"center",wrap:!0,gap:16,style:{}},children:[{type:eI.BlockType.BUTTON,order:0,depth:3,content:{text:"D√πng th·ª≠ mi·ªÖn ph√≠",href:"#",variant:"primary",style:{padding:"16px 32px",backgroundColor:"white",color:"#3b82f6",borderRadius:"8px",fontSize:"1.125rem",fontWeight:"bold"}}},{type:eI.BlockType.BUTTON,order:1,depth:3,content:{text:"T√¨m hi·ªÉu th√™m",href:"#",variant:"secondary",style:{padding:"16px 32px",backgroundColor:"transparent",color:"white",border:"2px solid white",borderRadius:"8px",fontSize:"1.125rem"}}}]}]}]}]},{id:"team-3members",name:"Team 3 Members",description:"Gi·ªõi thi·ªáu ƒë·ªôi ng≈© v·ªõi 3 th√†nh vi√™n, ·∫£nh ƒë·∫°i di·ªán v√† th√¥ng tin li√™n h·ªá",category:"team",thumbnail:eD("team-3members"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">ƒê·ªôi Ng≈© C·ªßa Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">G·∫∑p g·ª° nh·ªØng con ng∆∞·ªùi t√†i nƒÉng ƒë·∫±ng sau th√†nh c√¥ng c·ªßa ch√∫ng t√¥i</p>',style:{}}},{type:eI.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{marginTop:"48px"}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 1",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">Nguy·ªÖn VƒÉn A</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">CEO & Founder</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Chuy√™n gia v·ªõi h∆°n 10 nƒÉm kinh nghi·ªám trong lƒ©nh v·ª±c c√¥ng ngh·ªá v√† qu·∫£n l√Ω.</p>',style:{}}}]},{type:eI.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 2",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">Tr·∫ßn Th·ªã B</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">CTO</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Ki·∫øn tr√∫c s∆∞ ph·∫ßn m·ªÅm h√†ng ƒë·∫ßu v·ªõi ƒëam m√™ x√¢y d·ª±ng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng.</p>',style:{}}}]},{type:eI.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 3",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">L√™ VƒÉn C</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">Head of Design</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Nh√† thi·∫øt k·∫ø s√°ng t·∫°o v·ªõi t·∫ßm nh√¨n th·∫©m m·ªπ ƒë·ªôc ƒë√°o v√† tinh t·∫ø.</p>',style:{}}}]}]}]}]}]},{id:"contact-form",name:"Contact Form & Info",description:"Form li√™n h·ªá k·∫øt h·ª£p v·ªõi th√¥ng tin li√™n l·∫°c v√† b·∫£n ƒë·ªì",category:"contact",thumbnail:eD("contact-form"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"#f9fafb",padding:{top:80,bottom:80}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">Li√™n H·ªá V·ªõi Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">Ch√∫ng t√¥i lu√¥n s·∫µn s√†ng l·∫Øng nghe v√† h·ªó tr·ª£ b·∫°n</p>',style:{}}},{type:eI.BlockType.GRID,order:1,depth:2,content:{columns:2,gap:48,responsive:{sm:1,md:2,lg:2},style:{marginTop:"48px"}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:32,padding:32,backgroundColor:"white",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Th√¥ng Tin Li√™n H·ªá</h3>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px; margin-bottom: 20px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">üìç</div><div><strong style="display: block; margin-bottom: 4px;">ƒê·ªãa ch·ªâ</strong><span style="color: #64748b;">123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</span></div></div>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px; margin-bottom: 20px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">üìû</div><div><strong style="display: block; margin-bottom: 4px;">ƒêi·ªán tho·∫°i</strong><span style="color: #64748b;">+84 123 456 789</span></div></div>',style:{}}},{type:eI.BlockType.TEXT,order:3,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚úâÔ∏è</div><div><strong style="display: block; margin-bottom: 4px;">Email</strong><span style="color: #64748b;">contact@example.com</span></div></div>',style:{}}}]},{type:eI.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"white",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">G·ª≠i Tin Nh·∫Øn</h3><p style="color: #64748b; margin-bottom: 1.5rem;">ƒêi·ªÅn th√¥ng tin b√™n d∆∞·ªõi ƒë·ªÉ g·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</p>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">H·ªç v√† t√™n</label><input type="text" placeholder="Nh·∫≠p h·ªç v√† t√™n" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;" /></div>',style:{}}},{type:eI.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">Email</label><input type="email" placeholder="Nh·∫≠p email" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;" /></div>',style:{}}},{type:eI.BlockType.TEXT,order:3,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">Tin nh·∫Øn</label><textarea placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n" rows="4" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem; resize: vertical;"></textarea></div>',style:{}}},{type:eI.BlockType.BUTTON,order:4,depth:4,content:{text:"G·ª≠i tin nh·∫Øn",href:"#",variant:"primary",style:{width:"100%",padding:"14px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold"}}}]}]}]}]}]},{id:"testimonials-3col",name:"Testimonials 3 Reviews",description:"Ph·∫ßn ƒë√°nh gi√° c·ªßa kh√°ch h√†ng v·ªõi 3 reviews v√† rating",category:"custom",thumbnail:eD("testimonials-3col"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">Kh√°ch H√†ng N√≥i G√¨ V·ªÅ Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">H√†ng ng√†n kh√°ch h√†ng h√†i l√≤ng ƒë√£ tin t∆∞·ªüng v√† s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i</p>',style:{}}},{type:eI.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{marginTop:"48px"}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"S·∫£n ph·∫©m tuy·ªát v·ªùi! Gi√∫p c√¥ng vi·ªác c·ªßa t√¥i hi·ªáu qu·∫£ h∆°n r·∫•t nhi·ªÅu. ƒê·ªôi ng≈© h·ªó tr·ª£ c≈©ng r·∫•t t·∫≠n t√¨nh."</p>',style:{}}},{type:eI.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:eI.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 1",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:eI.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">Nguy·ªÖn Minh A</strong><span style="color: #64748b; font-size: 0.875rem;">CEO t·∫°i ABC Corp</span></div>',style:{}}}]}]},{type:eI.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"Giao di·ªán ƒë·∫πp, d·ªÖ s·ª≠ d·ª•ng v√† t√≠nh nƒÉng ƒë·∫ßy ƒë·ªß. T√¥i ƒë√£ gi·ªõi thi·ªáu cho nhi·ªÅu ƒë·ªìng nghi·ªáp."</p>',style:{}}},{type:eI.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:eI.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 2",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:eI.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">Tr·∫ßn Th·ªã B</strong><span style="color: #64748b; font-size: 0.875rem;">Marketing Manager</span></div>',style:{}}}]}]},{type:eI.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:eI.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"ROI tuy·ªát v·ªùi! Ch·ªâ sau 2 th√°ng s·ª≠ d·ª•ng, doanh thu c·ªßa ch√∫ng t√¥i ƒë√£ tƒÉng 30%."</p>',style:{}}},{type:eI.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:eI.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 3",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:eI.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">L√™ VƒÉn C</strong><span style="color: #64748b; font-size: 0.875rem;">Founder t·∫°i XYZ Startup</span></div>',style:{}}}]}]}]}]}]}]},{id:"carousel-hero",name:"Hero Carousel",description:"Carousel v·ªõi 3 slides hero section, t·ª± ƒë·ªông chuy·ªÉn slide",category:"hero",thumbnail:eD("carousel-hero"),blocks:[{type:eI.BlockType.CAROUSEL,order:0,depth:0,content:{slides:[{id:"1",title:"Khuy·∫øn M√£i ƒê·∫∑c Bi·ªát",subtitle:"Gi·∫£m gi√° l√™n ƒë·∫øn 50% cho t·∫•t c·∫£ s·∫£n ph·∫©m",description:"∆Øu ƒë√£i c√≥ th·ªùi h·∫°n - Nhanh tay ƒë·∫∑t h√†ng ngay h√¥m nay!",image:"https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop",cta:{text:"Mua Ngay",link:"#products"},badge:"HOT",bgColor:"bg-gradient-to-r from-red-500 to-pink-600"},{id:"2",title:"S·∫£n Ph·∫©m M·ªõi 2024",subtitle:"B·ªô s∆∞u t·∫≠p m·ªõi nh·∫•t",description:"Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao v·ªõi thi·∫øt k·∫ø hi·ªán ƒë·∫°i",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop",cta:{text:"Kh√°m Ph√°",link:"#new-arrivals"},badge:"NEW",bgColor:"bg-gradient-to-r from-blue-500 to-cyan-600"},{id:"3",title:"Ch·∫•t L∆∞·ª£ng ƒê·∫£m B·∫£o",subtitle:"Cam k·∫øt 100% ch√≠nh h√£ng",description:"T·∫•t c·∫£ s·∫£n ph·∫©m ƒë·ªÅu ƒë∆∞·ª£c ki·ªÉm ƒë·ªãnh ch·∫•t l∆∞·ª£ng nghi√™m ng·∫∑t",image:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=400&fit=crop",cta:{text:"T√¨m Hi·ªÉu Th√™m",link:"#quality"},badge:"QUALITY",bgColor:"bg-gradient-to-r from-green-500 to-emerald-600"}],autoPlay:!0,autoPlayInterval:5e3,showIndicators:!0,showArrows:!0,loop:!0,style:{}}}]},{id:"carousel-featured-products",name:"Featured Products Carousel",description:"Carousel t·ª± ƒë·ªông hi·ªÉn th·ªã s·∫£n ph·∫©m n·ªïi b·∫≠t t·ª´ database",category:"custom",thumbnail:eD("carousel-featured-products"),blocks:[{type:eI.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"xl",backgroundColor:"#ffffff",padding:{top:80,bottom:80},style:{}},children:[{type:eI.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:32,padding:0,backgroundColor:"transparent",style:{}},children:[{type:eI.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold; margin: 0 0 16px 0;">S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>',style:{}}},{type:eI.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.125rem; color: #64748b; margin: 0 0 32px 0;">Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>',style:{}}},{type:eI.BlockType.CAROUSEL,order:2,depth:2,content:{slides:[],dataSource:{type:"database",queryType:"featured",limit:12,titleField:"name",descriptionField:"shortDesc",imageField:"thumbnail",badgeField:"isFeatured"},autoPlay:!0,autoPlayInterval:4e3,showIndicators:!0,showArrows:!0,loop:!0,height:"lg",transition:"slide",indicatorStyle:"dots",arrowStyle:"circle",slidesPerView:3,animationType:"fade",animationDuration:600,style:{}}}]}]}]}],eL=(0,s.createContext)(void 0);function eP({children:e}){let a=(0,eE.useApolloClient)();(0,s.useEffect)(()=>{},[a]);let[l,r]=(0,s.useState)(""),[i,o]=(0,s.useState)("all"),[n,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(null),[p,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)([]),[w,N]=(0,s.useState)(eA),k=s.default.useCallback(async()=>{try{b(!0);let e=new eg(a),t=await e.getMyTemplates();j(t);let s=[...eA,...t.map(e=>({id:e.id,name:e.name,description:e.description,category:e.category,thumbnail:e.thumbnail||"/placeholder-template.png",blocks:[],isCustom:!0}))];N(s)}catch(e){console.error("Error loading templates from database:",e)}finally{b(!1)}},[a]);(0,s.useEffect)(()=>{k()},[k]);let T=s.default.useCallback(e=>{h(e),c(!0)},[]),C=s.default.useCallback(()=>{c(!1),h(null)},[]),S=s.default.useCallback(async e=>{try{y(!0);let t=new eg(a);await t.createTemplate(e),console.log(`Template "${e.name}" saved successfully!`),await k(),x(!1)}catch(e){console.error("Error saving template:",e)}finally{y(!1)}},[a,k]),B=s.default.useCallback(async e=>{try{if(!window.confirm("Are you sure you want to delete this template?"))return;let t=new eg(a);await t.deleteTemplate(e),console.log("Template deleted successfully"),await k()}catch(e){console.error("Error deleting template:",e)}},[a,k]),E=s.default.useCallback(async(e,t)=>{try{let s=new eg(a);await s.duplicateTemplate(e,t),console.log("Template duplicated successfully"),await k()}catch(e){console.error("Error duplicating template:",e)}},[a,k]);return(0,t.jsx)(eL.Provider,{value:{allTemplates:w,customTemplates:v,selectedTemplate:d,templateSearchQuery:l,selectedTemplateCategory:i,showPreviewModal:n,isApplyingTemplate:p,showSaveTemplateDialog:u,isSavingTemplate:g,isLoadingTemplates:f,setTemplateSearchQuery:r,setSelectedTemplateCategory:o,setShowPreviewModal:c,setSelectedTemplate:h,setIsApplyingTemplate:m,setShowSaveTemplateDialog:x,setIsSavingTemplate:y,handlePreviewTemplate:T,handleClosePreview:C,handleSaveAsTemplate:S,handleDeleteCustomTemplate:B,handleDuplicateTemplate:E,refreshTemplates:k},children:e})}var eR=e.i(835819),eO=e.i(206667);let eF=new class{logs=[];maxLogs=100;isDevelopment=!1;log(e,t,s,a){let l={level:e,operation:t,message:s,data:a,timestamp:new Date};if(this.logs.unshift(l),this.logs.length>this.maxLogs&&this.logs.pop(),this.isDevelopment){let r=this.getEmoji(e),i=this.getColor(e);console.group(`${r} [${t}] ${s}`),console.log("%c"+e.toUpperCase(),`color: ${i}; font-weight: bold`),a&&console.log("Data:",a),console.log("Time:",l.timestamp.toLocaleTimeString()),console.groupEnd()}}debug(e,t,s){this.isDevelopment&&this.log("debug",e,t,s)}info(e,t,s){this.log("info",e,t,s)}success(e,t,s){return this.log("success",e,t,s),this.isImportantOperation(e)}warning(e,t,s){return this.log("warning",e,t,s),!0}error(e,t,s){return this.log("error",e,t,s),!0}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}isImportantOperation(e){return["PAGE_SAVE","PAGE_CREATE","PAGE_DELETE","PAGE_PUBLISH","TEMPLATE_ADD","BULK_OPERATION"].includes(e)}getEmoji(e){return({debug:"üîç",info:"‚ÑπÔ∏è",success:"‚úÖ",warning:"‚ö†Ô∏è",error:"‚ùå"})[e]}getColor(e){return({debug:"#6B7280",info:"#3B82F6",success:"#10B981",warning:"#F59E0B",error:"#EF4444"})[e]}},ez="PAGE_UPDATE",eM="PAGE_DELETE",e_="BLOCK_ADD",eH="BLOCK_CREATE",e$="BLOCK_UPDATE",eU="BLOCK_DELETE",eX="BLOCK_REORDER",eW="BLOCK_STYLE_UPDATE",eG="TEMPLATE_APPLY",eV=(0,s.createContext)(void 0);function eK({children:e,maxHistorySize:a=50}){let[l,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(-1),n=(0,s.useCallback)((e,t)=>{r(s=>{let l=s.slice(0,i+1);return(l.push({blocks:JSON.parse(JSON.stringify(e)),timestamp:Date.now(),action:t}),l.length>a)?l.slice(l.length-a):l}),o(e=>Math.min(i+2,a)-1)},[i,a]),c=(0,s.useCallback)(()=>{if(i<=0)return null;let e=i-1;return o(e),JSON.parse(JSON.stringify(l[e].blocks))},[i,l]),d=(0,s.useCallback)(()=>{if(i>=l.length-1)return null;let e=i+1;return o(e),JSON.parse(JSON.stringify(l[e].blocks))},[i,l]),h=(0,s.useCallback)(()=>{r([]),o(-1)},[]),p=(0,s.useCallback)(()=>i<0||i>=l.length?"":l[i].action,[i,l]),m=(0,s.useCallback)(()=>i<=0?null:l[i].action,[i,l]),u=(0,s.useCallback)(()=>i>=l.length-1?null:l[i+1].action,[i,l]),x=i>0,g=i<l.length-1,y=l.length;return(0,t.jsx)(eV.Provider,{value:{canUndo:x,canRedo:g,historyIndex:i,historySize:y,undo:c,redo:d,pushHistory:n,clearHistory:h,getCurrentAction:p,getUndoAction:m,getRedoAction:u},children:e})}function eq(){let e=(0,s.useContext)(eV);if(void 0===e)throw Error("useHistory must be used within a HistoryProvider. Make sure your component is wrapped with <PageBuilderProvider>");return e}let eJ={[eI.BlockType.TEXT]:{content:"Enter your text here...",style:{}},[eI.BlockType.IMAGE]:{src:"",alt:"",style:{}},[eI.BlockType.HERO]:{title:"Hero Title",subtitle:"Hero subtitle text",backgroundImage:"",style:{}},[eI.BlockType.BUTTON]:{text:"Click me",link:"#",variant:"primary",style:{}},[eI.BlockType.CAROUSEL]:{slides:[{id:"1",title:"Slide 1",subtitle:"Welcome to our carousel",description:"This is the first slide",image:"https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop",cta:{text:"Learn More",link:"#"},badge:"NEW",bgColor:"bg-gradient-to-r from-blue-500 to-purple-600"}],autoPlay:!0,autoPlayInterval:5e3,showIndicators:!0,showArrows:!0,loop:!0,style:{}},[eI.BlockType.TEAM]:{title:"Our Team",members:[],style:{}},[eI.BlockType.STATS]:{title:"Our Stats",stats:[],style:{}},[eI.BlockType.CONTACT_INFO]:{email:"",phone:"",address:"",style:{}},[eI.BlockType.DIVIDER]:{thickness:1,color:"#e5e7eb",style:{}},[eI.BlockType.SPACER]:{height:40,style:{}},[eI.BlockType.CONTAINER]:{maxWidth:"1200px",padding:"20px",backgroundColor:"transparent",style:{}},[eI.BlockType.SECTION]:{backgroundColor:"#ffffff",padding:"40px 20px",style:{}},[eI.BlockType.GRID]:{columns:2,gap:"20px",style:{}},[eI.BlockType.FLEX_ROW]:{justifyContent:"flex-start",alignItems:"center",gap:"10px",style:{}},[eI.BlockType.FLEX_COLUMN]:{justifyContent:"flex-start",alignItems:"stretch",gap:"10px",style:{}},[eI.BlockType.DYNAMIC]:{componentType:"template",templateId:"sample-template",templateName:"Sample Template",template:'<div class="p-6 border-2 border-dashed border-gray-300 rounded-lg text-center"><h3 class="text-lg font-semibold mb-2">Dynamic Block</h3><p class="text-gray-600">Loading sample template...</p></div>',dataSource:{type:"static",data:{}},variables:{},style:{}},[eI.BlockType.PRODUCT_LIST]:{title:"S·∫£n ph·∫©m n·ªïi b·∫≠t",subtitle:"Kh√°m ph√° c√°c s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao",limit:12,filters:{isFeatured:!0},layout:"grid",columns:3,showPrice:!0,showCategory:!0,showDescription:!1,showAddToCart:!0,cardVariant:"default",style:{}},[eI.BlockType.PRODUCT_DETAIL]:{productSlug:"",showGallery:!0,showDescription:!0,showSpecs:!0,showReviews:!1,showRelated:!1,layout:"default",style:{}},[eI.BlockType.VIDEO]:{url:"",title:"",autoplay:!1,controls:!0,muted:!1,loop:!1,style:{}},[eI.BlockType.SEARCH]:{placeholder:"T√¨m ki·∫øm...",searchType:"global",showFilters:!0,showResults:!0,style:{}},[eI.BlockType.BOOKMARK]:{bookmarks:[],displayMode:"list",showCategories:!0,allowEdit:!0,style:{}}},eY=(0,s.createContext)(void 0);function eQ({children:e,pageId:l}){let r=(0,a.useRouter)(),i=(0,eT.usePageState)(),o=function(){let e=(0,s.useContext)(eL);if(void 0===e)throw Error("useTemplate must be used within a TemplateProvider. Make sure your component is wrapped with <PageBuilderProvider>");return e}(),n=eB(),c=eq(),{createPage:d,updatePage:h,deletePage:p}=(0,eO.usePageOperations)(),m=l||i.page?.id||"",{addBlock:u,updateBlock:x,deleteBlock:g,updateBlocksOrder:y}=(0,eO.useBlockOperations)(m),f=(0,eO.useNestedBlockOperations)(m),b=(0,s.useCallback)(async()=>{try{let{editingPage:e,isNewPageMode:t,blocks:s,refetch:a,setEditingPage:l}=i;if(!e)return void eR.toast.error("No page to save");if(t){let t={title:e.title,slug:e.slug,content:e.content||{},status:e.status,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:e.seoKeywords||[],isHomepage:e.isHomepage||!1},s=await d(t);if(eF.success("PAGE_CREATE","Page created successfully",s),eR.toast.success("Page created successfully!"),s?.data?.createPage){let e=s.data.createPage;l(e),e?.id&&r.push(`/admin/pagebuilder/${e.id}`)}}else{let t={title:e.title,slug:e.slug,content:e.content||{},status:e.status,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:e.seoKeywords||[],isHomepage:e.isHomepage||!1};await h(e.id,t),eF.success(ez,"Page updated successfully",{pageId:e.id}),eR.toast.success("Page saved successfully!"),await a()}}catch(e){eF.error(ez,"Failed to save page",{error:e}),eR.toast.error(e?.message||"Failed to save page")}},[i,d,h,r]),v=(0,s.useCallback)(async()=>{try{let{page:e}=i;if(!e?.id)return;await p(e.id),eF.success(eM,"Page deleted",{pageId:e.id}),eR.toast.success("Page deleted successfully!")}catch(e){eF.error(eM,"Failed to delete page",{error:e}),eR.toast.error(e?.message||"Failed to delete page")}},[i,p]),j=(0,s.useCallback)(async e=>{try{let{page:t,refetch:s,blocks:a}=i;if(!t?.id){eR.toast.error("Please create a page first"),console.warn("[PageBuilder] Cannot add block: no page ID",{page:t});return}let l=eJ[e]||{};e===eI.BlockType.DYNAMIC&&(l={componentType:"template",templateId:null,templateName:"New Dynamic Block",template:'<div class="p-6 border-2 border-dashed border-gray-300 rounded-lg text-center"><h3 class="text-lg font-semibold mb-2">Dynamic Block</h3><p class="text-gray-600">Select a template or paste your HTML template here.</p></div>',dataSource:{type:"static",data:{}},variables:{},style:{}},console.log("[PageBuilder] Dynamic Block created - user will pick template"));let r={type:e,content:l};console.log("[PageBuilder] Adding block:",{blockType:e,pageId:t.id});let o=await u(r);eF.success(eH,"Block added",{blockType:e}),eR.toast.success(e===eI.BlockType.DYNAMIC?"‚ú® Dynamic Block added - pick a template!":"Block added successfully!"),console.log("[PageBuilder] Block added successfully:",o),await s();let n=await s();n?.data?.page?.blocks&&c.pushHistory(n.data.page.blocks,`Added ${e} block`)}catch(e){console.error("[PageBuilder] Block add error:",e),eF.error(eH,"Failed to add block",{error:e}),eR.toast.error(e?.message||"Failed to add block")}},[i,u,c]),w=(0,s.useCallback)(async e=>{try{let{page:t,refetch:s}=i;if(!t?.id)return void eR.toast.error("Please create a page first");let a={type:eI.BlockType.DYNAMIC,content:{...eJ[eI.BlockType.DYNAMIC],...e}};await u(a),eF.success(eH,"Template block added",e),eR.toast.success("Template block added!"),await s()}catch(e){eF.error(eH,"Failed to add template block",{error:e}),eR.toast.error(e?.message||"Failed to add template block")}},[i,u]),N=(0,s.useCallback)(async(e,t,s)=>{try{let a={content:t};void 0!==s&&(a.style=s),t?.config!==void 0&&(a.config=t.config),await x(e,a),eF.debug(e$,"Block updated",{blockId:e,content:t,style:s});let l=await i.refetch();l?.data?.page?.blocks&&c.pushHistory(l.data.page.blocks,"Updated block")}catch(e){eF.error(e$,"Failed to update block",{error:e}),eR.toast.error(e?.message||"Failed to update block")}},[x,i,c]),k=(0,s.useCallback)(async e=>{try{await g(e),eF.success(eU,"Block deleted",{blockId:e}),eR.toast.success("Block deleted!");let t=await i.refetch();t?.data?.page?.blocks&&c.pushHistory(t.data.page.blocks,"Deleted block")}catch(e){eF.error(eU,"Failed to delete block",{error:e}),eR.toast.error(e?.message||"Failed to delete block")}},[g,i,c]),T=(0,s.useCallback)(async e=>{try{let{page:t,setBlocks:s,refetch:a}=i;if(!t?.id)return;s(e);let l=e.map((e,t)=>({id:e.id,order:t}));await y(l),eF.debug(eX,"Blocks reordered",{count:e.length});let r=await a();r?.data?.page?.blocks&&c.pushHistory(r.data.page.blocks,"Reordered blocks")}catch(e){eF.error(eX,"Failed to reorder blocks",{error:e}),eR.toast.error("Failed to reorder blocks")}},[i,y]),C=(0,s.useCallback)(e=>{i.setSelectedBlockId(e)},[i]),S=(0,s.useCallback)(async(e,t)=>{try{let{refetch:s}=i;await x(e,{style:t}),eF.debug(eW,"Block style updated",{blockId:e,style:t});let a=await s();a?.data?.page?.blocks&&c.pushHistory(a.data.page.blocks,"Updated block style")}catch(e){eF.error(eW,"Failed to update style",{error:e}),eR.toast.error("Failed to update style")}},[i,x,c]),B=(0,s.useCallback)(async()=>{try{let e=c.undo();if(!e)return void eR.toast.info("Nothing to undo");i.setBlocks(e);let t=e.map((e,t)=>({id:e.id,order:t}));await y(t),await i.refetch();let s=c.getUndoAction();eR.toast.success(`Undo: ${s||"Previous action"}`),eF.debug("UNDO","Undo performed",{action:s})}catch(e){eF.error("UNDO","Failed to undo",{error:e}),eR.toast.error("Failed to undo")}},[c,i,y]),E=(0,s.useCallback)(async()=>{try{let e=c.redo();if(!e)return void eR.toast.info("Nothing to redo");i.setBlocks(e);let t=e.map((e,t)=>({id:e.id,order:t}));await y(t),await i.refetch();let s=c.getRedoAction();eR.toast.success(`Redo: ${s||"Next action"}`),eF.debug("REDO","Redo performed",{action:s})}catch(e){eF.error("REDO","Failed to redo",{error:e}),eR.toast.error("Failed to redo")}},[c,i,y]),I=(0,s.useCallback)(e=>{console.log("[PageActionsContext] handleAddChild called with parentId:",e),n.openAddChildDialog(e),console.log("[PageActionsContext] openAddChildDialog called")},[n]),D=(0,s.useCallback)(async(e,t)=>{try{let{refetch:s}=i,a=eJ[t]||{};await f.addChildBlock(e,t,a,{}),eF.success(eH,"Child block added",{parentId:e,blockType:t}),eR.toast.success("Child block added!"),n.closeAddChildDialog(),await s()}catch(e){eF.error(eH,"Failed to add child block",{error:e}),eR.toast.error("Failed to add child block")}},[i,n,f]),A=(0,s.useCallback)(()=>{n.closeAddChildDialog()},[n]),L=(0,s.useCallback)(async e=>{try{let{page:t,editingPage:s,isNewPageMode:a,refetch:l}=i,{setIsApplyingTemplate:r,setShowPreviewModal:n}=o;if(!s?.id&&!a)return void eR.toast.error("Please create a page first");if(r(!0),!(t?.id||s?.id))return void eR.toast.error("Page ID not found");for(let t of e.blocks)await u({type:t.type,content:t.content,order:t.order});eF.success(eG,"Template applied",{templateId:e.id}),eR.toast.success(`Template "${e.name}" applied!`),n(!1),await l()}catch(e){eF.error(eG,"Failed to apply template",{error:e}),eR.toast.error("Failed to apply template")}finally{o.setIsApplyingTemplate(!1)}},[i,o,u]),P=(0,s.useCallback)(e=>{let{active:t}=e,{blocks:s,setDraggedBlock:a}=i;console.log("[PageBuilder] handleDragStart full active object:",t),console.log("[PageBuilder] handleDragStart active.data:",t.data);let l=t.data?.type,r=t.data?.blockType;if(console.log("[PageBuilder] Drag started:",{activeId:t.id,activeType:l,activeBlockType:r,fullData:t.data}),"new-block"!==l){let e=s.find(e=>e.id===t.id);e&&a(e)}},[i]),R=(0,s.useCallback)(async e=>{let{active:t,over:s}=e,{blocks:a,setDraggedBlock:l}=i;console.log("[PageBuilder] handleDragEnd full event:",e),console.log("[PageBuilder] handleDragEnd active:",t),console.log("[PageBuilder] handleDragEnd over:",s);let r=t.data?.type,o=t.data?.blockType;if(console.log("[PageBuilder] Drag ended:",{activeId:t.id,activeType:r,activeBlockType:o,overId:s?.id,overType:s?.data?.type}),l(null),!s)return void console.warn("[PageBuilder] No drop target");let n=t.id?.toString().startsWith("element-");if(n||"new-block"===r){let e=o;if(!e&&n){let s=t.id.replace("element-","");e=eI.BlockType[s],console.log("[PageBuilder] Extracted BlockType from ID:",{typeStr:s,blockTypeValue:e})}console.log("[PageBuilder] New block detected:",{blockTypeValue:e,targetId:s.id,dragType:r,isLibraryElement:n}),void 0!==e&&"canvas-droppable"===s.id?(console.log("[PageBuilder] Adding new block:",e),await j(e)):console.warn("[PageBuilder] New block rejected:",{reason:"canvas-droppable"!==s.id?"wrong-target":"no-blocktype",targetId:s.id,blockTypeValue:e,isDefined:void 0!==e});return}if(t.id===s.id)return void console.log("[PageBuilder] Same block, no reorder");let c=a.findIndex(e=>e.id===t.id),d=a.findIndex(e=>e.id===s.id);if(-1===c||-1===d)return void console.warn("[PageBuilder] Invalid block indices:",{oldIndex:c,newIndex:d});let h=[...a],[p]=h.splice(c,1);h.splice(d,0,p),T(h)},[i,T,j]);return(0,t.jsx)(eY.Provider,{value:{handlePageSave:b,handlePageDelete:v,handleAddBlock:j,handleAddTemplateBlock:w,handleBlockUpdate:N,handleBlockDelete:k,handleBlocksReorder:T,handleSelectBlock:C,handleUpdateBlockStyle:S,handleUndo:B,handleRedo:E,handleAddChild:I,handleAddChildBlock:D,handleCloseAddChildDialog:A,handleApplyTemplate:L,handleDragStart:P,handleDragEnd:R},children:e})}function eZ(){let e=(0,s.useContext)(eY);if(void 0===e)throw Error("usePageActions must be used within a PageActionsProvider. Make sure your component is wrapped with <PageBuilderProvider>");return e}var e0=s,e1=e.i(791174);class e2 extends e0.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t),this.setState({errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px] p-6",children:(0,t.jsxs)(ek.Card,{className:"w-full max-w-2xl",children:[(0,t.jsx)(ek.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-destructive/10 rounded-lg",children:(0,t.jsx)(et.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ek.CardTitle,{children:"Something went wrong"}),(0,t.jsx)(ek.CardDescription,{children:"An error occurred in the PageBuilder component"})]})]})}),(0,t.jsxs)(ek.CardContent,{className:"space-y-4",children:[this.state.error&&(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-destructive mb-2",children:"Error Message:"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:this.state.error.toString()})]}),!1,(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{onClick:this.handleReset,variant:"default",children:[(0,t.jsx)(e1.RefreshCw,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,t.jsx)(i.Button,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})]}),(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"If this problem persists, please contact support or check the browser console for more details."})})]})]})}):this.props.children}}function e4({children:e,pageId:s}){return(0,t.jsx)(e2,{children:(0,t.jsx)(eT.PageStateProvider,{pageId:s,children:(0,t.jsx)(eS,{children:(0,t.jsx)(eP,{children:(0,t.jsx)(eK,{maxHistorySize:50,children:(0,t.jsx)(eQ,{pageId:s,children:(0,t.jsx)(e5,{children:e})})})})})})})}function e5({children:e}){let{draggedBlock:a}=(0,eT.usePageState)(),{handleDragStart:l,handleDragEnd:r}=eZ(),i=s.default.useCallback(e=>{r(e).catch(t=>{eF.error("DRAG_END","Error in drag and drop operation",{event:e,error:t})})},[r]);return(0,t.jsxs)(ew.DndContext,{onDragStart:l,onDragEnd:i,collisionDetection:ew.closestCorners,children:[e,(0,t.jsx)(e3,{draggedBlock:a})]})}let e3=s.default.memo(function({draggedBlock:e}){return(0,t.jsx)(ew.DragOverlay,{dropAnimation:null,children:e?(0,t.jsx)("div",{className:"animate-pulse pointer-events-none",children:(0,t.jsx)(ek.Card,{className:"p-4 bg-gradient-to-r from-blue-500 to-blue-600 shadow-2xl border-2 border-blue-300 text-white min-w-xs",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,t.jsx)(eN.GripVertical,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-bold block",children:"Moving Block"}),(0,t.jsx)("span",{className:"text-xs opacity-90",children:e.type})]}),(0,t.jsx)("div",{className:"ml-auto text-2xl",children:"üì¶"})]})})}):null})});var e6=e.i(457268),e8=e.i(495047);function e9({config:e,blocks:a=[],onChange:l}){let[r,o]=s.default.useState(e||{dataSource:"product",slugPattern:"",slugField:"slug",dataBindings:[]}),n=e=>{let t={...r,...e};o(t),l(t)},c=(e,t)=>{let s=[...r.dataBindings];s[e]={...s[e],...t},n({dataBindings:s})};return(0,t.jsxs)("div",{className:"space-y-4 border-l-4 border-blue-500 pl-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(e8.Link2,{className:"w-4 h-4"}),"Dynamic Configuration"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-sm",children:"Data Source"}),(0,t.jsxs)(ee.Select,{value:r.dataSource,onValueChange:e=>n({dataSource:e}),children:[(0,t.jsx)(ee.SelectTrigger,{children:(0,t.jsx)(ee.SelectValue,{})}),(0,t.jsxs)(ee.SelectContent,{children:[(0,t.jsx)(ee.SelectItem,{value:"product",children:"Product"}),(0,t.jsx)(ee.SelectItem,{value:"post",children:"Blog Post"}),(0,t.jsx)(ee.SelectItem,{value:"category",children:"Category"}),(0,t.jsx)(ee.SelectItem,{value:"custom",children:"Custom API"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-sm",children:"URL Pattern"}),(0,t.jsx)(J.Input,{value:r.slugPattern,onChange:e=>n({slugPattern:e.target.value}),placeholder:"/product/:productSlug",className:"font-mono text-sm"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Use ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:":paramName"})," for dynamic segments"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-sm",children:"Slug Field Name"}),(0,t.jsx)(J.Input,{value:r.slugField,onChange:e=>n({slugField:e.target.value}),placeholder:"slug",className:"font-mono text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(A.Label,{className:"text-sm font-semibold",children:"Data Bindings"}),(0,t.jsxs)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{n({dataBindings:[...r.dataBindings,{blockId:"",sourceField:"",targetProperty:"content.html"}]})},className:"gap-2",children:[(0,t.jsx)(Q.Plus,{className:"w-4 h-4"}),"Add Binding"]})]}),r.dataBindings.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(A.Label,{className:"text-xs text-gray-600",children:"Block"}),(0,t.jsxs)(ee.Select,{value:e.blockId,onValueChange:e=>c(s,{blockId:e}),children:[(0,t.jsx)(ee.SelectTrigger,{className:"h-8 text-xs",children:(0,t.jsx)(ee.SelectValue,{placeholder:"Select block"})}),(0,t.jsx)(ee.SelectContent,{children:a.map(e=>(0,t.jsxs)(ee.SelectItem,{value:e.id,children:[e.type," - ",e.id.slice(0,8)]},e.id))})]})]}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(A.Label,{className:"text-xs text-gray-600",children:"Source Field"}),(0,t.jsx)(J.Input,{value:e.sourceField,onChange:e=>c(s,{sourceField:e.target.value}),placeholder:"name",className:"h-8 text-xs font-mono"})]}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(A.Label,{className:"text-xs text-gray-600",children:"Target Property"}),(0,t.jsx)(J.Input,{value:e.targetProperty,onChange:e=>c(s,{targetProperty:e.target.value}),placeholder:"content.html",className:"h-8 text-xs font-mono"})]}),(0,t.jsx)("div",{className:"col-span-1 flex items-end",children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{n({dataBindings:r.dataBindings.filter((e,t)=>t!==s)})},className:"h-8 w-8 text-red-600 hover:bg-red-50",children:(0,t.jsx)(G.Trash2,{className:"w-4 h-4"})})})]},s)),0===r.dataBindings.length&&(0,t.jsx)("div",{className:"text-center py-6 text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg",children:'No data bindings configured. Click "Add Binding" to start.'})]})]})}let e7={√†:"a",√°:"a",·∫£:"a",√£:"a",·∫°:"a",ƒÉ:"a",·∫±:"a",·∫Ø:"a",·∫≥:"a",·∫µ:"a",·∫∑:"a",√¢:"a",·∫ß:"a",·∫•:"a",·∫©:"a",·∫´:"a",·∫≠:"a",ƒë:"d",√®:"e",√©:"e",·∫ª:"e",·∫Ω:"e",·∫π:"e",√™:"e",·ªÅ:"e",·∫ø:"e",·ªÉ:"e",·ªÖ:"e",·ªá:"e",√¨:"i",√≠:"i",·ªâ:"i",ƒ©:"i",·ªã:"i",√≤:"o",√≥:"o",·ªè:"o",√µ:"o",·ªç:"o",√¥:"o",·ªì:"o",·ªë:"o",·ªï:"o",·ªó:"o",·ªô:"o",∆°:"o",·ªù:"o",·ªõ:"o",·ªü:"o",·ª°:"o",·ª£:"o",√π:"u",√∫:"u",·ªß:"u",≈©:"u",·ª•:"u",∆∞:"u",·ª´:"u",·ª©:"u",·ª≠:"u",·ªØ:"u",·ª±:"u",·ª≥:"y",√Ω:"y",·ª∑:"y",·ªπ:"y",·ªµ:"y",√Ä:"a",√Å:"a",·∫¢:"a",√É:"a",·∫†:"a",ƒÇ:"a",·∫∞:"a",·∫Æ:"a",·∫≤:"a",·∫¥:"a",·∫∂:"a",√Ç:"a",·∫¶:"a",·∫§:"a",·∫®:"a",·∫™:"a",·∫¨:"a",ƒê:"d",√à:"e",√â:"e",·∫∫:"e",·∫º:"e",·∫∏:"e",√ä:"e",·ªÄ:"e",·∫æ:"e",·ªÇ:"e",·ªÑ:"e",·ªÜ:"e",√å:"i",√ç:"i",·ªà:"i",ƒ®:"i",·ªä:"i",√í:"o",√ì:"o",·ªé:"o",√ï:"o",·ªå:"o",√î:"o",·ªí:"o",·ªê:"o",·ªî:"o",·ªñ:"o",·ªò:"o",∆†:"o",·ªú:"o",·ªö:"o",·ªû:"o",·ª†:"o",·ª¢:"o",√ô:"u",√ö:"u",·ª¶:"u",≈®:"u",·ª§:"u",∆Ø:"u",·ª™:"u",·ª®:"u",·ª¨:"u",·ªÆ:"u",·ª∞:"u",·ª≤:"y",√ù:"y",·ª∂:"y",·ª∏:"y",·ª¥:"y"};function te(e){if(!e)return"";let t=e.split("").map(e=>e7[e]||e).join("");return(t=(t=t.toLowerCase()).replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()).replace(/^-+|-+$/g,"")}let tt=e=>{switch(e){case eI.PageStatus.DRAFT:return{title:"Draft (B·∫£n Nh√°p)",description:"Trang n√†y ƒëang ƒë∆∞·ª£c so·∫°n th·∫£o. Kh√¥ng hi·ªÉn th·ªã c√¥ng khai cho kh√°ch truy c·∫≠p.",icon:(0,t.jsx)(B.AlertCircle,{className:"w-5 h-5"}),color:"text-yellow-600"};case eI.PageStatus.PUBLISHED:return{title:"Published (Xu·∫•t B·∫£n)",description:"Trang n√†y ƒëang hi·ªÉn th·ªã c√¥ng khai. T·∫•t c·∫£ kh√°ch truy c·∫≠p c√≥ th·ªÉ xem.",icon:(0,t.jsx)(ef.CheckCircle,{className:"w-5 h-5"}),color:"text-green-600"};case eI.PageStatus.ARCHIVED:return{title:"Archived (L∆∞u Tr·ªØ)",description:"Trang n√†y ƒë∆∞·ª£c l∆∞u tr·ªØ. Kh√¥ng hi·ªÉn th·ªã c√¥ng khai nh∆∞ng v·∫´n c√≥ th·ªÉ kh√¥i ph·ª•c.",icon:(0,t.jsx)(e6.Lock,{className:"w-5 h-5"}),color:"text-gray-600"}}};function ts({page:e,onUpdate:a}){let[l,r]=(0,s.useState)({title:e.title||"",slug:e.slug||"",content:e.content&&"string"==typeof e.content?e.content:"",status:e.status,isHomepage:e.isHomepage??!1,isDynamic:e.isDynamic??!1,dynamicConfig:e.dynamicConfig,seoTitle:e.seoTitle||"",seoDescription:e.seoDescription||"",seoKeywords:(e.seoKeywords||[]).join(", "),layoutSettings:{hasHeader:e.layoutSettings?.hasHeader??!0,hasFooter:e.layoutSettings?.hasFooter??!0,headerMenuId:e.layoutSettings?.headerMenuId||null,footerMenuId:e.layoutSettings?.footerMenuId||null,headerStyle:e.layoutSettings?.headerStyle||"default",footerStyle:e.layoutSettings?.footerStyle||"default"}}),[o,c]=(0,s.useState)(""===e.slug||e.slug?.startsWith("untitled")),[d,h]=(0,s.useState)(!1),[p,m]=(0,s.useState)(null),u=tt(l.status),x=(t,s)=>{if("status"===t&&s!==l.status){m(s),h(!0);return}let i={...l,[t]:s};"title"===t&&o&&(i.slug=te(s)),"slug"===t&&c(!1),r(i),a({...e,...i,content:"content"!==t||s?"content"===t?s:e.content:void 0,seoKeywords:"seoKeywords"===t?s.split(",").map(e=>e.trim()).filter(Boolean):e.seoKeywords})},g=(t,s)=>{let i={...l.layoutSettings,[t]:s};r({...l,layoutSettings:i}),a({...e,...l,layoutSettings:i,seoKeywords:l.seoKeywords.split(",").map(e=>e.trim()).filter(Boolean)})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Tabs,{defaultValue:"general",className:"w-full",children:[(0,t.jsxs)(n.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(n.TabsTrigger,{value:"general",children:"General"}),(0,t.jsx)(n.TabsTrigger,{value:"layout",children:"Layout"}),(0,t.jsx)(n.TabsTrigger,{value:"seo",children:"SEO"})]}),(0,t.jsxs)(n.TabsContent,{value:"general",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"title",children:"Page Title"}),(0,t.jsx)(J.Input,{id:"title",value:l.title,onChange:e=>x("title",e.target.value),placeholder:"Enter page title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"slug",children:"URL Slug"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(J.Input,{id:"slug",value:l.slug,onChange:e=>x("slug",e.target.value),placeholder:"page-url-slug"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{x("slug",te(l.title)),c(!0)},children:"Generate"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"status",children:"Page Status"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-start space-x-3 ${u.color}`,children:[u.icon,(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:u.title}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:u.description})]})]}),(0,t.jsxs)(ee.Select,{value:l.status,onValueChange:e=>x("status",e),children:[(0,t.jsx)(ee.SelectTrigger,{children:(0,t.jsx)(ee.SelectValue,{})}),(0,t.jsxs)(ee.SelectContent,{children:[(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.DRAFT,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(B.AlertCircle,{size:14}),(0,t.jsx)("span",{children:"Draft - ƒêang So·∫°n Th·∫£o"})]})}),(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.PUBLISHED,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(ef.CheckCircle,{size:14}),(0,t.jsx)("span",{children:"Published - Xu·∫•t B·∫£n"})]})}),(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.ARCHIVED,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(e6.Lock,{size:14}),(0,t.jsx)("span",{children:"Archived - L∆∞u Tr·ªØ"})]})})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"content",children:"Page Description"}),(0,t.jsx)(L.Textarea,{id:"content",value:l.content,onChange:e=>x("content",e.target.value),placeholder:"Optional page description",rows:3})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{htmlFor:"isHomepage",children:"Set as Homepage"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Make this page accessible at http://localhost:12000/"})]}),(0,t.jsx)(P.Switch,{id:"isHomepage",checked:l.isHomepage,onCheckedChange:t=>{r({...l,isHomepage:t}),a({...e,...l,isHomepage:t,seoKeywords:l.seoKeywords.split(",").map(e=>e.trim()).filter(Boolean)})}})]}),l.isHomepage&&(0,t.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:(0,t.jsx)("p",{className:"text-sm text-blue-900",children:"‚úì Trang n√†y s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã l√† trang ch·ªß (homepage) khi truy c·∫≠p v√†o root URL. Ch·ªâ m·ªôt trang c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t l√†m trang ch·ªß."})})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{htmlFor:"isDynamic",children:"Dynamic Page Template"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Use this page as a template for multiple items with different slugs"})]}),(0,t.jsx)(P.Switch,{id:"isDynamic",checked:l.isDynamic||!1,onCheckedChange:e=>{r({...l,isDynamic:e})}})]}),l.isDynamic&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(e9,{config:l.dynamicConfig,blocks:e.blocks,onChange:e=>{r({...l,dynamicConfig:e})}})})]})]}),(0,t.jsxs)(n.TabsContent,{value:"layout",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Header Settings"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{htmlFor:"hasHeader",children:"Show Header"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Display website header on this page"})]}),(0,t.jsx)(P.Switch,{id:"hasHeader",checked:l.layoutSettings.hasHeader,onCheckedChange:e=>g("hasHeader",e)})]}),l.layoutSettings.hasHeader&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"headerStyle",children:"Header Style"}),(0,t.jsxs)(ee.Select,{value:l.layoutSettings.headerStyle,onValueChange:e=>g("headerStyle",e),children:[(0,t.jsx)(ee.SelectTrigger,{children:(0,t.jsx)(ee.SelectValue,{})}),(0,t.jsxs)(ee.SelectContent,{children:[(0,t.jsx)(ee.SelectItem,{value:"default",children:"Default"}),(0,t.jsx)(ee.SelectItem,{value:"transparent",children:"Transparent"}),(0,t.jsx)(ee.SelectItem,{value:"fixed",children:"Fixed Top"}),(0,t.jsx)(ee.SelectItem,{value:"sticky",children:"Sticky"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Normal header | Transparent: Overlay on hero | Fixed/Sticky: Stay on scroll"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"headerMenuId",children:"Header Menu (Optional)"}),(0,t.jsx)(J.Input,{id:"headerMenuId",value:l.layoutSettings.headerMenuId||"",onChange:e=>g("headerMenuId",e.target.value||null),placeholder:"Leave empty for default menu"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Custom menu ID to use for this page's header"})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Footer Settings"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{htmlFor:"hasFooter",children:"Show Footer"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Display website footer on this page"})]}),(0,t.jsx)(P.Switch,{id:"hasFooter",checked:l.layoutSettings.hasFooter,onCheckedChange:e=>g("hasFooter",e)})]}),l.layoutSettings.hasFooter&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"footerStyle",children:"Footer Style"}),(0,t.jsxs)(ee.Select,{value:l.layoutSettings.footerStyle,onValueChange:e=>g("footerStyle",e),children:[(0,t.jsx)(ee.SelectTrigger,{children:(0,t.jsx)(ee.SelectValue,{})}),(0,t.jsxs)(ee.SelectContent,{children:[(0,t.jsx)(ee.SelectItem,{value:"default",children:"Default"}),(0,t.jsx)(ee.SelectItem,{value:"minimal",children:"Minimal"}),(0,t.jsx)(ee.SelectItem,{value:"extended",children:"Extended"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Standard footer | Minimal: Compact | Extended: Full with columns"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"footerMenuId",children:"Footer Menu (Optional)"}),(0,t.jsx)(J.Input,{id:"footerMenuId",value:l.layoutSettings.footerMenuId||"",onChange:e=>g("footerMenuId",e.target.value||null),placeholder:"Leave empty for default menu"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Custom menu ID to use for this page's footer"})]})]})]})]}),(0,t.jsxs)(n.TabsContent,{value:"seo",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"seoTitle",children:"SEO Title"}),(0,t.jsx)(J.Input,{id:"seoTitle",value:l.seoTitle,onChange:e=>x("seoTitle",e.target.value),placeholder:"SEO optimized title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"seoDescription",children:"SEO Description"}),(0,t.jsx)(L.Textarea,{id:"seoDescription",value:l.seoDescription,onChange:e=>x("seoDescription",e.target.value),placeholder:"SEO meta description",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"seoKeywords",children:"SEO Keywords"}),(0,t.jsx)(J.Input,{id:"seoKeywords",value:l.seoKeywords,onChange:e=>x("seoKeywords",e.target.value),placeholder:"keyword1, keyword2, keyword3"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate keywords with commas"})]})]})]}),(0,t.jsx)(D.Dialog,{open:d,onOpenChange:h,children:(0,t.jsxs)(D.DialogContent,{className:"max-w-sm",children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsx)(D.DialogTitle,{children:"X√°c Nh·∫≠n Thay ƒê·ªïi Tr·∫°ng Th√°i"}),(0,t.jsx)(D.DialogDescription,{children:"B·∫°n ƒëang chu·∫©n b·ªã thay ƒë·ªïi tr·∫°ng th√°i trang. Vui l√≤ng x√°c nh·∫≠n h√†nh ƒë·ªông n√†y."})]}),p&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tr·∫°ng Th√°i Hi·ªán T·∫°i"}),(0,t.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${tt(l.status).color}`,children:[tt(l.status).icon,(0,t.jsx)("span",{className:"text-sm",children:tt(l.status).title})]})]}),(0,t.jsx)("div",{className:"text-center text-gray-400",children:"‚Üì"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tr·∫°ng Th√°i M·ªõi"}),(0,t.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${tt(p).color}`,children:[tt(p).icon,(0,t.jsx)("span",{className:"text-sm",children:tt(p).title})]})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 border border-blue-200",children:(0,t.jsx)("p",{className:"text-sm text-blue-900",children:tt(p).description})})]}),(0,t.jsxs)(D.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{h(!1),m(null)},children:"H·ªßy B·ªè"}),(0,t.jsx)(i.Button,{onClick:()=>{p&&(r({...l,status:p}),a({...e,...l,status:p,seoKeywords:l.seoKeywords.split(",").map(e=>e.trim()).filter(Boolean)})),h(!1),m(null)},children:"X√°c Nh·∫≠n"})]})]})})]})}let ta=s.default.memo(function({showPageInfo:e,editingPage:a,showPreview:l,onPreviewToggle:r,loading:n}){let d=(0,s.useMemo)(()=>a?.status&&a.status===eI.PageStatus.PUBLISHED?"default":"secondary",[a?.status]),h=(0,s.useMemo)(()=>{if(!a?.status)return"";let e=a.status;return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},[a?.status]),p=(0,s.useCallback)(()=>{r?.(!l)},[l,r]);return e?(0,t.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1 px-4 border-r border-gray-200",children:[(0,t.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:"Page Builder"}),a&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,t.jsx)(o.Badge,{variant:d,className:"flex-shrink-0",title:`Page status: ${h}`,children:h}),a.isHomepage&&(0,t.jsxs)(o.Badge,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 flex-shrink-0",title:"This is the homepage",children:[(0,t.jsx)(E.Home,{size:14,className:"mr-1"}),(0,t.jsx)("span",{children:"Home"})]}),a.title&&(0,t.jsxs)("span",{className:"text-sm text-gray-600 truncate hidden sm:inline",children:["‚Äî ",a.title]})]}),(0,t.jsx)(i.Button,{variant:l?"default":"outline",size:"sm",onClick:p,className:"flex-shrink-0",title:l?"Back to edit mode":"Preview page",disabled:n,children:(0,t.jsx)(c.Eye,{size:16})})]}):null}),tl=s.default.memo(function({editorMode:e,onModeChange:s,device:a,onDeviceChange:l,isLoading:r}){return(0,t.jsxs)("div",{className:"flex items-center space-x-4 flex-shrink-0 px-4 border-r border-gray-200",children:[(0,t.jsx)(n.Tabs,{value:e,onValueChange:e=>s(e),children:(0,t.jsxs)(n.TabsList,{className:"bg-gray-100",children:[(0,t.jsxs)(n.TabsTrigger,{value:"visual",className:"gap-2",children:[(0,t.jsx)(c.Eye,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline text-xs",children:"Visual"})]}),(0,t.jsxs)(n.TabsTrigger,{value:"code",className:"gap-2",children:[(0,t.jsx)(d.Code,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline text-xs",children:"Code"})]})]})}),(0,t.jsx)(n.Tabs,{value:a,onValueChange:e=>l(e),children:(0,t.jsxs)(n.TabsList,{className:"bg-gray-100",children:[(0,t.jsxs)(n.TabsTrigger,{value:"desktop",className:"gap-1",children:[(0,t.jsx)(h.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden md:inline text-xs",children:"Desktop"})]}),(0,t.jsxs)(n.TabsTrigger,{value:"tablet",className:"gap-1",children:[(0,t.jsx)(p.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden md:inline text-xs",children:"Tablet"})]}),(0,t.jsxs)(n.TabsTrigger,{value:"mobile",className:"gap-1",children:[(0,t.jsx)(m.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden md:inline text-xs",children:"Mobile"})]})]})})]})}),tr=s.default.memo(function({onSaveClick:e,onImportClick:s}){return(0,t.jsxs)(I.DropdownMenu,{children:[(0,t.jsx)(I.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"gap-1",title:"Template options",children:[(0,t.jsx)(T.Archive,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline text-xs",children:"Templates"}),(0,t.jsx)(C.ChevronDown,{className:"w-3 h-3"})]})}),(0,t.jsxs)(I.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,t.jsxs)(I.DropdownMenuItem,{onClick:e,children:[(0,t.jsx)(N.FileDown,{className:"w-4 h-4 mr-2"}),"Save as Template",(0,t.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:"‚áß‚åòS"})]}),(0,t.jsxs)(I.DropdownMenuItem,{onClick:s,children:[(0,t.jsx)(k.default,{className:"w-4 h-4 mr-2"}),"Import Template",(0,t.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:"‚áß‚åòO"})]})]})]})}),ti=s.default.memo(function({isOpen:e,onOpenChange:a,editingPage:l,onPageUpdate:r,pageSettings:o,onSettingChange:c,isLoading:d,onSave:h}){let[p,m]=(0,s.useState)(!1),u=(0,s.useCallback)(async()=>{m(!0);try{await h()}finally{m(!1)}},[h]);return(0,t.jsx)(D.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(D.DialogContent,{className:"flex flex-col max-w-4xl max-h-[90vh] p-0 gap-0",children:[(0,t.jsxs)(D.DialogHeader,{className:"border-b border-gray-200 px-6 py-4 flex-shrink-0 bg-white",children:[(0,t.jsxs)(D.DialogTitle,{className:"flex items-center gap-2 text-lg font-semibold",children:[(0,t.jsx)(w.Settings,{className:"w-5 h-5 text-gray-700"}),"Page Settings"]}),(0,t.jsx)(D.DialogDescription,{className:"text-sm text-gray-500 mt-1",children:"Configure page information, layout, SEO, visibility, and custom code"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-white",children:l?(0,t.jsxs)(n.Tabs,{defaultValue:"page-settings",className:"w-full",children:[(0,t.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200",children:(0,t.jsxs)(n.TabsList,{className:"grid w-full grid-cols-2 rounded-none bg-white p-0 h-auto",children:[(0,t.jsx)(n.TabsTrigger,{value:"page-settings",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white",children:"üìÑ Page Settings"}),(0,t.jsx)(n.TabsTrigger,{value:"advanced",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white",children:"‚öôÔ∏è Advanced Options"})]})}),(0,t.jsx)(n.TabsContent,{value:"page-settings",className:"px-6 py-6 m-0",children:(0,t.jsx)(ts,{page:l,onUpdate:r})}),(0,t.jsxs)(n.TabsContent,{value:"advanced",className:"px-6 py-6 m-0 space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"üéõÔ∏è"}),"Page Visibility & Access"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{className:"text-sm font-medium text-gray-900",children:"Published"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Make this page publicly visible"})]}),(0,t.jsx)(P.Switch,{checked:o.isPublished,onCheckedChange:e=>c("isPublished",e),disabled:d||p})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{className:"text-sm font-medium text-gray-900",children:"Show in Navigation"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Include in main navigation menu"})]}),(0,t.jsx)(P.Switch,{checked:o.showInNavigation,onCheckedChange:e=>c("showInNavigation",e),disabled:d||p})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{className:"text-sm font-medium text-gray-900",children:"Allow Indexing"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Allow search engines to index this page"})]}),(0,t.jsx)(P.Switch,{checked:o.allowIndexing,onCheckedChange:e=>c("allowIndexing",e),disabled:d||p,defaultChecked:!0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(A.Label,{className:"text-sm font-medium text-gray-900",children:"Require Authentication"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Require users to login to view"})]}),(0,t.jsx)(P.Switch,{checked:o.requireAuth,onCheckedChange:e=>c("requireAuth",e),disabled:d||p})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-8",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"üíª"}),"Custom Code"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{htmlFor:"custom-css",className:"text-sm font-medium text-gray-700",children:"Custom CSS"}),(0,t.jsx)(L.Textarea,{id:"custom-css",placeholder:".my-class { color: red; }",value:o.customCSS,onChange:e=>c("customCSS",e.target.value),disabled:d||p,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{htmlFor:"custom-js",className:"text-sm font-medium text-gray-700",children:"Custom JavaScript"}),(0,t.jsx)(L.Textarea,{id:"custom-js",placeholder:"console.log('Hello');",value:o.customJS,onChange:e=>c("customJS",e.target.value),disabled:d||p,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{htmlFor:"head-code",className:"text-sm font-medium text-gray-700",children:"Head Code (Meta tags, Analytics)"}),(0,t.jsx)(L.Textarea,{id:"head-code",placeholder:"<meta name='description' content='...' />",value:o.headCode,onChange:e=>c("headCode",e.target.value),disabled:d||p,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]})]})]})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("div",{className:"text-4xl text-gray-300",children:"üì≠"}),(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"No page selected"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Please select a page to edit settings"})]})})}),(0,t.jsxs)(D.DialogFooter,{className:"border-t border-gray-200 px-6 py-4 bg-gray-50 flex-shrink-0 gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>a(!1),disabled:d||p,className:"text-sm",children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:u,disabled:d||p,className:"text-sm gap-2",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Saving..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Save,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Save Settings"})]})})]})]})})}),to=s.default.memo(function({leftPanelOpen:e,onToggleLeftPanel:s,rightPanelOpen:a,onToggleRightPanel:l,onSave:r,onExit:o,onTemplateClick:n,onSettingsClick:c,isSaving:d,isLoading:h,showEditorControls:p}){let m=eq(),N=eZ();return(0,t.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0 px-4",children:[p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:s,title:e?"Hide left panel":"Show left panel",disabled:h,children:e?(0,t.jsx)(f.PanelLeftClose,{className:"w-4 h-4"}):(0,t.jsx)(b.PanelLeftOpen,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:l,title:a?"Hide right panel":"Show right panel",disabled:h,children:a?(0,t.jsx)(v.PanelRightClose,{className:"w-4 h-4"}):(0,t.jsx)(j.PanelRightOpen,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:N.handleUndo,disabled:!m.canUndo||h,title:`Undo${m.canUndo?`: ${m.getUndoAction()}`:""} (Ctrl+Z)`,children:(0,t.jsx)(u.Undo,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:N.handleRedo,disabled:!m.canRedo||h,title:`Redo${m.canRedo?`: ${m.getRedoAction()}`:""} (Ctrl+Y)`,children:(0,t.jsx)(x.Redo,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,t.jsx)(tr,{onSaveClick:n||(()=>{}),onImportClick:()=>{}})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",title:"Global Settings (SEO, Code)",onClick:c,disabled:h,children:(0,t.jsx)(w.Settings,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"default",size:"sm",onClick:r,className:"gap-1",disabled:d||h,title:"Save page (Ctrl+S)",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{className:"hidden sm:inline text-xs",children:"Saving..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Save,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline text-xs",children:"Save"})]})}),o&&(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:o,title:"Exit Fullscreen (ESC)",children:(0,t.jsx)(y.X,{className:"w-4 h-4"})})]})});function tn(e){let{editorMode:a="visual",onModeChange:l=()=>{},device:i="desktop",onDeviceChange:o=()=>{},leftPanelOpen:n=!1,onToggleLeftPanel:c=()=>{},rightPanelOpen:d=!1,onToggleRightPanel:h=()=>{},onSave:p=async()=>{},onExit:m,currentPageStructure:u=[],currentPageStyles:x,onApplyTemplate:g,onPreviewToggle:y,isLoading:f=!1,onSettingsSave:b,showEditorControls:v=!0,showPageInfo:j=!0}=e,{editingPage:w,blocks:N,setEditingPage:k}=(0,eT.usePageState)(),{showPreview:T,setShowPreview:C}=eB(),{toast:S}=(0,ev.useToast)(),{addTemplate:E,importFromJSON:I}=function(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(U),[r,i]=(0,s.useState)(!0),[o,n]=(0,s.useState)(null);(0,s.useEffect)(()=>{c()},[]);let c=(0,s.useCallback)(()=>{try{i(!0),n(null),0===F().length&&z($);let e=F();t(e)}catch(e){n(e instanceof Error?e.message:"Failed to load templates"),console.error("Error loading templates:",e)}finally{i(!1)}},[]),d=(0,s.useCallback)(()=>{let t=[...e];if(a.category&&"all"!==a.category&&(t=t.filter(e=>e.category===a.category)),a.search&&""!==a.search.trim()){let e=a.search.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags?.some(t=>t.toLowerCase().includes(e)))}return a.tags&&a.tags.length>0&&(t=t.filter(e=>a.tags.some(t=>e.tags?.includes(t)))),a.sortBy&&t.sort((e,t)=>{let s=0;switch(a.sortBy){case"name":s=e.name.localeCompare(t.name);break;case"date":s=new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime();break;case"category":s=e.category.localeCompare(t.category)}return"asc"===a.sortOrder?s:-s}),t},[e,a])(),h=(0,s.useCallback)(async e=>{try{let t=M(e);return t&&c(),t}catch(e){return n(e instanceof Error?e.message:"Failed to add template"),!1}},[c]),p=(0,s.useCallback)(async e=>{try{let t=M(e);return t&&c(),t}catch(e){return n(e instanceof Error?e.message:"Failed to update template"),!1}},[c]),m=(0,s.useCallback)(async e=>{try{let t,s,a=(s=(t=F()).find(t=>t.id===e))?s.isDefault?(console.warn(`Cannot delete default template: ${s.name}`),!1):z(t.filter(t=>t.id!==e)):(console.warn(`Template ${e} not found`),!1);return a&&c(),a}catch(e){return n(e instanceof Error?e.message:"Failed to delete template"),!1}},[c]),u=(0,s.useCallback)(async(e,t)=>{try{let s=function(e,t){let s=F().find(t=>t.id===e)||null;if(!s)return null;let a={...s,id:H(),name:t||`${s.name} (Copy)`,isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return M(a)?a:null}(e,t);return s&&c(),s}catch(e){return n(e instanceof Error?e.message:"Failed to duplicate template"),null}},[c]),x=(0,s.useCallback)(async e=>{try{let t=function(e){try{let t,s=JSON.parse(e),a=(t=[],s&&"object"==typeof s?"template"in s&&"version"in s?_(s.template):_(s):(t.push({field:"root",message:"Invalid template data format"}),{valid:!1,errors:t}));if(!a.valid)return{success:!1,error:a.errors?.map(e=>e.message).join(", ")||"Validation failed"};let l={..."template"in s?s.template:s,id:H(),isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(M(l))return{success:!0,template:l};return{success:!1,error:"Failed to save imported template"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to parse JSON"}}}(e);return t.success&&c(),t}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to import template"}}},[c]),g=(0,s.useCallback)(e=>{try{let t=new Blob([JSON.stringify({template:e,exportedAt:new Date().toISOString(),version:O},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${e.name.toLowerCase().replace(/\s+/g,"-")}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(e){n(e instanceof Error?e.message:"Failed to export template")}},[]),y=(0,s.useCallback)(e=>{l(t=>({...t,...e}))},[]),f=(0,s.useCallback)(()=>{l(U)},[]),b=(0,s.useCallback)(t=>e.find(e=>e.id===t),[e]),v=(0,s.useCallback)(t=>"all"===t?e:e.filter(e=>e.category===t),[e]);return{templates:e,filteredTemplates:d,isLoading:r,error:o,filter:a,setFilter:y,resetFilter:f,addTemplate:h,updateTemplate:p,removeTemplate:m,duplicate:u,importFromJSON:x,exportTemplate:g,refresh:c,getTemplateById:b,getTemplatesByCategory:v}}(),[D,A]=(0,s.useState)(!1),[L,P]=(0,s.useState)(!1),[R,X]=(0,s.useState)(!1),[W,G]=(0,s.useState)(!1),[V,K]=(0,s.useState)(!1),[q,J]=(0,s.useState)(null),[Y,Q]=(0,s.useState)({seoTitle:"",seoDescription:"",seoKeywords:"",isPublished:!0,showInNavigation:!0,allowIndexing:!0,requireAuth:!1,customCSS:"",customJS:"",headCode:""}),{data:Z}=(0,r.useQuery)(ej.GET_PAGE_BY_ID,{variables:{id:w?.id},skip:!w?.id,errorPolicy:"all"});(0,s.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&"S"===e.key&&(e.preventDefault(),A(!0)),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"O"===e.key&&(e.preventDefault(),P(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.useEffect)(()=>{if(Z?.getPageById){let e=Z.getPageById;Q(t=>({...t,seoTitle:e.seoTitle||"",seoDescription:e.seoDescription||"",seoKeywords:Array.isArray(e.seoKeywords)?e.seoKeywords.join(", "):""}))}},[Z]);let ee=(0,s.useCallback)((e,t)=>{Q(s=>({...s,[e]:t}))},[]),et=(0,s.useCallback)(async e=>{try{let t=await E(e);return t?S({title:"Template saved",description:`"${e.name}" has been saved to your template library.`,type:"success"}):S({title:"Error",description:"Failed to save template. Please try again.",type:"error"}),t}catch(e){return S({title:"Error",description:"Failed to save template. Please try again.",type:"error"}),!1}},[E,S]),es=(0,s.useCallback)(async e=>{try{let t=JSON.stringify(e.template),s=await I(t);if(s.success)return S({title:"Template imported",description:`"${e.template.name}" has been imported successfully.`,type:"success"}),!0;return S({title:"Error",description:s.error||"Failed to import template. Please try again.",type:"error"}),!1}catch(e){return S({title:"Error",description:"Failed to import template. Please try again.",type:"error"}),!1}},[I,S]),ea=(0,s.useCallback)(async()=>{try{if(!w)throw Error("No page selected. Please select a page first.");G(!0);let e=Array.isArray(Y.seoKeywords)?Y.seoKeywords:(Y.seoKeywords||"").split(",").map(e=>e.trim()).filter(e=>e.length>0),t={...w,seoTitle:Y.seoTitle||void 0,seoDescription:Y.seoDescription||void 0,seoKeywords:e};k(t),b&&await b({...t,customCSS:Y.customCSS,customJS:Y.customJS,headCode:Y.headCode,isPublished:Y.isPublished,showInNavigation:Y.showInNavigation,allowIndexing:Y.allowIndexing,requireAuth:Y.requireAuth}),await p?.(),S({title:"Settings saved",description:"Page settings have been updated and saved successfully.",type:"success"}),X(!1)}catch(e){S({title:"Error",description:e instanceof Error?e.message:"Failed to save settings",type:"error"}),console.error("Save settings error:",e)}finally{G(!1)}},[w,Y,b,p,k,S]),el=(0,s.useCallback)(async()=>{K(!0),J(null);try{await p()}catch(e){J(e instanceof Error?e.message:"Failed to save page"),console.error("Save error:",e)}finally{K(!1)}},[p]);return(0,s.useMemo)(()=>N?.length>0,[N?.length]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white border-b border-gray-200 flex flex-col",children:[(0,t.jsxs)("div",{className:"h-14 flex items-center justify-between overflow-x-auto",children:[(0,t.jsx)(ta,{showPageInfo:j,editingPage:w,showPreview:T,onPreviewToggle:y||C,loading:f}),v&&(0,t.jsx)(tl,{editorMode:a,onModeChange:l,device:i,onDeviceChange:o,isLoading:f}),(0,t.jsx)(to,{leftPanelOpen:n,onToggleLeftPanel:c,rightPanelOpen:d,onToggleRightPanel:h,onSave:el,onExit:m,onTemplateClick:()=>A(!0),onSettingsClick:()=>X(!0),isSaving:V,isLoading:f,showEditorControls:v})]}),q&&(0,t.jsxs)("div",{className:"px-4 py-2 bg-red-50 border-t border-red-200 flex items-center space-x-2 text-red-700 text-sm",children:[(0,t.jsx)(B.AlertCircle,{size:16,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"flex-1",children:q}),(0,t.jsx)("button",{onClick:()=>J(null),className:"text-red-700 hover:text-red-900 font-medium",children:"Dismiss"})]})]}),(0,t.jsx)(ti,{isOpen:R,onOpenChange:X,editingPage:w,onPageUpdate:e=>{k(e),Q(t=>({...t,seoTitle:e.seoTitle||"",seoDescription:e.seoDescription||"",seoKeywords:Array.isArray(e.seoKeywords)?e.seoKeywords.join(", "):""}))},pageSettings:Y,onSettingChange:ee,isLoading:f||W,onSave:ea}),(0,t.jsx)(ey,{isOpen:D,onClose:()=>A(!1),onSave:et,currentPageStructure:u,currentPageStyles:x}),(0,t.jsx)(eb,{isOpen:L,onClose:()=>P(!1),onImport:es})]})}var tc=e.i(608479),td=e.i(591079),th=e.i(553579),tp=e.i(541428),tm=e.i(51736),tu=e.i(651870);function tx({block:e,isEditing:s,onUpdate:a,onDelete:l,onAddChild:r,onUpdateChild:i,onDeleteChild:o,onSelect:n,depth:c=0}){let{attributes:d,listeners:h,setNodeRef:p,transform:m,transition:u,isDragging:x}=(0,tc.useSortable)({id:e.id,data:{type:"existing-block",block:e}}),g={transform:tu.CSS.Transform.toString(m),transition:u,opacity:x?.5:1};return(0,t.jsx)("div",{ref:p,style:g,...d,children:(0,t.jsxs)("div",{className:`relative group rounded-lg transition-all duration-200 ${x?"ring-4 ring-blue-400 shadow-2xl scale-102":"hover:ring-2 hover:ring-gray-300"}`,children:[s&&(0,t.jsx)("div",{...h,className:`absolute -left-8 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center transition-all cursor-grab active:cursor-grabbing rounded shadow-sm z-10 ${x?"opacity-100 bg-blue-500 border border-blue-600":"opacity-0 group-hover:opacity-100 bg-white border border-gray-300 hover:bg-blue-50"}`,title:"Drag to reorder",children:(0,t.jsx)("svg",{className:`w-4 h-4 transition-colors ${x?"text-white":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9h8M8 15h8"})})}),x&&(0,t.jsx)("div",{className:"absolute -top-3 -right-3 bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-bounce z-20",children:"‚¨ÜÔ∏è Reordering"}),(0,t.jsx)(tm.BlockRenderer,{block:e,isEditing:s,onUpdate:a,onDelete:l,onAddChild:r,onUpdateChild:i,onDeleteChild:o,onSelect:n,depth:c})]})})}var tg=e.i(916494),ty=e.i(126795),tf=e.i(556553),tf=tf,tb=e.i(771564),tv=e.i(99529),tj=e.i(172445),tw=e.i(646277),tw=tw,tN=e.i(128647),tN=tN,tk=e.i(686812),tk=tk,tT=e.i(240243),tC=e.i(157181),tS=e.i(996701),tB=e.i(850401),tB=tB,tE=e.i(823186),tI=e.i(932384),tI=tI,tD=e.i(495280),tA=e.i(738543),tL=e.i(317044),tP=e.i(825098),tR=e.i(196064),tO=e.i(202774);let tF=[{type:eI.BlockType.TEXT,label:"Text Block",icon:tg.Type,color:"bg-blue-100 text-blue-600"},{type:eI.BlockType.IMAGE,label:"Image Block",icon:ty.Image,color:"bg-green-100 text-green-600"},{type:eI.BlockType.VIDEO,label:"Video",icon:tE.Video,color:"bg-rose-100 text-rose-600"},{type:eI.BlockType.BUTTON,label:"Button",icon:tf.default,color:"bg-orange-100 text-orange-600"},{type:eI.BlockType.HERO,label:"Hero Section",icon:td.Layout,color:"bg-purple-100 text-purple-600"},{type:eI.BlockType.CAROUSEL,label:"Carousel",icon:tB.default,color:"bg-teal-100 text-teal-600"},{type:eI.BlockType.GALLERY,label:"Gallery",icon:tI.default,color:"bg-cyan-100 text-cyan-600"},{type:eI.BlockType.CARD,label:"Card",icon:tN.default,color:"bg-violet-100 text-violet-600"},{type:eI.BlockType.TESTIMONIAL,label:"Testimonial",icon:tD.MessageSquare,color:"bg-fuchsia-100 text-fuchsia-600"},{type:eI.BlockType.TEAM,label:"Team Section",icon:tb.Users,color:"bg-indigo-100 text-indigo-600"},{type:eI.BlockType.STATS,label:"Stats Section",icon:tA.BarChart3,color:"bg-emerald-100 text-emerald-600"},{type:eI.BlockType.FAQ,label:"FAQ",icon:tL.HelpCircle,color:"bg-sky-100 text-sky-600"},{type:eI.BlockType.CONTACT_FORM,label:"Contact Form",icon:tP.Mail,color:"bg-amber-100 text-amber-600"},{type:eI.BlockType.CONTACT_INFO,label:"Contact Info",icon:tv.Phone,color:"bg-cyan-100 text-cyan-600"},{type:eI.BlockType.CONTAINER,label:"Container",icon:tN.default,color:"bg-violet-100 text-violet-600"},{type:eI.BlockType.SECTION,label:"Section",icon:tk.default,color:"bg-fuchsia-100 text-fuchsia-600"},{type:eI.BlockType.GRID,label:"Grid Layout",icon:tT.Grid3x3,color:"bg-pink-100 text-pink-600"},{type:eI.BlockType.FLEX_ROW,label:"Flex Row",icon:tC.ArrowRightLeft,color:"bg-rose-100 text-rose-600"},{type:eI.BlockType.FLEX_COLUMN,label:"Flex Column",icon:tS.ArrowUpDown,color:"bg-amber-100 text-amber-600"},{type:eI.BlockType.DIVIDER,label:"Divider",icon:tj.Minus,color:"bg-gray-100 text-gray-600"},{type:eI.BlockType.SPACER,label:"Spacer",icon:tw.default,color:"bg-yellow-100 text-yellow-600"},{type:eI.BlockType.DYNAMIC,label:"Dynamic Block",icon:d.Code,color:"bg-purple-100 text-purple-600"},{type:eI.BlockType.PRODUCT_LIST,label:"Product List",icon:tO.ShoppingCart,color:"bg-green-100 text-green-600"},{type:eI.BlockType.PRODUCT_CAROUSEL,label:"Product Carousel",icon:tR.Zap,color:"bg-blue-100 text-blue-600"}];Object.fromEntries(tF.map(e=>[e.type,e.label]));let tz=[{category:"Content Blocks",blocks:tF.filter(e=>[eI.BlockType.TEXT,eI.BlockType.IMAGE,eI.BlockType.VIDEO,eI.BlockType.BUTTON,eI.BlockType.HERO,eI.BlockType.CAROUSEL,eI.BlockType.GALLERY,eI.BlockType.CARD,eI.BlockType.TESTIMONIAL,eI.BlockType.TEAM,eI.BlockType.STATS,eI.BlockType.FAQ,eI.BlockType.CONTACT_FORM,eI.BlockType.CONTACT_INFO].includes(e.type))},{category:"Container & Layout",blocks:tF.filter(e=>[eI.BlockType.SECTION,eI.BlockType.CONTAINER,eI.BlockType.GRID,eI.BlockType.FLEX_ROW,eI.BlockType.FLEX_COLUMN].includes(e.type))},{category:"Utility Blocks",blocks:tF.filter(e=>[eI.BlockType.DIVIDER,eI.BlockType.SPACER].includes(e.type))},{category:"Dynamic & E-commerce",blocks:tF.filter(e=>[eI.BlockType.DYNAMIC,eI.BlockType.PRODUCT_LIST,eI.BlockType.PRODUCT_CAROUSEL].includes(e.type))}],tM=s.default.memo(function(){let{blocks:e,draggedBlock:a}=(0,eT.usePageState)(),{showPreview:l}=eB(),{handleBlockUpdate:r,handleBlockDelete:o,handleAddChild:n,handleSelectBlock:c,handleAddBlock:d}=eZ(),[h,p]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),[x,g]=(0,s.useState)(()=>{try{let e=localStorage.getItem("pagebuilder-bookmarks");return e?new Set(JSON.parse(e)):new Set}catch{return new Set}});s.default.useEffect(()=>{try{localStorage.setItem("pagebuilder-bookmarks",JSON.stringify(Array.from(x)))}catch(e){eF.error(e_,"Failed to save bookmarks",{error:e})}},[x]);let y=(0,s.useMemo)(()=>e.map(e=>e.id),[e]),f=(0,s.useMemo)(()=>e.length>0,[e.length]),{setNodeRef:b,isOver:v,node:j}=(0,ew.useDroppable)({id:"canvas-droppable",data:{type:"canvas",accepts:["existing-block","new-block"]}});s.default.useEffect(()=>{eF.debug("CANVAS_SETUP","Canvas droppable initialized",{hasRef:!!b,isOver:v})},[b,v]),tz.flatMap(e=>e.blocks);let w=(0,s.useCallback)(async e=>{try{await d(e),p(!1),u("")}catch(t){eF.error(e_,"Failed to add block",{blockType:e,error:t})}},[d]),N=(0,s.useCallback)((e,t)=>{t.stopPropagation(),g(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),k=(0,s.useMemo)(()=>{if(!m.trim())return tz;let e=m.toLowerCase();return tz.map(t=>({...t,blocks:t.blocks.filter(t=>t.label.toLowerCase().includes(e)||t.type.toLowerCase().includes(e))})).filter(e=>e.blocks.length>0)},[m,tz]),T=(0,s.useMemo)(()=>0===x.size?[]:tz.flatMap(e=>e.blocks).filter(e=>x.has(e.type)),[x,tz]),C=()=>(0,t.jsxs)(t.Fragment,{children:[T.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"px-2 py-1.5 text-xs font-semibold text-yellow-600 uppercase flex items-center gap-1",children:[(0,t.jsx)(th.Star,{size:12,className:"fill-yellow-500 text-yellow-500"}),"Bookmarked"]}),T.map(({type:e,label:s,icon:a})=>(0,t.jsxs)(I.DropdownMenuItem,{onClick:()=>w(e),className:"cursor-pointer gap-2 group",children:[(0,t.jsx)(a,{size:16,className:"text-gray-600"}),(0,t.jsx)("span",{className:"flex-1",children:s}),(0,t.jsx)(th.Star,{size:14,className:"fill-yellow-500 text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>N(e,t)})]},e)),(0,t.jsx)("div",{className:"my-1 mx-0 h-px bg-gray-200"})]}),0===k.length?(0,t.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:[(0,t.jsx)(Y.Search,{size:32,className:"mx-auto mb-2 opacity-30"}),'No blocks found for "',m,'"']}):k.map((e,s)=>(0,t.jsxs)("div",{children:[(s>0||T.length>0)&&(0,t.jsx)("div",{className:"my-1 mx-0 h-px bg-gray-200"}),(0,t.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase",children:e.category}),e.blocks.map(({type:e,label:s,icon:a})=>{let l=x.has(e);return(0,t.jsxs)(I.DropdownMenuItem,{onClick:()=>w(e),className:"cursor-pointer gap-2 group",children:[(0,t.jsx)(a,{size:16,className:"text-gray-600"}),(0,t.jsx)("span",{className:"flex-1",children:s}),(0,t.jsx)(th.Star,{size:14,className:(0,tp.cn)("transition-all",l?"fill-yellow-500 text-yellow-500":"text-gray-300 opacity-0 group-hover:opacity-100"),onClick:t=>N(e,t)})]},e)})]},e.category))]});return(0,t.jsx)("div",{className:"flex-1 p-12 overflow-auto bg-gradient-to-br from-gray-50 to-gray-100",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:l?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Preview"}),e.map(e=>(0,t.jsx)(tm.BlockRenderer,{block:e,isEditing:!1,onUpdate:()=>{},onDelete:()=>{}},e.id))]}):(0,t.jsx)(tc.SortableContext,{items:y,strategy:tc.verticalListSortingStrategy,children:(0,t.jsxs)("div",{ref:b,className:`space-y-4 min-h-[400px] p-6 rounded-lg transition-all duration-200 ${v?"bg-blue-50 border-2 border-blue-400 border-dashed shadow-lg shadow-blue-200":"bg-white border-2 border-dashed border-gray-200"}`,children:[(0,t.jsx)("div",{className:(0,tp.cn)("absolute inset-0 pointer-events-none flex items-center justify-center transition-opacity duration-200",v?"opacity-100":"opacity-0"),children:(0,t.jsx)("div",{className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg animate-bounce",children:"üìç Drop here to add block"})}),f?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,t.jsx)(tx,{block:e,isEditing:!0,onUpdate:(t,s)=>r(e.id,t,s),onDelete:()=>o(e.id),onAddChild:n,onUpdateChild:r,onDeleteChild:o,onSelect:c,depth:0},e.id)),(0,t.jsx)("div",{className:"pt-4 border-t border-gray-200 mt-6",children:(0,t.jsxs)(I.DropdownMenu,{open:h,onOpenChange:p,children:[(0,t.jsx)(I.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{size:"sm",className:"w-full gap-2",variant:"secondary",children:[(0,t.jsx)(Q.Plus,{size:16}),"Add New Block"]})}),(0,t.jsxs)(I.DropdownMenuContent,{align:"center",className:"w-64 max-h-96 overflow-hidden flex flex-col",children:[(0,t.jsx)("div",{className:"p-2 border-b sticky top-0 bg-white z-10",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(J.Input,{type:"text",placeholder:"Search blocks...",value:m,onChange:e=>u(e.target.value),className:"pl-9 h-8 text-sm",onClick:e=>e.stopPropagation()})]})}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-80",children:C()})]})]})})]})}):(0,t.jsx)(ek.Card,{className:`p-8 text-center border-2 transition-all duration-200 ${v?"border-blue-400 border-solid bg-blue-50 scale-105":"border-gray-300 border-dashed hover:border-primary hover:bg-primary/5"}`,children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)(td.Layout,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:"No blocks yet"}),(0,t.jsx)("p",{className:"text-sm mb-6",children:"Drag and drop blocks from the left panel to start building"}),v&&(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold mb-4",children:"üéØ Ready to drop!"}),(0,t.jsxs)(I.DropdownMenu,{open:h,onOpenChange:p,children:[(0,t.jsx)(I.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{size:"sm",className:"gap-2",variant:"default",children:[(0,t.jsx)(Q.Plus,{size:16}),"Add Block"]})}),(0,t.jsxs)(I.DropdownMenuContent,{align:"center",className:"w-64 max-h-96 overflow-hidden flex flex-col",children:[(0,t.jsx)("div",{className:"p-2 border-b sticky top-0 bg-white z-10",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(J.Input,{type:"text",placeholder:"Search blocks...",value:m,onChange:e=>u(e.target.value),className:"pl-9 h-8 text-sm",onClick:e=>e.stopPropagation()})]})}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-80",children:C()})]})]})]})})]})})})})}),t_={desktop:"100%",tablet:"768px",mobile:"375px"};function tH({editorMode:e,device:s,selectedBlockId:a,onSelectBlock:l}){let{blocks:r,loading:i}=(0,eT.usePageState)();return i?(0,t.jsx)("div",{className:"h-full bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Loading page..."})]})}):"code"===e?(0,t.jsx)("div",{className:"h-full bg-gray-900 text-white p-4 overflow-auto",children:(0,t.jsx)("pre",{className:"text-sm font-mono",children:JSON.stringify(r,null,2)})}):(0,t.jsx)("div",{className:"h-full bg-gray-100 overflow-auto flex",children:(0,t.jsx)("div",{className:"min-h-full flex items-start justify-center p-8 flex-1",children:(0,t.jsx)("div",{className:"bg-white shadow-xl transition-all duration-300 min-h-[600px] rounded-md relative",style:{width:t_[s],maxWidth:"100%"},children:(0,t.jsx)(tM,{})})})})}var t$=e.i(744036),t$=t$,tU=e.i(711798),tX=e.i(905827),tX=tX,tW=e.i(766981),tG=e.i(981450),tG=tG,tV=e.i(85564),tV=tV;function tK({selectedBlockId:e,device:a}){let[l,r]=(0,s.useState)(null),[o,n]=(0,s.useState)(100),c=e=>{r(l===e?null:e)};return(0,t.jsxs)(t.Fragment,{children:[l&&(0,t.jsx)("div",{className:"h-48 bg-white border-t border-gray-200 overflow-auto",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold capitalize",children:l}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>r(null),children:(0,t.jsx)(tW.ChevronUp,{className:"w-4 h-4"})})]}),"structure"===l&&(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Structure tree view will be here"}),"layers"===l&&(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Layers panel will be here"}),"history"===l&&(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"History panel will be here"})]})}),(0,t.jsxs)("div",{className:"h-10 bg-white border-t border-gray-200 flex items-center justify-between px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"structure"===l?"secondary":"ghost",size:"sm",onClick:()=>c("structure"),className:"gap-2",children:[(0,t.jsx)(tU.List,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Structure"})]}),(0,t.jsxs)(i.Button,{variant:"layers"===l?"secondary":"ghost",size:"sm",onClick:()=>c("layers"),className:"gap-2",children:[(0,t.jsx)(t$.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Layers"})]}),(0,t.jsxs)(i.Button,{variant:"history"===l?"secondary":"ghost",size:"sm",onClick:()=>c("history"),className:"gap-2",children:[(0,t.jsx)(tX.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"History"})]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e?(0,t.jsxs)("span",{children:["Selected: ",e]}):(0,t.jsx)("span",{children:"No block selected"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>n(Math.max(50,o-10)),disabled:o<=50,children:(0,t.jsx)(tV.default,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm font-mono w-12 text-center",children:[o,"%"]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>n(Math.min(200,o+10)),disabled:o>=200,children:(0,t.jsx)(tG.default,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",title:"Help",children:(0,t.jsx)(tL.HelpCircle,{className:"w-4 h-4"})})]})]})]})}var t$=t$,tq=e.i(450071),tJ=e.i(27400),tY=e.i(685462),tY=tY,tQ=e.i(236929),tf=tf,tk=tk,tZ=e.i(192078),tZ=tZ,t0=e.i(369102),t0=t0,t1=e.i(248468),t2=e.i(126455),t4=e.i(508005);function t5(e,t="",a={}){let{searchFields:l=["name","description"],groupByField:r="category",caseSensitive:i=!1}=a;return(0,s.useMemo)(()=>{if(!e||0===e.length)return{groupedItems:{},itemCount:0,groupCount:0,isEmpty:!0};let s=e.filter(e=>{if(!t)return!0;let s=i?t:t.toLowerCase();return l.some(t=>{let a=e[t];return"string"==typeof a?(i?a:a.toLowerCase()).includes(s):!!Array.isArray(a)&&a.some(e=>{let t="string"==typeof e?e:String(e);return(i?t:t.toLowerCase()).includes(s)})})}),a=s.reduce((e,t)=>{let s=String(t[r]||"Other");return e[s]||(e[s]=[]),e[s].push(t),e},{}),o=Object.keys(a).sort().reduce((e,t)=>(e[t]=a[t],e),{});return{groupedItems:o,itemCount:s.length,groupCount:Object.keys(o).length,isEmpty:0===s.length}},[e,t,l,r,i])}function t3(e={}){let{defaultExpanded:t=!1,initialState:a={}}=e,[l,r]=(0,s.useState)(a),i=(0,s.useCallback)(e=>{r(t=>({...t,[e]:!t[e]}))},[]),o=(0,s.useCallback)(e=>{r(e.reduce((e,t)=>({...e,[t]:!0}),{}))},[]),n=(0,s.useCallback)(()=>{r({})},[]),c=(0,s.useCallback)(e=>l[e]??t,[l,t]);return{expandedCategories:l,toggleCategory:i,expandAll:o,collapseAll:n,setExpandedCategories:r,isExpanded:c}}let t6={basic:{id:"basic",label:"Basic Elements",icon:tR.Zap,description:"Core building blocks for your content"},layout:{id:"layout",label:"Layout",icon:td.Layout,description:"Structure and organize your content"},content:{id:"content",label:"Content",icon:t0.default,description:"Rich media and dynamic content"},advanced:{id:"advanced",label:"Advanced",icon:tq.Sparkles,description:"Advanced components and features"},ecommerce:{id:"ecommerce",label:"E-commerce",icon:tO.ShoppingCart,description:"Product and commerce elements"}},t8=[{id:eI.BlockType.RICH_TEXT,icon:q.FileText,label:"Rich Text",description:"BlockNote-style editor with advanced formatting",category:"basic",popularity:"hot"},{id:eI.BlockType.TEXT,icon:tg.Type,label:"Simple Text",description:"Plain text block for basic content",category:"basic"},{id:eI.BlockType.HERO,icon:tY.default,label:"Hero Section",description:"Large hero banner with heading",category:"basic",popularity:"hot"},{id:eI.BlockType.BUTTON,icon:tQ.MousePointer,label:"Button",description:"Call-to-action button",category:"basic",popularity:"hot"},{id:eI.BlockType.IMAGE,icon:ty.Image,label:"Image",description:"Single image with caption",category:"basic"},{id:eI.BlockType.DIVIDER,icon:tj.Minus,label:"Divider",description:"Horizontal separator line",category:"basic"},{id:eI.BlockType.SECTION,icon:tf.default,label:"Section",description:"Full-width page section",category:"layout",popularity:"hot"},{id:eI.BlockType.CONTAINER,icon:td.Layout,label:"Container",description:"Content container with max-width",category:"layout"},{id:eI.BlockType.GRID,icon:tT.Grid3x3,label:"Grid",description:"Responsive grid layout",category:"layout",popularity:"hot"},{id:eI.BlockType.FLEX_ROW,icon:tk.default,label:"Flex Row",description:"Horizontal flex container",category:"layout"},{id:eI.BlockType.FLEX_COLUMN,icon:tZ.default,label:"Flex Column",description:"Vertical flex container",category:"layout"},{id:eI.BlockType.SPACER,icon:tZ.default,label:"Spacer",description:"Vertical spacing control",category:"layout"},{id:eI.BlockType.CAROUSEL,icon:t0.default,label:"Carousel",description:"Image slider with controls",category:"content",popularity:"new"},{id:eI.BlockType.GALLERY,icon:t0.default,label:"Gallery",description:"Image gallery grid",category:"content"},{id:eI.BlockType.VIDEO,icon:tE.Video,label:"Video",description:"Video player (YouTube/Vimeo)",category:"content"},{id:eI.BlockType.CARD,icon:t4.Quote,label:"Card",description:"Content card with image/text",category:"content",popularity:"hot"},{id:eI.BlockType.TESTIMONIAL,icon:t4.Quote,label:"Testimonial",description:"Customer testimonial block",category:"content"},{id:eI.BlockType.TEAM,icon:tb.Users,label:"Team",description:"Team member showcase",category:"content"},{id:eI.BlockType.STATS,icon:t1.BarChart,label:"Stats",description:"Statistics counter display",category:"content"},{id:eI.BlockType.FAQ,icon:tU.List,label:"FAQ",description:"Accordion FAQ section",category:"content"},{id:eI.BlockType.CONTACT_FORM,icon:q.FileText,label:"Contact Form",description:"Dynamic contact form",category:"advanced",popularity:"hot"},{id:eI.BlockType.DYNAMIC,icon:tq.Sparkles,label:"Dynamic Block",description:"Template-based dynamic content",category:"advanced",popularity:"new"},{id:eI.BlockType.PRODUCT_LIST,icon:tO.ShoppingCart,label:"Product List",description:"Grid of products with filters",category:"ecommerce",popularity:"hot"},{id:eI.BlockType.PRODUCT_DETAIL,icon:t2.Package,label:"Product Detail",description:"Single product showcase",category:"ecommerce"}];function t9({element:e}){let{handleAddBlock:a}=eZ(),[l,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),{attributes:n,listeners:c,setNodeRef:d,transform:h,isDragging:p}=(0,ew.useDraggable)({id:`element-${e.id}`,data:{type:"new-block",blockType:e.id}}),m=h?{transform:`translate3d(${h.x}px, ${h.y}px, 0)`,opacity:p?.8:1,zIndex:1e3}:void 0,u=e.icon,x=async()=>{if(!l)try{r(!0),await a(e.id)}catch(e){console.error("[ElementsLibrary] Error adding block:",e)}finally{r(!1)}};return(0,t.jsxs)("div",{className:"relative group/item",children:[(0,t.jsxs)("button",{ref:d,...c,...n,style:m,onDoubleClick:x,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:(0,tp.cn)("w-full flex items-start gap-3 p-3 rounded-lg border transition-all duration-200","text-left select-none group/btn","min-h-[44px] sm:min-h-[48px]",p&&"bg-blue-50 border-blue-400 shadow-lg scale-105 z-50",l&&"bg-green-50 border-green-400 shadow-lg",!p&&!l&&"border-gray-200 bg-white hover:bg-gradient-to-br hover:from-blue-50 hover:to-transparent hover:border-blue-300 hover:shadow-md","active:scale-[0.98] touch-manipulation"),title:"Double-click to add ‚Ä¢ Drag to canvas",children:[(0,t.jsx)("div",{className:(0,tp.cn)("flex-shrink-0 w-10 h-10 sm:w-11 sm:h-11 rounded-md flex items-center justify-center transition-all duration-200",p&&"bg-blue-500 text-white scale-110 shadow-lg",l&&"bg-green-500 text-white scale-110",!p&&!l&&"bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover/btn:bg-blue-400 group-hover/btn:text-white group-hover/btn:shadow-md"),children:(0,t.jsx)(u,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-semibold text-sm sm:text-base text-gray-900 truncate",children:e.label}),"hot"===e.popularity&&(0,t.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700",children:"üî• Hot"}),"new"===e.popularity&&(0,t.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"‚ú® New"})]}),e.description&&(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 line-clamp-1 mt-0.5",children:e.description})]}),p&&(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-blue-500 text-white rounded text-xs font-semibold whitespace-nowrap",children:[(0,t.jsx)(tR.Zap,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Dragging"})]}),l&&(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-500 text-white rounded text-xs font-semibold whitespace-nowrap animate-pulse",children:[(0,t.jsx)(W.Copy,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Adding"})]})]}),i&&!p&&!l&&(0,t.jsxs)("div",{className:"hidden sm:block absolute bottom-full left-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap z-50 pointer-events-none",children:["Double-click to add ‚Ä¢ Drag to canvas",(0,t.jsx)("div",{className:"absolute top-full left-0 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})]})}function t7({category:e,config:s,elements:a,isExpanded:l,onToggle:r,count:i}){let o=s.icon;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:r,className:(0,tp.cn)("w-full flex items-center gap-2 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-semibold text-gray-700 hover:bg-gray-100 group/cat","min-h-[44px] touch-manipulation active:scale-[0.98]",l&&"bg-blue-50 text-primary"),children:[o&&(0,t.jsx)(o,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 text-gray-400 group-hover/cat:text-gray-600"}),(0,t.jsx)("span",{className:"flex-1 text-left text-sm sm:text-base",children:s.label}),(0,t.jsx)("span",{className:(0,tp.cn)("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-700",l&&"bg-blue-200 text-primary"),children:i}),(0,t.jsx)(C.ChevronDown,{className:(0,tp.cn)("w-4 h-4 flex-shrink-0 text-gray-400 transition-transform duration-200",l&&"rotate-180 text-primary")})]}),l&&s.description&&(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 px-3",children:s.description}),l&&(0,t.jsx)("div",{className:"pl-2 space-y-2 border-l-2 border-gray-200",children:a.map(e=>(0,t.jsx)(t9,{element:e},e.id))})]})}function se(){let[e,a]=(0,s.useState)(""),{expandedCategories:l,toggleCategory:r}=t3({initialState:{basic:!0,layout:!0}}),{groupedItems:i,itemCount:o}=t5(t8,e,{searchFields:["label","description"],groupByField:"category"}),n=Object.entries(i).map(([e,t])=>({category:e,config:t6[e],elements:t}));return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-gradient-to-b from-white to-gray-50",children:[(0,t.jsx)("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-4 py-3",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"Elements"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[o," element",1!==o?"s":""," available"]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(Y.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"}),(0,t.jsx)(J.Input,{placeholder:"Search elements...",value:e,onChange:e=>a(e.target.value),className:"pl-9 h-9 text-sm bg-gray-50 border-gray-300 rounded-lg group-focus-within:bg-white group-focus-within:border-blue-400 group-focus-within:ring-1 group-focus-within:ring-blue-200 transition-all"})]})]})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:0===o?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 py-12 px-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 mb-3",children:(0,t.jsx)(Y.Search,{className:"w-6 h-6"})}),(0,t.jsx)("p",{className:"font-semibold text-gray-600",children:"No elements found"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Try a different search term"})]}):(0,t.jsx)("div",{className:"space-y-4 p-4",children:n.map(e=>(0,t.jsx)(t7,{category:e.category,config:e.config,elements:e.elements,isExpanded:l[e.category]||!1,onToggle:()=>r(e.category),count:e.elements.length},e.category))})}),(0,t.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 bg-white px-4 py-2.5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tR.Zap,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Double-click to add"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(W.Copy,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Drag to canvas"})]})]})})]})}var st=e.i(893228),ss=e.i(528972),sa=e.i(232774),sa=sa,sl=e.i(701325),sr=e.i(759727),si=e.i(844596);let so=[{id:"product-grid",name:"Product Grid",description:"Responsive product showcase with 3-column layout",category:"ecommerce",preview:"üõçÔ∏è",blockCount:6,color:"from-blue-500 to-cyan-500",popularity:"hot",blocks:[{type:eI.BlockType.HERO,content:{title:"Our Products",subtitle:"Discover our latest collection",style:{}}},{type:eI.BlockType.GRID,content:{columns:3,gap:"20px",style:{}}},{type:eI.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400",alt:"Product 1",style:{}}},{type:eI.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400",alt:"Product 2",style:{}}},{type:eI.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1560343090-f0409e92791a?w=400",alt:"Product 3",style:{}}},{type:eI.BlockType.BUTTON,content:{text:"View All Products",link:"#",variant:"primary",style:{}}}]},{id:"category-showcase",name:"Category Showcase",description:"Highlight product categories with images",category:"ecommerce",preview:"üè™",blockCount:4,color:"from-purple-500 to-pink-500",blocks:[{type:eI.BlockType.TEXT,content:{content:"<h2>Shop by Category</h2>",style:{}}},{type:eI.BlockType.GRID,content:{columns:2,gap:"16px",style:{}}},{type:eI.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400",alt:"Category 1",style:{}}},{type:eI.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=400",alt:"Category 2",style:{}}}]},{id:"task-dashboard",name:"Task Dashboard",description:"Kanban-style task management interface",category:"productivity",preview:"‚úÖ",blockCount:8,color:"from-green-500 to-emerald-500",popularity:"hot",blocks:[{type:eI.BlockType.TEXT,content:{content:"<h1>Task Dashboard</h1>",style:{}}},{type:eI.BlockType.STATS,content:{title:"Project Stats",stats:[{label:"Tasks",value:"24"},{label:"Completed",value:"12"}],style:{}}},{type:eI.BlockType.FLEX_ROW,content:{justifyContent:"space-between",style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>To Do</h3>",style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>In Progress</h3>",style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>Done</h3>",style:{}}},{type:eI.BlockType.DIVIDER,content:{thickness:1,color:"#e5e7eb",style:{}}},{type:eI.BlockType.BUTTON,content:{text:"Add New Task",link:"#",variant:"primary",style:{}}}]},{id:"hero-section",name:"Hero Section",description:"Eye-catching hero with CTA buttons",category:"landing",preview:"üöÄ",blockCount:3,color:"from-orange-500 to-red-500",popularity:"hot",blocks:[{type:eI.BlockType.HERO,content:{title:"Welcome to Our Platform",subtitle:"The best solution for your business",description:"Start today and see the difference",buttonText:"Get Started",buttonLink:"#",style:{}}},{type:eI.BlockType.SPACER,content:{height:60,style:{}}},{type:eI.BlockType.TEXT,content:{content:'<p style="text-align: center;">Trusted by thousands of companies worldwide</p>',style:{}}}]},{id:"contact-form",name:"Contact Form",description:"Professional contact form with validation",category:"landing",preview:"üìß",blockCount:5,color:"from-indigo-500 to-blue-500",blocks:[{type:eI.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Get in Touch</h2>',style:{}}},{type:eI.BlockType.TEXT,content:{content:'<p style="text-align: center;">We\'d love to hear from you</p>',style:{}}},{type:eI.BlockType.CONTACT_INFO,content:{email:"contact@example.com",phone:"+1 234 567 8900",address:"123 Main St, City, Country",style:{}}},{type:eI.BlockType.SPACER,content:{height:40,style:{}}},{type:eI.BlockType.BUTTON,content:{text:"Send Message",link:"#",variant:"primary",style:{}}}]},{id:"testimonials",name:"Testimonials",description:"Customer reviews in card layout",category:"landing",preview:"‚≠ê",blockCount:4,color:"from-yellow-500 to-orange-500",popularity:"new",blocks:[{type:eI.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">What Our Customers Say</h2>',style:{}}},{type:eI.BlockType.SPACER,content:{height:40,style:{}}},{type:eI.BlockType.GRID,content:{columns:2,gap:"24px",style:{}}},{type:eI.BlockType.TEXT,content:{content:'<blockquote>"Amazing service! Highly recommended." - John Doe</blockquote>',style:{}}}]},{id:"faq-section",name:"FAQ Section",description:"Accordion-style frequently asked questions",category:"business",preview:"‚ùì",blockCount:6,color:"from-teal-500 to-cyan-500",blocks:[{type:eI.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Frequently Asked Questions</h2>',style:{}}},{type:eI.BlockType.SPACER,content:{height:40,style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>How does it work?</h3><p>Our platform is designed to be intuitive and easy to use.</p>",style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>What are the pricing plans?</h3><p>We offer flexible pricing to suit your needs.</p>",style:{}}},{type:eI.BlockType.TEXT,content:{content:"<h3>How can I get support?</h3><p>Our support team is available 24/7 to help you.</p>",style:{}}},{type:eI.BlockType.BUTTON,content:{text:"Contact Support",link:"#",variant:"outline",style:{}}}]},{id:"newsletter",name:"Newsletter Signup",description:"Email subscription form with benefits",category:"marketing",preview:"üì∞",blockCount:3,color:"from-pink-500 to-rose-500",popularity:"new",blocks:[{type:eI.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Subscribe to Our Newsletter</h2>',style:{}}},{type:eI.BlockType.TEXT,content:{content:'<p style="text-align: center;">Get the latest updates and exclusive offers</p>',style:{}}},{type:eI.BlockType.BUTTON,content:{text:"Subscribe Now",link:"#",variant:"primary",style:{}}}]}];st.ShoppingBag,ss.LayoutDashboard,tq.Sparkles,sl.Building2,sr.TrendingUp;let sn={ecommerce:{id:"ecommerce",label:"E-commerce",icon:st.ShoppingBag,description:"Product showcase and shopping templates"},productivity:{id:"productivity",label:"Productivity",icon:ss.LayoutDashboard,description:"Task management and productivity tools"},landing:{id:"landing",label:"Landing Page",icon:sa.default,description:"Landing pages and marketing sites"},business:{id:"business",label:"Business",icon:sl.Building2,description:"Business and company templates"},marketing:{id:"marketing",label:"Marketing",icon:sr.TrendingUp,description:"Marketing and promotion templates"}};function sc({template:e,onInsert:a,onPreview:l}){let[r,n]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),p=()=>{a(e),h(!0),setTimeout(()=>h(!1),2e3)};return(0,t.jsxs)("div",{className:"group relative bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg hover:border-primary/50 transition-all duration-300 cursor-pointer",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onDoubleClick:()=>{eF.info("TEMPLATE_INSERT","Double-click inserting template",{templateId:e.id}),p()},title:"Double-click to insert template",children:[(0,t.jsxs)("div",{className:`relative h-24 sm:h-28 bg-gradient-to-br ${e.color} flex items-center justify-center`,children:[(0,t.jsx)("div",{className:"text-4xl sm:text-5xl",children:e.preview}),e.popularity&&(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)(o.Badge,{className:(0,tp.cn)("text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2","hot"===e.popularity?"bg-red-500 hover:bg-red-600":"bg-purple-500 hover:bg-purple-600"),children:"hot"===e.popularity?"üî• Hot":"‚ú® New"})}),r&&(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center gap-2 animate-in fade-in duration-200",children:[(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",className:"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5",onClick:p,children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(si.Check,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Inserted"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Copy,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Insert"})]})}),(0,t.jsxs)(i.Button,{size:"sm",variant:"secondary",className:"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5",onClick:()=>{l(e)},children:[(0,t.jsx)(c.Eye,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Preview"})]})]}),(0,t.jsx)("div",{className:(0,tp.cn)("absolute top-2 right-2",e.popularity&&"top-10 sm:top-12"),children:(0,t.jsxs)(o.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2 bg-white/90 backdrop-blur-sm",children:[e.blockCount," blocks"]})})]}),(0,t.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm sm:text-base mb-1 truncate group-hover:text-primary transition-colors",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 line-clamp-2 mb-2 sm:mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.default.createElement(sn[e.category].icon,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-gray-400"}),(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500",children:sn[e.category].label})]})]})]})}function sd(){let[e,a]=(0,s.useState)(""),[l,r]=(0,s.useState)("all"),[n,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(!1),{expandedCategories:p,toggleCategory:m}=t3({initialState:{all:!0,ecommerce:!0,landing:!0}}),{handleApplyTemplate:u}=eZ(),x=so.filter(t=>{let s=t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase()),a="all"===l||t.category===l;return s&&a}),{groupedItems:g}=t5("all"===l?so:[],e,{searchFields:["name","description"],groupByField:"category"}),f=async e=>{h(!0);try{let t={id:e.id,name:e.name,description:e.description,category:"custom",blocks:e.blocks.map((e,t)=>({type:e.type,content:e.content,style:e.style||{},order:t,depth:0}))};await u(t),eR.toast.success(`Template "${e.name}" inserted successfully!`)}catch(t){eF.error("TEMPLATE_ADD","Failed to insert template",{templateId:e.id,error:t}),eR.toast.error(t.message||"Failed to insert template")}finally{h(!1)}},b=e=>{c(e)},v=()=>{c(null)};return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tq.Sparkles,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),(0,t.jsx)("h2",{className:"font-semibold text-sm sm:text-base",children:"Templates"}),(0,t.jsxs)(o.Badge,{variant:"secondary",className:"ml-auto text-[10px] sm:text-xs",children:[so.length," available"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Search,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none"}),(0,t.jsx)(J.Input,{placeholder:"Search templates or description...",value:e,onChange:e=>a(e.target.value),className:"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary"})]})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 flex gap-1.5 sm:gap-2 p-2 sm:p-3 border-b border-gray-200 overflow-x-auto bg-white scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:[(0,t.jsxs)(i.Button,{variant:"all"===l?"default":"outline",size:"sm",onClick:()=>r("all"),className:"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5",children:[(0,t.jsx)(tq.Sparkles,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"All Templates"}),(0,t.jsx)("span",{className:"sm:hidden",children:"All"})]}),Object.keys(sn).map(e=>{let s=sn[e],a=s.icon;return(0,t.jsxs)(i.Button,{variant:l===e?"default":"outline",size:"sm",onClick:()=>r(e),className:"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5",children:[(0,t.jsx)(a,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:s.label}),(0,t.jsx)("span",{className:"sm:hidden",children:s.label.split(" ")[0]})]},e)})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:"all"===l?(0,t.jsx)("div",{className:"space-y-6 sm:space-y-8",children:Object.keys(sn).map(e=>{let s=g[e]||[];if(0===s.length)return null;let a=sn[e],l=a.icon,r=p[e]||!1;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>m(e),className:"flex items-center gap-2 mb-3 sm:mb-4 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full",children:[(0,t.jsx)(l,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,t.jsx)("span",{children:a.label}),(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs ml-auto",children:s.length}),(0,t.jsx)(C.ChevronDown,{className:(0,tp.cn)("w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0",r?"rotate-0":"-rotate-90")})]}),r&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2",children:s.map(e=>(0,t.jsx)(sc,{template:e,onInsert:f,onPreview:b},e.id))})]},e)})}):x.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:x.map(e=>(0,t.jsx)(sc,{template:e,onInsert:f,onPreview:b},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,t.jsx)(Y.Search,{className:"w-8 h-8 sm:w-10 sm:h-10 mb-2 opacity-50"}),(0,t.jsx)("p",{className:"font-medium",children:"No templates found"}),(0,t.jsx)("p",{className:"text-[10px] sm:text-xs mt-1",children:"Try a different search term or category"})]})}),(0,t.jsx)("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500",children:[(0,t.jsx)(tq.Sparkles,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,t.jsx)("span",{children:"Double-click to insert | üëÅÔ∏è Preview for details"})]})}),(0,t.jsx)(D.Dialog,{open:!!n,onOpenChange:()=>v(),children:(0,t.jsx)(D.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-auto",children:n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsxs)(D.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:n.preview}),n.name]}),(0,t.jsx)(D.DialogDescription,{children:n.description})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[(0,t.jsxs)(o.Badge,{variant:"secondary",className:"gap-1.5",children:[s.default.createElement(sn[n.category].icon,{className:"w-3.5 h-3.5"}),sn[n.category].label]}),(0,t.jsxs)(o.Badge,{variant:"outline",children:[n.blockCount," blocks"]}),n.popularity&&(0,t.jsx)(o.Badge,{className:"hot"===n.popularity?"bg-red-500 hover:bg-red-600":"bg-purple-500 hover:bg-purple-600",children:"hot"===n.popularity?"üî• Hot":"‚ú® New"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Blocks included:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:n.blocks.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded text-xs",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded bg-primary/10 flex items-center justify-center text-primary font-semibold",children:s+1}),(0,t.jsx)("span",{className:"capitalize",children:e.type.replace("_"," ")})]},s))})]}),(0,t.jsx)("div",{className:`h-32 rounded-lg bg-gradient-to-br ${n.color} flex items-center justify-center`,children:(0,t.jsx)("div",{className:"text-6xl",children:n.preview})}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(i.Button,{onClick:()=>{f(n),v()},disabled:d,className:"flex-1",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Inserting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Copy,{className:"w-4 h-4 mr-2"}),"Insert Template"]})}),(0,t.jsxs)(i.Button,{onClick:v,variant:"outline",children:[(0,t.jsx)(y.X,{className:"w-4 h-4 mr-2"}),"Close"]})]})]})]})})})]})}var sh=e.i(187588);function sp({id:e,title:a,description:l,subtitle:r,badge:n,color:c,icon:d,metadata:h,isBookmarked:p,onBookmarkToggle:m,onDoubleClick:u,onPrimaryAction:x,actions:g=[],className:y}){let[f,b]=(0,s.useState)(!1);return(0,t.jsxs)(ek.Card,{className:(0,tp.cn)("overflow-hidden hover:border-primary/50 hover:shadow-md transition-all cursor-pointer",f&&"border-primary/50 shadow-md",y),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onDoubleClick:u,title:u?"Double-click to apply":void 0,children:[c&&(0,t.jsx)("div",{className:(0,tp.cn)("h-1 bg-gradient-to-r",c)}),(0,t.jsxs)("div",{className:"p-2.5 sm:p-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-1.5 sm:mb-2 gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5",children:[d&&(0,t.jsx)("span",{className:"flex-shrink-0",children:d}),(0,t.jsx)("h4",{className:"font-semibold text-xs sm:text-sm truncate",children:a}),n&&(0,t.jsx)(o.Badge,{className:(0,tp.cn)("text-[9px] sm:text-[10px] h-4 sm:h-5 px-1 flex-shrink-0","destructive"===n.variant&&"bg-red-500 hover:bg-red-600","secondary"===n.variant&&"bg-gray-500 hover:bg-gray-600",!n.variant&&"bg-blue-500 hover:bg-blue-600"),children:n.label})]}),r&&(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mb-1",children:r}),l&&(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 line-clamp-2",children:l})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m&&(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:(0,tp.cn)("h-6 w-6 sm:h-8 sm:w-8 transition-colors",p?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"),onClick:()=>m?.(),children:(0,t.jsx)(sh.Heart,{className:(0,tp.cn)("h-4 w-4 sm:h-5 sm:w-5",p&&"fill-current")})}),g.length>0&&(0,t.jsxs)(I.DropdownMenu,{children:[(0,t.jsx)(I.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:(0,tp.cn)("h-6 w-6 sm:h-8 sm:w-8 transition-opacity",f?"opacity-100":"opacity-0"),children:(0,t.jsx)(V.MoreVertical,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),(0,t.jsx)(I.DropdownMenuContent,{align:"end",className:"w-40",children:g.map((a,l)=>(0,t.jsxs)(s.default.Fragment,{children:[a.separator&&(0,t.jsx)(I.DropdownMenuSeparator,{}),(0,t.jsxs)(I.DropdownMenuItem,{onClick:a.onClick,className:(0,tp.cn)("text-xs sm:text-sm","destructive"===a.variant&&"text-red-600"),children:[a.icon&&(0,t.jsx)("span",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-2",children:a.icon}),a.label]})]},`${e}-action-${l}`))})]})]})]}),h&&h.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 text-[9px] sm:text-[10px]",children:h.map((s,a)=>(0,t.jsxs)("span",{className:"text-gray-500",children:[(0,t.jsxs)("span",{className:"font-medium text-gray-700",children:[s.label,":"]})," ",s.value]},`${e}-meta-${a}`))})]})]})}let sm="kata_saved_blocks";function su(){let[e,a]=(0,s.useState)([]),[l,r]=(0,s.useState)(""),{blocks:n}=(0,eT.usePageState)(),{handleAddBlock:c}=eZ();(0,s.useEffect)(()=>{d()},[]);let d=()=>{try{let e=localStorage.getItem(sm);e&&a(JSON.parse(e))}catch(e){eF.error("SAVED_BLOCKS_LOAD","Error loading saved blocks",{error:e}),eR.toast.error("Failed to load saved blocks")}},h=e=>{try{localStorage.setItem(sm,JSON.stringify(e)),a(e)}catch(e){eF.error("SAVED_BLOCKS_SAVE","Error saving blocks",{error:e}),eR.toast.error("Failed to save blocks")}},p=()=>{if(0===n.length)return void eR.toast.error("No blocks to save. Add some blocks to your page first.");let t=prompt("Enter a name for this saved block combination:");if(!t)return;let s=prompt("Enter a description (optional):")||"";h([...e,{id:`saved-${Date.now()}`,name:t,description:s,blocks:[...n],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),category:"custom",tags:[],popularity:"new"}]),eR.toast.success(`"${t}" saved successfully!`)},m=async e=>{try{for(let t of e.blocks)await c(t.type);eR.toast.success(`Applied "${e.name}" to page`)}catch(t){eF.error("SAVED_BLOCK_APPLY","Error applying saved block",{blockId:e.id,error:t}),eR.toast.error("Failed to apply saved block")}},{expandedCategories:u,toggleCategory:x,expandAll:g,collapseAll:y}=t3({initialState:{custom:!0}}),{groupedItems:f,isEmpty:b}=t5(e,l,{searchFields:["name","description","tags"],groupByField:"category"}),v=Object.keys(f);return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(t2.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),(0,t.jsx)("h2",{className:"font-semibold text-sm sm:text-base",children:"Saved Blocks"}),(0,t.jsx)(o.Badge,{variant:"secondary",className:"ml-1 text-[10px] sm:text-xs",children:e.length})]}),(0,t.jsxs)("div",{className:"flex gap-1 sm:gap-1.5",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{if(0===e.length)return void eR.toast.error("No saved blocks to export");let t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),s=`saved-blocks-${new Date().toISOString().split("T")[0]}.json`,a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",s),a.click(),eR.toast.success("Blocks exported")},disabled:0===e.length,className:"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0",title:"Export blocks",children:(0,t.jsx)(X.Download,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>{let s=t.target.files?.[0];if(s){let t=new FileReader;t.onload=t=>{try{let s=JSON.parse(t.target?.result),a=[...e,...s];h(a),eR.toast.success(`Imported ${s.length} blocks`)}catch(e){eR.toast.error("Invalid file format. Please check the file.")}},t.readAsText(s)}},t.click()},className:"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0",title:"Import blocks",children:(0,t.jsx)(Z.Upload,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,t.jsxs)(i.Button,{size:"sm",onClick:p,disabled:0===n.length,className:"h-7 sm:h-8 px-2 sm:px-3 text-xs gap-1 flex-shrink-0",title:"Save current page blocks",children:[(0,t.jsx)(Q.Plus,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Save"})]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Search,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none"}),(0,t.jsx)(J.Input,{placeholder:"Search blocks or tags...",value:l,onChange:e=>r(e.target.value),className:"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary"})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,t.jsx)(t2.Package,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50"}),(0,t.jsx)("p",{className:"font-medium text-gray-600",children:"No saved blocks yet"}),(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1 text-center",children:"Create block combinations and save them for quick reuse"}),(0,t.jsxs)(i.Button,{onClick:p,disabled:0===n.length,variant:"outline",size:"sm",className:"text-xs gap-1.5 mt-3 sm:mt-4",children:[(0,t.jsx)(Q.Plus,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Save Current Selection"]})]}):b?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,t.jsx)(Y.Search,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50"}),(0,t.jsx)("p",{className:"font-medium text-gray-600",children:"No blocks found"}),(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1",children:"Try a different search term"})]}):(0,t.jsx)("div",{className:"space-y-4 sm:space-y-6",children:v.map(s=>{let a=f[s]||[],l=u[s]||!1;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>x(s),className:"flex items-center gap-2 mb-2 sm:mb-3 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full",children:[(0,t.jsx)(t2.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,t.jsx)("span",{className:"capitalize",children:s}),(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs ml-auto",children:a.length}),(0,t.jsx)(C.ChevronDown,{className:(0,tp.cn)("w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0",l?"rotate-0":"-rotate-90")})]}),l&&(0,t.jsx)("div",{className:"space-y-2 sm:space-y-2.5 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2",children:a.map(s=>{let a=Math.floor((Date.now()-new Date(s.createdAt).getTime())/864e5);return(0,t.jsx)(sp,{id:s.id,title:s.name,description:s.description,badge:a<=7?{label:"‚ú® New",variant:"default"}:void 0,isBookmarked:s.isBookmarked,onBookmarkToggle:()=>{var t;let a;return t=s.id,h(e.map(e=>e.id===t?{...e,isBookmarked:!e.isBookmarked}:e)),a=e.find(e=>e.id===t),void(a?.isBookmarked?eR.toast.success("Bookmark removed"):eR.toast.success("Block bookmarked!"))},onDoubleClick:()=>{eF.info("BLOCK_APPLY","Double-click applying saved block",{blockId:s.id}),m(s)},metadata:[{label:"Blocks",value:s.blocks.length},{label:"Created",value:new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}],actions:[{label:"Apply to Page",icon:(0,t.jsx)(Q.Plus,{className:"w-4 h-4"}),onClick:()=>m(s)},{label:"Duplicate",icon:(0,t.jsx)(W.Copy,{className:"w-4 h-4"}),onClick:()=>{h([...e,{...s,id:`saved-${Date.now()}`,name:`${s.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),popularity:null}]),eR.toast.success("Block duplicated")}},{separator:!0,label:"",onClick:()=>{}},{label:"Delete",icon:(0,t.jsx)(G.Trash2,{className:"w-4 h-4"}),variant:"destructive",onClick:()=>{var t;return t=s.id,void(confirm("Delete this saved block? This cannot be undone.")&&(h(e.filter(e=>e.id!==t)),eR.toast.success("Block deleted")))}}]},s.id)})})]},s)})})}),e.length>0&&(0,t.jsx)("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500",children:[(0,t.jsx)(tR.Zap,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,t.jsx)("span",{children:"Double-click to apply | üìã Drag to canvas"})]})})]})}function sx({onClose:e}){let[a,l]=(0,s.useState)("elements");return(0,t.jsxs)("div",{className:"w-full sm:w-80 md:w-96 bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 flex flex-col shadow-lg",children:[(0,t.jsxs)("div",{className:"h-11 sm:h-12 border-b border-gray-200 flex items-center justify-between px-3 sm:px-4 bg-gradient-to-r from-blue-50 via-white to-white",children:[(0,t.jsxs)("h2",{className:"font-semibold text-sm sm:text-base flex items-center gap-2",children:[(0,t.jsx)(t$.default,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),(0,t.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text text-transparent",children:"Components"})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:e,className:"h-8 w-8 sm:h-9 sm:w-9 hover:bg-red-100 hover:text-red-600",children:(0,t.jsx)(y.X,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),(0,t.jsxs)(n.Tabs,{value:a,onValueChange:e=>l(e),className:"flex-1 min-h-0 overflow-y-auto",children:[(0,t.jsxs)(n.TabsList,{className:"w-full justify-start rounded-none border-b bg-white h-auto p-1",children:[(0,t.jsxs)(n.TabsTrigger,{value:"elements",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,t.jsx)(t$.default,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Elements"})]}),(0,t.jsxs)(n.TabsTrigger,{value:"templates",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,t.jsx)(tq.Sparkles,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Templates"})]}),(0,t.jsxs)(n.TabsTrigger,{value:"saved",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,t.jsx)(tJ.Bookmark,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Saved"})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0 bg-gradient-to-b from-white to-gray-50",children:[(0,t.jsx)(n.TabsContent,{value:"elements",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,t.jsx)(se,{})}),(0,t.jsx)(n.TabsContent,{value:"templates",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,t.jsx)(sd,{})}),(0,t.jsx)(n.TabsContent,{value:"saved",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,t.jsx)(su,{})})]})]})]})}var sg=e.i(724301),sg=sg,sy=e.i(103243),sy=sy,sf=e.i(731558),sf=sf,sb=e.i(368670),sv=e.i(232743),sv=sv,sj=e.i(769590),sj=sj,sw=e.i(44231),sw=sw,sN=e.i(381163),sN=sN,sk=e.i(559694),sk=sk,sT=e.i(643336),sT=sT,sC=e.i(76504),sC=sC,sS=e.i(597066),sS=sS,sB=e.i(459296),sB=sB,tk=tk;function sE({value:e,onChange:s}){let a=e.display||"flex";return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Display"}),(0,t.jsx)(n.Tabs,{value:a,onValueChange:e=>s({display:e}),children:(0,t.jsxs)(n.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(n.TabsTrigger,{value:"block",className:"text-xs",children:"Block"}),(0,t.jsx)(n.TabsTrigger,{value:"flex",className:"text-xs",children:"Flex"}),(0,t.jsx)(n.TabsTrigger,{value:"grid",className:"text-xs",children:"Grid"}),(0,t.jsx)(n.TabsTrigger,{value:"inline-block",className:"text-xs",children:"Inline"})]})})]}),"flex"===a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Direction"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,t.jsx)(i.Button,{variant:"row"===e.flexDirection?"default":"outline",size:"sm",onClick:()=>s({flexDirection:"row"}),className:"h-8",children:(0,t.jsx)(sB.default,{className:"h-4 w-4 rotate-90"})}),(0,t.jsx)(i.Button,{variant:"column"===e.flexDirection?"default":"outline",size:"sm",onClick:()=>s({flexDirection:"column"}),className:"h-8",children:(0,t.jsx)(tk.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"row-reverse"===e.flexDirection?"default":"outline",size:"sm",onClick:()=>s({flexDirection:"row-reverse"}),className:"h-8",children:(0,t.jsx)(sB.default,{className:"h-4 w-4 rotate-90 scale-x-[-1]"})}),(0,t.jsx)(i.Button,{variant:"column-reverse"===e.flexDirection?"default":"outline",size:"sm",onClick:()=>s({flexDirection:"column-reverse"}),className:"h-8",children:(0,t.jsx)(tk.default,{className:"h-4 w-4 scale-y-[-1]"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Justify"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-1",children:[(0,t.jsx)(i.Button,{variant:"flex-start"===e.justifyContent?"default":"outline",size:"sm",onClick:()=>s({justifyContent:"flex-start"}),className:"h-8",children:(0,t.jsx)(sv.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"center"===e.justifyContent?"default":"outline",size:"sm",onClick:()=>s({justifyContent:"center"}),className:"h-8",children:(0,t.jsx)(sj.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"flex-end"===e.justifyContent?"default":"outline",size:"sm",onClick:()=>s({justifyContent:"flex-end"}),className:"h-8",children:(0,t.jsx)(sw.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"space-between"===e.justifyContent?"default":"outline",size:"sm",onClick:()=>s({justifyContent:"space-between"}),className:"h-8 col-span-3",children:(0,t.jsx)(sN.default,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Align"}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,t.jsx)(i.Button,{variant:"flex-start"===e.alignItems?"default":"outline",size:"sm",onClick:()=>s({alignItems:"flex-start"}),className:"h-8",children:(0,t.jsx)(sk.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"center"===e.alignItems?"default":"outline",size:"sm",onClick:()=>s({alignItems:"center"}),className:"h-8",children:(0,t.jsx)(sT.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"flex-end"===e.alignItems?"default":"outline",size:"sm",onClick:()=>s({alignItems:"flex-end"}),className:"h-8",children:(0,t.jsx)(sC.default,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"stretch"===e.alignItems?"default":"outline",size:"sm",onClick:()=>s({alignItems:"stretch"}),className:"h-8",children:(0,t.jsx)(sS.default,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Wrap"}),(0,t.jsx)(n.Tabs,{value:e.flexWrap||"nowrap",onValueChange:e=>s({flexWrap:e}),children:(0,t.jsxs)(n.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(n.TabsTrigger,{value:"nowrap",className:"text-xs",children:"No Wrap"}),(0,t.jsx)(n.TabsTrigger,{value:"wrap",className:"text-xs",children:"Wrap"}),(0,t.jsx)(n.TabsTrigger,{value:"wrap-reverse",className:"text-xs",children:"Reverse"})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Gap"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.Input,{type:"number",min:"0",value:e.gap||0,onChange:e=>s({gap:parseInt(e.target.value)||0}),className:"h-8 text-xs"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]})]}),"grid"===a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Columns"}),(0,t.jsx)(J.Input,{value:e.gridTemplateColumns||"repeat(3, 1fr)",onChange:e=>s({gridTemplateColumns:e.target.value}),placeholder:"repeat(3, 1fr)",className:"h-8 text-xs font-mono"}),(0,t.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,6].map(e=>(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>s({gridTemplateColumns:`repeat(${e}, 1fr)`}),className:"h-6 px-2 text-xs",children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Rows"}),(0,t.jsx)(J.Input,{value:e.gridTemplateRows||"auto",onChange:e=>s({gridTemplateRows:e.target.value}),placeholder:"auto",className:"h-8 text-xs font-mono"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Gap"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.Input,{type:"number",min:"0",value:e.gap||0,onChange:e=>s({gap:parseInt(e.target.value)||0}),className:"h-8 text-xs"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]})]})]})}var sI=e.i(983551),sD=e.i(5253),sD=sD;function sA({type:e,value:a,onChange:l}){let[r,o]=(0,s.useState)(!0),n=(e,t)=>{let s=parseInt(t)||0;r?l({top:s,right:s,bottom:s,left:s}):l({...a,[e]:s})};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium capitalize",children:e}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>o(!r),className:"h-6 px-2",children:r?(0,t.jsx)(sI.Link,{className:"h-3 w-3"}):(0,t.jsx)(sD.default,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"relative bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex justify-center mb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(J.Input,{type:"number",value:a.top,onChange:e=>n("top",e.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(J.Input,{type:"number",value:a.left,onChange:e=>n("left",e.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]}),(0,t.jsx)("div",{className:`px-4 py-3 rounded border-2 ${"padding"===e?"bg-blue-50 border-blue-300":"bg-orange-50 border-orange-300"}`,children:(0,t.jsx)("div",{className:"text-xs font-medium text-center text-gray-600",children:"padding"===e?"Content":"Element"})}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(J.Input,{type:"number",value:a.right,onChange:e=>n("right",e.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(J.Input,{type:"number",value:a.bottom,onChange:e=>n("bottom",e.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})}),(0,t.jsx)("div",{className:"absolute top-1 left-2 text-[10px] text-gray-400",children:"T"}),(0,t.jsx)("div",{className:"absolute bottom-1 left-2 text-[10px] text-gray-400",children:"B"}),(0,t.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-1 text-[10px] text-gray-400",children:"L"}),(0,t.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 right-1 text-[10px] text-gray-400",children:"R"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:[0,4,8,16,24,32].map(e=>(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>l({top:e,right:e,bottom:e,left:e}),className:"h-6 px-2 text-xs",children:e},e))})]})}var sD=sD;function sL(){return(sL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function sP(e,t){if(null==e)return{};var s,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t.indexOf(s=r[a])>=0||(l[s]=e[s]);return l}function sR(e){var t=(0,s.useRef)(e),a=(0,s.useRef)(function(e){t.current&&t.current(e)});return t.current=e,a.current}var sO=function(e,t,s){return void 0===t&&(t=0),void 0===s&&(s=1),e>s?s:e<t?t:e},sF=function(e){return"touches"in e},sz=function(e){return e&&e.ownerDocument.defaultView||self},sM=function(e,t,s){var a=e.getBoundingClientRect(),l=sF(t)?function(e,t){for(var s=0;s<e.length;s++)if(e[s].identifier===t)return e[s];return e[0]}(t.touches,s):t;return{left:sO((l.pageX-(a.left+sz(e).pageXOffset))/a.width),top:sO((l.pageY-(a.top+sz(e).pageYOffset))/a.height)}},s_=function(e){sF(e)||e.preventDefault()},sH=s.default.memo(function(e){var t=e.onMove,a=e.onKey,l=sP(e,["onMove","onKey"]),r=(0,s.useRef)(null),i=sR(t),o=sR(a),n=(0,s.useRef)(null),c=(0,s.useRef)(!1),d=(0,s.useMemo)(function(){var e=function(e){s_(e),(sF(e)?e.touches.length>0:e.buttons>0)&&r.current?i(sM(r.current,e,n.current)):s(!1)},t=function(){return s(!1)};function s(s){var a=c.current,l=sz(r.current),i=s?l.addEventListener:l.removeEventListener;i(a?"touchmove":"mousemove",e),i(a?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,a=r.current;if(a&&(s_(t),(!c.current||sF(t))&&a)){if(sF(t)){c.current=!0;var l=t.changedTouches||[];l.length&&(n.current=l[0].identifier)}a.focus(),i(sM(a,t,n.current)),s(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},s]},[o,i]),h=d[0],p=d[1],m=d[2];return(0,s.useEffect)(function(){return m},[m]),s.default.createElement("div",sL({},l,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:r,onKeyDown:p,tabIndex:0,role:"slider"}))}),s$=function(e){return e.filter(Boolean).join(" ")},sU=function(e){var t=e.color,a=e.left,l=e.top,r=s$(["react-colorful__pointer",e.className]);return s.default.createElement("div",{className:r,style:{top:100*(void 0===l?.5:l)+"%",left:100*a+"%"}},s.default.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},sX=function(e,t,s){return void 0===t&&(t=0),void 0===s&&(s=Math.pow(10,t)),Math.round(s*e)/s},sW=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?sX(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?sX(parseInt(e.substring(6,8),16)/255,2):1}},sG=function(e){var t=e.s,s=e.v,a=e.a,l=(200-t)*s/100;return{h:sX(e.h),s:sX(l>0&&l<200?t*s/100/(l<=100?l:200-l)*100:0),l:sX(l/2),a:sX(a,2)}},sV=function(e){var t=sG(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},sK=function(e){var t=sG(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},sq=function(e){var t=e.h,s=e.s,a=e.v,l=e.a;t=t/360*6,s/=100,a/=100;var r=Math.floor(t),i=a*(1-s),o=a*(1-(t-r)*s),n=a*(1-(1-t+r)*s),c=r%6;return{r:sX(255*[a,o,i,i,n,a][c]),g:sX(255*[n,a,a,o,i,i][c]),b:sX(255*[i,i,n,a,a,o][c]),a:sX(l,2)}},sJ=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},sY=function(e){var t=e.r,s=e.g,a=e.b,l=e.a,r=l<1?sJ(sX(255*l)):"";return"#"+sJ(t)+sJ(s)+sJ(a)+r},sQ=function(e){var t=e.r,s=e.g,a=e.b,l=e.a,r=Math.max(t,s,a),i=r-Math.min(t,s,a),o=i?r===t?(s-a)/i:r===s?2+(a-t)/i:4+(t-s)/i:0;return{h:sX(60*(o<0?o+6:o)),s:sX(r?i/r*100:0),v:sX(r/255*100),a:l}},sZ=s.default.memo(function(e){var t=e.hue,a=e.onChange,l=s$(["react-colorful__hue",e.className]);return s.default.createElement("div",{className:l},s.default.createElement(sH,{onMove:function(e){a({h:360*e.left})},onKey:function(e){a({h:sO(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":sX(t),"aria-valuemax":"360","aria-valuemin":"0"},s.default.createElement(sU,{className:"react-colorful__hue-pointer",left:t/360,color:sV({h:t,s:100,v:100,a:1})})))}),s0=s.default.memo(function(e){var t=e.hsva,a=e.onChange,l={backgroundColor:sV({h:t.h,s:100,v:100,a:1})};return s.default.createElement("div",{className:"react-colorful__saturation",style:l},s.default.createElement(sH,{onMove:function(e){a({s:100*e.left,v:100-100*e.top})},onKey:function(e){a({s:sO(t.s+100*e.left,0,100),v:sO(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+sX(t.s)+"%, Brightness "+sX(t.v)+"%"},s.default.createElement(sU,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:sV(t)})))}),s1=function(e,t){if(e===t)return!0;for(var s in e)if(e[s]!==t[s])return!1;return!0};function s2(e,t,a){var l=sR(a),r=(0,s.useState)(function(){return e.toHsva(t)}),i=r[0],o=r[1],n=(0,s.useRef)({color:t,hsva:i});return(0,s.useEffect)(function(){if(!e.equal(t,n.current.color)){var s=e.toHsva(t);n.current={hsva:s,color:t},o(s)}},[t,e]),(0,s.useEffect)(function(){var t;s1(i,n.current.hsva)||e.equal(t=e.fromHsva(i),n.current.color)||(n.current={hsva:i,color:t},l(t))},[i,e,l]),[i,(0,s.useCallback)(function(e){o(function(t){return Object.assign({},t,e)})},[])]}var s4,s5="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,s3=new Map,s6=function(e){s5(function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!s3.has(t)){var s=t.createElement("style");s.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',s3.set(t,s);var a=s4||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);a&&s.setAttribute("nonce",a),t.head.appendChild(s)}},[])},s8=function(e){var t=e.className,a=e.colorModel,l=e.color,r=void 0===l?a.defaultColor:l,i=e.onChange,o=sP(e,["className","colorModel","color","onChange"]),n=(0,s.useRef)(null);s6(n);var c=s2(a,r,i),d=c[0],h=c[1],p=s$(["react-colorful",t]);return s.default.createElement("div",sL({},o,{ref:n,className:p}),s.default.createElement(s0,{hsva:d,onChange:h}),s.default.createElement(sZ,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},s9={defaultColor:"000",toHsva:function(e){return sQ(sW(e))},fromHsva:function(e){return sY(sq({h:e.h,s:e.s,v:e.v,a:1}))},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||s1(sW(e),sW(t))}},s7=function(e){return s.default.createElement(s8,sL({},e,{colorModel:s9}))},ae=function(e){var t=e.className,a=e.hsva,l=e.onChange,r={backgroundImage:"linear-gradient(90deg, "+sK(Object.assign({},a,{a:0}))+", "+sK(Object.assign({},a,{a:1}))+")"},i=s$(["react-colorful__alpha",t]),o=sX(100*a.a);return s.default.createElement("div",{className:i},s.default.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),s.default.createElement(sH,{onMove:function(e){l({a:e.left})},onKey:function(e){l({a:sO(a.a+e.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},s.default.createElement(sU,{className:"react-colorful__alpha-pointer",left:a.a,color:sK(a)})))},at=function(e){var t=e.className,a=e.colorModel,l=e.color,r=void 0===l?a.defaultColor:l,i=e.onChange,o=sP(e,["className","colorModel","color","onChange"]),n=(0,s.useRef)(null);s6(n);var c=s2(a,r,i),d=c[0],h=c[1],p=s$(["react-colorful",t]);return s.default.createElement("div",sL({},o,{ref:n,className:p}),s.default.createElement(s0,{hsva:d,onChange:h}),s.default.createElement(sZ,{hue:d.h,onChange:h}),s.default.createElement(ae,{hsva:d,onChange:h,className:"react-colorful__last-control"}))},as={defaultColor:{r:0,g:0,b:0,a:1},toHsva:sQ,fromHsva:sq,equal:s1},aa=function(e){return s.default.createElement(at,sL({},e,{colorModel:as}))},al=e.i(340043),ar=e.i(214439),ar=ar;let ai=["#000000","#FFFFFF","#F3F4F6","#E5E7EB","#D1D5DB","#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#84CC16","#06B6D4"];function ao({label:e,value:a,onChange:l,showOpacity:r=!0,showGradient:o=!1}){var c;let d,[h,p]=(0,s.useState)("solid"),[m,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)((c=a||"#000000",(d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16),a:1}:{r:0,g:0,b:0,a:1})),y=e=>{g(e);let{r:t,g:s,b:a,a:r}=e;r<1?l(`rgba(${t}, ${s}, ${a}, ${r})`):l(`#${(0x1000000+(t<<16)+(s<<8)+a).toString(16).slice(1)}`)};return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:e}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(al.Popover,{open:m,onOpenChange:u,children:[(0,t.jsx)(al.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"outline",className:"w-12 h-9 p-1",style:{backgroundColor:a||"#ffffff"},children:(0,t.jsx)("span",{className:"sr-only",children:"Pick color"})})}),(0,t.jsx)(al.PopoverContent,{className:"w-auto p-3",align:"start",children:(0,t.jsxs)("div",{className:"space-y-3",children:[o&&(0,t.jsx)(n.Tabs,{value:h,onValueChange:e=>p(e),children:(0,t.jsxs)(n.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(n.TabsTrigger,{value:"solid",children:"Solid"}),(0,t.jsx)(n.TabsTrigger,{value:"gradient",children:"Gradient"})]})}),"solid"===h&&(0,t.jsxs)("div",{className:"space-y-3",children:[r?(0,t.jsx)(aa,{color:x,onChange:y}):(0,t.jsx)(s7,{color:a||"#000000",onChange:l}),r&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(A.Label,{className:"text-xs",children:"Opacity"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:Math.round(100*x.a),onChange:e=>{let t=parseInt(e.target.value)/100;y({...x,a:t})},className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,t.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(100*x.a),"%"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{className:"text-xs mb-2 block",children:"Presets"}),(0,t.jsx)("div",{className:"grid grid-cols-5 gap-1",children:ai.map(e=>(0,t.jsx)("button",{onClick:()=>l(e),className:"w-full aspect-square rounded border border-gray-200 hover:scale-110 transition-transform",style:{backgroundColor:e},title:e},e))})]})]}),"gradient"===h&&(0,t.jsx)("div",{className:"text-xs text-gray-500 text-center py-4",children:"Gradient editor coming soon"})]})})]}),(0,t.jsx)(J.Input,{value:a||"",onChange:e=>l(e.target.value),placeholder:"#000000",className:"flex-1 h-9 text-xs font-mono"}),(0,t.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-9 w-9",disabled:!0,children:(0,t.jsx)(ar.default,{className:"h-4 w-4"})})]})]})}let an=[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"},{value:"double",label:"Double"},{value:"groove",label:"Groove"},{value:"ridge",label:"Ridge"},{value:"inset",label:"Inset"},{value:"outset",label:"Outset"}],ac=[0,4,8,12,16,24,32,9999];function ad({value:e,onChange:a}){let[l,r]=(0,s.useState)(!0),o=e.radius||{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},n=(t,s)=>{l?a({...e,radius:{topLeft:s,topRight:s,bottomRight:s,bottomLeft:s}}):a({...e,radius:{...o,[t]:s}})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Width"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.Input,{type:"number",min:"0",max:"20",value:e.width||0,onChange:e=>a({width:parseInt(e.target.value)||0}),className:"h-8 text-xs"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Style"}),(0,t.jsx)("select",{value:e.style||"solid",onChange:e=>a({style:e.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:an.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsx)(ao,{label:"Border Color",value:e.color||"#000000",onChange:e=>a({color:e}),showOpacity:!0}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Border Radius"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>r(!l),className:"h-6 px-2",children:l?(0,t.jsx)(sI.Link,{className:"h-3 w-3"}):(0,t.jsx)(sD.default,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2",children:(0,t.jsx)(J.Input,{type:"number",min:"0",value:o.topLeft,onChange:e=>n("topLeft",parseInt(e.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,t.jsx)("div",{className:"absolute top-0 right-0 translate-x-1/2 -translate-y-1/2",children:(0,t.jsx)(J.Input,{type:"number",min:"0",value:o.topRight,onChange:e=>n("topRight",parseInt(e.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2",children:(0,t.jsx)(J.Input,{type:"number",min:"0",value:o.bottomRight,onChange:e=>n("bottomRight",parseInt(e.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 -translate-x-1/2 translate-y-1/2",children:(0,t.jsx)(J.Input,{type:"number",min:"0",value:o.bottomLeft,onChange:e=>n("bottomLeft",parseInt(e.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,t.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-blue-100 to-purple-100 border-4 border-blue-500 transition-all",style:{borderTopLeftRadius:`${o.topLeft}px`,borderTopRightRadius:`${o.topRight}px`,borderBottomRightRadius:`${o.bottomRight}px`,borderBottomLeftRadius:`${o.bottomLeft}px`,borderWidth:`${e.width||0}px`,borderStyle:e.style||"solid",borderColor:e.color||"#3B82F6"}})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:ac.map(s=>(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{a({...e,radius:{topLeft:s,topRight:s,bottomRight:s,bottomLeft:s}})},className:"h-7 px-2 text-xs",children:9999===s?"‚àû":s},s))})]})]})}function ah({selectedBlock:e,onStyleChange:a}){let[l,r]=(0,s.useState)({}),[o,n]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{r({}),n(!1)},[e?.id]),!e)return(0,t.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"Select a block to edit its styles"});let c=e.style||{},d={...c,...l},h=e=>{console.log("StylePanel - handleStyleUpdate called with:",e),r(t=>({...t,...e})),n(!0)};return(0,t.jsxs)("div",{className:"space-y-3 p-3",children:[o&&(0,t.jsxs)("div",{className:"sticky top-0 z-10 bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Save,{className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Unsaved changes"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{onClick:()=>{r({}),n(!1)},variant:"ghost",size:"sm",className:"h-7 text-xs",children:"Discard"}),(0,t.jsx)(i.Button,{onClick:()=>{if(!o)return;console.log("StylePanel - Saving pending styles:",l);let e={...c,...l};console.log("StylePanel - merged styles:",e),a(e),r({}),n(!1)},size:"sm",className:"h-7 text-xs",children:"Save"})]})]}),(0,t.jsxs)(sb.Accordion,{type:"multiple",defaultValue:["layout","spacing","typography","colors"],className:"w-full",children:[(0,t.jsxs)(sb.AccordionItem,{value:"layout",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"üé® Layout"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsx)(sE,{value:{display:d.display,flexDirection:d.flexDirection,justifyContent:d.justifyContent,alignItems:d.alignItems,gap:d.gap,gridTemplateColumns:d.gridTemplateColumns,gridTemplateRows:d.gridTemplateRows,flexWrap:d.flexWrap},onChange:e=>h(e)})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"spacing",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"üìê Spacing"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium mb-2 block",children:"Padding"}),(0,t.jsx)(sA,{type:"padding",value:{top:d.paddingTop||0,right:d.paddingRight||0,bottom:d.paddingBottom||0,left:d.paddingLeft||0},onChange:e=>h({paddingTop:e.top,paddingRight:e.right,paddingBottom:e.bottom,paddingLeft:e.left})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium mb-2 block",children:"Margin"}),(0,t.jsx)(sA,{type:"margin",value:{top:d.marginTop||0,right:d.marginRight||0,bottom:d.marginBottom||0,left:d.marginLeft||0},onChange:e=>h({marginTop:e.top,marginRight:e.right,marginBottom:e.bottom,marginLeft:e.left})})]})]})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"typography",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"‚úçÔ∏è Typography"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Font Size"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.Input,{type:"number",min:"8",max:"72",value:parseInt(d.fontSize||16),onChange:e=>h({fontSize:`${e.target.value}px`}),className:"h-8 text-xs"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Font Weight"}),(0,t.jsxs)("select",{value:d.fontWeight||"normal",onChange:e=>h({fontWeight:e.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:[(0,t.jsx)("option",{value:"100",children:"Thin"}),(0,t.jsx)("option",{value:"300",children:"Light"}),(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"500",children:"Medium"}),(0,t.jsx)("option",{value:"600",children:"Semibold"}),(0,t.jsx)("option",{value:"bold",children:"Bold"}),(0,t.jsx)("option",{value:"800",children:"Extra Bold"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Line Height"}),(0,t.jsx)(J.Input,{type:"number",min:"1",max:"3",step:"0.1",value:parseFloat(d.lineHeight||1.5),onChange:e=>h({lineHeight:e.target.value}),className:"h-8 text-xs"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Text Align"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1",children:["left","center","right","justify"].map(e=>(0,t.jsx)(i.Button,{variant:d.textAlign===e?"default":"outline",size:"sm",onClick:()=>h({textAlign:e}),className:"h-8 text-xs capitalize",children:e},e))})]})]})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"colors",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"üé® Colors"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(ao,{label:"Text Color",value:d.color||"#000000",onChange:e=>h({color:e}),showOpacity:!0}),(0,t.jsx)(ao,{label:"Background Color",value:d.backgroundColor||"#ffffff",onChange:e=>h({backgroundColor:e}),showOpacity:!0})]})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"border",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"üî≤ Border"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsx)(ad,{value:{width:parseInt(d.borderWidth||0),style:d.borderStyle||"solid",color:d.borderColor||"#000000",radius:{topLeft:parseInt(d.borderTopLeftRadius||0),topRight:parseInt(d.borderTopRightRadius||0),bottomRight:parseInt(d.borderBottomRightRadius||0),bottomLeft:parseInt(d.borderBottomLeftRadius||0)}},onChange:e=>h({borderWidth:`${e.width}px`,borderStyle:e.style,borderColor:e.color,borderTopLeftRadius:`${e.radius?.topLeft||0}px`,borderTopRightRadius:`${e.radius?.topRight||0}px`,borderBottomRightRadius:`${e.radius?.bottomRight||0}px`,borderBottomLeftRadius:`${e.radius?.bottomLeft||0}px`})})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"effects",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"‚ú® Effects"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Opacity"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:100*parseFloat(d.opacity||1),onChange:e=>h({opacity:parseInt(e.target.value)/100}),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,t.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(100*parseFloat(d.opacity||1)),"%"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Shadow"}),(0,t.jsxs)("select",{value:d.boxShadow||"none",onChange:e=>h({boxShadow:e.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:[(0,t.jsx)("option",{value:"none",children:"None"}),(0,t.jsx)("option",{value:"0 1px 2px 0 rgb(0 0 0 / 0.05)",children:"Small"}),(0,t.jsx)("option",{value:"0 4px 6px -1px rgb(0 0 0 / 0.1)",children:"Medium"}),(0,t.jsx)("option",{value:"0 10px 15px -3px rgb(0 0 0 / 0.1)",children:"Large"}),(0,t.jsx)("option",{value:"0 20px 25px -5px rgb(0 0 0 / 0.1)",children:"Extra Large"}),(0,t.jsx)("option",{value:"0 25px 50px -12px rgb(0 0 0 / 0.25)",children:"2XL"})]})]})]})})]}),(0,t.jsxs)(sb.AccordionItem,{value:"size",children:[(0,t.jsx)(sb.AccordionTrigger,{className:"text-sm font-semibold",children:"üìè Size"}),(0,t.jsx)(sb.AccordionContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Width"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(J.Input,{value:d.width||"auto",onChange:e=>h({width:e.target.value}),placeholder:"auto, 100%, 300px",className:"h-8 text-xs"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Height"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(J.Input,{value:d.height||"auto",onChange:e=>h({height:e.target.value}),placeholder:"auto, 100%, 300px",className:"h-8 text-xs"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Min Width"}),(0,t.jsx)(J.Input,{value:d.minWidth||"",onChange:e=>h({minWidth:e.target.value}),placeholder:"0",className:"h-8 text-xs"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(A.Label,{className:"text-xs font-medium",children:"Max Width"}),(0,t.jsx)(J.Input,{value:d.maxWidth||"",onChange:e=>h({maxWidth:e.target.value}),placeholder:"none",className:"h-8 text-xs"})]})]})]})})]})]})]})}function ap(){let[e,t]=(0,s.useState)(eF.getLogs()),[a,l]=(0,s.useState)("all"),[r,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!r)return;let e=setInterval(()=>{t(eF.getLogs())},500);return()=>clearInterval(e)},[r]),"all"===a||e.filter(e=>e.level===a),null}function am({device:e,onClose:a}){let[l,r]=(0,s.useState)("style"),[o,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),{selectedBlockId:f,selectedBlock:b}=(0,eT.usePageState)(),{handleUpdateBlockStyle:v,handleBlockUpdate:j,handleBlockDelete:N}=eZ(),k=e=>{f&&b&&j(f,e,b.style)};return(0,s.useEffect)(()=>{b?.style?(u(b.style.customClasses||""),g(b.style.inlineStyles||"")):(u(""),g(""))},[f,b]),(0,t.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"h-12 flex items-center justify-between px-4",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Properties"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:a,children:(0,t.jsx)(y.X,{className:"w-4 h-4"})})]}),f&&(0,t.jsxs)("div",{className:"px-4 pb-3 flex gap-2",children:[(0,t.jsxs)(i.Button,{onClick:()=>{p(!h)},size:"sm",variant:"outline",className:"flex-1",title:h?"Unlock block":"Lock block",children:[h?(0,t.jsx)(e6.Lock,{className:"w-3.5 h-3.5 mr-1.5"}):(0,t.jsx)(sy.default,{className:"w-3.5 h-3.5 mr-1.5"}),(0,t.jsx)("span",{className:"text-xs",children:h?"Locked":"Lock"})]}),(0,t.jsxs)(i.Button,{onClick:()=>{f&&b&&console.log("Duplicate block:",f)},size:"sm",variant:"outline",className:"flex-1",title:"Duplicate block",disabled:h,children:[(0,t.jsx)(W.Copy,{className:"w-3.5 h-3.5 mr-1.5"}),(0,t.jsx)("span",{className:"text-xs",children:"Duplicate"})]}),(0,t.jsxs)(i.Button,{onClick:()=>{f&&(o?(N(f),d(!1)):(d(!0),setTimeout(()=>d(!1),3e3)))},size:"sm",variant:o?"destructive":"outline",className:"flex-1",title:"Delete block",disabled:h,children:[(0,t.jsx)(G.Trash2,{className:"w-3.5 h-3.5 mr-1.5"}),(0,t.jsx)("span",{className:"text-xs",children:o?"Confirm?":"Delete"})]})]})]}),f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Editing for: ",(0,t.jsx)("span",{className:"font-semibold capitalize",children:e})]})}),(0,t.jsxs)(n.Tabs,{value:l,onValueChange:e=>r(e),className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)(n.TabsList,{className:"w-full justify-start rounded-none border-b flex-shrink-0",children:[(0,t.jsxs)(n.TabsTrigger,{value:"style",className:"flex-1 gap-2",children:[(0,t.jsx)(sg.default,{className:"w-4 h-4"}),"Style"]}),(0,t.jsxs)(n.TabsTrigger,{value:"settings",className:"flex-1 gap-2",children:[(0,t.jsx)(w.Settings,{className:"w-4 h-4"}),"Settings"]}),(0,t.jsxs)(n.TabsTrigger,{value:"logs",className:"flex-1 gap-2",children:[(0,t.jsx)(q.FileText,{className:"w-4 h-4"}),"Logs"]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0",children:[(0,t.jsx)(n.TabsContent,{value:"style",className:"mt-0 h-full",children:(0,t.jsx)(ah,{selectedBlock:b,onStyleChange:e=>{console.log("RightPanel - handleStyleChange called with:",e),console.log("RightPanel - selectedBlockId:",f),f&&v(f,e)}})}),(0,t.jsx)(n.TabsContent,{value:"settings",className:"mt-0 p-4 h-full overflow-y-auto",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(w.Settings,{className:"w-4 h-4"}),"Block Information"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm bg-gray-50 p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ID:"}),(0,t.jsx)("span",{className:"font-mono text-xs bg-white px-2 py-1 rounded border",children:f})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,t.jsx)("span",{className:"font-medium capitalize bg-primary/10 text-primary px-2 py-1 rounded text-xs",children:b?.type?.replace(/_/g," ")||"Unknown"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Order:"}),(0,t.jsxs)("span",{className:"font-medium",children:["#",b?.order??"N/A"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded ${h?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h?"Locked":"Editable"})]})]})]}),b?.content&&!h&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Quick Edit Content"}),(0,t.jsxs)("div",{className:"space-y-3",children:[void 0!==b.content.text&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-text",className:"text-xs",children:"Text Content"}),(0,t.jsx)(L.Textarea,{id:"block-text",value:b.content.text||"",onChange:e=>k({...b.content,text:e.target.value}),className:"mt-1 text-sm",rows:3,placeholder:"Enter text..."})]}),void 0!==b.content.title&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-title",className:"text-xs",children:"Title"}),(0,t.jsx)(J.Input,{id:"block-title",value:b.content.title||"",onChange:e=>k({...b.content,title:e.target.value}),className:"mt-1 text-sm",placeholder:"Enter title..."})]}),void 0!==b.content.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-description",className:"text-xs",children:"Description"}),(0,t.jsx)(L.Textarea,{id:"block-description",value:b.content.description||"",onChange:e=>k({...b.content,description:e.target.value}),className:"mt-1 text-sm",rows:2,placeholder:"Enter description..."})]}),void 0!==b.content.url&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-url",className:"text-xs",children:"URL"}),(0,t.jsx)(J.Input,{id:"block-url",type:"url",value:b.content.url||"",onChange:e=>k({...b.content,url:e.target.value}),className:"mt-1 text-sm",placeholder:"https://..."})]}),void 0!==b.content.productSlug&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(A.Label,{htmlFor:"block-productSlug",className:"text-xs",children:["Product Slug ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(J.Input,{id:"block-productSlug",value:b.content.productSlug||"",onChange:e=>k({...b.content,productSlug:e.target.value}),className:"mt-1 text-sm",placeholder:"product-slug-example"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Slug c·ªßa s·∫£n ph·∫©m c·∫ßn hi·ªÉn th·ªã (vd: "ao-thun-nam")'})]}),void 0!==b.content.categoryId&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-categoryId",className:"text-xs",children:"Category ID"}),(0,t.jsx)(J.Input,{id:"block-categoryId",value:b.content.categoryId||"",onChange:e=>k({...b.content,categoryId:e.target.value}),className:"mt-1 text-sm",placeholder:"Optional category filter"})]}),void 0!==b.content.limit&&(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"block-limit",className:"text-xs",children:"Products Limit"}),(0,t.jsx)(J.Input,{id:"block-limit",type:"number",value:b.content.limit||12,onChange:e=>k({...b.content,limit:parseInt(e.target.value)||12}),className:"mt-1 text-sm",min:"1",max:"100"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(tR.Zap,{className:"w-4 h-4"}),"Advanced"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Visibility"}),(0,t.jsxs)(i.Button,{size:"sm",variant:"ghost",className:"h-7",children:[(0,t.jsx)(c.Eye,{className:"w-3 h-3 mr-1"}),(0,t.jsx)("span",{className:"text-xs",children:"Visible"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Animation"}),(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",className:"h-7",children:(0,t.jsx)("span",{className:"text-xs",children:"None"})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(sf.default,{className:"w-4 h-4"}),"Custom CSS Classes"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"custom-classes",className:"text-xs",children:"Tailwind Classes"}),(0,t.jsx)(L.Textarea,{id:"custom-classes",value:m,onChange:e=>{var t;u(t=e.target.value),f&&b&&v(f,{customClasses:t})},placeholder:"e.g., hover:shadow-lg hover:scale-105 transition-all duration-300",className:"mt-1 text-xs font-mono",rows:3}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"üí° Add Tailwind classes for additional styling (space-separated)"}),m&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-amber-900 mb-2",children:"Preview:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:m.split(/\s+/).filter(Boolean).map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded text-xs font-mono",children:e},s))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(sf.default,{className:"w-4 h-4"}),"Inline Styles (CSS)"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Label,{htmlFor:"inline-styles",className:"text-xs",children:"CSS Properties"}),(0,t.jsx)(L.Textarea,{id:"inline-styles",value:x,onChange:e=>{var t;g(t=e.target.value),f&&b&&v(f,{inlineStyles:t})},placeholder:`e.g., box-shadow: 0 10px 30px rgba(0,0,0,0.3);
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);`,className:"mt-1 text-xs font-mono",rows:4}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"üí° Add inline CSS properties (semicolon-separated)"}),x&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Applied Styles:"}),(0,t.jsx)("pre",{className:"text-xs font-mono text-blue-800 overflow-x-auto",children:x.split(";").filter(e=>e.trim()).map((e,s)=>(0,t.jsxs)("div",{children:[e.trim(),";"]},s))})]})]})]}),b?.content&&(0,t.jsxs)("details",{className:"space-y-3",children:[(0,t.jsx)("summary",{className:"text-sm font-semibold text-gray-900 cursor-pointer hover:text-primary",children:"JSON Editor (Advanced)"}),(0,t.jsx)("div",{className:"bg-gray-900 text-gray-100 p-3 rounded-lg text-xs font-mono overflow-x-auto mt-2",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(b.content,null,2)})})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,t.jsx)("strong",{children:"üí° Tip:"})," Use the Style tab for visual customization. Lock the block to prevent accidental changes."]})})]})}),(0,t.jsx)(n.TabsContent,{value:"logs",className:"mt-0 h-full",children:(0,t.jsx)(ap,{})})]})]})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Select a block to edit its properties"})})]})}function au({editorMode:e,onModeChange:a,onExit:r,onSave:o}){let[n,c]=(0,s.useState)("desktop"),[d,h]=(0,s.useState)(!0),[p,m]=(0,s.useState)(!0),{selectedBlockId:u,loading:x,editingPage:g,setEditingPage:y}=(0,eT.usePageState)(),{handleSelectBlock:f,handleAddChildBlock:b,handleCloseAddChildDialog:v}=eZ(),{showAddChildDialog:j,addChildParentId:w}=eB(),{toast:N}=(0,ev.useToast)(),[k]=(0,l.useMutation)(ej.UPDATE_PAGE),T=(0,s.useCallback)(async e=>{if(!g)return void N({title:"Error",description:"No page selected",type:"error"});try{let t=Array.isArray(e.seoKeywords)?e.seoKeywords:e.seoKeywords?e.seoKeywords.split(",").map(e=>e.trim()):[],s={title:e.pageTitle,slug:e.pageSlug,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:t};if(!g?.id){y({...g,title:e.pageTitle,slug:e.pageSlug,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:t}),N({title:"Success",description:"Page settings updated",type:"success"});return}await k({variables:{id:g.id,input:s}}),y({...g,title:e.pageTitle,slug:e.pageSlug,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:t}),N({title:"Success",description:"Global settings saved successfully",type:"success"})}catch(e){throw console.error("Error saving settings:",e),N({title:"Error",description:"Failed to save global settings",type:"error"}),e}},[g,k,y,N]);return(0,t.jsxs)("div",{className:"h-screen w-screen bg-gray-50 flex flex-col overflow-hidden",children:[(0,t.jsx)(tn,{editorMode:e,onModeChange:a,device:n,onDeviceChange:c,onSave:o,onExit:r,leftPanelOpen:d,onToggleLeftPanel:()=>h(!d),rightPanelOpen:p,onToggleRightPanel:()=>m(!p),isLoading:x,onSettingsSave:T,showEditorControls:!0,showPageInfo:!0}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[d&&(0,t.jsx)(sx,{onClose:()=>h(!1)}),(0,t.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,t.jsx)(tH,{editorMode:e,device:n,selectedBlockId:u,onSelectBlock:f})}),p&&(0,t.jsx)(am,{device:n,onClose:()=>m(!1)})]}),(0,t.jsx)(tK,{selectedBlockId:u,device:n}),(0,t.jsx)(D.Dialog,{open:j,onOpenChange:e=>{console.log("[FullScreenLayout] Dialog onOpenChange:",e),e||v()},children:(0,t.jsxs)(D.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(D.DialogHeader,{children:[(0,t.jsx)(D.DialogTitle,{children:"Add Child Block to Container"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Select a block type to add to the container",w&&` (Parent: ${w.substring(0,8)}...)`]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 py-4",children:tF.map(({type:e,label:s,icon:a,color:l})=>(0,t.jsxs)(i.Button,{variant:"outline",className:"h-auto p-4 flex flex-col items-center justify-center space-y-2 hover:border-blue-500",onClick:()=>{console.log("[FullScreenLayout] Block selected:",e,"parentId:",w),w&&b(w,e)},children:[(0,t.jsx)("div",{className:`p-3 rounded-lg ${l}`,children:(0,t.jsx)(a,{size:24})}),(0,t.jsx)("span",{className:"text-sm font-medium text-center",children:s})]},e))})]})})]})}function ax({onExit:e,initialMode:l="visual"}){let r=(0,a.useRouter)(),[i,o]=(0,s.useState)(l),{handlePageSave:n}=eZ(),c=(0,s.useCallback)(()=>{e?e():r.back()},[e,r]),d=(0,s.useCallback)(async()=>{try{await n()}catch(e){eF.error("PAGE_SAVE","Error saving page",{error:e})}},[n]);return(0,t.jsx)(au,{editorMode:i,onModeChange:o,onExit:c,onSave:d})}function ag({pageId:e,onExit:s,initialMode:a="visual",initialBlocks:l=[]}){return(0,t.jsx)(e4,{pageId:e,children:(0,t.jsx)(ax,{onExit:s,initialMode:a})})}var ay=e.i(425101),af=e.i(741850),ab=e.i(815954),av=e.i(496781),aj=e.i(391551),aw=e.i(562094),aN=e.i(965120),ak=e.i(630596),aT=e.i(567961),aC=e.i(763673),aS=e.i(590719);function aB({data:e,isLoading:a,onEdit:l,onView:r,onDelete:n,onRefresh:d}){let h=(0,s.useRef)(!1),[p,m]=(0,s.useState)(""),[u,x]=(0,s.useState)("all"),[g,y]=(0,s.useState)("updatedAt"),[f,b]=(0,s.useState)("desc"),[v,j]=(0,s.useState)(0),[w,N]=(0,s.useState)(10),[k,T]=(0,s.useState)(null),[C,S]=(0,s.useState)(!1),[B,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{h.current||(h.current=!0,T(null),E(!1))},[]);let D=(0,s.useMemo)(()=>{let t=e;if("all"!==u&&(t=t.filter(e=>e.status===u)),p){let e=p.toLowerCase();t=t.filter(t=>t.title?.toLowerCase().includes(e)||t.slug?.toLowerCase().includes(e))}return t},[e,u,p]),A=(0,s.useMemo)(()=>{let e=[...D];return f&&g&&e.sort((e,t)=>{let s=e[g],a=t[g];return("updatedAt"===g&&(s=s?new Date(s).getTime():0,a=a?new Date(a).getTime():0),"string"==typeof s&&(s=s.toLowerCase()),"string"==typeof a&&(a=a.toLowerCase()),s<a)?"asc"===f?-1:1:s>a?"asc"===f?1:-1:0}),e},[D,g,f]),L=(0,s.useMemo)(()=>{let e=v*w;return A.slice(e,e+w)},[A,v,w]),P=Math.ceil(A.length/w),R=e=>{g===e?"asc"===f?b("desc"):"desc"===f?b(null):b("asc"):(y(e),b("asc")),j(0)},O=e=>g!==e?(0,t.jsx)(tS.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-40"}):"asc"===f?(0,t.jsx)(av.ArrowUp,{className:"ml-2 h-4 w-4"}):"desc"===f?(0,t.jsx)(aj.ArrowDown,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(tS.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-40"}),F=async()=>{if(k){S(!0);try{await n(k),T(null),d()}catch(e){console.error("Error deleting page:",e)}finally{S(!1)}}};return a?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-4 flex-col sm:flex-row",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(Y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(J.Input,{placeholder:"Search title or slug...",value:p,onChange:e=>{m(e.target.value),j(0)},className:"pl-10"})]}),(0,t.jsxs)(ee.Select,{value:u,onValueChange:e=>{x(e),j(0)},children:[(0,t.jsx)(ee.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,t.jsx)(ee.SelectValue,{placeholder:"All Status"})}),(0,t.jsxs)(ee.SelectContent,{children:[(0,t.jsx)(ee.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.DRAFT,children:"Draft"}),(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.PUBLISHED,children:"Published"}),(0,t.jsx)(ee.SelectItem,{value:eI.PageStatus.ARCHIVED,children:"Archived"})]})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(af.Table,{children:[(0,t.jsx)(af.TableHeader,{children:(0,t.jsxs)(af.TableRow,{children:[(0,t.jsx)(af.TableHead,{children:(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>R("title"),className:"h-8 p-0 hover:bg-transparent",children:["Title",O("title")]})}),(0,t.jsx)(af.TableHead,{children:(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>R("slug"),className:"h-8 p-0 hover:bg-transparent",children:["Slug",O("slug")]})}),(0,t.jsx)(af.TableHead,{children:"Status"}),(0,t.jsx)(af.TableHead,{children:"Blocks"}),(0,t.jsx)(af.TableHead,{children:(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>R("updatedAt"),className:"h-8 p-0 hover:bg-transparent",children:["Updated",O("updatedAt")]})}),(0,t.jsx)(af.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(af.TableBody,{children:L.length>0?L.map(e=>(0,t.jsxs)(af.TableRow,{children:[(0,t.jsx)(af.TableCell,{className:"font-medium",children:e.title||"Untitled"}),(0,t.jsxs)(af.TableCell,{className:"text-sm text-gray-600",children:["/",e.slug||"untitled"]}),(0,t.jsx)(af.TableCell,{children:(0,t.jsx)(o.Badge,{variant:(e=>{switch(e){case eI.PageStatus.PUBLISHED:return"default";case eI.PageStatus.DRAFT:return"secondary";case eI.PageStatus.ARCHIVED:default:return"outline"}})(e.status),className:(e=>{switch(e){case eI.PageStatus.PUBLISHED:return"bg-green-100 text-green-800";case eI.PageStatus.DRAFT:return"bg-yellow-100 text-yellow-800";case eI.PageStatus.ARCHIVED:default:return"bg-gray-100 text-gray-800"}})(e.status),children:e.status.toLowerCase()})}),(0,t.jsx)(af.TableCell,{className:"text-sm text-gray-600",children:Array.isArray(e.blocks)?e.blocks.length:0}),(0,t.jsx)(af.TableCell,{className:"text-sm text-gray-600",children:e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"N/A"}),(0,t.jsx)(af.TableCell,{className:"text-right",children:(0,t.jsxs)(I.DropdownMenu,{children:[(0,t.jsx)(I.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,t.jsx)(aw.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(I.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(I.DropdownMenuItem,{onClick:()=>l(e.id),children:[(0,t.jsx)(aN.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.status===eI.PageStatus.PUBLISHED&&e.slug&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.DropdownMenuSeparator,{}),(0,t.jsxs)(I.DropdownMenuItem,{onClick:()=>r(e.slug),children:[(0,t.jsx)(c.Eye,{className:"mr-2 h-4 w-4"}),"View Page"]})]}),(0,t.jsx)(I.DropdownMenuSeparator,{}),(0,t.jsxs)(I.DropdownMenuItem,{onClick:()=>{T(e.id),E(!0)},className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(G.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id)):(0,t.jsx)(af.TableRow,{children:(0,t.jsx)(af.TableCell,{colSpan:6,className:"h-24 text-center",children:"No pages found"})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[A.length," page(s) total",p&&" (filtered)"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Rows per page:"}),(0,t.jsxs)(ee.Select,{value:String(w),onValueChange:e=>{N(Number(e)),j(0)},children:[(0,t.jsx)(ee.SelectTrigger,{className:"w-[70px]",children:(0,t.jsx)(ee.SelectValue,{})}),(0,t.jsx)(ee.SelectContent,{children:[5,10,20,50].map(e=>(0,t.jsx)(ee.SelectItem,{value:String(e),children:e},e))})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",v+1," of ",P]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>j(0),disabled:0===v,children:(0,t.jsx)(aC.ChevronsLeft,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>j(Math.max(0,v-1)),disabled:0===v,children:(0,t.jsx)(ak.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>j(Math.min(P-1,v+1)),disabled:v>=P-1,children:(0,t.jsx)(aT.ChevronRight,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>j(P-1),disabled:v>=P-1,children:(0,t.jsx)(aS.ChevronsRight,{className:"h-4 w-4"})})]})]})]})]}),null!==k&&B&&(0,t.jsx)(ab.AlertDialog,{open:!0,onOpenChange:e=>{e||(E(!1),T(null))},children:(0,t.jsxs)(ab.AlertDialogContent,{children:[(0,t.jsxs)(ab.AlertDialogHeader,{children:[(0,t.jsx)(ab.AlertDialogTitle,{children:"Delete Page"}),(0,t.jsx)(ab.AlertDialogDescription,{children:"Are you sure you want to delete this page? This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(ab.AlertDialogCancel,{disabled:C,onClick:()=>{E(!1),T(null)},children:"Cancel"}),(0,t.jsx)(ab.AlertDialogAction,{onClick:F,disabled:C,className:"bg-red-600 hover:bg-red-700",children:C?"Deleting...":"Delete"})]})]})})]})}function aE(){let e=(0,a.useSearchParams)(),l=(0,a.useRouter)(),r=e.get("pageId"),[o,n]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),{pages:h,loading:p,refetch:m,error:u}=(0,eO.usePages)({page:1,limit:100},void 0,{skip:!!r}),{deletePage:x}=(0,eO.usePageOperations)();(0,s.useEffect)(()=>{r&&d(!0)},[r]),(0,s.useEffect)(()=>{!c&&r&&m()},[c,r,m]);let g=async e=>{try{await x(e),m()}catch(e){throw console.error("Error deleting page:",e),e}},y=()=>{d(!1),l.push("/admin/pagebuilder"),m()};return o||u?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsxs)(ek.Card,{className:"max-w-md w-full p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,t.jsx)(B.AlertCircle,{size:24}),(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Error Loading Pages"})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:o||u?.message||"An unexpected error occurred"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"}),(0,t.jsx)(i.Button,{onClick:()=>n(null),variant:"outline",children:"Dismiss"})]})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pages"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Manage and edit your website pages"})]}),(0,t.jsxs)(i.Button,{onClick:()=>{try{l.push("/admin/pagebuilder"),d(!0)}catch(e){console.error("Error creating page:",e),n("Failed to create new page")}},className:"flex items-center space-x-2",children:[(0,t.jsx)(Q.Plus,{size:20}),(0,t.jsx)("span",{children:"New Page"})]})]})})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)(aB,{data:h?.items||[],isLoading:p,onEdit:e=>{try{l.push(`/admin/pagebuilder?pageId=${e}`),d(!0)}catch(e){console.error("Error editing page:",e),n("Failed to edit page")}},onView:e=>{try{window.open(`/${e}`,"_blank")}catch(e){console.error("Error viewing page:",e)}},onDelete:g,onRefresh:m})})]}),(0,t.jsx)(D.Dialog,{open:c,onOpenChange:e=>{d(e),e||y()},children:(0,t.jsxs)(D.DialogContent,{className:"max-w-full w-screen h-screen p-0 m-0 bg-white border-0 rounded-none",style:{maxWidth:"100vw",maxHeight:"100vh",width:"100vw",height:"100vh"},children:[(0,t.jsxs)(ay.VisuallyHidden,{children:[(0,t.jsx)(D.DialogTitle,{children:"Page Builder Editor"}),(0,t.jsx)(D.DialogDescription,{children:"Edit your page content using the visual page builder interface"})]}),(0,t.jsx)("div",{className:"h-full w-full",children:(0,t.jsx)(ag,{pageId:r||void 0,onExit:y,initialMode:"visual"})})]})})]})}function aI(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,t.jsx)(aE,{})})}e.s(["default",()=>aI],996713)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,264800,892907,e=>{"use strict";var t=e.i(403055),s=e.i(351049);let l=e=>[s.BlockType.CONTAINER,s.BlockType.SECTION,s.BlockType.GRID,s.BlockType.FLEX_ROW,s.BlockType.FLEX_COLUMN].includes(e),n=e=>!!e&&l(e.type),a=e=>e?.children?[...e.children].sort((e,t)=>e.order-t.order):[];function i({parentBlock:e,onUpdateChild:s,onDeleteChild:l,onReorderChildren:i,onAddChild:r}){let c=(0,t.useMemo)(()=>a(e),[e?.id,e?.children?.length,e?.children?.map(e=>e.order).join(",")]),d=(0,t.useMemo)(()=>c.length,[c.length]),o=(0,t.useMemo)(()=>n(e),[e?.type]),h=(0,t.useMemo)(()=>c.map(e=>e.id),[c]),u=(0,t.useCallback)((t,l,n)=>{e?.id&&(c.some(e=>e.id===t)?s?.(t,l,n):console.warn(`Child block ${t} not found in parent ${e.id}`))},[e?.id,c,s]),x=(0,t.useCallback)(t=>{e?.id&&(c.some(e=>e.id===t)?l?.(t):console.warn(`Child block ${t} not found in parent ${e.id}`))},[e?.id,c,l]),m=(0,t.useCallback)(t=>{if(!e?.id)return;let s=new Set(c.map(e=>e.id)),l=t.filter(e=>!s.has(e));l.length>0?console.warn(`Invalid child IDs in reorder: ${l.join(", ")}`):t.length!==c.length?console.warn(`Reorder IDs count (${t.length}) doesn't match children count (${c.length})`):i?.(e.id,t)},[e?.id,c,i]);return{sortedChildren:c,childrenCount:d,canAddChildren:o,childrenIds:h,handleUpdateChild:u,handleDeleteChild:x,handleReorderChildren:m}}function r({parentId:e,isContainerType:s,isDraggedBlockId:l}){let n=(0,t.useMemo)(()=>l!==e&&s,[e,s,l]);return{canDrop:n,droppableId:(0,t.useMemo)(()=>`nested-container-${e}`,[e]),dropData:(0,t.useMemo)(()=>({type:"nested-container",parentId:e}),[e])}}e.s(["canHaveChildren",0,n,"getSortedChildren",0,a,"isContainerBlockType",0,l],892907),e.s(["useNestedBlockRenderer",()=>i,"useNestedDropZone",()=>r],264800)},491352,e=>{"use strict";var t=e.i(44990),s=e.i(403055),l=e.i(165429),n=e.i(696134),a=e.i(183194),i=e.i(276664);e.i(308140);var r=e.i(125340),c=e.i(706547),d=e.i(138227),o=e.i(606443),h=e.i(126455),u=e.i(885205),x=e.i(264800),m=e.i(892907);let p=({block:e,isEditable:l=!0,children:n,onDelete:a,onAddChild:i,onUpdate:p,onUpdateChild:j,onDeleteChild:g,containerStyles:v,settingsPanel:b,title:y="Layout Settings"})=>{let[w,C]=(0,s.useState)(!1),[S,f]=(0,s.useState)(!1);s.default.useEffect(()=>{},[i,n,e.id,e.type]);let{droppableId:N,dropData:k}=(0,x.useNestedDropZone)({parentId:e.id,isContainerType:(0,m.isContainerBlockType)(e.type)}),{setNodeRef:I,isOver:B}=(0,r.useDroppable)({id:N,data:k}),{childrenCount:T,canAddChildren:D}=(0,x.useNestedBlockRenderer)({parentBlock:e,onUpdateChild:j,onDeleteChild:g});return l?(0,t.jsxs)("div",{ref:I,style:v,className:`group transition-all duration-200 relative ${B?"ring-2 ring-blue-500 bg-blue-50 scale-105":"hover:ring-2 hover:ring-gray-300"}`,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[l&&(S||w)&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2 z-10 animate-in fade-in duration-200",children:[!1,D&&i&&(0,t.jsxs)(u.Button,{size:"sm",variant:"outline",onClick:()=>{console.log(`[LayoutBlockWrapper ${e.id}] Add Child clicked:`,{hasOnAddChild:!!i,canAddChildren:D,childrenCount:T,blockId:e.id,blockType:e.type}),i?i(e.id):console.error("[LayoutBlockWrapper] onAddChild is undefined!")},className:"bg-white shadow-sm hover:shadow-md",title:`Add child block (${T} nested)`,children:[(0,t.jsx)(o.Plus,{className:"w-4 h-4 mr-1"}),(0,t.jsx)("span",{className:"text-xs",children:"Add Child"})]}),!1,(0,t.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>C(!w),className:"bg-white shadow-sm hover:shadow-md",title:"Edit settings",children:(0,t.jsx)(c.Settings,{className:"w-4 h-4"})}),(0,t.jsx)(u.Button,{size:"sm",variant:"destructive",onClick:a,className:"shadow-sm hover:shadow-md",title:"Delete block",children:(0,t.jsx)(d.Trash2,{className:"w-4 h-4"})})]}),B&&(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold shadow-lg",children:"ðŸ“ Drop here to add nested block"})}),w&&(0,t.jsxs)("div",{className:"absolute top-12 right-2 bg-white p-4 rounded-lg shadow-xl border border-gray-200 z-20 w-80 max-h-96 overflow-y-auto",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3 text-sm",children:y}),(0,t.jsxs)("div",{className:"space-y-3",children:[b,(0,t.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(h.Package,{className:"w-3 h-3"}),T," nested block",1!==T?"s":""]})}),(0,t.jsx)("div",{className:"flex gap-2 pt-2",children:(0,t.jsx)(u.Button,{onClick:()=>C(!1),variant:"outline",className:"flex-1 text-xs py-1",size:"sm",children:"Done"})})]})]}),n?(0,t.jsx)("div",{className:"nested-children-wrapper w-full",children:n}):(0,t.jsxs)("div",{className:`text-center py-8 transition-colors duration-200 ${B?"text-blue-600":"text-gray-400"}`,children:[(0,t.jsx)(h.Package,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"No nested blocks yet"}),(0,t.jsx)("p",{className:"text-xs mt-1 opacity-75",children:'Drop blocks or click "Add Child" to add content'}),!1]})]}):(0,t.jsx)("div",{ref:I,style:v,children:n})};e.s(["FlexBlock",0,({block:e,isEditable:r=!0,onUpdate:c,onDelete:d,onAddChild:o,onUpdateChild:h,onDeleteChild:u,children:x})=>{let m=e.content,[j,g]=s.default.useState(m||{direction:"row",justifyContent:"start",alignItems:"start",wrap:!1,gap:16}),v={display:"flex",flexDirection:m.direction||"row",justifyContent:{start:"flex-start",center:"center",end:"flex-end",between:"space-between",around:"space-around",evenly:"space-evenly"}[m.justifyContent||"start"],alignItems:{start:"flex-start",center:"center",end:"flex-end",stretch:"stretch"}[m.alignItems||"start"],flexWrap:m.wrap?"wrap":"nowrap",gap:`${m.gap||16}px`,width:"100%",position:"relative",minHeight:x?"auto":"150px",borderRadius:"8px",padding:r?"16px":"0"},b=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{className:"text-xs",children:"Direction"}),(0,t.jsxs)(a.Select,{value:j.direction||"row",onValueChange:e=>g({...j,direction:e}),children:[(0,t.jsx)(a.SelectTrigger,{children:(0,t.jsx)(a.SelectValue,{})}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"row",children:"Row (Horizontal)"}),(0,t.jsx)(a.SelectItem,{value:"column",children:"Column (Vertical)"}),(0,t.jsx)(a.SelectItem,{value:"row-reverse",children:"Row Reverse"}),(0,t.jsx)(a.SelectItem,{value:"column-reverse",children:"Column Reverse"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{className:"text-xs",children:"Justify Content"}),(0,t.jsxs)(a.Select,{value:j.justifyContent||"start",onValueChange:e=>g({...j,justifyContent:e}),children:[(0,t.jsx)(a.SelectTrigger,{children:(0,t.jsx)(a.SelectValue,{})}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"start",children:"Start"}),(0,t.jsx)(a.SelectItem,{value:"center",children:"Center"}),(0,t.jsx)(a.SelectItem,{value:"end",children:"End"}),(0,t.jsx)(a.SelectItem,{value:"between",children:"Space Between"}),(0,t.jsx)(a.SelectItem,{value:"around",children:"Space Around"}),(0,t.jsx)(a.SelectItem,{value:"evenly",children:"Space Evenly"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{className:"text-xs",children:"Align Items"}),(0,t.jsxs)(a.Select,{value:j.alignItems||"start",onValueChange:e=>g({...j,alignItems:e}),children:[(0,t.jsx)(a.SelectTrigger,{children:(0,t.jsx)(a.SelectValue,{})}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"start",children:"Start"}),(0,t.jsx)(a.SelectItem,{value:"center",children:"Center"}),(0,t.jsx)(a.SelectItem,{value:"end",children:"End"}),(0,t.jsx)(a.SelectItem,{value:"stretch",children:"Stretch"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{className:"text-xs",children:"Gap (px)"}),(0,t.jsx)(n.Input,{type:"number",value:j.gap||16,onChange:e=>g({...j,gap:parseInt(e.target.value)}),className:"text-xs"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.Label,{htmlFor:"wrap",className:"text-xs",children:"Wrap"}),(0,t.jsx)(i.Switch,{id:"wrap",checked:j.wrap||!1,onCheckedChange:e=>g({...j,wrap:e})})]})]});return(0,t.jsx)(p,{block:e,isEditable:r,children:x,onDelete:d,onAddChild:o,onUpdate:e=>{g(e),c(e)},onUpdateChild:h,onDeleteChild:u,containerStyles:v,settingsPanel:b,title:"Flex Block Settings"})}],491352)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,742314,e=>{"use strict";var s=e.i(44990),t=e.i(403055),a=e.i(528413),r=e.i(489215),n=e.i(869826),i=e.i(856374),l=e.i(388594);function o(){let[e,o]=(0,t.useState)([]),[d,c]=(0,t.useState)(""),[x,u]=(0,t.useState)(!1),{isOnline:m}=(0,n.usePWANetworkStatus)(),{isInstalled:g,canInstall:h,installationStatus:f}=(0,n.usePWAInstallation)(),{pendingActions:p,triggerSync:b}=(0,n.usePWASync)(),{showNotification:j,capabilities:y}=(0,i.usePWA)();(0,t.useEffect)(()=>{N()},[]);let N=async()=>{u(!0);try{let e=await l.offlineDataService.getTasks();o(e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()))}catch(e){console.error("Failed to load tasks:",e)}finally{u(!1)}},v=async()=>{if(!d.trim())return;let e={id:`task_${Date.now()}`,title:d.trim(),description:"",priority:"MEDIUM",status:"TODO",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),authorId:"demo-user"};try{await l.offlineDataService.storeTask(e),o(s=>[e,...s]),c(""),y.hasNotificationSupport&&await j("Task Created",{body:`"${e.title}" has been ${m?"created":"saved offline"}`,tag:"task-created"})}catch(e){console.error("Failed to create task:",e)}},w=async s=>{let t=e.find(e=>e.id===s);if(!t)return;let a="COMPLETED"===t.status,r={...t,status:a?"TODO":"COMPLETED",completedAt:a?void 0:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await l.offlineDataService.storeTask(r),o(e=>e.map(e=>e.id===s?r:e))}catch(e){console.error("Failed to toggle task:",e)}},k=async e=>{try{await l.offlineDataService.deleteTaskOffline(e),o(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Failed to delete task:",e)}},S=async()=>{"Notification"in window&&"granted"===await Notification.requestPermission()&&await j("Notifications Enabled",{body:"You will now receive task updates and sync notifications",tag:"permission-granted"})};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"PWA Demo - Task Manager"}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"Experience offline-first functionality with Progressive Web App features"}),(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-6",children:[(0,s.jsx)("div",{className:`
            px-3 py-1 rounded-full text-sm font-medium
            ${g?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}
          `,children:"installed"===f?"ðŸ“± Installed":"available"===f?"ðŸ’¾ Can Install":"ðŸŒ Browser Only"}),(0,s.jsxs)("div",{className:`
            px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1
            ${m?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}
          `,children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full ${m?"bg-green-500":"bg-yellow-500"}`}),(0,s.jsx)("span",{children:m?"Online":"Offline"})]}),p>0&&(0,s.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:[p," Pending"]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[h&&(0,s.jsx)(a.PWAInstallButton,{variant:"default",size:"medium"}),!y.hasNotificationSupport&&(0,s.jsx)("button",{onClick:S,className:" px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-200 ",children:"Enable Notifications"}),p>0&&m&&(0,s.jsx)("button",{onClick:b,className:" px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ",children:"Sync Now"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create New Task"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&v(),placeholder:"Enter task title...",className:" flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "}),(0,s.jsx)("button",{onClick:v,disabled:!d.trim(),className:" px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 ",children:"Add Task"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:m?"Tasks will be saved and synced to the server":"Working offline - tasks will sync when connection is restored"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Tasks"}),(0,s.jsx)(r.CompactOfflineStatus,{})]}),x?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks yet"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Create your first task to get started!"})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t="COMPLETED"===e.status;return(0,s.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsx)("button",{onClick:()=>w(e.id),className:`
                    w-5 h-5 rounded border-2 flex items-center justify-center
                    ${t?"bg-green-600 border-green-600 text-white":"border-gray-300 hover:border-green-400"}
                    transition-colors duration-200
                  `,children:t&&(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:`
                    font-medium
                    ${t?"text-gray-500 line-through":"text-gray-900"}
                  `,children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:" p-2 text-red-600 hover:bg-red-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200 ",title:"Delete task",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"PWA Features"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:`
                w-4 h-4 rounded-full
                ${y.isStandalone?"bg-green-500":"bg-gray-300"}
              `}),(0,s.jsxs)("span",{className:"text-sm",children:["Standalone Mode: ",y.isStandalone?"Active":"Browser"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:`
                w-4 h-4 rounded-full
                ${y.hasNotificationSupport?"bg-green-500":"bg-gray-300"}
              `}),(0,s.jsxs)("span",{className:"text-sm",children:["Notifications: ",y.hasNotificationSupport?"Enabled":"Disabled"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:`
                w-4 h-4 rounded-full
                ${y.canInstall?"bg-blue-500":"bg-gray-300"}
              `}),(0,s.jsxs)("span",{className:"text-sm",children:["Installable: ",y.canInstall?"Yes":"No"]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm",children:"Offline Support: Active"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm",children:"Background Sync: Available"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm",children:"Cache Storage: Active"})]})]})]})]})]})}e.s(["default",()=>o],742314)}]);
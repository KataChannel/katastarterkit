(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,264800,892907,e=>{"use strict";var t=e.i(403055),l=e.i(351049);let s=e=>[l.BlockType.CONTAINER,l.BlockType.SECTION,l.BlockType.GRID,l.BlockType.FLEX_ROW,l.BlockType.FLEX_COLUMN].includes(e),a=e=>!!e&&s(e.type),n=e=>e?.children?[...e.children].sort((e,t)=>e.order-t.order):[];function i({parentBlock:e,onUpdateChild:l,onDeleteChild:s,onReorderChildren:i,onAddChild:r}){let d=(0,t.useMemo)(()=>n(e),[e?.id,e?.children?.length,e?.children?.map(e=>e.order).join(",")]),o=(0,t.useMemo)(()=>d.length,[d.length]),c=(0,t.useMemo)(()=>a(e),[e?.type]),h=(0,t.useMemo)(()=>d.map(e=>e.id),[d]),u=(0,t.useCallback)((t,s,a)=>{e?.id&&(d.some(e=>e.id===t)?l?.(t,s,a):console.warn(`Child block ${t} not found in parent ${e.id}`))},[e?.id,d,l]),x=(0,t.useCallback)(t=>{e?.id&&(d.some(e=>e.id===t)?s?.(t):console.warn(`Child block ${t} not found in parent ${e.id}`))},[e?.id,d,s]),p=(0,t.useCallback)(t=>{if(!e?.id)return;let l=new Set(d.map(e=>e.id)),s=t.filter(e=>!l.has(e));s.length>0?console.warn(`Invalid child IDs in reorder: ${s.join(", ")}`):t.length!==d.length?console.warn(`Reorder IDs count (${t.length}) doesn't match children count (${d.length})`):i?.(e.id,t)},[e?.id,d,i]);return{sortedChildren:d,childrenCount:o,canAddChildren:c,childrenIds:h,handleUpdateChild:u,handleDeleteChild:x,handleReorderChildren:p}}function r({parentId:e,isContainerType:l,isDraggedBlockId:s}){let a=(0,t.useMemo)(()=>s!==e&&l,[e,l,s]);return{canDrop:a,droppableId:(0,t.useMemo)(()=>`nested-container-${e}`,[e]),dropData:(0,t.useMemo)(()=>({type:"nested-container",parentId:e}),[e])}}e.s(["canHaveChildren",0,a,"getSortedChildren",0,n,"isContainerBlockType",0,s],892907),e.s(["useNestedBlockRenderer",()=>i,"useNestedDropZone",()=>r],264800)},230588,e=>{"use strict";var t=e.i(44990),l=e.i(403055),s=e.i(125340),a=e.i(706547),n=e.i(138227),i=e.i(606443),r=e.i(126455),d=e.i(885205),o=e.i(696134),c=e.i(165429),h=e.i(183194),u=e.i(264800),x=e.i(892907);e.s(["ContainerBlock",0,({block:e,isEditable:p=!0,onUpdate:m,onDelete:g,onAddChild:b,onUpdateChild:j,onDeleteChild:v,children:C})=>{let y=e.content,[f,k]=l.default.useState(!1),[N,w]=l.default.useState(!1),[S,B]=l.default.useState(y||{layout:"stack",gap:16,padding:16,backgroundColor:"transparent",maxWidth:"100%",alignment:"left"}),{droppableId:I,dropData:T}=(0,u.useNestedDropZone)({parentId:e.id,isContainerType:(0,x.isContainerBlockType)(e.type)}),{setNodeRef:$,isOver:A,active:D}=(0,s.useDroppable)({id:I,data:T}),{sortedChildren:L,childrenCount:M,canAddChildren:R}=(0,u.useNestedBlockRenderer)({parentBlock:e,onUpdateChild:j,onDeleteChild:v});l.default.useEffect(()=>{console.log(`[ContainerBlock ${e.id}] Debug:`,{canAddChildren:R,onAddChildDefined:!!b,onAddChildFunc:b,childrenCount:M,blockType:e.type})},[R,b,M,e.id,e.type]);let z={display:"flex",flexDirection:"stack"===y.layout?"column":"wrap"===y.layout?"row":"column",flexWrap:"wrap"===y.layout?"wrap":"nowrap",gap:`${y.gap||16}px`,padding:`${y.padding||16}px`,backgroundColor:y.backgroundColor||"transparent",maxWidth:y.maxWidth||"100%",alignItems:"center"===y.alignment?"center":"right"===y.alignment?"flex-end":"flex-start",width:"100%",position:"relative",minHeight:C&&l.default.Children.count(C)>0?"auto":"100px",border:p?"2px dashed #ccc":"none",borderRadius:"8px",overflow:"scroll"===y.layout?"auto":"visible"};return(0,t.jsxs)("div",{ref:$,style:z,className:`group transition-all duration-200 ${A?"ring-2 ring-blue-500 bg-blue-50 scale-105":"hover:ring-2 hover:ring-gray-300"}`,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[p&&(N||f)&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2 z-10 animate-in fade-in duration-200",children:[!1,R&&b?(0,t.jsxs)(d.Button,{size:"sm",variant:R&&b?"outline":"destructive",onClick:()=>{console.log(`[ContainerBlock ${e.id}] Add Child clicked:`,{canAddChildren:R,hasOnAddChild:!!b,block:e.id}),b?b(e.id):console.error("[ContainerBlock] onAddChild is undefined!")},className:"bg-white shadow-sm hover:shadow-md",title:`Add child block (${M} nested) - canAdd: ${R}`,children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4 mr-1"}),(0,t.jsxs)("span",{className:"text-xs",children:["Add ",R?"Child":"- canAdd=false"]})]}):null,!1,!1,(0,t.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>k(!f),className:"bg-white shadow-sm hover:shadow-md",title:"Edit container settings",children:(0,t.jsx)(a.Settings,{className:"w-4 h-4"})}),(0,t.jsx)(d.Button,{size:"sm",variant:"destructive",onClick:g,className:"shadow-sm hover:shadow-md",title:"Delete container",children:(0,t.jsx)(n.Trash2,{className:"w-4 h-4"})})]}),A&&(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold shadow-lg",children:"ðŸ“ Drop here to add nested block"})}),f&&(0,t.jsxs)("div",{className:"absolute top-12 right-2 bg-white p-4 rounded-lg shadow-xl border border-gray-200 z-20 w-80 max-h-96 overflow-y-auto",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3 text-sm",children:"Container Settings"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Layout"}),(0,t.jsxs)(h.Select,{value:S.layout||"stack",onValueChange:e=>B({...S,layout:e}),children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"stack",children:"Stack (Vertical)"}),(0,t.jsx)(h.SelectItem,{value:"wrap",children:"Wrap (Horizontal)"}),(0,t.jsx)(h.SelectItem,{value:"scroll",children:"Scroll"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Gap (px)"}),(0,t.jsx)(o.Input,{type:"number",value:S.gap||16,onChange:e=>B({...S,gap:parseInt(e.target.value)}),className:"text-xs"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Padding (px)"}),(0,t.jsx)(o.Input,{type:"number",value:S.padding||16,onChange:e=>B({...S,padding:parseInt(e.target.value)}),className:"text-xs"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Background Color"}),(0,t.jsx)(o.Input,{type:"text",placeholder:"#ffffff or transparent",value:S.backgroundColor||"transparent",onChange:e=>B({...S,backgroundColor:e.target.value}),className:"text-xs"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Max Width"}),(0,t.jsx)(o.Input,{type:"text",placeholder:"100% or 800px",value:S.maxWidth||"100%",onChange:e=>B({...S,maxWidth:e.target.value}),className:"text-xs"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{className:"text-xs",children:"Alignment"}),(0,t.jsxs)(h.Select,{value:S.alignment||"left",onValueChange:e=>B({...S,alignment:e}),children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"left",children:"Left"}),(0,t.jsx)(h.SelectItem,{value:"center",children:"Center"}),(0,t.jsx)(h.SelectItem,{value:"right",children:"Right"})]})]})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(r.Package,{className:"w-3 h-3"}),M," nested block",1!==M?"s":""]})}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(d.Button,{onClick:()=>{m(S),k(!1)},className:"flex-1 text-xs py-1",size:"sm",children:"Save"}),(0,t.jsx)(d.Button,{onClick:()=>k(!1),variant:"outline",className:"flex-1 text-xs py-1",size:"sm",children:"Cancel"})]})]})]}),C?(0,t.jsx)("div",{className:"nested-children-wrapper w-full",children:C}):(0,t.jsxs)("div",{className:`empty-state text-center py-8 transition-colors duration-200 border-2 border-dashed rounded-lg ${A?"text-blue-600 border-blue-400 bg-blue-50":"text-gray-400 border-gray-300 bg-gray-50/50"}`,children:[(0,t.jsx)(r.Package,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"No nested blocks yet"}),(0,t.jsx)("p",{className:"text-xs mt-1 opacity-75",children:'Drop blocks here or click "Add Child" to add nested content'}),!1,!1]})]})}])}]);
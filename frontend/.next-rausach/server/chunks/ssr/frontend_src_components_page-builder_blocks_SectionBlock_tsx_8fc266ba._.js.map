{"version":3,"sources":["turbopack:///[project]/frontend/src/components/page-builder/blocks/SectionBlock.tsx"],"sourcesContent":["import React from 'react';\nimport { PageBlock, SectionBlockContent } from '@/types/page-builder';\nimport { Settings, Trash2, Plus } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\n\ninterface SectionBlockProps {\n  block: PageBlock;\n  isEditable?: boolean;\n  onUpdate: (content: any, style?: any) => void;\n  onDelete: () => void;\n  onAddChild?: (parentId: string) => void;\n  children?: React.ReactNode;\n}\n\nexport const SectionBlock: React.FC<SectionBlockProps> = ({\n  block,\n  isEditable = true,\n  onUpdate,\n  onDelete,\n  onAddChild,\n  children,\n}) => {\n  const content = block.content as SectionBlockContent;\n  const [isEditing, setIsEditing] = React.useState(false);\n  const [editContent, setEditContent] = React.useState<SectionBlockContent>(content || {\n    fullWidth: false,\n    containerWidth: 'lg',\n    backgroundColor: 'transparent',\n    padding: { top: 60, bottom: 60 },\n  });\n\n  // Debug logging\n  React.useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`[SectionBlock ${block.id}] Props Debug:`, {\n        hasOnAddChild: !!onAddChild,\n        onAddChildType: typeof onAddChild,\n        hasChildren: !!children,\n        childrenType: typeof children,\n        blockType: block.type,\n        blockId: block.id,\n      });\n    }\n  }, [onAddChild, children, block.id, block.type]);\n\n  const handleSave = () => {\n    onUpdate(editContent);\n    setIsEditing(false);\n  };\n\n  const maxWidthMap = {\n    sm: '640px',\n    md: '768px',\n    lg: '1024px',\n    xl: '1280px',\n    full: '100%',\n  };\n\n  const sectionStyles: React.CSSProperties = {\n    width: '100%',\n    backgroundColor: content.backgroundColor || 'transparent',\n    backgroundImage: content.backgroundImage ? `url(${content.backgroundImage})` : undefined,\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    paddingTop: `${content.padding?.top || 60}px`,\n    paddingBottom: `${content.padding?.bottom || 60}px`,\n    position: 'relative',\n    minHeight: children ? 'auto' : '200px',\n    border: isEditable ? '2px dashed #cbd5e0' : 'none',\n  };\n\n  const containerStyles: React.CSSProperties = {\n    maxWidth: content.fullWidth ? '100%' : maxWidthMap[content.containerWidth || 'lg'],\n    margin: '0 auto',\n    padding: content.fullWidth ? 0 : '0 1rem',\n  };\n\n  if (!isEditable) {\n    return (\n      <section style={sectionStyles}>\n        <div style={containerStyles}>\n          {children}\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section style={sectionStyles} className=\"group\">\n      {/* Control Bar */}\n      {isEditable && (\n        <div className=\"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\n          {/* Debug: Show button status in development */}\n          {process.env.NODE_ENV === 'development' && (\n            <div className=\"text-xs text-gray-500 absolute -bottom-6 right-0 whitespace-nowrap bg-white px-1 rounded\">\n              onAddChild={String(!!onAddChild)}\n            </div>\n          )}\n          \n          {onAddChild && (\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              onClick={() => {\n                console.log(`[SectionBlock ${block.id}] Add Block clicked:`, { \n                  hasOnAddChild: !!onAddChild, \n                  blockId: block.id,\n                  blockType: block.type,\n                });\n                if (onAddChild) {\n                  onAddChild(block.id);\n                } else {\n                  console.error('[SectionBlock] onAddChild is undefined!');\n                }\n              }}\n              className=\"bg-white shadow-sm hover:shadow-md\"\n              title=\"Add nested block to section\"\n            >\n              <Plus className=\"w-4 h-4 mr-1\" />\n              Add Block\n            </Button>\n          )}\n          \n          {/* Show warning if onAddChild is missing in development */}\n          {process.env.NODE_ENV === 'development' && !onAddChild && (\n            <div className=\"text-xs bg-red-100 text-red-700 px-2 py-1 rounded whitespace-nowrap\">\n              ⚠️ No onAddChild\n            </div>\n          )}\n          \n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setIsEditing(!isEditing)}\n            className=\"bg-white shadow-sm\"\n          >\n            <Settings className=\"w-4 h-4\" />\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"destructive\"\n            onClick={onDelete}\n            className=\"shadow-sm\"\n          >\n            <Trash2 className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      )}\n\n      {/* Settings Panel */}\n      {isEditing && (\n        <div className=\"absolute top-16 right-4 bg-white p-4 rounded-lg shadow-lg border border-gray-200 z-20 w-80\">\n          <h3 className=\"font-semibold mb-3\">Section Settings</h3>\n          \n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <Label>Full Width</Label>\n              <Switch\n                checked={editContent.fullWidth || false}\n                onCheckedChange={(checked) => setEditContent({ ...editContent, fullWidth: checked })}\n              />\n            </div>\n\n            {!editContent.fullWidth && (\n              <div>\n                <Label>Container Width</Label>\n                <Select\n                  value={editContent.containerWidth || 'lg'}\n                  onValueChange={(value) => setEditContent({ ...editContent, containerWidth: value as any })}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"sm\">Small (640px)</SelectItem>\n                    <SelectItem value=\"md\">Medium (768px)</SelectItem>\n                    <SelectItem value=\"lg\">Large (1024px)</SelectItem>\n                    <SelectItem value=\"xl\">Extra Large (1280px)</SelectItem>\n                    <SelectItem value=\"full\">Full Width</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            <div>\n              <Label>Background Color</Label>\n              <Input\n                type=\"text\"\n                placeholder=\"#ffffff or transparent\"\n                value={editContent.backgroundColor || 'transparent'}\n                onChange={(e) => setEditContent({ ...editContent, backgroundColor: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <Label>Background Image URL</Label>\n              <Input\n                type=\"text\"\n                placeholder=\"https://...\"\n                value={editContent.backgroundImage || ''}\n                onChange={(e) => setEditContent({ ...editContent, backgroundImage: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <Label>Padding Top (px)</Label>\n              <Input\n                type=\"number\"\n                value={editContent.padding?.top || 60}\n                onChange={(e) => setEditContent({\n                  ...editContent,\n                  padding: { ...editContent.padding, top: parseInt(e.target.value) }\n                })}\n              />\n            </div>\n\n            <div>\n              <Label>Padding Bottom (px)</Label>\n              <Input\n                type=\"number\"\n                value={editContent.padding?.bottom || 60}\n                onChange={(e) => setEditContent({\n                  ...editContent,\n                  padding: { ...editContent.padding, bottom: parseInt(e.target.value) }\n                })}\n              />\n            </div>\n\n            <div className=\"flex gap-2 pt-2\">\n              <Button onClick={handleSave} className=\"flex-1\">\n                Save\n              </Button>\n              <Button onClick={() => setIsEditing(false)} variant=\"outline\" className=\"flex-1\">\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div style={containerStyles}>\n        {children ? (\n          <div className=\"nested-children-wrapper w-full\">\n            {children}\n          </div>\n        ) : (\n          <div className=\"text-gray-400 text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50/50\">\n            <div className=\"text-sm font-medium\">Drop blocks here or click \"Add Block\"</div>\n            <div className=\"text-xs mt-1 opacity-75\">Add child blocks to section</div>\n            {process.env.NODE_ENV === 'development' && onAddChild && (\n              <div className=\"text-xs mt-2 text-blue-600 bg-blue-50 inline-block px-2 py-1 rounded\">\n                ✓ Ready to add blocks (onAddChild available)\n              </div>\n            )}\n            {process.env.NODE_ENV === 'development' && !onAddChild && (\n              <div className=\"text-xs mt-2 text-red-500 bg-red-50 inline-block px-2 py-1 rounded\">\n                ⚠ onAddChild callback missing\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n"],"names":[],"mappings":"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"}
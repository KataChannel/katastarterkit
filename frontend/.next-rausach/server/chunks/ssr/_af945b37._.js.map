{"version":3,"sources":["turbopack:///[project]/frontend/src/components/support-chat/AdminChatDashboard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { io, Socket } from 'socket.io-client';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { \n  GET_SUPPORT_CONVERSATIONS, \n  GET_SUPPORT_CONVERSATION,\n  SEND_SUPPORT_MESSAGE,\n  ASSIGN_CONVERSATION_TO_AGENT,\n  UPDATE_CONVERSATION_STATUS\n} from '@/graphql/support-chat/support-chat.graphql';\nimport {\n  MessageSquare,\n  Users,\n  Clock,\n  CheckCircle,\n  TrendingUp,\n  Search,\n  Filter,\n  MoreVertical,\n  Send,\n  Paperclip,\n  User,\n  MapPin,\n  Phone,\n  Mail,\n  Package,\n  Star,\n  Bot,\n  Facebook,\n  MessageCircle as ZaloIcon,\n} from 'lucide-react';\n\ninterface Conversation {\n  id: string;\n  conversationCode: string;\n  customerName?: string;\n  customerEmail?: string;\n  customerPhone?: string;\n  platform: string;\n  status: string;\n  priority: string;\n  lastMessagePreview?: string;\n  lastMessageAt?: string;\n  unreadCount?: number;\n  customer?: any;\n  assignedAgent?: any;\n}\n\nexport default function AdminChatDashboard() {\n  const { user } = useAuth(); // Get current user\n  const [selectedConversation, setSelectedConversation] = useState<Conversation | null>(null);\n  const [messages, setMessages] = useState<any[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [socket, setSocket] = useState<Socket | null>(null);\n  const [filter, setFilter] = useState<'all' | 'active' | 'waiting' | 'closed'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [stats, setStats] = useState({\n    total: 0,\n    active: 0,\n    waiting: 0,\n    avgResponseTime: 0,\n  });\n\n  // Apollo queries and mutations\n  const { data: conversationsData, refetch: refetchConversations } = useQuery(GET_SUPPORT_CONVERSATIONS, {\n    variables: {\n      where: filter !== 'all' ? { status: filter.toUpperCase() } : undefined,\n      take: 50,\n    },\n  });\n\n  const { data: conversationData } = useQuery(GET_SUPPORT_CONVERSATION, {\n    variables: { id: selectedConversation?.id },\n    skip: !selectedConversation,\n  });\n\n  const [sendMessageMutation] = useMutation(SEND_SUPPORT_MESSAGE);\n  const [assignToAgentMutation] = useMutation(ASSIGN_CONVERSATION_TO_AGENT);\n  const [updateStatusMutation] = useMutation(UPDATE_CONVERSATION_STATUS);\n\n  const conversations = conversationsData?.supportConversations || [];\n\n  // Update stats when conversations change\n  useEffect(() => {\n    const total = conversations.length;\n    const active = conversations.filter((c: Conversation) => c.status === 'ACTIVE').length;\n    const waiting = conversations.filter((c: Conversation) => c.status === 'WAITING').length;\n    \n    setStats({\n      total,\n      active,\n      waiting,\n      avgResponseTime: 45, // Mock data\n    });\n  }, [conversations]);\n\n  // Update messages when conversation data changes\n  useEffect(() => {\n    if (conversationData?.supportConversation?.messages) {\n      setMessages(conversationData.supportConversation.messages);\n    }\n  }, [conversationData]);\n\n  // Initialize Socket.IO\n  useEffect(() => {\n    const newSocket = io('http://localhost:3001/support-chat');\n\n    newSocket.on('connect', () => {\n      console.log('Admin connected to support chat');\n    });\n\n    newSocket.on('new_conversation', () => {\n      refetchConversations();\n    });\n\n    newSocket.on('new_message', (message: any) => {\n      if (selectedConversation && message.conversationId === selectedConversation.id) {\n        setMessages(prev => [...prev, message]);\n      }\n      refetchConversations();\n    });\n\n    setSocket(newSocket);\n\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [selectedConversation, refetchConversations]);\n\n  // Refetch when filter changes\n  useEffect(() => {\n    refetchConversations();\n  }, [filter, refetchConversations]);\n\n  const selectConversation = (conversation: Conversation) => {\n    setSelectedConversation(conversation);\n\n    // Join conversation via WebSocket\n    if (socket && user) {\n      socket.emit('join_conversation', {\n        conversationId: conversation.id,\n        userId: user.id,\n      });\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!inputMessage.trim() || !selectedConversation || !user) return;\n\n    const messageContent = inputMessage;\n    setInputMessage(''); // Clear immediately\n\n    try {\n      await sendMessageMutation({\n        variables: {\n          input: {\n            conversationId: selectedConversation.id,\n            content: messageContent,\n            senderType: 'AGENT',\n            senderId: user.id,\n            senderName: user.username || 'Agent',\n          },\n        },\n      });\n\n      // Also send via WebSocket\n      if (socket) {\n        socket.emit('send_message', {\n          conversationId: selectedConversation.id,\n          content: messageContent,\n          senderType: 'AGENT',\n          senderId: user.id,\n          senderName: user.username || 'Agent',\n        });\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setInputMessage(messageContent); // Restore on error\n    }\n  };\n\n  const assignToMe = async () => {\n    if (!selectedConversation || !user) return;\n\n    try {\n      await assignToAgentMutation({\n        variables: {\n          conversationId: selectedConversation.id,\n          agentId: user.id, // Use actual logged-in user ID\n        },\n      });\n\n      refetchConversations();\n    } catch (error) {\n      console.error('Error assigning conversation:', error);\n    }\n  };\n\n  const getPlatformIcon = (platform: string) => {\n    switch (platform) {\n      case 'FACEBOOK':\n        return <Facebook className=\"w-4 h-4\" />;\n      case 'ZALO':\n        return <ZaloIcon className=\"w-4 h-4\" />;\n      default:\n        return <MessageSquare className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'URGENT':\n        return 'text-red-600 bg-red-100';\n      case 'HIGH':\n        return 'text-orange-600 bg-orange-100';\n      case 'MEDIUM':\n        return 'text-yellow-600 bg-yellow-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  return (\n    <div className=\"h-screen bg-gray-50 flex flex-col\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Hỗ trợ khách hàng</h1>\n            <p className=\"text-sm text-gray-500 mt-1\">Quản lý tất cả hội thoại</p>\n          </div>\n\n          {/* Stats */}\n          <div className=\"flex items-center space-x-6\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-gray-900\">{stats.total}</div>\n              <div className=\"text-xs text-gray-500\">Tổng số</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{stats.active}</div>\n              <div className=\"text-xs text-gray-500\">Đang xử lý</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-yellow-600\">{stats.waiting}</div>\n              <div className=\"text-xs text-gray-500\">Chờ xử lý</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">{stats.avgResponseTime}s</div>\n              <div className=\"text-xs text-gray-500\">Thời gian phản hồi</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex items-center space-x-4 mt-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Tìm kiếm khách hàng...\"\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\n            />\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setFilter('all')}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                filter === 'all'\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Tất cả\n            </button>\n            <button\n              onClick={() => setFilter('waiting')}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                filter === 'waiting'\n                  ? 'bg-yellow-600 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Chờ xử lý\n            </button>\n            <button\n              onClick={() => setFilter('active')}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                filter === 'active'\n                  ? 'bg-green-600 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Đang xử lý\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Conversations List */}\n        <div className=\"w-96 bg-white border-r border-gray-200 overflow-y-auto\">\n          {conversations.map((conversation: Conversation) => (\n            <motion.div\n              key={conversation.id}\n              whileHover={{ backgroundColor: '#f9fafb' }}\n              onClick={() => selectConversation(conversation)}\n              className={`p-4 border-b border-gray-200 cursor-pointer transition-colors ${\n                selectedConversation?.id === conversation.id ? 'bg-blue-50' : ''\n              }`}\n            >\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold flex-shrink-0\">\n                  {conversation.customerName?.[0]?.toUpperCase() || 'K'}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <h3 className=\"font-semibold text-gray-900 truncate\">\n                      {conversation.customerName || 'Khách hàng'}\n                    </h3>\n                    <div className=\"flex items-center space-x-1\">\n                      {getPlatformIcon(conversation.platform)}\n                      <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${getPriorityColor(conversation.priority)}`}>\n                        {conversation.priority}\n                      </span>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 truncate\">\n                    {conversation.lastMessagePreview || 'Chưa có tin nhắn'}\n                  </p>\n                  <div className=\"flex items-center justify-between mt-2\">\n                    <span className=\"text-xs text-gray-400\">\n                      {conversation.lastMessageAt\n                        ? new Date(conversation.lastMessageAt).toLocaleTimeString('vi-VN', {\n                            hour: '2-digit',\n                            minute: '2-digit',\n                          })\n                        : ''}\n                    </span>\n                    {conversation.assignedAgent && (\n                      <span className=\"text-xs text-blue-600\">\n                        {conversation.assignedAgent.username}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Chat Area */}\n        {selectedConversation ? (\n          <div className=\"flex-1 flex flex-col\">\n            {/* Chat Header */}\n            <div className=\"bg-white border-b border-gray-200 p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold\">\n                    {selectedConversation.customerName?.[0]?.toUpperCase() || 'K'}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">\n                      {selectedConversation.customerName || 'Khách hàng'}\n                    </h3>\n                    <div className=\"flex items-center space-x-2 text-xs text-gray-500\">\n                      {selectedConversation.customerEmail && (\n                        <span className=\"flex items-center space-x-1\">\n                          <Mail className=\"w-3 h-3\" />\n                          <span>{selectedConversation.customerEmail}</span>\n                        </span>\n                      )}\n                      {selectedConversation.customerPhone && (\n                        <span className=\"flex items-center space-x-1\">\n                          <Phone className=\"w-3 h-3\" />\n                          <span>{selectedConversation.customerPhone}</span>\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center space-x-2\">\n                  <button\n                    onClick={assignToMe}\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    Nhận hội thoại\n                  </button>\n                  <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                    <MoreVertical className=\"w-5 h-5 text-gray-600\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\n              {messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`flex ${message.senderType === 'AGENT' ? 'justify-end' : 'justify-start'}`}\n                >\n                  <div\n                    className={`max-w-[70%] rounded-2xl px-4 py-2.5 ${\n                      message.senderType === 'AGENT'\n                        ? 'bg-blue-600 text-white rounded-br-sm'\n                        : 'bg-white text-gray-900 rounded-bl-sm shadow-sm'\n                    }`}\n                  >\n                    {message.senderType !== 'AGENT' && message.isAIGenerated && (\n                      <div className=\"flex items-center space-x-1 mb-1\">\n                        <Bot className=\"w-3 h-3 text-blue-500\" />\n                        <span className=\"text-xs font-medium text-gray-600\">AI</span>\n                      </div>\n                    )}\n                    <p className=\"text-sm leading-relaxed\">{message.content}</p>\n                    <span className={`text-xs block mt-1 ${message.senderType === 'AGENT' ? 'text-blue-100' : 'text-gray-400'}`}>\n                      {new Date(message.sentAt).toLocaleTimeString('vi-VN', {\n                        hour: '2-digit',\n                        minute: '2-digit',\n                      })}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Input Area */}\n            <div className=\"bg-white border-t border-gray-200 p-4\">\n              <div className=\"flex items-end space-x-2\">\n                <button className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\n                  <Paperclip className=\"w-5 h-5 text-gray-500\" />\n                </button>\n\n                <textarea\n                  value={inputMessage}\n                  onChange={(e) => setInputMessage(e.target.value)}\n                  onKeyPress={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      sendMessage();\n                    }\n                  }}\n                  placeholder=\"Nhập tin nhắn...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none\"\n                />\n\n                <button\n                  onClick={sendMessage}\n                  disabled={!inputMessage.trim()}\n                  className=\"p-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\n            <div className=\"text-center\">\n              <MessageSquare className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n              <p className=\"text-gray-500\">Chọn một hội thoại để bắt đầu</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}
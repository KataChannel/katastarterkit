{"version":3,"sources":["turbopack:///[project]/frontend/src/types/page-builder.ts","turbopack:///[project]/node_modules/.bun/next@16.0.0+ff6b797caac6fdda/node_modules/next/src/client/components/noop-head.tsx","turbopack:///[project]/frontend/src/app/(website)/page.tsx"],"sourcesContent":["// Block types and interfaces\n// NOTE: Frontend uses string values matching backend/database ('TEXT', 'IMAGE', etc.)\n// Numeric conversion is handled by frontend utilities if needed\nexport enum BlockType {\n  // Content Blocks\n  TEXT = 'TEXT',\n  RICH_TEXT = 'RICH_TEXT', // BlockNote-style editor with Tiptap\n  IMAGE = 'IMAGE',\n  VIDEO = 'VIDEO',\n  CAROUSEL = 'CAROUSEL',\n  HERO = 'HERO',\n  BUTTON = 'BUTTON',\n  DIVIDER = 'DIVIDER',\n  SPACER = 'SPACER',\n  TEAM = 'TEAM',\n  STATS = 'STATS',\n  CONTACT_INFO = 'CONTACT_INFO',\n  GALLERY = 'GALLERY',\n  CARD = 'CARD',\n  TESTIMONIAL = 'TESTIMONIAL',\n  FAQ = 'FAQ',\n  CONTACT_FORM = 'CONTACT_FORM',\n  COMPLETED_TASKS = 'COMPLETED_TASKS',\n  SEARCH = 'SEARCH',\n  BOOKMARK = 'BOOKMARK',\n  \n  // Container/Layout Blocks (for nested children)\n  CONTAINER = 'CONTAINER',\n  SECTION = 'SECTION',\n  GRID = 'GRID',\n  FLEX_ROW = 'FLEX_ROW',\n  FLEX_COLUMN = 'FLEX_COLUMN',\n  COLUMN = 'COLUMN',\n  ROW = 'ROW',\n  \n  // Dynamic Blocks\n  DYNAMIC = 'DYNAMIC',\n  \n  // E-commerce Blocks (Data-driven)\n  PRODUCT_LIST = 'PRODUCT_LIST',\n  PRODUCT_DETAIL = 'PRODUCT_DETAIL',\n  PRODUCT_CAROUSEL = 'PRODUCT_CAROUSEL',\n}\n\nexport enum PageStatus {\n  DRAFT = 'DRAFT',\n  PUBLISHED = 'PUBLISHED',\n  ARCHIVED = 'ARCHIVED',\n}\n\n// Dynamic Block Configuration Interface\nexport interface DynamicBlockConfig {\n  // Template-based rendering\n  templateId?: string;\n  templateName?: string;\n  \n  // Data source configuration\n  dataSource?: {\n    type: 'api' | 'graphql' | 'static' | 'database';\n    endpoint?: string;\n    query?: string;\n    method?: 'GET' | 'POST';\n    token?: string;\n    headers?: Record<string, string>;\n    variables?: Record<string, any>;\n    staticData?: any;\n  };\n  \n  // Runtime variables\n  variables?: Record<string, any>;\n  \n  // Conditional rendering\n  conditions?: Array<{\n    field: string;\n    operator: 'equals' | 'notEquals' | 'contains' | 'greaterThan' | 'lessThan' | 'exists';\n    value: any;\n    logic?: 'AND' | 'OR';\n  }>;\n  \n  // Event handlers\n  events?: {\n    onClick?: string;\n    onLoad?: string;\n    onChange?: string;\n  };\n  \n  // Repeater configuration (for dynamic lists)\n  repeater?: {\n    enabled: boolean;\n    data?: any[];\n    dataPath?: string;\n    itemTemplate?: any;\n    limit?: number;\n  };\n}\n\n// Container Block Content (for layout blocks with children)\nexport interface ContainerBlockContent {\n  layout?: 'stack' | 'wrap' | 'scroll';\n  gap?: number;\n  padding?: number;\n  backgroundColor?: string;\n  maxWidth?: string;\n  alignment?: 'left' | 'center' | 'right';\n}\n\nexport interface SectionBlockContent {\n  fullWidth?: boolean;\n  containerWidth?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n  backgroundColor?: string;\n  backgroundImage?: string;\n  padding?: {\n    top?: number;\n    bottom?: number;\n  };\n}\n\nexport interface GridBlockContent {\n  columns?: number;\n  gap?: number;\n  columnTemplate?: string;\n  rowTemplate?: string;\n  responsive?: {\n    sm?: number;\n    md?: number;\n    lg?: number;\n  };\n}\n\nexport interface FlexBlockContent {\n  direction?: 'row' | 'column';\n  justifyContent?: 'start' | 'center' | 'end' | 'between' | 'around' | 'evenly';\n  alignItems?: 'start' | 'center' | 'end' | 'stretch';\n  wrap?: boolean;\n  gap?: number;\n}\n\nexport interface PageBlock {\n  id: string;\n  type: BlockType;\n  content: any;\n  style?: any;\n  order: number;\n  isVisible: boolean;\n  pageId: string;\n  \n  // Nested block support\n  children?: PageBlock[];\n  parentId?: string | null;\n  depth?: number;\n  \n  // Dynamic configuration\n  config?: DynamicBlockConfig;\n  \n  createdAt: string;\n  updatedAt: string;\n}\n\n// Layout settings for page header/footer\nexport interface PageLayoutSettings {\n  hasHeader?: boolean;\n  hasFooter?: boolean;\n  headerMenuId?: string | null;\n  footerMenuId?: string | null;\n  headerStyle?: 'default' | 'transparent' | 'fixed' | 'sticky';\n  footerStyle?: 'default' | 'minimal' | 'extended';\n  \n  // Custom header/footer configuration\n  headerVariant?: 'default' | 'minimal' | 'centered' | 'mega';\n  footerVariant?: 'default' | 'minimal' | 'extended' | 'newsletter';\n  headerConfig?: any; // HeaderProps from /types/layout\n  footerConfig?: any; // FooterProps from /types/layout\n}\n\n// üÜï Dynamic Page Template Configuration\nexport interface DynamicConfig {\n  dataSource: 'product' | 'post' | 'category' | 'custom';\n  dataQuery?: string;\n  slugPattern: string;\n  slugField: string;\n  dataBindings: DataBinding[];\n}\n\nexport interface DataBinding {\n  blockId: string;\n  sourceField: string;\n  targetProperty: string;\n  transform?: string;\n}\n\nexport interface Page {\n  id: string;\n  title: string;\n  slug: string;\n  content?: any;\n  status: PageStatus;\n  seoTitle?: string;\n  seoDescription?: string;\n  seoKeywords?: string[];\n  blocks?: PageBlock[];\n  layoutSettings?: PageLayoutSettings;\n  isHomepage?: boolean; // Flag to mark this page as the homepage\n  \n  // üÜï Dynamic Page Template Support\n  isDynamic?: boolean;\n  dynamicConfig?: DynamicConfig;\n  \n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface PaginatedPages {\n  items: Page[];\n  pagination: {\n    currentPage: number;\n    totalPages: number;\n    totalItems: number;\n    hasNextPage: boolean;\n    hasPreviousPage: boolean;\n  };\n}\n\n// Block content interfaces\nexport interface TextBlockContent {\n  html: string;\n  text: string;\n  fontSize?: number;\n  fontWeight?: string;\n  textAlign?: 'left' | 'center' | 'right';\n  color?: string;\n  lineHeight?: number;\n  letterSpacing?: number;\n  textDecoration?: 'none' | 'underline' | 'line-through' | 'overline';\n  backgroundColor?: string;\n  padding?: {\n    top?: number;\n    right?: number;\n    bottom?: number;\n    left?: number;\n  };\n  borderRadius?: number;\n  customCSS?: string;\n}\n\nexport interface ImageBlockContent {\n  src: string;\n  alt: string;\n  caption?: string;\n  width?: number;\n  height?: number;\n  objectFit?: 'cover' | 'contain' | 'fill';\n}\n\nexport interface HeroBlockContent {\n  backgroundImage?: string;\n  backgroundColor?: string;\n  title: string;\n  subtitle?: string;\n  description?: string;\n  buttonText?: string;\n  buttonLink?: string;\n  textAlign?: 'left' | 'center' | 'right';\n  overlay?: boolean;\n  overlayOpacity?: number;\n}\n\nexport interface ButtonBlockContent {\n  text: string;\n  link: string;\n  variant?: 'primary' | 'secondary' | 'outline';\n  size?: 'sm' | 'md' | 'lg';\n  fullWidth?: boolean;\n}\n\nexport interface VideoBlockContent {\n  url: string;\n  title?: string;\n  autoplay?: boolean;\n  controls?: boolean;\n  muted?: boolean;\n  loop?: boolean;\n}\n\nexport interface GalleryBlockContent {\n  images: {\n    src: string;\n    alt: string;\n    caption?: string;\n  }[];\n  columns?: number;\n  spacing?: number;\n}\n\nexport interface CardBlockContent {\n  title: string;\n  description?: string;\n  image?: string;\n  link?: string;\n  buttonText?: string;\n}\n\nexport interface TestimonialBlockContent {\n  text: string;\n  author: string;\n  position?: string;\n  company?: string;\n  avatar?: string;\n}\n\nexport interface FAQBlockContent {\n  items: {\n    question: string;\n    answer: string;\n  }[];\n}\n\nexport interface ContactFormBlockContent {\n  title?: string;\n  description?: string;\n  fields: Array<{\n    name: string;\n    label: string;\n    type: 'text' | 'email' | 'tel' | 'textarea';\n    required: boolean;\n    placeholder?: string;\n  }>;\n  submitText?: string;\n  successMessage?: string;\n}\n\nexport interface ProductCarouselBlockContent {\n  title?: string;\n  category?: string; // Danh m·ª•c s·∫£n ph·∫©m\n  filterType?: 'all' | 'featured' | 'bestseller' | 'category' | 'custom'; // Lo·∫°i l·ªçc\n  customQuery?: string; // GraphQL query t√πy ch·ªânh\n  itemsToShow?: number; // S·ªë s·∫£n ph·∫©m hi·ªÉn th·ªã\n  showViewAllButton?: boolean; // ·∫®n/hi·ªán n√∫t \"Xem t·∫•t c·∫£\"\n  viewAllLink?: string; // Link khi click \"Xem t·∫•t c·∫£\"\n  autoplay?: boolean;\n  autoplayDelay?: number; // ms\n  loop?: boolean;\n  showNavigation?: boolean; // Hi·ªán n√∫t Next/Prev\n  responsive?: {\n    mobile?: number; // S·ªë items hi·ªÉn th·ªã tr√™n mobile\n    tablet?: number; // S·ªë items hi·ªÉn th·ªã tr√™n tablet\n    desktop?: number; // S·ªë items hi·ªÉn th·ªã tr√™n desktop\n  };\n}\n\nexport interface TeamBlockContent {\n  title?: string;\n  subtitle?: string;\n  members: Array<{\n    name: string;\n    position: string;\n    bio?: string;\n    image?: string;\n    social?: {\n      linkedin?: string;\n      twitter?: string;\n      email?: string;\n    };\n  }>;\n  layout?: 'grid' | 'carousel';\n  columns?: number;\n}\n\nexport interface StatsBlockContent {\n  title?: string;\n  subtitle?: string;\n  stats: Array<{\n    value: string;\n    label: string;\n    description?: string;\n    icon?: string;\n  }>;\n  layout?: 'horizontal' | 'grid';\n  animated?: boolean;\n}\n\nexport interface ContactInfoBlockContent {\n  title?: string;\n  subtitle?: string;\n  contacts: Array<{\n    type: 'address' | 'phone' | 'email' | 'hours';\n    label: string;\n    value: string;\n    icon?: string;\n  }>;\n  showMap?: boolean;\n  mapEmbedUrl?: string;\n}\n\n// Block style interface\nexport interface BlockStyle {\n  margin?: {\n    top?: number;\n    right?: number;\n    bottom?: number;\n    left?: number;\n  };\n  padding?: {\n    top?: number;\n    right?: number;\n    bottom?: number;\n    left?: number;\n  };\n  backgroundColor?: string;\n  borderRadius?: number;\n  border?: {\n    width?: number;\n    style?: 'solid' | 'dashed' | 'dotted';\n    color?: string;\n  };\n  shadow?: {\n    x?: number;\n    y?: number;\n    blur?: number;\n    spread?: number;\n    color?: string;\n  };\n  animation?: {\n    type?: 'fadeIn' | 'slideUp' | 'slideDown' | 'slideLeft' | 'slideRight';\n    duration?: number;\n    delay?: number;\n  };\n}\n\n// Input types for GraphQL\nexport interface CreatePageInput {\n  title: string;\n  slug: string;\n  content?: any;\n  status: PageStatus;\n  seoTitle?: string;\n  seoDescription?: string;\n  seoKeywords?: string[];\n  layoutSettings?: PageLayoutSettings;\n  isHomepage?: boolean;\n  \n  // üÜï Dynamic Page Template\n  isDynamic?: boolean;\n  dynamicConfig?: DynamicConfig;\n}\n\nexport interface UpdatePageInput {\n  title?: string;\n  slug?: string;\n  content?: any;\n  status?: PageStatus;\n  seoTitle?: string;\n  seoDescription?: string;\n  seoKeywords?: string[];\n  layoutSettings?: PageLayoutSettings;\n  isHomepage?: boolean;\n  \n  // üÜï Dynamic Page Template\n  isDynamic?: boolean;\n  dynamicConfig?: DynamicConfig;\n}\n\nexport interface CreatePageBlockInput {\n  type: BlockType;\n  content: any;\n  style?: BlockStyle;\n  order?: number;\n  isVisible?: boolean;\n  parentId?: string | null;\n  depth?: number;\n  config?: DynamicBlockConfig;\n  children?: CreatePageBlockInput[];\n}\n\nexport interface UpdatePageBlockInput {\n  id?: string;\n  type?: BlockType;\n  content?: any;\n  style?: BlockStyle;\n  order?: number;\n  isVisible?: boolean;\n  parentId?: string | null;\n  depth?: number;\n  config?: DynamicBlockConfig;\n  children?: UpdatePageBlockInput[];\n}\n\nexport interface PageFiltersInput {\n  status?: PageStatus;\n  search?: string;\n}\n\nexport interface BulkUpdateBlockOrderInput {\n  id: string;\n  order: number;\n}\n\n// E-commerce Block Content Interfaces\nexport interface ProductListBlockContent {\n  title?: string;\n  subtitle?: string;\n  limit?: number;\n  categoryId?: string;\n  filters?: {\n    isFeatured?: boolean;\n    isNew?: boolean;\n    minPrice?: number;\n    maxPrice?: number;\n    search?: string;\n  };\n  layout?: 'grid' | 'list';\n  columns?: 2 | 3 | 4;\n  showPrice?: boolean;\n  showCategory?: boolean;\n  showDescription?: boolean;\n  showAddToCart?: boolean;\n  cardVariant?: 'default' | 'compact' | 'detailed';\n  style?: any;\n}\n\nexport interface ProductDetailBlockContent {\n  productSlug?: string;\n  showGallery?: boolean;\n  showDescription?: boolean;\n  showSpecs?: boolean;\n  showReviews?: boolean;\n  showRelated?: boolean;\n  layout?: 'default' | 'wide' | 'sidebar';\n  style?: any;\n}","export default function NoopHead() {\n  return null\n}\n","'use client';\n\nimport { useQuery } from '@apollo/client';\nimport { GET_HOMEPAGE } from '@/graphql/queries/pages';\nimport { BlockRenderer } from '@/components/page-builder/blocks/BlockRenderer';\nimport { Page, PageStatus } from '@/types/page-builder';\nimport { notFound } from 'next/navigation';\nimport Head from 'next/head';\n\nexport default function WebsitePage() {\n  const { data, loading, error } = useQuery<{ getHomepage: Page | null }>(GET_HOMEPAGE, {\n    errorPolicy: 'all'\n  });\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  const page = data?.getHomepage;\n\n  if (error || !page) {\n    return notFound();\n  }\n\n  console.log('Fetched homepage data:', page);\n  \n  // Don't show draft or archived pages in production\n  if (process.env.NODE_ENV === 'production' && page.status !== PageStatus.PUBLISHED) {\n    return notFound();\n  }\n\n  const seoTitle = page.seoTitle || page.title;\n  const seoDescription = page.seoDescription || page.content;\n  const seoKeywords = page.seoKeywords?.join(', ');\n\n  return (\n    <>\n      <Head>\n        <title>{seoTitle}</title>\n        {seoDescription && <meta name=\"description\" content={seoDescription} />}\n        {seoKeywords && <meta name=\"keywords\" content={seoKeywords} />}\n        \n        {/* Open Graph Meta Tags */}\n        <meta property=\"og:title\" content={seoTitle} />\n        {seoDescription && <meta property=\"og:description\" content={seoDescription} />}\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:url\" content={`${process.env.NEXT_PUBLIC_APP_URL}`} />\n        \n        {/* Twitter Card Meta Tags */}\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content={seoTitle} />\n        {seoDescription && <meta name=\"twitter:description\" content={seoDescription} />}\n        \n        {/* Additional Meta Tags */}\n        <meta name=\"robots\" content=\"index, follow\" />\n        <link rel=\"canonical\" href={`${process.env.NEXT_PUBLIC_APP_URL}`} />\n      </Head>\n\n      <div className=\"min-h-screen bg-white\">\n        {/* Page Content - Full width for blocks to handle their own layouts */}\n        <main className=\"w-full\">\n          {page.blocks && page.blocks.length > 0 ? (\n            <div>\n              {[...page.blocks]\n                .sort((a, b) => (a.order || 0) - (b.order || 0))\n                .map((block) => (\n                  <div key={block.id} className=\"w-full\">\n                    <BlockRenderer\n                      block={block}\n                      isEditing={false}\n                      onUpdate={() => {}} // No editing in public view\n                      onDelete={() => {}} // No deletion in public view\n                    />\n                  </div>\n                ))}\n            </div>\n          ) : (\n            <div className=\"min-h-screen flex items-center justify-center\">\n              <div className=\"text-center py-12\">\n                <h2 className=\"text-2xl font-semibold text-gray-900 mb-4\">\n                  {page.title}\n                </h2>\n                <p className=\"text-gray-600\">\n                  {page.seoDescription || 'Trang ch·ªß'}\n                </p>\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n    </>\n  );\n}\n"],"names":["NoopHead"],"mappings":"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","ignoreList":[1]}
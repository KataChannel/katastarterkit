{"version":3,"sources":["turbopack:///[project]/frontend/src/components/team/InviteMemberDialog.tsx","turbopack:///[project]/frontend/src/hooks/useProjects.ts","turbopack:///[project]/frontend/src/graphql/project/queries.ts","turbopack:///[project]/frontend/src/graphql/project/mutations.ts"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Mail, UserPlus, Loader2, Search } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { useApolloClient, gql } from '@apollo/client';\n\ninterface InviteMemberDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onInvite: (email: string, role: string, projectId?: string, userId?: string) => Promise<void>;\n  loading?: boolean;\n  projects?: Array<{ id: string; name: string }>;\n  selectedProjectId?: string | null;\n  onProjectChange?: (projectId: string) => void;\n}\n\nexport function InviteMemberDialog({\n  open,\n  onOpenChange,\n  onInvite,\n  loading = false,\n  projects,\n  selectedProjectId,\n  onProjectChange,\n}: InviteMemberDialogProps) {\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState('MEMBER');\n  const [localProjectId, setLocalProjectId] = useState<string>('');\n  const [submitting, setSubmitting] = useState(false);\n  const [emailError, setEmailError] = useState<string>('');\n  const [validatedUserId, setValidatedUserId] = useState<string | null>(null);\n  const [validatedUserName, setValidatedUserName] = useState<string>('');\n  const [isValidating, setIsValidating] = useState(false);\n  const [existingRole, setExistingRole] = useState<string | null>(null);\n  const [checkingMembership, setCheckingMembership] = useState(false);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const [confirmData, setConfirmData] = useState<{\n    userName: string;\n    currentRole: string;\n    newRole: string;\n  } | null>(null);\n  const { toast } = useToast();\n  const apolloClient = useApolloClient();\n\n  // Sync local project id with prop\n  React.useEffect(() => {\n    if (selectedProjectId) {\n      setLocalProjectId(selectedProjectId);\n    }\n  }, [selectedProjectId]);\n\n  // Reset validated user when email changes\n  React.useEffect(() => {\n    setValidatedUserId(null);\n    setValidatedUserName('');\n    setExistingRole(null);\n  }, [email]);\n\n  // Validate email on change\n  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setEmail(value);\n\n    // Clear error if empty\n    if (!value.trim()) {\n      setEmailError('');\n      return;\n    }\n\n    // Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(value.trim())) {\n      setEmailError('Email kh√¥ng h·ª£p l·ªá');\n    } else {\n      setEmailError('');\n    }\n  };\n\n  // Check if form is valid\n  const isFormValid = React.useMemo(() => {\n    // Email must be valid\n    if (!email.trim() || emailError) return false;\n    \n    // User must be validated\n    if (!validatedUserId) return false;\n    \n    // Role must be selected\n    if (!role) return false;\n    \n    // Project must be selected if projects list exists\n    if (projects && projects.length > 0 && !localProjectId) return false;\n    \n    return true;\n  }, [email, emailError, validatedUserId, role, projects, localProjectId]);\n\n  // Validate user exists in database\n  const handleValidateUser = async () => {\n    if (!email.trim()) {\n      toast({\n        title: '‚ö†Ô∏è Email tr·ªëng',\n        description: 'Vui l√≤ng nh·∫≠p email tr∆∞·ªõc khi ki·ªÉm tra',\n        type: 'error',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    if (emailError) {\n      toast({\n        title: '‚ö†Ô∏è Email kh√¥ng h·ª£p l·ªá',\n        description: 'Vui l√≤ng nh·∫≠p ƒë√∫ng ƒë·ªãnh d·∫°ng email',\n        type: 'error',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setIsValidating(true);\n    \n    try {\n      // Step 1: Find user by email\n      const { data: userData } = await apolloClient.query({\n        query: gql`\n          query FindUserByEmail($input: UnifiedFindManyInput, $modelName: String!) {\n            findMany(modelName: $modelName, input: $input)\n          }\n        `,\n        variables: {\n          modelName: 'user',\n          input: {\n            where: {\n              email: {\n                equals: email.trim().toLowerCase(),\n              },\n            },\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              email: true,\n            },\n          },\n        },\n        fetchPolicy: 'network-only',\n      });\n\n      // Parse response\n      let users = userData?.findMany;\n      if (typeof users === 'string') {\n        try {\n          users = JSON.parse(users);\n        } catch (parseError) {\n          console.error('[InviteMemberDialog] JSON parse error:', parseError);\n          toast({\n            title: '‚ùå L·ªói d·ªØ li·ªáu',\n            description: 'Kh√¥ng th·ªÉ x·ª≠ l√Ω d·ªØ li·ªáu t·ª´ server',\n            type: 'error',\n            variant: 'destructive',\n          });\n          return;\n        }\n      }\n\n      // Validate user exists\n      if (!users || !Array.isArray(users) || users.length === 0) {\n        toast({\n          title: '‚ùå Ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i',\n          description: `Email \"${email}\" ch∆∞a ƒë∆∞·ª£c ƒëƒÉng k√Ω trong h·ªá th·ªëng. Vui l√≤ng m·ªùi ng∆∞·ªùi d√πng ƒëƒÉng k√Ω tr∆∞·ªõc.`,\n          type: 'warning',\n          variant: 'destructive',\n        });\n        setValidatedUserId(null);\n        setValidatedUserName('');\n        setExistingRole(null);\n        return;\n      }\n\n      const user = users[0];\n      \n      // Validate user ID\n      if (!user?.id || typeof user.id !== 'string' || user.id.trim() === '') {\n        toast({\n          title: '‚ùå L·ªói d·ªØ li·ªáu ng∆∞·ªùi d√πng',\n          description: 'ID ng∆∞·ªùi d√πng kh√¥ng h·ª£p l·ªá',\n          type: 'error',\n          variant: 'destructive',\n        });\n        setValidatedUserId(null);\n        setValidatedUserName('');\n        setExistingRole(null);\n        return;\n      }\n\n      const userName = [user.firstName, user.lastName].filter(Boolean).join(' ') || 'Kh√¥ng c√≥ t√™n';\n      const userId = user.id.trim();\n      \n      setValidatedUserId(userId);\n      setValidatedUserName(userName);\n\n      // Step 2: Check if user is already a member of the project\n      const targetProjectId = localProjectId || selectedProjectId;\n      if (targetProjectId) {\n        setCheckingMembership(true);\n        \n        try {\n          const { data: memberData } = await apolloClient.query({\n            query: gql`\n              query CheckProjectMembership($input: UnifiedFindManyInput, $modelName: String!) {\n                findMany(modelName: $modelName, input: $input)\n              }\n            `,\n            variables: {\n              modelName: 'projectMember',\n              input: {\n                where: {\n                  AND: [\n                    { projectId: { equals: targetProjectId } },\n                    { userId: { equals: userId } }\n                  ]\n                },\n                select: {\n                  id: true,\n                  role: true,\n                },\n              },\n            },\n            fetchPolicy: 'network-only',\n          });\n\n          let members = memberData?.findMany;\n          if (typeof members === 'string') {\n            try {\n              members = JSON.parse(members);\n            } catch (parseError) {\n              console.error('[InviteMemberDialog] Member parse error:', parseError);\n            }\n          }\n\n          if (members && Array.isArray(members) && members.length > 0) {\n            const member = members[0];\n            const currentRole = member.role || 'MEMBER';\n            setExistingRole(currentRole);\n            \n            toast({\n              title: '‚ö†Ô∏è Ng∆∞·ªùi d√πng ƒë√£ l√† th√†nh vi√™n',\n              description: `${userName} ƒë√£ tham gia d·ª± √°n v·ªõi vai tr√≤ ${getRoleDisplayName(currentRole)}. B·∫°n c√≥ th·ªÉ thay ƒë·ªïi vai tr√≤.`,\n              type: 'warning',\n              variant: 'default',\n            });\n          } else {\n            setExistingRole(null);\n            toast({\n              title: '‚úÖ T√¨m th·∫•y ng∆∞·ªùi d√πng',\n              description: `${userName} (${user.email}) ch∆∞a tham gia d·ª± √°n n√†y.`,\n              type: 'success',\n              variant: 'default',\n            });\n          }\n        } catch (memberError) {\n          console.error('[InviteMemberDialog] Check membership error:', memberError);\n          setExistingRole(null);\n          toast({\n            title: '‚úÖ T√¨m th·∫•y ng∆∞·ªùi d√πng',\n            description: `${userName} (${user.email})`,\n            type: 'success',\n            variant: 'default',\n          });\n        } finally {\n          setCheckingMembership(false);\n        }\n      } else {\n        setExistingRole(null);\n        toast({\n          title: '‚úÖ T√¨m th·∫•y ng∆∞·ªùi d√πng',\n          description: `${userName} (${user.email})`,\n          type: 'success',\n          variant: 'default',\n        });\n      }\n\n    } catch (error) {\n      console.error('[InviteMemberDialog] Validate user error:', error);\n      toast({\n        title: '‚ùå L·ªói ki·ªÉm tra',\n        description: error instanceof Error ? error.message : 'Kh√¥ng th·ªÉ ki·ªÉm tra email',\n        type: 'error',\n        variant: 'destructive',\n      });\n      setValidatedUserId(null);\n      setValidatedUserName('');\n      setExistingRole(null);\n    } finally {\n      setIsValidating(false);\n    }\n  };\n\n  // Helper function to get role display name\n  const getRoleDisplayName = (role: string): string => {\n    const roleMap: Record<string, string> = {\n      'OWNER': 'Owner',\n      'ADMIN': 'Admin',\n      'MEMBER': 'Member',\n    };\n    return roleMap[role.toUpperCase()] || role;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !role) {\n      toast({\n        title: 'L·ªói',\n        description: 'Vui l√≤ng nh·∫≠p email v√† ch·ªçn vai tr√≤',\n        type: 'error',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    // Validate user must be checked first\n    if (!validatedUserId) {\n      toast({\n        title: '‚ö†Ô∏è Ch∆∞a ki·ªÉm tra ng∆∞·ªùi d√πng',\n        description: 'Vui l√≤ng nh·∫•n n√∫t t√¨m ki·∫øm ƒë·ªÉ ki·ªÉm tra email tr∆∞·ªõc',\n        type: 'warning',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    // Validate project selection if projects list is provided\n    if (projects && projects.length > 0 && !localProjectId) {\n      toast({\n        title: 'L·ªói',\n        description: 'Vui l√≤ng ch·ªçn d·ª± √°n',\n        type: 'error',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    // If user is already a member, ask for confirmation to change role\n    if (existingRole) {\n      const currentRoleName = getRoleDisplayName(existingRole);\n      const newRoleName = getRoleDisplayName(role);\n      \n      if (existingRole.toUpperCase() === role.toUpperCase()) {\n        toast({\n          title: '‚ÑπÔ∏è Vai tr√≤ gi·ªëng nhau',\n          description: `${validatedUserName} ƒë√£ c√≥ vai tr√≤ ${currentRoleName} trong d·ª± √°n n√†y.`,\n          type: 'info',\n          variant: 'default',\n        });\n        return;\n      }\n      \n      // Show confirmation dialog\n      setConfirmData({\n        userName: validatedUserName,\n        currentRole: currentRoleName,\n        newRole: newRoleName,\n      });\n      setShowConfirmDialog(true);\n      return;\n    }\n\n    // Proceed with adding member\n    await performAddMember();\n  };\n\n  // Perform the actual add member action\n  const performAddMember = async () => {\n    setSubmitting(true);\n    try {\n      // Pass validatedUserId to avoid re-querying\n      await onInvite(email, role, localProjectId || undefined, validatedUserId || undefined);\n      \n      // Reset form on success\n      setEmail('');\n      setRole('MEMBER');\n      setValidatedUserId(null);\n      setValidatedUserName('');\n      setExistingRole(null);\n      setShowConfirmDialog(false);\n      setConfirmData(null);\n      // Don't reset project selection\n      \n    } catch (error) {\n      // Error handled by parent component\n      console.error('[InviteMemberDialog] Error:', error);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Handle confirm role change\n  const handleConfirmRoleChange = async () => {\n    setShowConfirmDialog(false);\n    await performAddMember();\n  };\n\n  // Handle cancel role change\n  const handleCancelRoleChange = () => {\n    setShowConfirmDialog(false);\n    setConfirmData(null);\n  };\n\n  const handleCancel = () => {\n    setEmail('');\n    setRole('MEMBER');\n    setValidatedUserId(null);\n    setValidatedUserName('');\n    setExistingRole(null);\n    onOpenChange(false);\n  };\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent className=\"sm:max-w-[425px]\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <UserPlus className=\"h-5 w-5\" />\n              M·ªùi th√†nh vi√™n\n            </DialogTitle>\n            <DialogDescription>\n              Nh·∫≠p email v√† ch·ªçn vai tr√≤ cho th√†nh vi√™n m·ªõi\n            </DialogDescription>\n          </DialogHeader>\n\n          <form onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 p-4 max-h-[60vh] overflow-y-auto\">\n            {/* Project selection - only show if projects prop is provided */}\n            {projects && projects.length > 0 && (\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"project\">D·ª± √°n</Label>\n                <Select\n                  value={localProjectId}\n                  onValueChange={(value) => {\n                    setLocalProjectId(value);\n                    onProjectChange?.(value);\n                  }}\n                  disabled={submitting || loading}\n                >\n                  <SelectTrigger id=\"project\">\n                    <SelectValue placeholder=\"Ch·ªçn d·ª± √°n\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {projects.map((project) => (\n                      <SelectItem key={project.id} value={project.id}>\n                        {project.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"email\">\n                Email <span className=\"text-red-500\">*</span>\n              </Label>\n              <div className=\"flex gap-2\">\n                <div className=\"relative flex-1\">\n                  <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"member@example.com\"\n                    value={email}\n                    onChange={handleEmailChange}\n                    className={`pl-9 pr-10 ${\n                      email && emailError \n                        ? 'border-red-500' \n                        : email && !emailError \n                        ? 'border-green-500' \n                        : ''\n                    }`}\n                    disabled={submitting || loading || isValidating}\n                    autoComplete=\"off\"\n                    required\n                  />\n                  {email && (\n                    <div className=\"absolute right-3 top-3\">\n                      {emailError ? (\n                        <span className=\"text-red-500 text-lg leading-none\">‚úñ</span>\n                      ) : (\n                        <span className=\"text-green-500 text-lg leading-none\">‚úì</span>\n                      )}\n                    </div>\n                  )}\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={handleValidateUser}\n                  disabled={!email || !!emailError || isValidating || submitting || loading}\n                  title=\"Ki·ªÉm tra email\"\n                  className=\"shrink-0\"\n                >\n                  {isValidating ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <Search className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </div>\n              {validatedUserId && validatedUserName && (\n                <div className={`flex items-center gap-2 p-2 rounded-md ${\n                  existingRole \n                    ? 'bg-amber-50 border border-amber-200' \n                    : 'bg-green-50 border border-green-200'\n                }`}>\n                  <span className={`text-sm ${existingRole ? 'text-amber-600' : 'text-green-600'}`}>\n                    {existingRole ? '‚ö†Ô∏è' : '‚úì'}\n                  </span>\n                  <div className=\"flex-1\">\n                    <span className={`text-sm font-medium ${existingRole ? 'text-amber-800' : 'text-green-800'}`}>\n                      {validatedUserName}\n                    </span>\n                    {existingRole ? (\n                      <span className=\"text-xs text-amber-600 ml-2\">\n                        - Vai tr√≤ hi·ªán t·∫°i: {getRoleDisplayName(existingRole)}\n                      </span>\n                    ) : (\n                      <span className=\"text-xs text-green-600 ml-2\">\n                        - Ch∆∞a tham gia d·ª± √°n\n                      </span>\n                    )}\n                  </div>\n                  {checkingMembership && (\n                    <Loader2 className=\"h-3 w-3 animate-spin text-muted-foreground\" />\n                  )}\n                </div>\n              )}\n              {emailError && (\n                <p className=\"text-xs text-red-500 flex items-center gap-1\">\n                  <span>‚ö†Ô∏è</span>\n                  <span>{emailError}</span>\n                </p>\n              )}\n              {!emailError && !validatedUserId && (\n                <p className=\"text-xs text-muted-foreground\">\n                  üí° Nh·∫≠p email v√† nh·∫•n n√∫t t√¨m ki·∫øm ƒë·ªÉ ki·ªÉm tra\n                </p>\n              )}\n            </div>\n\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"role\">Vai tr√≤</Label>\n              <Select\n                value={role}\n                onValueChange={setRole}\n                disabled={submitting || loading}\n              >\n                <SelectTrigger id=\"role\">\n                  <SelectValue placeholder=\"Ch·ªçn vai tr√≤\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"OWNER\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">Owner</span>\n                      <span className=\"text-xs text-muted-foreground\">- To√†n quy·ªÅn</span>\n                    </div>\n                  </SelectItem>\n                  <SelectItem value=\"ADMIN\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">Admin</span>\n                      <span className=\"text-xs text-muted-foreground\">- Qu·∫£n l√Ω d·ª± √°n</span>\n                    </div>\n                  </SelectItem>\n                  <SelectItem value=\"MEMBER\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">Member</span>\n                      <span className=\"text-xs text-muted-foreground\">- Th√†nh vi√™n</span>\n                    </div>\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"rounded-lg bg-amber-50 border border-amber-200 p-3 text-sm\">\n              <div className=\"flex gap-2\">\n                <span className=\"text-amber-600 flex-shrink-0\">‚ö†Ô∏è</span>\n                <div className=\"text-amber-800 space-y-1\">\n                  <p className=\"font-medium\">L∆∞u √Ω quan tr·ªçng:</p>\n                  <ul className=\"list-disc list-inside space-y-0.5 text-xs\">\n                    <li>Nh·∫•n n√∫t <strong>t√¨m ki·∫øm</strong> ƒë·ªÉ ki·ªÉm tra email</li>\n                    <li>H·ªá th·ªëng s·∫Ω ki·ªÉm tra ng∆∞·ªùi d√πng c√≥ t·ªìn t·∫°i kh√¥ng</li>\n                    <li>N·∫øu ƒë√£ l√† th√†nh vi√™n, b·∫°n c√≥ th·ªÉ thay ƒë·ªïi vai tr√≤</li>\n                    <li>N·∫øu ch∆∞a c√≥ t√†i kho·∫£n, m·ªùi ng∆∞·ªùi d√πng ƒëƒÉng k√Ω tr∆∞·ªõc</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleCancel}\n              disabled={submitting || loading}\n            >\n              H·ªßy\n            </Button>\n            <Button \n              type=\"submit\" \n              disabled={!isFormValid || submitting || loading}\n            >\n              {(submitting || loading) && (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              )}\n              {submitting ? 'ƒêang x·ª≠ l√Ω...' : 'Th√™m th√†nh vi√™n'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n\n    {/* Confirmation Dialog for Role Change */}\n    <AlertDialog open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle className=\"flex items-center gap-2\">\n            üîÑ Thay ƒë·ªïi vai tr√≤\n          </AlertDialogTitle>\n        </AlertDialogHeader>\n        \n        <div className=\"space-y-3\">\n          <div className=\"space-y-2\">\n            <div className=\"text-sm\">\n              <span className=\"font-medium\">Ng∆∞·ªùi d√πng:</span>{' '}\n              {confirmData?.userName}\n            </div>\n            <div className=\"text-sm\">\n              <span className=\"font-medium\">Vai tr√≤ hi·ªán t·∫°i:</span>{' '}\n              <span className=\"text-amber-600\">{confirmData?.currentRole}</span>\n            </div>\n            <div className=\"text-sm\">\n              <span className=\"font-medium\">Vai tr√≤ m·ªõi:</span>{' '}\n              <span className=\"text-green-600\">{confirmData?.newRole}</span>\n            </div>\n          </div>\n          <div className=\"text-sm font-medium\">\n            B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën thay ƒë·ªïi vai tr√≤ kh√¥ng?\n          </div>\n        </div>\n        \n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={handleCancelRoleChange}>\n            H·ªßy\n          </AlertDialogCancel>\n          <AlertDialogAction onClick={handleConfirmRoleChange}>\n            X√°c nh·∫≠n thay ƒë·ªïi\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  </>\n  );\n}\n","import { useQuery, useMutation, useApolloClient } from '@apollo/client';\nimport { GET_MY_PROJECTS, GET_PROJECT, GET_PROJECT_MEMBERS } from '@/graphql/project/queries';\nimport {\n  CREATE_PROJECT,\n  UPDATE_PROJECT,\n  DELETE_PROJECT,\n  ADD_PROJECT_MEMBER,\n  REMOVE_PROJECT_MEMBER,\n  UPDATE_MEMBER_ROLE,\n} from '@/graphql/project/mutations';\n\n// ==================== QUERY HOOKS ====================\n\n/**\n * Hook: L·∫•y danh s√°ch projects (Sidebar)\n */\nexport const useMyProjects = (includeArchived = false) => {\n  return useQuery(GET_MY_PROJECTS, {\n    variables: { includeArchived },\n    fetchPolicy: 'cache-and-network',\n  });\n};\n\n/**\n * Hook: L·∫•y chi ti·∫øt project\n */\nexport const useProject = (projectId: string | null) => {\n  return useQuery(GET_PROJECT, {\n    variables: { id: projectId },\n    skip: !projectId,\n    fetchPolicy: 'cache-and-network',\n  });\n};\n\n/**\n * Hook: L·∫•y members cho @mention\n */\nexport const useProjectMembers = (projectId: string | null) => {\n  return useQuery(GET_PROJECT_MEMBERS, {\n    variables: { projectId },\n    skip: !projectId,\n  });\n};\n\n// ==================== MUTATION HOOKS ====================\n\n/**\n * Hook: T·∫°o project m·ªõi\n */\nexport const useCreateProject = () => {\n  const client = useApolloClient();\n\n  return useMutation(CREATE_PROJECT, {\n    update(cache, { data }) {\n      // Update cache v·ªõi project m·ªõi\n      const existing: any = cache.readQuery({\n        query: GET_MY_PROJECTS,\n        variables: { includeArchived: false },\n      });\n\n      if (existing?.myProjects) {\n        cache.writeQuery({\n          query: GET_MY_PROJECTS,\n          variables: { includeArchived: false },\n          data: {\n            myProjects: [data.createProject, ...existing.myProjects],\n          },\n        });\n      }\n    },\n    onCompleted: () => {\n      client.refetchQueries({ include: [GET_MY_PROJECTS] });\n    },\n  });\n};\n\n/**\n * Hook: Update project\n */\nexport const useUpdateProject = () => {\n  return useMutation(UPDATE_PROJECT, {\n    refetchQueries: [GET_MY_PROJECTS],\n  });\n};\n\n/**\n * Hook: Delete/Archive project\n */\nexport const useDeleteProject = () => {\n  const client = useApolloClient();\n\n  return useMutation(DELETE_PROJECT, {\n    update(cache, { data }) {\n      // Remove from cache\n      const existing: any = cache.readQuery({\n        query: GET_MY_PROJECTS,\n        variables: { includeArchived: false },\n      });\n\n      if (existing?.myProjects) {\n        cache.writeQuery({\n          query: GET_MY_PROJECTS,\n          variables: { includeArchived: false },\n          data: {\n            myProjects: existing.myProjects.filter(\n              (p: any) => p.id !== data.deleteProject.id\n            ),\n          },\n        });\n      }\n    },\n    onCompleted: () => {\n      client.refetchQueries({ include: [GET_MY_PROJECTS] });\n    },\n  });\n};\n\n/**\n * Hook: Th√™m member\n */\nexport const useAddMember = () => {\n  return useMutation(ADD_PROJECT_MEMBER, {\n    refetchQueries: [GET_PROJECT, GET_PROJECT_MEMBERS],\n  });\n};\n\n/**\n * Hook: X√≥a member\n */\nexport const useRemoveMember = () => {\n  return useMutation(REMOVE_PROJECT_MEMBER, {\n    refetchQueries: [GET_PROJECT, GET_PROJECT_MEMBERS],\n  });\n};\n\n/**\n * Hook: Update role\n */\nexport const useUpdateMemberRole = () => {\n  return useMutation(UPDATE_MEMBER_ROLE, {\n    refetchQueries: [GET_PROJECT, GET_PROJECT_MEMBERS],\n  });\n};\n","import { gql } from '@apollo/client';\n\n// ==================== FRAGMENTS ====================\n\nexport const PROJECT_FRAGMENT = gql`\n  fragment ProjectFields on Project {\n    id\n    name\n    description\n    avatar\n    isArchived\n    ownerId\n    createdAt\n    updatedAt\n    owner {\n      id\n      firstName\n      lastName\n      avatar\n      email\n    }\n    members {\n      id\n      userId\n      role\n      joinedAt\n      user {\n        id\n        firstName\n        lastName\n        avatar\n        email\n      }\n    }\n    _count {\n      tasks\n      chatMessages\n    }\n  }\n`;\n\nexport const PROJECT_MEMBER_FRAGMENT = gql`\n  fragment ProjectMemberFields on ProjectMember {\n    id\n    userId\n    projectId\n    role\n    joinedAt\n    user {\n      id\n      firstName\n      lastName\n      avatar\n      email\n    }\n  }\n`;\n\n// ==================== QUERIES ====================\n\n/**\n * L·∫•y danh s√°ch projects (Sidebar)\n */\nexport const GET_MY_PROJECTS = gql`\n  ${PROJECT_FRAGMENT}\n  query GetMyProjects($includeArchived: Boolean = false) {\n    myProjects(includeArchived: $includeArchived) {\n      ...ProjectFields\n    }\n  }\n`;\n\n/**\n * L·∫•y chi ti·∫øt 1 project\n */\nexport const GET_PROJECT = gql`\n  ${PROJECT_FRAGMENT}\n  query GetProject($id: ID!) {\n    project(id: $id) {\n      ...ProjectFields\n    }\n  }\n`;\n\n/**\n * L·∫•y members cho @mention autocomplete\n */\nexport const GET_PROJECT_MEMBERS = gql`\n  ${PROJECT_MEMBER_FRAGMENT}\n  query GetProjectMembers($projectId: ID!) {\n    projectMembers(projectId: $projectId) {\n      ...ProjectMemberFields\n    }\n  }\n`;\n","import { gql } from '@apollo/client';\nimport { PROJECT_FRAGMENT, PROJECT_MEMBER_FRAGMENT } from './queries';\n\n// ==================== MUTATIONS ====================\n\n/**\n * T·∫°o project m·ªõi\n */\nexport const CREATE_PROJECT = gql`\n  ${PROJECT_FRAGMENT}\n  mutation CreateProject($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      ...ProjectFields\n    }\n  }\n`;\n\n/**\n * Update project\n */\nexport const UPDATE_PROJECT = gql`\n  ${PROJECT_FRAGMENT}\n  mutation UpdateProject($id: ID!, $input: UpdateProjectInput!) {\n    updateProject(id: $id, input: $input) {\n      ...ProjectFields\n    }\n  }\n`;\n\n/**\n * Delete/Archive project\n */\nexport const DELETE_PROJECT = gql`\n  ${PROJECT_FRAGMENT}\n  mutation DeleteProject($id: ID!) {\n    deleteProject(id: $id) {\n      ...ProjectFields\n    }\n  }\n`;\n\n/**\n * Th√™m member v√†o project\n */\nexport const ADD_PROJECT_MEMBER = gql`\n  ${PROJECT_MEMBER_FRAGMENT}\n  mutation AddProjectMember($projectId: ID!, $input: AddMemberInput!) {\n    addProjectMember(projectId: $projectId, input: $input) {\n      ...ProjectMemberFields\n    }\n  }\n`;\n\n/**\n * X√≥a member kh·ªèi project\n */\nexport const REMOVE_PROJECT_MEMBER = gql`\n  mutation RemoveProjectMember($projectId: ID!, $memberId: ID!) {\n    removeProjectMember(projectId: $projectId, memberId: $memberId)\n  }\n`;\n\n/**\n * Update role c·ªßa member\n */\nexport const UPDATE_MEMBER_ROLE = gql`\n  ${PROJECT_MEMBER_FRAGMENT}\n  mutation UpdateProjectMemberRole($projectId: ID!, $input: UpdateMemberRoleInput!) {\n    updateProjectMemberRole(projectId: $projectId, input: $input) {\n      ...ProjectMemberFields\n    }\n  }\n`;\n"],"names":[],"mappings":"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"}
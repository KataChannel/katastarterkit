module.exports=[941565,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(53627),e=a.i(8912),f=a.i(168918),g=a.i(202979),h=a.i(293470),i=a.i(951369),j=a.i(785903),k=a.i(887436),l=a.i(819880),l=l,m=a.i(277976),m=m,n=a.i(276042),n=n,o=a.i(340629),o=o,p=a.i(948398),p=p,q=a.i(973174),r=a.i(363615),s=a.i(233099),t=a.i(275382),u=a.i(560155),v=a.i(701636),w=a.i(325521),x=a.i(38504),y=a.i(82899),y=y,z=a.i(253322),A=a.i(669055),B=a.i(733554),C=a.i(327987),D=a.i(312275),E=a.i(751075),F=a.i(755820),G=a.i(441405),H=a.i(466577),I=a.i(650661);let J="pagebuilder_templates",K="1.0.0";function L(){try{let a=localStorage.getItem(J);if(!a)return[];let b=JSON.parse(a);return b.version!==K&&console.warn(`Template storage version mismatch. Expected ${K}, got ${b.version}`),b.templates||[]}catch(a){return console.error("Error loading templates:",a),[]}}function M(a){try{let b={templates:a,lastModified:new Date().toISOString(),version:K};return localStorage.setItem(J,JSON.stringify(b)),!0}catch(a){return console.error("Error saving templates:",a),a instanceof DOMException&&"QuotaExceededError"===a.name&&console.error("LocalStorage quota exceeded. Consider using IndexedDB."),!1}}function N(a){let b=L(),c=b.findIndex(b=>b.id===a.id),d={...a,updatedAt:new Date().toISOString()};return c>=0?b[c]=d:b.push({...d,createdAt:d.createdAt||new Date().toISOString()}),M(b)}function O(a){let b=[],c=[];return a.id&&""!==a.id.trim()||b.push({field:"id",message:"Template ID is required"}),a.name&&""!==a.name.trim()||b.push({field:"name",message:"Template name is required"}),a.category||b.push({field:"category",message:"Template category is required"}),a.structure&&Array.isArray(a.structure)||b.push({field:"structure",message:"Template structure must be an array"}),a.description&&""!==a.description.trim()||c.push("Template description is recommended"),a.thumbnail||c.push("Template thumbnail is recommended"),a.structure&&0===a.structure.length&&c.push("Template has no elements"),{valid:0===b.length,errors:b.length>0?b:void 0,warnings:c.length>0?c:void 0}}function P(){return`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}let Q=[{id:"template_default_blank",name:"Blank Page",description:"Start with a clean slate. Perfect for building custom designs from scratch.",category:"custom",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["minimal","starter","blank"],structure:[{id:"elem_blank_container",type:"container",styles:{spacing:{padding:{desktop:{top:40,right:20,bottom:40,left:20}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}}},children:[{id:"elem_blank_text",type:"paragraph",content:"Start building your page here...",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#666666"}}}}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.5,textColor:"#333333",backgroundColor:"#ffffff",maxWidth:1200,padding:{top:0,right:0,bottom:0,left:0}}},{id:"template_default_hero",name:"Hero Landing Page",description:"Modern landing page with hero section, features, and call-to-action.",category:"landing",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["hero","landing","cta","modern"],structure:[{id:"elem_hero_section",type:"container",styles:{spacing:{padding:{desktop:{top:80,right:20,bottom:80,left:20},tablet:{top:60,right:16,bottom:60,left:16},mobile:{top:40,right:12,bottom:40,left:12}}},background:{type:{desktop:"gradient"},gradient:{desktop:{type:"linear",colors:["#667eea","#764ba2"],angle:135}}}},children:[{id:"elem_hero_title",type:"heading",content:"Build Amazing Pages",styles:{typography:{fontSize:{desktop:56,tablet:42,mobile:32},fontWeight:{desktop:700},lineHeight:{desktop:1.2},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#ffffff"}},spacing:{margin:{desktop:{top:0,right:0,bottom:24,left:0}}}}},{id:"elem_hero_subtitle",type:"paragraph",content:"Create stunning, responsive websites with our intuitive page builder. No coding required.",styles:{typography:{fontSize:{desktop:20,tablet:18,mobile:16},lineHeight:{desktop:1.6},textAlign:{desktop:"center"}},color:{textColor:{desktop:"#f0f0f0"}},spacing:{margin:{desktop:{top:0,right:0,bottom:40,left:0}}}}},{id:"elem_hero_cta",type:"button",content:"Get Started Free",styles:{typography:{fontSize:{desktop:18},fontWeight:{desktop:600}},color:{textColor:{desktop:"#667eea"},backgroundColor:{desktop:"#ffffff"}},spacing:{padding:{desktop:{top:16,right:32,bottom:16,left:32}}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:4,blur:12,spread:0,color:"#00000020",inset:!1}}}}}]},{id:"elem_features_section",type:"container",styles:{spacing:{padding:{desktop:{top:80,right:20,bottom:80,left:20}}},background:{type:{desktop:"color"},color:{desktop:"#f9fafb"}}},children:[{id:"elem_features_title",type:"heading",content:"Features",styles:{typography:{fontSize:{desktop:36,tablet:28,mobile:24},fontWeight:{desktop:700},textAlign:{desktop:"center"}},spacing:{margin:{desktop:{top:0,right:0,bottom:48,left:0}}}}},{id:"elem_features_grid",type:"container",styles:{spacing:{gap:{desktop:24}}},children:[{id:"elem_feature_1",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_1_title",type:"heading",content:"Easy to Use",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_1_desc",type:"paragraph",content:"Intuitive drag-and-drop interface makes page building a breeze.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]},{id:"elem_feature_2",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_2_title",type:"heading",content:"Fully Responsive",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_2_desc",type:"paragraph",content:"Design once, looks perfect on all devices automatically.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]},{id:"elem_feature_3",type:"container",styles:{spacing:{padding:{desktop:{top:32,right:24,bottom:32,left:24}}},background:{type:{desktop:"color"},color:{desktop:"#ffffff"}},border:{radius:{desktop:{topLeft:8,topRight:8,bottomRight:8,bottomLeft:8}}},shadow:{boxShadow:{desktop:{x:0,y:2,blur:8,spread:0,color:"#00000010",inset:!1}}}},children:[{id:"elem_feature_3_title",type:"heading",content:"Customizable",styles:{typography:{fontSize:{desktop:20},fontWeight:{desktop:600}},spacing:{margin:{desktop:{top:0,right:0,bottom:12,left:0}}}}},{id:"elem_feature_3_desc",type:"paragraph",content:"Full control over every aspect of your design with advanced styling options.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.5}},color:{textColor:{desktop:"#666666"}}}}]}]}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.5,textColor:"#333333",backgroundColor:"#ffffff",maxWidth:1200,padding:{top:0,right:0,bottom:0,left:0}}},{id:"template_default_blog",name:"Blog Post",description:"Clean blog post layout with article header, content sections, and author info.",category:"blog",isDefault:!0,createdAt:"2025-10-15T00:00:00.000Z",updatedAt:"2025-10-15T00:00:00.000Z",author:"PageBuilder Team",tags:["blog","article","content"],structure:[{id:"elem_blog_header",type:"container",styles:{spacing:{padding:{desktop:{top:60,right:20,bottom:40,left:20}},margin:{desktop:{top:0,right:0,bottom:40,left:0}}},border:{width:{desktop:0},style:{desktop:"solid"},color:{desktop:"#e5e7eb"}}},children:[{id:"elem_blog_title",type:"heading",content:"How to Build Beautiful Web Pages",styles:{typography:{fontSize:{desktop:40,tablet:32,mobile:28},fontWeight:{desktop:700},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_meta",type:"paragraph",content:"By John Doe ‚Ä¢ October 15, 2025 ‚Ä¢ 5 min read",styles:{typography:{fontSize:{desktop:14}},color:{textColor:{desktop:"#6b7280"}}}}]},{id:"elem_blog_content",type:"container",styles:{spacing:{padding:{desktop:{top:0,right:20,bottom:60,left:20}}}},children:[{id:"elem_blog_intro",type:"paragraph",content:"Creating beautiful web pages has never been easier. With modern page builders, you can design professional-looking websites without writing a single line of code.",styles:{typography:{fontSize:{desktop:18},lineHeight:{desktop:1.7}},color:{textColor:{desktop:"#4b5563"}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}},{id:"elem_blog_section_1",type:"heading",content:"Getting Started",styles:{typography:{fontSize:{desktop:28},fontWeight:{desktop:600},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_section_1_content",type:"paragraph",content:"Start by choosing a template that matches your vision. Our library includes designs for landing pages, blogs, portfolios, and more. Each template is fully customizable, so you can make it your own.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.7}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}},{id:"elem_blog_section_2",type:"heading",content:"Design with Confidence",styles:{typography:{fontSize:{desktop:28},fontWeight:{desktop:600},lineHeight:{desktop:1.3}},spacing:{margin:{desktop:{top:0,right:0,bottom:16,left:0}}}}},{id:"elem_blog_section_2_content",type:"paragraph",content:"Our responsive design system ensures your pages look perfect on all devices. Edit once, and your design automatically adapts to desktop, tablet, and mobile screens.",styles:{typography:{fontSize:{desktop:16},lineHeight:{desktop:1.7}},spacing:{margin:{desktop:{top:0,right:0,bottom:32,left:0}}}}}]}],styles:{fontFamily:"Inter, sans-serif",fontSize:16,lineHeight:1.7,textColor:"#1f2937",backgroundColor:"#ffffff",maxWidth:800,padding:{top:0,right:0,bottom:0,left:0}}}],R={category:"all",search:"",tags:[],sortBy:"date",sortOrder:"desc"};var S=a.i(515678),T=a.i(652878),U=a.i(558767);a.i(128348),a.i(779149);var V=a.i(723989);let W=[{value:"all",label:"All Templates"},{value:"landing",label:"Landing Pages"},{value:"blog",label:"Blog & Content"},{value:"ecommerce",label:"E-commerce"},{value:"portfolio",label:"Portfolio"},{value:"marketing",label:"Marketing"},{value:"custom",label:"My Templates"}];a.i(871925);var X=a.i(473515);a.i(335558);var Y=a.i(478184),Z=a.i(629432),$=a.i(723593),_=a.i(147745),aa=a.i(144932),ab=a.i(897608);a.i(144869);var ac=a.i(359379);a.i(976762);var ad=a.i(772213);let ae=ad.gql`
  fragment CustomTemplateFields on CustomTemplate {
    id
    name
    description
    category
    thumbnail
    isPublic
    isArchived
    usageCount
    createdAt
    updatedAt
    userId
  }
`,af=ad.gql`
  fragment TemplateShareFields on TemplateShare {
    id
    templateId
    sharedWith
    createdAt
  }
`,ag=ad.gql`
  ${ae}
  query GetMyCustomTemplates($category: TemplateCategory, $archived: Boolean) {
    getMyCustomTemplates(category: $category, archived: $archived) {
      ...CustomTemplateFields
    }
  }
`;ad.gql`
  ${ae}
  query GetCustomTemplate($id: ID!) {
    getCustomTemplate(id: $id) {
      ...CustomTemplateFields
      blocks
    }
  }
`,ad.gql`
  ${ae}
  query GetPublicTemplates($category: TemplateCategory, $limit: Int, $offset: Int) {
    getPublicTemplates(category: $category, limit: $limit, offset: $offset) {
      templates {
        ...CustomTemplateFields
      }
      total
    }
  }
`,ad.gql`
  ${ae}
  query GetSharedTemplates {
    getSharedTemplates {
      ...CustomTemplateFields
    }
  }
`,ad.gql`
  ${ae}
  mutation CreateCustomTemplate($input: CreateCustomTemplateInput!) {
    createCustomTemplate(input: $input) {
      ...CustomTemplateFields
    }
  }
`,ad.gql`
  ${ae}
  mutation UpdateCustomTemplate($id: ID!, $input: UpdateCustomTemplateInput!) {
    updateCustomTemplate(id: $id, input: $input) {
      ...CustomTemplateFields
    }
  }
`,ad.gql`
  mutation DeleteCustomTemplate($id: ID!) {
    deleteCustomTemplate(id: $id) {
      success
      message
    }
  }
`;let ah=ad.gql`
  ${ae}
  mutation DuplicateCustomTemplate($id: ID!, $newName: String) {
    duplicateCustomTemplate(id: $id, newName: $newName) {
      ...CustomTemplateFields
    }
  }
`,ai=ad.gql`
  ${af}
  mutation ShareTemplate($templateId: ID!, $userIds: [String!]!) {
    shareTemplate(templateId: $templateId, userIds: $userIds) {
      ...TemplateShareFields
    }
  }
`,aj=ad.gql`
  mutation UnshareTemplate($templateId: ID!, $userId: String!) {
    unshareTemplate(templateId: $templateId, userId: $userId) {
      success
      message
    }
  }
`,ak=ad.gql`
  ${ae}
  mutation UpdateTemplatePublicity($id: ID!, $isPublic: Boolean!) {
    updateTemplatePublicity(id: $id, isPublic: $isPublic) {
      ...CustomTemplateFields
    }
  }
`,al=ad.gql`
  mutation IncrementTemplateUsage($id: ID!) {
    incrementTemplateUsage(id: $id) {
      success
      usageCount
    }
  }
`;ad.gql`
  query GetCustomTemplates($userId: String!) {
    customTemplates(userId: $userId) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`;let am=ad.gql`
  query GetCustomTemplate($id: String!) {
    customTemplate(id: $id) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,an=ad.gql`
  mutation CreateCustomTemplate($input: CreateTemplateInput!) {
    createCustomTemplate(input: $input) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,ao=ad.gql`
  mutation UpdateCustomTemplate($id: String!, $input: UpdateTemplateInput!) {
    updateCustomTemplate(id: $id, input: $input) {
      id
      name
      description
      category
      blocks
      thumbnail
      isCustom
      createdAt
      updatedAt
    }
  }
`,ap=ad.gql`
  mutation DeleteCustomTemplate($id: String!) {
    deleteCustomTemplate(id: $id) {
      success
      message
    }
  }
`;class aq{client;constructor(a){this.client=a}async getMyTemplates(a,b){try{let{data:c}=await this.client.query({query:ag,variables:{category:a,archived:b},fetchPolicy:"network-only"});return c.getMyCustomTemplates||[]}catch(a){throw console.error("[CustomTemplates] Error fetching custom templates:",a),a}}async getTemplate(a){try{let{data:b}=await this.client.query({query:am,variables:{id:a},fetchPolicy:"cache-first"});return b.getCustomTemplate||null}catch(a){throw console.error("[CustomTemplates] Error fetching template:",a),a}}async createTemplate(a){try{let{data:b}=await this.client.mutate({mutation:an,variables:{input:a},refetchQueries:[{query:ag,variables:{archived:!1}}]});return b.createCustomTemplate}catch(a){throw console.error("[CustomTemplates] Error creating template:",a),a}}async updateTemplate(a,b){try{let{data:c}=await this.client.mutate({mutation:ao,variables:{id:a,input:b}});return c.updateCustomTemplate}catch(a){throw console.error("[CustomTemplates] Error updating template:",a),a}}async deleteTemplate(a){try{let{data:b}=await this.client.mutate({mutation:ap,variables:{id:a},refetchQueries:[{query:ag,variables:{archived:!1}}]});return b.deleteCustomTemplate.success}catch(a){throw console.error("[CustomTemplates] Error deleting template:",a),a}}async duplicateTemplate(a,b){try{let{data:c}=await this.client.mutate({mutation:ah,variables:{id:a,newName:b},refetchQueries:[{query:ag,variables:{archived:!1}}]});return c.duplicateCustomTemplate}catch(a){throw console.error("[CustomTemplates] Error duplicating template:",a),a}}async shareTemplate(a,b){try{let{data:c}=await this.client.mutate({mutation:ai,variables:{templateId:a,userIds:b}});return c.shareTemplate}catch(a){throw console.error("[CustomTemplates] Error sharing template:",a),a}}async unshareTemplate(a,b){try{let{data:c}=await this.client.mutate({mutation:aj,variables:{templateId:a,userId:b}});return c.unshareTemplate.success}catch(a){throw console.error("[CustomTemplates] Error unsharing template:",a),a}}async updatePublicity(a,b){try{let{data:c}=await this.client.mutate({mutation:ak,variables:{id:a,isPublic:b}});return c.updateTemplatePublicity}catch(a){throw console.error("[CustomTemplates] Error updating template publicity:",a),a}}async trackUsage(a){try{let{data:b}=await this.client.mutate({mutation:al,variables:{id:a}});return b.incrementTemplateUsage.usageCount}catch(a){throw console.error("[CustomTemplates] Error tracking template usage:",a),a}}}function ar({isOpen:a,onClose:d,onSave:e,currentPageStructure:f,currentPageStyles:i}){let[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("custom"),[p,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y=j.trim().length>0&&l.trim().length>0&&"all"!==n,z=p.split(",").map(a=>a.trim()).filter(a=>a.length>0),A=async()=>{if(!y)return void x("Please fill in all required fields");v(!0),x(null);try{let a={id:P(),name:j.trim(),description:l.trim(),category:n,structure:f,styles:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),author:s.trim()||void 0,tags:z.length>0?z:void 0,isDefault:!1};await e(a)?(k(""),m(""),o("custom"),r(""),t(""),d()):x("Failed to save template. Please try again.")}catch(a){x(a instanceof Error?a.message:"An error occurred")}finally{v(!1)}},D=a=>{let b=a.length;return a.forEach(a=>{a.children&&Array.isArray(a.children)&&(b+=D(a.children))}),b},E=D(f);return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsx)(F.DialogTitle,{children:"Save as Template"}),(0,b.jsx)(F.DialogDescription,{children:"Save your current page design as a reusable template. This includes all elements and styles."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[w&&(0,b.jsxs)(ac.Alert,{className:"border-destructive",children:[(0,b.jsx)(C.AlertCircle,{className:"h-4 w-4 text-destructive"}),(0,b.jsx)(ac.AlertDescription,{children:w})]}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,b.jsx)("div",{className:"flex items-start gap-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-blue-900 font-medium mb-1",children:"Current Page Structure"}),(0,b.jsxs)("p",{className:"text-sm text-blue-700",children:[E," elements will be saved in this template"]})]})})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(G.Label,{htmlFor:"template-name",children:["Template Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(Y.Input,{id:"template-name",placeholder:"e.g., My Landing Page",value:j,onChange:a=>k(a.target.value),maxLength:100}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Choose a descriptive name for your template"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(G.Label,{htmlFor:"template-description",children:["Description ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(H.Textarea,{id:"template-description",placeholder:"Describe what this template is for and what it includes...",value:l,onChange:a=>m(a.target.value),rows:3,maxLength:500}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[l.length,"/500 characters"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(G.Label,{htmlFor:"template-category",children:["Category ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)(aa.Select,{value:n,onValueChange:a=>o(a),children:[(0,b.jsx)(aa.SelectTrigger,{id:"template-category",children:(0,b.jsx)(aa.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(aa.SelectContent,{children:W.filter(a=>"all"!==a.value).map(a=>(0,b.jsx)(aa.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{htmlFor:"template-author",children:"Author (optional)"}),(0,b.jsx)(Y.Input,{id:"template-author",placeholder:"Your name",value:s,onChange:a=>t(a.target.value),maxLength:50})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{htmlFor:"template-tags",children:"Tags (optional)"}),(0,b.jsx)(Y.Input,{id:"template-tags",placeholder:"e.g., modern, minimal, hero",value:p,onChange:a=>r(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Separate tags with commas. Tags help organize and search templates."}),z.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:z.map((a,c)=>(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:a},c))})]})]}),(0,b.jsxs)(F.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>{k(""),m(""),o("custom"),r(""),t(""),x(null),d()},disabled:u,children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:A,disabled:!y||u,className:"bg-blue-600 hover:bg-blue-700",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Save,{className:"w-4 h-4 mr-2"}),"Save Template"]})})]})]})})}var as=a.i(508335);function at({isOpen:a,onClose:d,onImport:e}){let[f,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),s=(0,c.useRef)(null),t=async a=>{if(m(null),k(null),!a.name.endsWith(".json"))return void m("Please select a JSON file");if(a.size>5242880)return void m("File size must be less than 5MB");i(a);try{let b=await a.text(),c=JSON.parse(b),d=(a=>{if(!a.name||"string"!=typeof a.name)return"Template must have a name";if(!a.category||"string"!=typeof a.category)return"Template must have a category";if(!Array.isArray(a.structure))return"Template must have a structure array";if(0===a.structure.length)return"Template structure cannot be empty";for(let b of a.structure)if(!b.id||!b.type)return"All elements must have id and type";return null})(c);if(d){m(d),i(null);return}k(c)}catch(a){a instanceof SyntaxError?m("Invalid JSON file format"):m("Failed to read file"),i(null)}},u=async()=>{if(j){o(!0),m(null);try{await e({template:j,replaceExisting:!1})?v():m("Failed to import template. Please try again.")}catch(a){m(a instanceof Error?a.message:"An error occurred")}finally{o(!1)}}},v=()=>{i(null),k(null),m(null),q(!1),d()},w=a=>{let b=a.length;return a.forEach(a=>{a.children&&Array.isArray(a.children)&&(b+=w(a.children))}),b};return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:v,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsx)(F.DialogTitle,{children:"Import Template"}),(0,b.jsx)(F.DialogDescription,{children:"Import a template from a JSON file. The file will be validated before import."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[l&&(0,b.jsxs)(ac.Alert,{className:"border-destructive",children:[(0,b.jsx)(C.AlertCircle,{className:"h-4 w-4 text-destructive"}),(0,b.jsx)(ac.AlertDescription,{children:l})]}),!f&&(0,b.jsxs)("div",{className:`
                border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                transition-colors duration-200
                ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
              `,onDragEnter:a=>{a.preventDefault(),a.stopPropagation(),q(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),q(!1)},onDragOver:a=>{a.preventDefault(),a.stopPropagation()},onDrop:a=>{a.preventDefault(),a.stopPropagation(),q(!1);let b=a.dataTransfer.files;b&&b.length>0&&t(b[0])},onClick:()=>s.current?.click(),children:[(0,b.jsx)(_.Upload,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-2",children:p?"Drop file here":"Drop JSON file here"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse"}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(X.FileText,{className:"w-4 h-4 mr-2"}),"Select File"]}),(0,b.jsx)("input",{ref:s,type:"file",accept:".json",onChange:a=>{let b=a.target.files;b&&b.length>0&&t(b[0])},className:"hidden"})]}),j&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(ac.Alert,{className:"border-green-200 bg-green-50",children:[(0,b.jsx)(as.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)(ac.AlertDescription,{className:"text-green-800",children:"Template file validated successfully"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(X.FileText,{className:"w-5 h-5 text-gray-600"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:f?.name})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{i(null),k(null),m(null)},children:(0,b.jsx)(r.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[(f.size/1024).toFixed(2)," KB"]})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:j.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:j.description})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Category"}),(0,b.jsx)(h.Badge,{variant:"outline",className:"mt-1",children:j.category})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Elements"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:w(j.structure)})]}),j.author&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Author"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:j.author})]}),j.createdAt&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Created"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:new Date(j.createdAt).toLocaleDateString()})]})]}),j.tags&&j.tags.length>0&&(0,b.jsxs)("div",{className:"pt-3 border-t",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:j.tags.map((a,c)=>(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:a},c))})]})]})]})]}),(0,b.jsxs)(F.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:v,disabled:n,children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:u,disabled:!j||n,className:"bg-blue-600 hover:bg-blue-700",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Download,{className:"w-4 h-4 mr-2 animate-pulse"}),"Importing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Download,{className:"w-4 h-4 mr-2"}),"Import Template"]})})]})]})})}var au=a.i(234211),av=a.i(640728),aw=a.i(44445),ax=a.i(340449),ay=a.i(975780),az=a.i(626131);let aA=(0,c.createContext)(void 0);function aB({children:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(0);c.default.useEffect(()=>{m(a=>a+1)},[h,j]);let n=(0,c.useCallback)(a=>{e(a)},[]),o=(0,c.useCallback)(a=>{g(a)},[]),p=(0,c.useCallback)(a=>{console.log("[UIStateContext] setShowAddChildDialog called with:",a),i(a),console.log("[UIStateContext] showAddChildDialog state will be:",a)},[]),q=(0,c.useCallback)(a=>{console.log("[UIStateContext] setAddChildParentId called with:",a),k(a)},[]),r={showPageSettings:d,showPreview:f,showAddChildDialog:h,addChildParentId:j,setShowPageSettings:n,setShowPreview:o,setShowAddChildDialog:p,setAddChildParentId:q,openAddChildDialog:(0,c.useCallback)(a=>{console.log("[UIStateContext] openAddChildDialog called with parentId:",a),k(a),i(!0),console.log("[UIStateContext] Dialog should open for parent:",a)},[]),closeAddChildDialog:(0,c.useCallback)(()=>{console.log("[UIStateContext] closeAddChildDialog called"),i(!1),k(null)},[]),_version:l};return c.default.useEffect(()=>{},[r.showAddChildDialog,r.addChildParentId,l]),(0,b.jsx)(aA.Provider,{value:r,children:a})}function aC(){let a=(0,c.useContext)(aA);return void 0===a?{showPageSettings:!1,showPreview:!1,showAddChildDialog:!1,addChildParentId:null,setShowPageSettings:()=>{},setShowPreview:()=>{},setShowAddChildDialog:()=>{},setAddChildParentId:()=>{},openAddChildDialog:()=>{},closeAddChildDialog:()=>{}}:a}var aD=a.i(563718),aE=a.i(803212);let aF=a=>{let b=encodeURIComponent({"hero-centered":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#f8fafc"/>
        <rect x="50" y="80" width="300" height="40" rx="4" fill="#1e293b" opacity="0.8"/>
        <rect x="100" y="140" width="200" height="20" rx="4" fill="#64748b" opacity="0.6"/>
        <rect x="150" y="180" width="100" height="35" rx="6" fill="#3b82f6"/>
        <text x="200" y="203" font-family="Arial" font-size="14" fill="white" text-anchor="middle">CTA</text>
      </svg>
    `,"features-3col":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <rect x="20" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="75" cy="60" r="20" fill="#3b82f6" opacity="0.2"/>
        <rect x="40" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="30" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <rect x="145" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="200" cy="60" r="20" fill="#10b981" opacity="0.2"/>
        <rect x="165" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="155" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <rect x="270" y="20" width="110" height="260" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="2"/>
        <circle cx="325" cy="60" r="20" fill="#f59e0b" opacity="0.2"/>
        <rect x="290" y="100" width="70" height="8" rx="4" fill="#1e293b"/>
        <rect x="280" y="120" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
      </svg>
    `,"pricing-3tier":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Basic Plan -->
        <rect x="20" y="40" width="110" height="220" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="30" y="50" width="90" height="30" rx="4" fill="#f1f5f9"/>
        <text x="75" y="70" font-family="Arial" font-size="12" fill="#64748b" text-anchor="middle">Basic</text>
        <text x="75" y="110" font-family="Arial" font-size="24" fill="#1e293b" text-anchor="middle" font-weight="bold">$9</text>
        <rect x="35" y="130" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="145" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="160" width="80" height="4" rx="2" fill="#e2e8f0"/>
        
        <!-- Pro Plan (Highlighted) -->
        <rect x="145" y="30" width="110" height="240" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2"/>
        <rect x="155" y="40" width="90" height="30" rx="4" fill="rgba(255,255,255,0.2)"/>
        <text x="200" y="60" font-family="Arial" font-size="12" fill="white" text-anchor="middle" font-weight="bold">Pro</text>
        <text x="200" y="100" font-family="Arial" font-size="24" fill="white" text-anchor="middle" font-weight="bold">$29</text>
        <rect x="160" y="120" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        <rect x="160" y="135" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        <rect x="160" y="150" width="80" height="4" rx="2" fill="rgba(255,255,255,0.5)"/>
        
        <!-- Enterprise Plan -->
        <rect x="270" y="40" width="110" height="220" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="280" y="50" width="90" height="30" rx="4" fill="#f1f5f9"/>
        <text x="325" y="70" font-family="Arial" font-size="12" fill="#64748b" text-anchor="middle">Enterprise</text>
        <text x="325" y="110" font-family="Arial" font-size="24" fill="#1e293b" text-anchor="middle" font-weight="bold">$99</text>
        <rect x="285" y="130" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="145" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="160" width="80" height="4" rx="2" fill="#e2e8f0"/>
      </svg>
    `,"cta-centered":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#1e293b"/>
        <rect x="60" y="80" width="280" height="30" rx="4" fill="rgba(255,255,255,0.9)"/>
        <rect x="80" y="130" width="240" height="15" rx="4" fill="rgba(255,255,255,0.6)"/>
        <rect x="100" y="155" width="200" height="15" rx="4" fill="rgba(255,255,255,0.6)"/>
        <rect x="120" y="190" width="160" height="40" rx="8" fill="#3b82f6"/>
        <text x="200" y="216" font-family="Arial" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Get Started</text>
      </svg>
    `,"team-3members":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Member 1 -->
        <circle cx="75" cy="80" r="30" fill="#3b82f6" opacity="0.2"/>
        <circle cx="75" cy="75" r="15" fill="#3b82f6"/>
        <rect x="40" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="30" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <!-- Member 2 -->
        <circle cx="200" cy="80" r="30" fill="#10b981" opacity="0.2"/>
        <circle cx="200" cy="75" r="15" fill="#10b981"/>
        <rect x="165" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="155" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        
        <!-- Member 3 -->
        <circle cx="325" cy="80" r="30" fill="#f59e0b" opacity="0.2"/>
        <circle cx="325" cy="75" r="15" fill="#f59e0b"/>
        <rect x="290" y="120" width="70" height="10" rx="4" fill="#1e293b"/>
        <rect x="280" y="140" width="90" height="6" rx="3" fill="#64748b" opacity="0.5"/>
      </svg>
    `,"contact-form":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Form Section -->
        <rect x="30" y="30" width="200" height="240" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        <rect x="45" y="50" width="170" height="30" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="90" width="170" height="30" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="130" width="170" height="60" rx="4" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="45" y="200" width="170" height="35" rx="6" fill="#3b82f6"/>
        <text x="130" y="222" font-family="Arial" font-size="12" fill="white" text-anchor="middle">Send</text>
        
        <!-- Contact Info -->
        <rect x="250" y="70" width="120" height="100" rx="6" fill="#f1f5f9"/>
        <circle cx="280" cy="95" r="8" fill="#3b82f6"/>
        <rect x="295" y="90" width="60" height="4" rx="2" fill="#64748b"/>
        <circle cx="280" cy="125" r="8" fill="#10b981"/>
        <rect x="295" y="120" width="60" height="4" rx="2" fill="#64748b"/>
        <circle cx="280" cy="155" r="8" fill="#f59e0b"/>
        <rect x="295" y="150" width="60" height="4" rx="2" fill="#64748b"/>
      </svg>
    `,"testimonials-3col":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Testimonial 1 -->
        <rect x="20" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="75" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="30" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="35" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="30" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="75" cy="170" r="20" fill="#3b82f6" opacity="0.2"/>
        <rect x="50" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 50 215 L 55 220 L 50 225 M 55 215 L 60 220 L 55 225 M 60 215 L 65 220 L 60 225 M 65 215 L 70 220 L 65 225 M 70 215 L 75 220 L 70 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
        
        <!-- Testimonial 2 -->
        <rect x="145" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="200" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="155" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="160" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="155" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="200" cy="170" r="20" fill="#10b981" opacity="0.2"/>
        <rect x="175" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 175 215 L 180 220 L 175 225 M 180 215 L 185 220 L 180 225 M 185 215 L 190 220 L 185 225 M 190 215 L 195 220 L 190 225 M 195 215 L 200 220 L 195 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
        
        <!-- Testimonial 3 -->
        <rect x="270" y="60" width="110" height="180" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
        <text x="325" y="85" font-family="Arial" font-size="24" fill="#f59e0b" text-anchor="middle">"</text>
        <rect x="280" y="100" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="285" y="110" width="80" height="4" rx="2" fill="#e2e8f0"/>
        <rect x="280" y="120" width="90" height="4" rx="2" fill="#e2e8f0"/>
        <circle cx="325" cy="170" r="20" fill="#f59e0b" opacity="0.2"/>
        <rect x="300" y="200" width="50" height="6" rx="3" fill="#1e293b"/>
        <path d="M 300 215 L 305 220 L 300 225 M 305 215 L 310 220 L 305 225 M 310 215 L 315 220 L 310 225 M 315 215 L 320 220 L 315 225 M 320 215 L 325 220 L 320 225" stroke="#f59e0b" stroke-width="2" fill="none"/>
      </svg>
    `,"carousel-featured-products":`
      <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#ffffff"/>
        <!-- Title -->
        <rect x="100" y="20" width="200" height="12" rx="4" fill="#1e293b"/>
        <rect x="120" y="40" width="160" height="8" rx="4" fill="#64748b" opacity="0.5"/>
        
        <!-- Carousel Container -->
        <rect x="20" y="70" width="360" height="200" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        
        <!-- Product Cards -->
        <rect x="35" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="40" y="90" width="90" height="90" rx="4" fill="#e0e7ff"/>
        <rect x="50" y="100" width="70" height="70" rx="4" fill="#818cf8" opacity="0.3"/>
        <rect x="45" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="45" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="45" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="70" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <rect x="150" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="155" y="90" width="90" height="90" rx="4" fill="#dbeafe"/>
        <rect x="165" y="100" width="70" height="70" rx="4" fill="#60a5fa" opacity="0.3"/>
        <rect x="160" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="160" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="160" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="185" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <rect x="265" y="85" width="100" height="170" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <rect x="270" y="90" width="90" height="90" rx="4" fill="#fef3c7"/>
        <rect x="280" y="100" width="70" height="70" rx="4" fill="#fbbf24" opacity="0.3"/>
        <rect x="275" y="190" width="80" height="8" rx="4" fill="#1e293b"/>
        <rect x="275" y="205" width="60" height="6" rx="3" fill="#64748b" opacity="0.5"/>
        <rect x="275" y="220" width="50" height="20" rx="4" fill="#3b82f6"/>
        <text x="300" y="233" font-family="Arial" font-size="10" fill="white" text-anchor="middle">View</text>
        
        <!-- Navigation Arrows -->
        <circle cx="15" cy="170" r="8" fill="#3b82f6" opacity="0.8"/>
        <path d="M 17 170 L 14 167 L 14 173 Z" fill="white"/>
        <circle cx="385" cy="170" r="8" fill="#3b82f6" opacity="0.8"/>
        <path d="M 383 170 L 386 167 L 386 173 Z" fill="white"/>
        
        <!-- Indicators -->
        <circle cx="180" cy="285" r="4" fill="#3b82f6"/>
        <circle cx="195" cy="285" r="4" fill="#cbd5e1"/>
        <circle cx="210" cy="285" r="4" fill="#cbd5e1"/>
        <circle cx="225" cy="285" r="4" fill="#cbd5e1"/>
      </svg>
    `}[a]||`
    <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
      <rect width="400" height="300" fill="#f8fafc"/>
      <rect x="100" y="100" width="200" height="100" rx="8" fill="#e2e8f0" stroke="#cbd5e1" stroke-width="2"/>
      <text x="200" y="155" font-family="Arial" font-size="16" fill="#64748b" text-anchor="middle">Template</text>
    </svg>
  `);return`data:image/svg+xml;charset=utf-8,${b}`},aG=[{id:"hero-centered",name:"Centered Hero",description:"Hero section v·ªõi ti√™u ƒë·ªÅ, m√¥ t·∫£ v√† CTA button ·ªü gi·ªØa",category:"hero",thumbnail:aF("hero-centered"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"lg",backgroundColor:"#f8fafc",padding:{top:120,bottom:120},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:24,padding:32,backgroundColor:"transparent",maxWidth:"800px",alignment:"center",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h1 style="text-align: center; font-size: 3rem; font-weight: bold; margin: 0;">Ch√†o m·ª´ng ƒë·∫øn v·ªõi trang c·ªßa ch√∫ng t√¥i</h1>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.25rem; color: #64748b;">Gi·∫£i ph√°p t·ªët nh·∫•t cho doanh nghi·ªáp c·ªßa b·∫°n. B·∫Øt ƒë·∫ßu ngay h√¥m nay v√† tr·∫£i nghi·ªám s·ª± kh√°c bi·ªát.</p>',style:{}}},{type:aE.BlockType.BUTTON,order:2,depth:2,content:{text:"B·∫Øt ƒë·∫ßu ngay",href:"#",variant:"primary",style:{backgroundColor:"#3b82f6",color:"white",padding:"16px 32px",fontSize:"1.125rem",borderRadius:"8px"}}}]}]}]},{id:"features-3col",name:"Features 3 Columns",description:"3 t√≠nh nƒÉng n·ªïi b·∫≠t v·ªõi icon, ti√™u ƒë·ªÅ v√† m√¥ t·∫£",category:"features",thumbnail:aF("features-3col"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:48,padding:0,backgroundColor:"transparent",maxWidth:"100%",alignment:"center",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold;">T√≠nh nƒÉng n·ªïi b·∫≠t</h2>',style:{}}},{type:aE.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">üöÄ</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">Nhanh ch√≥ng</h3>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">T·ªëc ƒë·ªô x·ª≠ l√Ω si√™u nhanh, t·ªëi ∆∞u hi·ªáu su·∫•t t·ªëi ƒëa.</p>',style:{}}}]},{type:aE.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #10b981; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">üîí</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">B·∫£o m·∫≠t</h3>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">B·∫£o v·ªá d·ªØ li·ªáu v·ªõi c√¥ng ngh·ªá m√£ h√≥a hi·ªán ƒë·∫°i.</p>',style:{}}}]},{type:aE.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f8fafc",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="width: 48px; height: 48px; background: #f59e0b; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">‚ö°</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin: 0;">D·ªÖ s·ª≠ d·ª•ng</h3>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<p style="color: #64748b; line-height: 1.6;">Giao di·ªán tr·ª±c quan, d·ªÖ d√†ng s·ª≠ d·ª•ng cho m·ªçi ng∆∞·ªùi.</p>',style:{}}}]}]}]}]}]},{id:"pricing-3tier",name:"Pricing 3 Tiers",description:"B·∫£ng gi√° 3 g√≥i v·ªõi highlight g√≥i ph·ªï bi·∫øn",category:"pricing",thumbnail:aF("pricing-3tier"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"#f8fafc",padding:{top:80,bottom:80},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:48,padding:0,backgroundColor:"transparent",maxWidth:"100%",alignment:"center",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold;">Ch·ªçn g√≥i ph√π h·ª£p</h2>',style:{}}},{type:aE.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:24,responsive:{sm:1,md:2,lg:3},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"2px solid #e2e8f0"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Starter</h3><p style="color: #64748b;">Cho c√° nh√¢n</p>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$9<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì 10 projects</li><li style="padding: 8px 0;">‚úì 5GB storage</li><li style="padding: 8px 0;">‚úì Email support</li></ul>',style:{}}},{type:aE.BlockType.BUTTON,order:3,depth:4,content:{text:"B·∫Øt ƒë·∫ßu",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]},{type:aE.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"3px solid #3b82f6",position:"relative"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="position: absolute; top: -12px; right: 20px; background: #3b82f6; color: white; padding: 4px 12px; border-radius: 999px; font-size: 0.875rem; font-weight: bold;">PH·ªî BI·∫æN</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Pro</h3><p style="color: #64748b;">Cho doanh nghi·ªáp nh·ªè</p>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$29<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:aE.BlockType.TEXT,order:3,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì Unlimited projects</li><li style="padding: 8px 0;">‚úì 50GB storage</li><li style="padding: 8px 0;">‚úì Priority support</li><li style="padding: 8px 0;">‚úì Advanced analytics</li></ul>',style:{}}},{type:aE.BlockType.BUTTON,order:4,depth:4,content:{text:"B·∫Øt ƒë·∫ßu",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]},{type:aE.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:24,padding:32,backgroundColor:"white",maxWidth:"100%",alignment:"left",style:{borderRadius:"12px",border:"2px solid #e2e8f0"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold;">Enterprise</h3><p style="color: #64748b;">Cho t·ªï ch·ª©c l·ªõn</p>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="font-size: 3rem; font-weight: bold;">$99<span style="font-size: 1rem; color: #64748b;">/th√°ng</span></div>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<ul style="list-style: none; padding: 0;"><li style="padding: 8px 0;">‚úì Unlimited everything</li><li style="padding: 8px 0;">‚úì 500GB storage</li><li style="padding: 8px 0;">‚úì 24/7 phone support</li><li style="padding: 8px 0;">‚úì Custom integrations</li><li style="padding: 8px 0;">‚úì Dedicated account manager</li></ul>',style:{}}},{type:aE.BlockType.BUTTON,order:3,depth:4,content:{text:"Li√™n h·ªá",href:"#",variant:"primary",style:{width:"100%",padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px"}}}]}]}]}]}]},{id:"cta-centered",name:"Centered CTA",description:"Call-to-action section v·ªõi background m√†u v√† buttons",category:"custom",thumbnail:aF("cta-centered"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"lg",backgroundColor:"#3b82f6",padding:{top:80,bottom:80},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:24,padding:32,backgroundColor:"transparent",maxWidth:"800px",alignment:"center",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold; color: white; margin: 0;">S·∫µn s√†ng b·∫Øt ƒë·∫ßu?</h2>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.25rem; color: rgba(255,255,255,0.9);">Tham gia c√πng h√†ng ngh√¨n kh√°ch h√†ng ƒëang s·ª≠ d·ª•ng s·∫£n ph·∫©m c·ªßa ch√∫ng t√¥i.</p>',style:{}}},{type:aE.BlockType.FLEX_ROW,order:2,depth:2,content:{direction:"row",justifyContent:"center",alignItems:"center",wrap:!0,gap:16,style:{}},children:[{type:aE.BlockType.BUTTON,order:0,depth:3,content:{text:"D√πng th·ª≠ mi·ªÖn ph√≠",href:"#",variant:"primary",style:{padding:"16px 32px",backgroundColor:"white",color:"#3b82f6",borderRadius:"8px",fontSize:"1.125rem",fontWeight:"bold"}}},{type:aE.BlockType.BUTTON,order:1,depth:3,content:{text:"T√¨m hi·ªÉu th√™m",href:"#",variant:"secondary",style:{padding:"16px 32px",backgroundColor:"transparent",color:"white",border:"2px solid white",borderRadius:"8px",fontSize:"1.125rem"}}}]}]}]}]},{id:"team-3members",name:"Team 3 Members",description:"Gi·ªõi thi·ªáu ƒë·ªôi ng≈© v·ªõi 3 th√†nh vi√™n, ·∫£nh ƒë·∫°i di·ªán v√† th√¥ng tin li√™n h·ªá",category:"team",thumbnail:aF("team-3members"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">ƒê·ªôi Ng≈© C·ªßa Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">G·∫∑p g·ª° nh·ªØng con ng∆∞·ªùi t√†i nƒÉng ƒë·∫±ng sau th√†nh c√¥ng c·ªßa ch√∫ng t√¥i</p>',style:{}}},{type:aE.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{marginTop:"48px"}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 1",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">Nguy·ªÖn VƒÉn A</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">CEO & Founder</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Chuy√™n gia v·ªõi h∆°n 10 nƒÉm kinh nghi·ªám trong lƒ©nh v·ª±c c√¥ng ngh·ªá v√† qu·∫£n l√Ω.</p>',style:{}}}]},{type:aE.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 2",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">Tr·∫ßn Th·ªã B</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">CTO</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Ki·∫øn tr√∫c s∆∞ ph·∫ßn m·ªÅm h√†ng ƒë·∫ßu v·ªõi ƒëam m√™ x√¢y d·ª±ng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng.</p>',style:{}}}]},{type:aE.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:16,padding:24,backgroundColor:"#f9fafb",alignment:"center",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.IMAGE,order:0,depth:4,content:{src:"https://via.placeholder.com/200x200",alt:"Team Member 3",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",margin:"0 auto"}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 0.5rem;">L√™ VƒÉn C</h3><p style="text-align: center; color: #3b82f6; font-weight: 600; margin-bottom: 1rem;">Head of Design</p><p style="text-align: center; color: #64748b; font-size: 0.875rem;">Nh√† thi·∫øt k·∫ø s√°ng t·∫°o v·ªõi t·∫ßm nh√¨n th·∫©m m·ªπ ƒë·ªôc ƒë√°o v√† tinh t·∫ø.</p>',style:{}}}]}]}]}]}]},{id:"contact-form",name:"Contact Form & Info",description:"Form li√™n h·ªá k·∫øt h·ª£p v·ªõi th√¥ng tin li√™n l·∫°c v√† b·∫£n ƒë·ªì",category:"contact",thumbnail:aF("contact-form"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"#f9fafb",padding:{top:80,bottom:80}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">Li√™n H·ªá V·ªõi Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">Ch√∫ng t√¥i lu√¥n s·∫µn s√†ng l·∫Øng nghe v√† h·ªó tr·ª£ b·∫°n</p>',style:{}}},{type:aE.BlockType.GRID,order:1,depth:2,content:{columns:2,gap:48,responsive:{sm:1,md:2,lg:2},style:{marginTop:"48px"}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:32,padding:32,backgroundColor:"white",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Th√¥ng Tin Li√™n H·ªá</h3>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px; margin-bottom: 20px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">üìç</div><div><strong style="display: block; margin-bottom: 4px;">ƒê·ªãa ch·ªâ</strong><span style="color: #64748b;">123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</span></div></div>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px; margin-bottom: 20px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">üìû</div><div><strong style="display: block; margin-bottom: 4px;">ƒêi·ªán tho·∫°i</strong><span style="color: #64748b;">+84 123 456 789</span></div></div>',style:{}}},{type:aE.BlockType.TEXT,order:3,depth:4,content:{content:'<div style="display: flex; align-items: start; gap: 16px;"><div style="width: 40px; height: 40px; background: #3b82f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚úâÔ∏è</div><div><strong style="display: block; margin-bottom: 4px;">Email</strong><span style="color: #64748b;">contact@example.com</span></div></div>',style:{}}}]},{type:aE.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"white",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">G·ª≠i Tin Nh·∫Øn</h3><p style="color: #64748b; margin-bottom: 1.5rem;">ƒêi·ªÅn th√¥ng tin b√™n d∆∞·ªõi ƒë·ªÉ g·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</p>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">H·ªç v√† t√™n</label><input type="text" placeholder="Nh·∫≠p h·ªç v√† t√™n" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;" /></div>',style:{}}},{type:aE.BlockType.TEXT,order:2,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">Email</label><input type="email" placeholder="Nh·∫≠p email" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;" /></div>',style:{}}},{type:aE.BlockType.TEXT,order:3,depth:4,content:{content:'<div style="margin-bottom: 16px;"><label style="display: block; margin-bottom: 8px; font-weight: 600;">Tin nh·∫Øn</label><textarea placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n" rows="4" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem; resize: vertical;"></textarea></div>',style:{}}},{type:aE.BlockType.BUTTON,order:4,depth:4,content:{text:"G·ª≠i tin nh·∫Øn",href:"#",variant:"primary",style:{width:"100%",padding:"14px 24px",backgroundColor:"#3b82f6",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold"}}}]}]}]}]}]},{id:"testimonials-3col",name:"Testimonials 3 Reviews",description:"Ph·∫ßn ƒë√°nh gi√° c·ªßa kh√°ch h√†ng v·ªõi 3 reviews v√† rating",category:"custom",thumbnail:aF("testimonials-3col"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!1,containerWidth:"lg",backgroundColor:"white",padding:{top:80,bottom:80}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{alignment:"center",maxWidth:"1200px",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 1rem;">Kh√°ch H√†ng N√≥i G√¨ V·ªÅ Ch√∫ng T√¥i</h2><p style="text-align: center; color: #64748b; font-size: 1.125rem; max-width: 600px; margin: 0 auto;">H√†ng ng√†n kh√°ch h√†ng h√†i l√≤ng ƒë√£ tin t∆∞·ªüng v√† s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i</p>',style:{}}},{type:aE.BlockType.GRID,order:1,depth:2,content:{columns:3,gap:32,responsive:{sm:1,md:2,lg:3},style:{marginTop:"48px"}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"S·∫£n ph·∫©m tuy·ªát v·ªùi! Gi√∫p c√¥ng vi·ªác c·ªßa t√¥i hi·ªáu qu·∫£ h∆°n r·∫•t nhi·ªÅu. ƒê·ªôi ng≈© h·ªó tr·ª£ c≈©ng r·∫•t t·∫≠n t√¨nh."</p>',style:{}}},{type:aE.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:aE.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 1",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:aE.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">Nguy·ªÖn Minh A</strong><span style="color: #64748b; font-size: 0.875rem;">CEO t·∫°i ABC Corp</span></div>',style:{}}}]}]},{type:aE.BlockType.CONTAINER,order:1,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"Giao di·ªán ƒë·∫πp, d·ªÖ s·ª≠ d·ª•ng v√† t√≠nh nƒÉng ƒë·∫ßy ƒë·ªß. T√¥i ƒë√£ gi·ªõi thi·ªáu cho nhi·ªÅu ƒë·ªìng nghi·ªáp."</p>',style:{}}},{type:aE.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:aE.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 2",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:aE.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">Tr·∫ßn Th·ªã B</strong><span style="color: #64748b; font-size: 0.875rem;">Marketing Manager</span></div>',style:{}}}]}]},{type:aE.BlockType.CONTAINER,order:2,depth:3,content:{layout:"stack",gap:20,padding:32,backgroundColor:"#f9fafb",style:{borderRadius:"12px"}},children:[{type:aE.BlockType.TEXT,order:0,depth:4,content:{content:'<div style="color: #fbbf24; font-size: 1.5rem; margin-bottom: 16px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:4,content:{content:'<p style="color: #334155; font-size: 1rem; line-height: 1.7; margin-bottom: 20px;">"ROI tuy·ªát v·ªùi! Ch·ªâ sau 2 th√°ng s·ª≠ d·ª•ng, doanh thu c·ªßa ch√∫ng t√¥i ƒë√£ tƒÉng 30%."</p>',style:{}}},{type:aE.BlockType.FLEX_ROW,order:2,depth:4,content:{direction:"row",justifyContent:"start",alignItems:"center",gap:12,style:{}},children:[{type:aE.BlockType.IMAGE,order:0,depth:5,content:{src:"https://via.placeholder.com/50x50",alt:"Customer 3",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}},{type:aE.BlockType.TEXT,order:1,depth:5,content:{content:'<div><strong style="display: block; font-size: 1rem;">L√™ VƒÉn C</strong><span style="color: #64748b; font-size: 0.875rem;">Founder t·∫°i XYZ Startup</span></div>',style:{}}}]}]}]}]}]}]},{id:"carousel-hero",name:"Hero Carousel",description:"Carousel v·ªõi 3 slides hero section, t·ª± ƒë·ªông chuy·ªÉn slide",category:"hero",thumbnail:aF("carousel-hero"),blocks:[{type:aE.BlockType.CAROUSEL,order:0,depth:0,content:{slides:[{id:"1",title:"Khuy·∫øn M√£i ƒê·∫∑c Bi·ªát",subtitle:"Gi·∫£m gi√° l√™n ƒë·∫øn 50% cho t·∫•t c·∫£ s·∫£n ph·∫©m",description:"∆Øu ƒë√£i c√≥ th·ªùi h·∫°n - Nhanh tay ƒë·∫∑t h√†ng ngay h√¥m nay!",image:"https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop",cta:{text:"Mua Ngay",link:"#products"},badge:"HOT",bgColor:"bg-gradient-to-r from-red-500 to-pink-600"},{id:"2",title:"S·∫£n Ph·∫©m M·ªõi 2024",subtitle:"B·ªô s∆∞u t·∫≠p m·ªõi nh·∫•t",description:"Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao v·ªõi thi·∫øt k·∫ø hi·ªán ƒë·∫°i",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop",cta:{text:"Kh√°m Ph√°",link:"#new-arrivals"},badge:"NEW",bgColor:"bg-gradient-to-r from-blue-500 to-cyan-600"},{id:"3",title:"Ch·∫•t L∆∞·ª£ng ƒê·∫£m B·∫£o",subtitle:"Cam k·∫øt 100% ch√≠nh h√£ng",description:"T·∫•t c·∫£ s·∫£n ph·∫©m ƒë·ªÅu ƒë∆∞·ª£c ki·ªÉm ƒë·ªãnh ch·∫•t l∆∞·ª£ng nghi√™m ng·∫∑t",image:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=400&fit=crop",cta:{text:"T√¨m Hi·ªÉu Th√™m",link:"#quality"},badge:"QUALITY",bgColor:"bg-gradient-to-r from-green-500 to-emerald-600"}],autoPlay:!0,autoPlayInterval:5e3,showIndicators:!0,showArrows:!0,loop:!0,style:{}}}]},{id:"carousel-featured-products",name:"Featured Products Carousel",description:"Carousel t·ª± ƒë·ªông hi·ªÉn th·ªã s·∫£n ph·∫©m n·ªïi b·∫≠t t·ª´ database",category:"custom",thumbnail:aF("carousel-featured-products"),blocks:[{type:aE.BlockType.SECTION,order:0,depth:0,content:{fullWidth:!0,containerWidth:"xl",backgroundColor:"#ffffff",padding:{top:80,bottom:80},style:{}},children:[{type:aE.BlockType.CONTAINER,order:0,depth:1,content:{layout:"stack",gap:32,padding:0,backgroundColor:"transparent",style:{}},children:[{type:aE.BlockType.TEXT,order:0,depth:2,content:{content:'<h2 style="text-align: center; font-size: 2.5rem; font-weight: bold; margin: 0 0 16px 0;">S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>',style:{}}},{type:aE.BlockType.TEXT,order:1,depth:2,content:{content:'<p style="text-align: center; font-size: 1.125rem; color: #64748b; margin: 0 0 32px 0;">Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m ƒë∆∞·ª£c y√™u th√≠ch nh·∫•t</p>',style:{}}},{type:aE.BlockType.CAROUSEL,order:2,depth:2,content:{slides:[],dataSource:{type:"database",queryType:"featured",limit:12,titleField:"name",descriptionField:"shortDesc",imageField:"thumbnail",badgeField:"isFeatured"},autoPlay:!0,autoPlayInterval:4e3,showIndicators:!0,showArrows:!0,loop:!0,height:"lg",transition:"slide",indicatorStyle:"dots",arrowStyle:"circle",slidesPerView:3,animationType:"fade",animationDuration:600,style:{}}}]}]}]}],aH=(0,c.createContext)(void 0);function aI({children:a}){let d=(0,aD.useApolloClient)();(0,c.useEffect)(()=>{},[d]);let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)("all"),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(aG),y=c.default.useCallback(async()=>{try{t(!0);let a=new aq(d),b=await a.getMyTemplates();v(b);let c=[...aG,...b.map(a=>({id:a.id,name:a.name,description:a.description,category:a.category,thumbnail:a.thumbnail||"/placeholder-template.png",blocks:[],isCustom:!0}))];x(c)}catch(a){console.error("Error loading templates from database:",a)}finally{t(!1)}},[d]);(0,c.useEffect)(()=>{y()},[y]);let z=c.default.useCallback(a=>{l(a),j(!0)},[]),A=c.default.useCallback(()=>{j(!1),l(null)},[]),B=c.default.useCallback(async a=>{try{r(!0);let b=new aq(d);await b.createTemplate(a),console.log(`Template "${a.name}" saved successfully!`),await y(),p(!1)}catch(a){console.error("Error saving template:",a)}finally{r(!1)}},[d,y]),C=c.default.useCallback(async a=>{try{if(!window.confirm("Are you sure you want to delete this template?"))return;let b=new aq(d);await b.deleteTemplate(a),console.log("Template deleted successfully"),await y()}catch(a){console.error("Error deleting template:",a)}},[d,y]),D=c.default.useCallback(async(a,b)=>{try{let c=new aq(d);await c.duplicateTemplate(a,b),console.log("Template duplicated successfully"),await y()}catch(a){console.error("Error duplicating template:",a)}},[d,y]);return(0,b.jsx)(aH.Provider,{value:{allTemplates:w,customTemplates:u,selectedTemplate:k,templateSearchQuery:e,selectedTemplateCategory:g,showPreviewModal:i,isApplyingTemplate:m,showSaveTemplateDialog:o,isSavingTemplate:q,isLoadingTemplates:s,setTemplateSearchQuery:f,setSelectedTemplateCategory:h,setShowPreviewModal:j,setSelectedTemplate:l,setIsApplyingTemplate:n,setShowSaveTemplateDialog:p,setIsSavingTemplate:r,handlePreviewTemplate:z,handleClosePreview:A,handleSaveAsTemplate:B,handleDeleteCustomTemplate:C,handleDuplicateTemplate:D,refreshTemplates:y},children:a})}var aJ=a.i(189101),aK=a.i(388104);let aL=new class{logs=[];maxLogs=100;isDevelopment=!1;log(a,b,c,d){let e={level:a,operation:b,message:c,data:d,timestamp:new Date};if(this.logs.unshift(e),this.logs.length>this.maxLogs&&this.logs.pop(),this.isDevelopment){let f=this.getEmoji(a),g=this.getColor(a);console.group(`${f} [${b}] ${c}`),console.log("%c"+a.toUpperCase(),`color: ${g}; font-weight: bold`),d&&console.log("Data:",d),console.log("Time:",e.timestamp.toLocaleTimeString()),console.groupEnd()}}debug(a,b,c){this.isDevelopment&&this.log("debug",a,b,c)}info(a,b,c){this.log("info",a,b,c)}success(a,b,c){return this.log("success",a,b,c),this.isImportantOperation(a)}warning(a,b,c){return this.log("warning",a,b,c),!0}error(a,b,c){return this.log("error",a,b,c),!0}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}isImportantOperation(a){return["PAGE_SAVE","PAGE_CREATE","PAGE_DELETE","PAGE_PUBLISH","TEMPLATE_ADD","BULK_OPERATION"].includes(a)}getEmoji(a){return({debug:"üîç",info:"‚ÑπÔ∏è",success:"‚úÖ",warning:"‚ö†Ô∏è",error:"‚ùå"})[a]}getColor(a){return({debug:"#6B7280",info:"#3B82F6",success:"#10B981",warning:"#F59E0B",error:"#EF4444"})[a]}},aM="PAGE_UPDATE",aN="PAGE_DELETE",aO="BLOCK_CREATE",aP="BLOCK_UPDATE",aQ="BLOCK_DELETE",aR="BLOCK_REORDER",aS="BLOCK_STYLE_UPDATE",aT="TEMPLATE_APPLY",aU=(0,c.createContext)(void 0);function aV({children:a,maxHistorySize:d=50}){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(-1),i=(0,c.useCallback)((a,b)=>{f(c=>{let e=c.slice(0,g+1);return(e.push({blocks:JSON.parse(JSON.stringify(a)),timestamp:Date.now(),action:b}),e.length>d)?e.slice(e.length-d):e}),h(a=>Math.min(g+2,d)-1)},[g,d]),j=(0,c.useCallback)(()=>{if(g<=0)return null;let a=g-1;return h(a),JSON.parse(JSON.stringify(e[a].blocks))},[g,e]),k=(0,c.useCallback)(()=>{if(g>=e.length-1)return null;let a=g+1;return h(a),JSON.parse(JSON.stringify(e[a].blocks))},[g,e]),l=(0,c.useCallback)(()=>{f([]),h(-1)},[]),m=(0,c.useCallback)(()=>g<0||g>=e.length?"":e[g].action,[g,e]),n=(0,c.useCallback)(()=>g<=0?null:e[g].action,[g,e]),o=(0,c.useCallback)(()=>g>=e.length-1?null:e[g+1].action,[g,e]),p=g>0,q=g<e.length-1,r=e.length;return(0,b.jsx)(aU.Provider,{value:{canUndo:p,canRedo:q,historyIndex:g,historySize:r,undo:j,redo:k,pushHistory:i,clearHistory:l,getCurrentAction:m,getUndoAction:n,getRedoAction:o},children:a})}function aW(){let a=(0,c.useContext)(aU);return void 0===a?{canUndo:!1,canRedo:!1,historyIndex:-1,historySize:0,undo:()=>null,redo:()=>null,pushHistory:()=>{},clearHistory:()=>{},getCurrentAction:()=>"",getUndoAction:()=>null,getRedoAction:()=>null}:a}let aX={[aE.BlockType.TEXT]:{content:"Enter your text here...",style:{}},[aE.BlockType.IMAGE]:{src:"",alt:"",style:{}},[aE.BlockType.HERO]:{title:"Hero Title",subtitle:"Hero subtitle text",backgroundImage:"",style:{}},[aE.BlockType.BUTTON]:{text:"Click me",link:"#",variant:"primary",style:{}},[aE.BlockType.CAROUSEL]:{slides:[{id:"1",title:"Slide 1",subtitle:"Welcome to our carousel",description:"This is the first slide",image:"https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop",cta:{text:"Learn More",link:"#"},badge:"NEW",bgColor:"bg-gradient-to-r from-blue-500 to-purple-600"}],autoPlay:!0,autoPlayInterval:5e3,showIndicators:!0,showArrows:!0,loop:!0,style:{}},[aE.BlockType.TEAM]:{title:"Our Team",members:[],style:{}},[aE.BlockType.STATS]:{title:"Our Stats",stats:[],style:{}},[aE.BlockType.CONTACT_INFO]:{email:"",phone:"",address:"",style:{}},[aE.BlockType.DIVIDER]:{thickness:1,color:"#e5e7eb",style:{}},[aE.BlockType.SPACER]:{height:40,style:{}},[aE.BlockType.CONTAINER]:{maxWidth:"1200px",padding:"20px",backgroundColor:"transparent",style:{}},[aE.BlockType.SECTION]:{backgroundColor:"#ffffff",padding:"40px 20px",style:{}},[aE.BlockType.GRID]:{columns:2,gap:"20px",style:{}},[aE.BlockType.FLEX_ROW]:{justifyContent:"flex-start",alignItems:"center",gap:"10px",style:{}},[aE.BlockType.FLEX_COLUMN]:{justifyContent:"flex-start",alignItems:"stretch",gap:"10px",style:{}},[aE.BlockType.DYNAMIC]:{componentType:"template",templateId:"sample-template",templateName:"Sample Template",template:'<div class="p-6 border-2 border-dashed border-gray-300 rounded-lg text-center"><h3 class="text-lg font-semibold mb-2">Dynamic Block</h3><p class="text-gray-600">Loading sample template...</p></div>',dataSource:{type:"static",data:{}},variables:{},style:{}},[aE.BlockType.PRODUCT_LIST]:{title:"S·∫£n ph·∫©m n·ªïi b·∫≠t",subtitle:"Kh√°m ph√° c√°c s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao",limit:12,filters:{isFeatured:!0},layout:"grid",columns:3,showPrice:!0,showCategory:!0,showDescription:!1,showAddToCart:!0,cardVariant:"default",style:{}},[aE.BlockType.PRODUCT_DETAIL]:{productSlug:"",showGallery:!0,showDescription:!0,showSpecs:!0,showReviews:!1,showRelated:!1,layout:"default",style:{}},[aE.BlockType.VIDEO]:{url:"",title:"",autoplay:!1,controls:!0,muted:!1,loop:!1,style:{}},[aE.BlockType.SEARCH]:{placeholder:"T√¨m ki·∫øm...",searchType:"global",showFilters:!0,showResults:!0,style:{}},[aE.BlockType.BOOKMARK]:{bookmarks:[],displayMode:"list",showCategories:!0,allowEdit:!0,style:{}}},aY=(0,c.createContext)(void 0);function aZ({children:a,pageId:e}){let f,g=(0,d.useRouter)(),h=(0,az.usePageState)(),i=void 0===(f=(0,c.useContext)(aH))?{allTemplates:[],customTemplates:[],selectedTemplate:null,templateSearchQuery:"",selectedTemplateCategory:"all",showPreviewModal:!1,isApplyingTemplate:!1,showSaveTemplateDialog:!1,isSavingTemplate:!1,isLoadingTemplates:!1,setTemplateSearchQuery:()=>{},setSelectedTemplateCategory:()=>{},setShowPreviewModal:()=>{},setSelectedTemplate:()=>{},setIsApplyingTemplate:()=>{},setShowSaveTemplateDialog:()=>{},setIsSavingTemplate:()=>{},handlePreviewTemplate:()=>{},handleClosePreview:()=>{},handleSaveAsTemplate:async()=>{},handleDeleteCustomTemplate:async()=>{},handleDuplicateTemplate:async()=>{},refreshTemplates:async()=>{}}:f,j=aC(),k=aW(),{createPage:l,updatePage:m,deletePage:n}=(0,aK.usePageOperations)(),o=e||h.page?.id||"",{addBlock:p,updateBlock:q,deleteBlock:r,updateBlocksOrder:s}=(0,aK.useBlockOperations)(o),t=(0,aK.useNestedBlockOperations)(o),u=(0,c.useCallback)(async()=>{try{let{editingPage:a,isNewPageMode:b,blocks:c,refetch:d,setEditingPage:e}=h;if(!a)return void aJ.toast.error("No page to save");if(b){let b={title:a.title,slug:a.slug,content:a.content||{},status:a.status,seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:a.seoKeywords||[],isHomepage:a.isHomepage||!1},c=await l(b);if(aL.success("PAGE_CREATE","Page created successfully",c),aJ.toast.success("Page created successfully!"),c?.data?.createPage){let a=c.data.createPage;e(a),a?.id&&g.push(`/admin/pagebuilder/${a.id}`)}}else{let b={title:a.title,slug:a.slug,content:a.content||{},status:a.status,seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:a.seoKeywords||[],isHomepage:a.isHomepage||!1};await m(a.id,b),aL.success(aM,"Page updated successfully",{pageId:a.id}),aJ.toast.success("Page saved successfully!"),await d()}}catch(a){aL.error(aM,"Failed to save page",{error:a}),aJ.toast.error(a?.message||"Failed to save page")}},[h,l,m,g]),v=(0,c.useCallback)(async()=>{try{let{page:a}=h;if(!a?.id)return;await n(a.id),aL.success(aN,"Page deleted",{pageId:a.id}),aJ.toast.success("Page deleted successfully!")}catch(a){aL.error(aN,"Failed to delete page",{error:a}),aJ.toast.error(a?.message||"Failed to delete page")}},[h,n]),w=(0,c.useCallback)(async a=>{try{let{page:b,refetch:c,blocks:d}=h;if(!b?.id){aJ.toast.error("Please create a page first"),console.warn("[PageBuilder] Cannot add block: no page ID",{page:b});return}let e=aX[a]||{};a===aE.BlockType.DYNAMIC&&(e={componentType:"template",templateId:null,templateName:"New Dynamic Block",template:'<div class="p-6 border-2 border-dashed border-gray-300 rounded-lg text-center"><h3 class="text-lg font-semibold mb-2">Dynamic Block</h3><p class="text-gray-600">Select a template or paste your HTML template here.</p></div>',dataSource:{type:"static",data:{}},variables:{},style:{}},console.log("[PageBuilder] Dynamic Block created - user will pick template"));let f={type:a,content:e};console.log("[PageBuilder] Adding block:",{blockType:a,pageId:b.id});let g=await p(f);aL.success(aO,"Block added",{blockType:a}),aJ.toast.success(a===aE.BlockType.DYNAMIC?"‚ú® Dynamic Block added - pick a template!":"Block added successfully!"),console.log("[PageBuilder] Block added successfully:",g),await c();let i=await c();i?.data?.page?.blocks&&k.pushHistory(i.data.page.blocks,`Added ${a} block`)}catch(a){console.error("[PageBuilder] Block add error:",a),aL.error(aO,"Failed to add block",{error:a}),aJ.toast.error(a?.message||"Failed to add block")}},[h,p,k]),x=(0,c.useCallback)(async a=>{try{let{page:b,refetch:c}=h;if(!b?.id)return void aJ.toast.error("Please create a page first");let d={type:aE.BlockType.DYNAMIC,content:{...aX[aE.BlockType.DYNAMIC],...a}};await p(d),aL.success(aO,"Template block added",a),aJ.toast.success("Template block added!"),await c()}catch(a){aL.error(aO,"Failed to add template block",{error:a}),aJ.toast.error(a?.message||"Failed to add template block")}},[h,p]),y=(0,c.useCallback)(async(a,b,c)=>{try{let d={content:b};void 0!==c&&(d.style=c),b?.config!==void 0&&(d.config=b.config),await q(a,d),aL.debug(aP,"Block updated",{blockId:a,content:b,style:c});let e=await h.refetch();e?.data?.page?.blocks&&k.pushHistory(e.data.page.blocks,"Updated block")}catch(a){aL.error(aP,"Failed to update block",{error:a}),aJ.toast.error(a?.message||"Failed to update block")}},[q,h,k]),z=(0,c.useCallback)(async a=>{try{await r(a),aL.success(aQ,"Block deleted",{blockId:a}),aJ.toast.success("Block deleted!");let b=await h.refetch();b?.data?.page?.blocks&&k.pushHistory(b.data.page.blocks,"Deleted block")}catch(a){aL.error(aQ,"Failed to delete block",{error:a}),aJ.toast.error(a?.message||"Failed to delete block")}},[r,h,k]),A=(0,c.useCallback)(async a=>{try{let{page:b,setBlocks:c,refetch:d}=h;if(!b?.id)return;c(a);let e=a.map((a,b)=>({id:a.id,order:b}));await s(e),aL.debug(aR,"Blocks reordered",{count:a.length});let f=await d();f?.data?.page?.blocks&&k.pushHistory(f.data.page.blocks,"Reordered blocks")}catch(a){aL.error(aR,"Failed to reorder blocks",{error:a}),aJ.toast.error("Failed to reorder blocks")}},[h,s]),B=(0,c.useCallback)(a=>{h.setSelectedBlockId(a)},[h]),C=(0,c.useCallback)(async(a,b)=>{try{let{refetch:c}=h;await q(a,{style:b}),aL.debug(aS,"Block style updated",{blockId:a,style:b});let d=await c();d?.data?.page?.blocks&&k.pushHistory(d.data.page.blocks,"Updated block style")}catch(a){aL.error(aS,"Failed to update style",{error:a}),aJ.toast.error("Failed to update style")}},[h,q,k]),D=(0,c.useCallback)(async()=>{try{let a=k.undo();if(!a)return void aJ.toast.info("Nothing to undo");h.setBlocks(a);let b=a.map((a,b)=>({id:a.id,order:b}));await s(b),await h.refetch();let c=k.getUndoAction();aJ.toast.success(`Undo: ${c||"Previous action"}`),aL.debug("UNDO","Undo performed",{action:c})}catch(a){aL.error("UNDO","Failed to undo",{error:a}),aJ.toast.error("Failed to undo")}},[k,h,s]),E=(0,c.useCallback)(async()=>{try{let a=k.redo();if(!a)return void aJ.toast.info("Nothing to redo");h.setBlocks(a);let b=a.map((a,b)=>({id:a.id,order:b}));await s(b),await h.refetch();let c=k.getRedoAction();aJ.toast.success(`Redo: ${c||"Next action"}`),aL.debug("REDO","Redo performed",{action:c})}catch(a){aL.error("REDO","Failed to redo",{error:a}),aJ.toast.error("Failed to redo")}},[k,h,s]),F=(0,c.useCallback)(a=>{console.log("[PageActionsContext] handleAddChild called with parentId:",a),j.openAddChildDialog(a),console.log("[PageActionsContext] openAddChildDialog called")},[j]),G=(0,c.useCallback)(async(a,b)=>{try{let{refetch:c}=h,d=aX[b]||{};await t.addChildBlock(a,b,d,{}),aL.success(aO,"Child block added",{parentId:a,blockType:b}),aJ.toast.success("Child block added!"),j.closeAddChildDialog(),await c()}catch(a){aL.error(aO,"Failed to add child block",{error:a}),aJ.toast.error("Failed to add child block")}},[h,j,t]),H=(0,c.useCallback)(()=>{j.closeAddChildDialog()},[j]),I=(0,c.useCallback)(async a=>{try{let{page:b,editingPage:c,isNewPageMode:d,refetch:e}=h,{setIsApplyingTemplate:f,setShowPreviewModal:g}=i;if(!c?.id&&!d)return void aJ.toast.error("Please create a page first");if(f(!0),!(b?.id||c?.id))return void aJ.toast.error("Page ID not found");for(let b of a.blocks)await p({type:b.type,content:b.content,order:b.order});aL.success(aT,"Template applied",{templateId:a.id}),aJ.toast.success(`Template "${a.name}" applied!`),g(!1),await e()}catch(a){aL.error(aT,"Failed to apply template",{error:a}),aJ.toast.error("Failed to apply template")}finally{i.setIsApplyingTemplate(!1)}},[h,i,p]),J=(0,c.useCallback)(a=>{let{active:b}=a,{blocks:c,setDraggedBlock:d}=h;console.log("[PageBuilder] handleDragStart full active object:",b),console.log("[PageBuilder] handleDragStart active.data:",b.data);let e=b.data?.type,f=b.data?.blockType;if(console.log("[PageBuilder] Drag started:",{activeId:b.id,activeType:e,activeBlockType:f,fullData:b.data}),"new-block"!==e){let a=c.find(a=>a.id===b.id);a&&d(a)}},[h]),K=(0,c.useCallback)(async a=>{let{active:b,over:c}=a,{blocks:d,setDraggedBlock:e}=h;console.log("[PageBuilder] handleDragEnd full event:",a),console.log("[PageBuilder] handleDragEnd active:",b),console.log("[PageBuilder] handleDragEnd over:",c);let f=b.data?.type,g=b.data?.blockType;if(console.log("[PageBuilder] Drag ended:",{activeId:b.id,activeType:f,activeBlockType:g,overId:c?.id,overType:c?.data?.type}),e(null),!c)return void console.warn("[PageBuilder] No drop target");let i=b.id?.toString().startsWith("element-");if(i||"new-block"===f){let a=g;if(!a&&i){let c=b.id.replace("element-","");a=aE.BlockType[c],console.log("[PageBuilder] Extracted BlockType from ID:",{typeStr:c,blockTypeValue:a})}console.log("[PageBuilder] New block detected:",{blockTypeValue:a,targetId:c.id,dragType:f,isLibraryElement:i}),void 0!==a&&"canvas-droppable"===c.id?(console.log("[PageBuilder] Adding new block:",a),await w(a)):console.warn("[PageBuilder] New block rejected:",{reason:"canvas-droppable"!==c.id?"wrong-target":"no-blocktype",targetId:c.id,blockTypeValue:a,isDefined:void 0!==a});return}if(b.id===c.id)return void console.log("[PageBuilder] Same block, no reorder");let j=d.findIndex(a=>a.id===b.id),k=d.findIndex(a=>a.id===c.id);if(-1===j||-1===k)return void console.warn("[PageBuilder] Invalid block indices:",{oldIndex:j,newIndex:k});let l=[...d],[m]=l.splice(j,1);l.splice(k,0,m),A(l)},[h,A,w]);return(0,b.jsx)(aY.Provider,{value:{handlePageSave:u,handlePageDelete:v,handleAddBlock:w,handleAddTemplateBlock:x,handleBlockUpdate:y,handleBlockDelete:z,handleBlocksReorder:A,handleSelectBlock:B,handleUpdateBlockStyle:C,handleUndo:D,handleRedo:E,handleAddChild:F,handleAddChildBlock:G,handleCloseAddChildDialog:H,handleApplyTemplate:I,handleDragStart:J,handleDragEnd:K},children:a})}function a$(){let a=(0,c.useContext)(aY);return void 0===a?{handlePageSave:async()=>{},handlePageDelete:async()=>{},handleAddBlock:async()=>{},handleAddTemplateBlock:async()=>{},handleBlockUpdate:async()=>{},handleBlockDelete:async()=>{},handleBlocksReorder:async()=>{},handleSelectBlock:()=>{},handleUpdateBlockStyle:async()=>{},handleUndo:async()=>{},handleRedo:async()=>{},handleAddChild:()=>{},handleAddChildBlock:async()=>{},handleCloseAddChildDialog:()=>{},handleApplyTemplate:async()=>{},handleDragStart:()=>{},handleDragEnd:async()=>{}}:a}var a_=c,a0=a.i(519732);class a1 extends a_.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,b){this.props.onError&&this.props.onError(a,b),this.setState({errorInfo:b})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px] p-6",children:(0,b.jsxs)(ay.Card,{className:"w-full max-w-2xl",children:[(0,b.jsx)(ay.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-destructive/10 rounded-lg",children:(0,b.jsx)(ab.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(ay.CardTitle,{children:"Something went wrong"}),(0,b.jsx)(ay.CardDescription,{children:"An error occurred in the PageBuilder component"})]})]})}),(0,b.jsxs)(ay.CardContent,{className:"space-y-4",children:[this.state.error&&(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-destructive mb-2",children:"Error Message:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:this.state.error.toString()})]}),!1,(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:this.handleReset,variant:"default",children:[(0,b.jsx)(a0.RefreshCw,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,b.jsx)(g.Button,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"})]}),(0,b.jsx)("div",{className:"pt-4 border-t",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"If this problem persists, please contact support or check the browser console for more details."})})]})]})}):this.props.children}}function a2({children:a,pageId:c}){return(0,b.jsx)(a1,{children:(0,b.jsx)(az.PageStateProvider,{pageId:c,children:(0,b.jsx)(aB,{children:(0,b.jsx)(aI,{children:(0,b.jsx)(aV,{maxHistorySize:50,children:(0,b.jsx)(aZ,{pageId:c,children:(0,b.jsx)(a3,{children:a})})})})})})})}function a3({children:a}){let{draggedBlock:d}=(0,az.usePageState)(),{handleDragStart:e,handleDragEnd:f}=a$(),g=c.default.useCallback(a=>{f(a).catch(b=>{aL.error("DRAG_END","Error in drag and drop operation",{event:a,error:b})})},[f]);return(0,b.jsxs)(aw.DndContext,{onDragStart:e,onDragEnd:g,collisionDetection:aw.closestCorners,children:[a,(0,b.jsx)(a4,{draggedBlock:d})]})}let a4=c.default.memo(function({draggedBlock:a}){return(0,b.jsx)(aw.DragOverlay,{dropAnimation:null,children:a?(0,b.jsx)("div",{className:"animate-pulse pointer-events-none",children:(0,b.jsx)(ay.Card,{className:"p-4 bg-gradient-to-r from-blue-500 to-blue-600 shadow-2xl border-2 border-blue-300 text-white min-w-xs",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,b.jsx)(ax.GripVertical,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-bold block",children:"Moving Block"}),(0,b.jsx)("span",{className:"text-xs opacity-90",children:a.type})]}),(0,b.jsx)("div",{className:"ml-auto text-2xl",children:"üì¶"})]})})}):null})});var a5=a.i(741310),a6=a.i(231910);function a7({config:a,blocks:d=[],onChange:e}){let[f,h]=c.default.useState(a||{dataSource:"product",slugPattern:"",slugField:"slug",dataBindings:[]}),i=a=>{let b={...f,...a};h(b),e(b)},j=(a,b)=>{let c=[...f.dataBindings];c[a]={...c[a],...b},i({dataBindings:c})};return(0,b.jsxs)("div",{className:"space-y-4 border-l-4 border-blue-500 pl-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(a6.Link2,{className:"w-4 h-4"}),"Dynamic Configuration"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-sm",children:"Data Source"}),(0,b.jsxs)(aa.Select,{value:f.dataSource,onValueChange:a=>i({dataSource:a}),children:[(0,b.jsx)(aa.SelectTrigger,{children:(0,b.jsx)(aa.SelectValue,{})}),(0,b.jsxs)(aa.SelectContent,{children:[(0,b.jsx)(aa.SelectItem,{value:"product",children:"Product"}),(0,b.jsx)(aa.SelectItem,{value:"post",children:"Blog Post"}),(0,b.jsx)(aa.SelectItem,{value:"category",children:"Category"}),(0,b.jsx)(aa.SelectItem,{value:"custom",children:"Custom API"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-sm",children:"URL Pattern"}),(0,b.jsx)(Y.Input,{value:f.slugPattern,onChange:a=>i({slugPattern:a.target.value}),placeholder:"/product/:productSlug",className:"font-mono text-sm"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Use ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:":paramName"})," for dynamic segments"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-sm",children:"Slug Field Name"}),(0,b.jsx)(Y.Input,{value:f.slugField,onChange:a=>i({slugField:a.target.value}),placeholder:"slug",className:"font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(G.Label,{className:"text-sm font-semibold",children:"Data Bindings"}),(0,b.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{i({dataBindings:[...f.dataBindings,{blockId:"",sourceField:"",targetProperty:"content.html"}]})},className:"gap-2",children:[(0,b.jsx)($.Plus,{className:"w-4 h-4"}),"Add Binding"]})]}),f.dataBindings.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"col-span-4",children:[(0,b.jsx)(G.Label,{className:"text-xs text-gray-600",children:"Block"}),(0,b.jsxs)(aa.Select,{value:a.blockId,onValueChange:a=>j(c,{blockId:a}),children:[(0,b.jsx)(aa.SelectTrigger,{className:"h-8 text-xs",children:(0,b.jsx)(aa.SelectValue,{placeholder:"Select block"})}),(0,b.jsx)(aa.SelectContent,{children:d.map(a=>(0,b.jsxs)(aa.SelectItem,{value:a.id,children:[a.type," - ",a.id.slice(0,8)]},a.id))})]})]}),(0,b.jsxs)("div",{className:"col-span-3",children:[(0,b.jsx)(G.Label,{className:"text-xs text-gray-600",children:"Source Field"}),(0,b.jsx)(Y.Input,{value:a.sourceField,onChange:a=>j(c,{sourceField:a.target.value}),placeholder:"name",className:"h-8 text-xs font-mono"})]}),(0,b.jsxs)("div",{className:"col-span-4",children:[(0,b.jsx)(G.Label,{className:"text-xs text-gray-600",children:"Target Property"}),(0,b.jsx)(Y.Input,{value:a.targetProperty,onChange:a=>j(c,{targetProperty:a.target.value}),placeholder:"content.html",className:"h-8 text-xs font-mono"})]}),(0,b.jsx)("div",{className:"col-span-1 flex items-end",children:(0,b.jsx)(g.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{i({dataBindings:f.dataBindings.filter((a,b)=>b!==c)})},className:"h-8 w-8 text-red-600 hover:bg-red-50",children:(0,b.jsx)(U.Trash2,{className:"w-4 h-4"})})})]},c)),0===f.dataBindings.length&&(0,b.jsx)("div",{className:"text-center py-6 text-sm text-gray-500 border border-dashed border-gray-300 rounded-lg",children:'No data bindings configured. Click "Add Binding" to start.'})]})]})}let a8={√†:"a",√°:"a",·∫£:"a",√£:"a",·∫°:"a",ƒÉ:"a",·∫±:"a",·∫Ø:"a",·∫≥:"a",·∫µ:"a",·∫∑:"a",√¢:"a",·∫ß:"a",·∫•:"a",·∫©:"a",·∫´:"a",·∫≠:"a",ƒë:"d",√®:"e",√©:"e",·∫ª:"e",·∫Ω:"e",·∫π:"e",√™:"e",·ªÅ:"e",·∫ø:"e",·ªÉ:"e",·ªÖ:"e",·ªá:"e",√¨:"i",√≠:"i",·ªâ:"i",ƒ©:"i",·ªã:"i",√≤:"o",√≥:"o",·ªè:"o",√µ:"o",·ªç:"o",√¥:"o",·ªì:"o",·ªë:"o",·ªï:"o",·ªó:"o",·ªô:"o",∆°:"o",·ªù:"o",·ªõ:"o",·ªü:"o",·ª°:"o",·ª£:"o",√π:"u",√∫:"u",·ªß:"u",≈©:"u",·ª•:"u",∆∞:"u",·ª´:"u",·ª©:"u",·ª≠:"u",·ªØ:"u",·ª±:"u",·ª≥:"y",√Ω:"y",·ª∑:"y",·ªπ:"y",·ªµ:"y",√Ä:"a",√Å:"a",·∫¢:"a",√É:"a",·∫†:"a",ƒÇ:"a",·∫∞:"a",·∫Æ:"a",·∫≤:"a",·∫¥:"a",·∫∂:"a",√Ç:"a",·∫¶:"a",·∫§:"a",·∫®:"a",·∫™:"a",·∫¨:"a",ƒê:"d",√à:"e",√â:"e",·∫∫:"e",·∫º:"e",·∫∏:"e",√ä:"e",·ªÄ:"e",·∫æ:"e",·ªÇ:"e",·ªÑ:"e",·ªÜ:"e",√å:"i",√ç:"i",·ªà:"i",ƒ®:"i",·ªä:"i",√í:"o",√ì:"o",·ªé:"o",√ï:"o",·ªå:"o",√î:"o",·ªí:"o",·ªê:"o",·ªî:"o",·ªñ:"o",·ªò:"o",∆†:"o",·ªú:"o",·ªö:"o",·ªû:"o",·ª†:"o",·ª¢:"o",√ô:"u",√ö:"u",·ª¶:"u",≈®:"u",·ª§:"u",∆Ø:"u",·ª™:"u",·ª®:"u",·ª¨:"u",·ªÆ:"u",·ª∞:"u",·ª≤:"y",√ù:"y",·ª∂:"y",·ª∏:"y",·ª¥:"y"};function a9(a){if(!a)return"";let b=a.split("").map(a=>a8[a]||a).join("");return(b=(b=b.toLowerCase()).replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()).replace(/^-+|-+$/g,"")}let ba=a=>{switch(a){case aE.PageStatus.DRAFT:return{title:"Draft (B·∫£n Nh√°p)",description:"Trang n√†y ƒëang ƒë∆∞·ª£c so·∫°n th·∫£o. Kh√¥ng hi·ªÉn th·ªã c√¥ng khai cho kh√°ch truy c·∫≠p.",icon:(0,b.jsx)(C.AlertCircle,{className:"w-5 h-5"}),color:"text-yellow-600"};case aE.PageStatus.PUBLISHED:return{title:"Published (Xu·∫•t B·∫£n)",description:"Trang n√†y ƒëang hi·ªÉn th·ªã c√¥ng khai. T·∫•t c·∫£ kh√°ch truy c·∫≠p c√≥ th·ªÉ xem.",icon:(0,b.jsx)(as.CheckCircle,{className:"w-5 h-5"}),color:"text-green-600"};case aE.PageStatus.ARCHIVED:return{title:"Archived (L∆∞u Tr·ªØ)",description:"Trang n√†y ƒë∆∞·ª£c l∆∞u tr·ªØ. Kh√¥ng hi·ªÉn th·ªã c√¥ng khai nh∆∞ng v·∫´n c√≥ th·ªÉ kh√¥i ph·ª•c.",icon:(0,b.jsx)(a5.Lock,{className:"w-5 h-5"}),color:"text-gray-600"}}};function bb({page:a,onUpdate:d}){let[e,f]=(0,c.useState)({title:a.title||"",slug:a.slug||"",content:a.content&&"string"==typeof a.content?a.content:"",status:a.status,isHomepage:a.isHomepage??!1,isDynamic:a.isDynamic??!1,dynamicConfig:a.dynamicConfig,seoTitle:a.seoTitle||"",seoDescription:a.seoDescription||"",seoKeywords:(a.seoKeywords||[]).join(", "),layoutSettings:{hasHeader:a.layoutSettings?.hasHeader??!0,hasFooter:a.layoutSettings?.hasFooter??!0,headerMenuId:a.layoutSettings?.headerMenuId||null,footerMenuId:a.layoutSettings?.footerMenuId||null,headerStyle:a.layoutSettings?.headerStyle||"default",footerStyle:a.layoutSettings?.footerStyle||"default"}}),[h,j]=(0,c.useState)(""===a.slug||a.slug?.startsWith("untitled")),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o=ba(e.status),p=(b,c)=>{if("status"===b&&c!==e.status){n(c),l(!0);return}let g={...e,[b]:c};"title"===b&&h&&(g.slug=a9(c)),"slug"===b&&j(!1),f(g),d({...a,...g,content:"content"!==b||c?"content"===b?c:a.content:void 0,seoKeywords:"seoKeywords"===b?c.split(",").map(a=>a.trim()).filter(Boolean):a.seoKeywords})},q=(b,c)=>{let g={...e.layoutSettings,[b]:c};f({...e,layoutSettings:g}),d({...a,...e,layoutSettings:g,seoKeywords:e.seoKeywords.split(",").map(a=>a.trim()).filter(Boolean)})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Tabs,{defaultValue:"general",className:"w-full",children:[(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(i.TabsTrigger,{value:"general",children:"General"}),(0,b.jsx)(i.TabsTrigger,{value:"layout",children:"Layout"}),(0,b.jsx)(i.TabsTrigger,{value:"seo",children:"SEO"})]}),(0,b.jsxs)(i.TabsContent,{value:"general",className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"title",children:"Page Title"}),(0,b.jsx)(Y.Input,{id:"title",value:e.title,onChange:a=>p("title",a.target.value),placeholder:"Enter page title"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"slug",children:"URL Slug"}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(Y.Input,{id:"slug",value:e.slug,onChange:a=>p("slug",a.target.value),placeholder:"page-url-slug"}),(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>{p("slug",a9(e.title)),j(!0)},children:"Generate"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"status",children:"Page Status"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-start space-x-3 ${o.color}`,children:[o.icon,(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:o.title}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:o.description})]})]}),(0,b.jsxs)(aa.Select,{value:e.status,onValueChange:a=>p("status",a),children:[(0,b.jsx)(aa.SelectTrigger,{children:(0,b.jsx)(aa.SelectValue,{})}),(0,b.jsxs)(aa.SelectContent,{children:[(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.DRAFT,children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(C.AlertCircle,{size:14}),(0,b.jsx)("span",{children:"Draft - ƒêang So·∫°n Th·∫£o"})]})}),(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.PUBLISHED,children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(as.CheckCircle,{size:14}),(0,b.jsx)("span",{children:"Published - Xu·∫•t B·∫£n"})]})}),(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.ARCHIVED,children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(a5.Lock,{size:14}),(0,b.jsx)("span",{children:"Archived - L∆∞u Tr·ªØ"})]})})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"content",children:"Page Description"}),(0,b.jsx)(H.Textarea,{id:"content",value:e.content,onChange:a=>p("content",a.target.value),placeholder:"Optional page description",rows:3})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{htmlFor:"isHomepage",children:"Set as Homepage"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Make this page accessible at http://localhost:12000/"})]}),(0,b.jsx)(I.Switch,{id:"isHomepage",checked:e.isHomepage,onCheckedChange:b=>{f({...e,isHomepage:b}),d({...a,...e,isHomepage:b,seoKeywords:e.seoKeywords.split(",").map(a=>a.trim()).filter(Boolean)})}})]}),e.isHomepage&&(0,b.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:(0,b.jsx)("p",{className:"text-sm text-blue-900",children:"‚úì Trang n√†y s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã l√† trang ch·ªß (homepage) khi truy c·∫≠p v√†o root URL. Ch·ªâ m·ªôt trang c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·∫∑t l√†m trang ch·ªß."})})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{htmlFor:"isDynamic",children:"Dynamic Page Template"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Use this page as a template for multiple items with different slugs"})]}),(0,b.jsx)(I.Switch,{id:"isDynamic",checked:e.isDynamic||!1,onCheckedChange:a=>{f({...e,isDynamic:a})}})]}),e.isDynamic&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(a7,{config:e.dynamicConfig,blocks:a.blocks,onChange:a=>{f({...e,dynamicConfig:a})}})})]})]}),(0,b.jsxs)(i.TabsContent,{value:"layout",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Header Settings"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{htmlFor:"hasHeader",children:"Show Header"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Display website header on this page"})]}),(0,b.jsx)(I.Switch,{id:"hasHeader",checked:e.layoutSettings.hasHeader,onCheckedChange:a=>q("hasHeader",a)})]}),e.layoutSettings.hasHeader&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"headerStyle",children:"Header Style"}),(0,b.jsxs)(aa.Select,{value:e.layoutSettings.headerStyle,onValueChange:a=>q("headerStyle",a),children:[(0,b.jsx)(aa.SelectTrigger,{children:(0,b.jsx)(aa.SelectValue,{})}),(0,b.jsxs)(aa.SelectContent,{children:[(0,b.jsx)(aa.SelectItem,{value:"default",children:"Default"}),(0,b.jsx)(aa.SelectItem,{value:"transparent",children:"Transparent"}),(0,b.jsx)(aa.SelectItem,{value:"fixed",children:"Fixed Top"}),(0,b.jsx)(aa.SelectItem,{value:"sticky",children:"Sticky"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Normal header | Transparent: Overlay on hero | Fixed/Sticky: Stay on scroll"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"headerMenuId",children:"Header Menu (Optional)"}),(0,b.jsx)(Y.Input,{id:"headerMenuId",value:e.layoutSettings.headerMenuId||"",onChange:a=>q("headerMenuId",a.target.value||null),placeholder:"Leave empty for default menu"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Custom menu ID to use for this page's header"})]})]})]}),(0,b.jsxs)("div",{className:"border-t pt-6 space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Footer Settings"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{htmlFor:"hasFooter",children:"Show Footer"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Display website footer on this page"})]}),(0,b.jsx)(I.Switch,{id:"hasFooter",checked:e.layoutSettings.hasFooter,onCheckedChange:a=>q("hasFooter",a)})]}),e.layoutSettings.hasFooter&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"footerStyle",children:"Footer Style"}),(0,b.jsxs)(aa.Select,{value:e.layoutSettings.footerStyle,onValueChange:a=>q("footerStyle",a),children:[(0,b.jsx)(aa.SelectTrigger,{children:(0,b.jsx)(aa.SelectValue,{})}),(0,b.jsxs)(aa.SelectContent,{children:[(0,b.jsx)(aa.SelectItem,{value:"default",children:"Default"}),(0,b.jsx)(aa.SelectItem,{value:"minimal",children:"Minimal"}),(0,b.jsx)(aa.SelectItem,{value:"extended",children:"Extended"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Standard footer | Minimal: Compact | Extended: Full with columns"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"footerMenuId",children:"Footer Menu (Optional)"}),(0,b.jsx)(Y.Input,{id:"footerMenuId",value:e.layoutSettings.footerMenuId||"",onChange:a=>q("footerMenuId",a.target.value||null),placeholder:"Leave empty for default menu"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Custom menu ID to use for this page's footer"})]})]})]})]}),(0,b.jsxs)(i.TabsContent,{value:"seo",className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"seoTitle",children:"SEO Title"}),(0,b.jsx)(Y.Input,{id:"seoTitle",value:e.seoTitle,onChange:a=>p("seoTitle",a.target.value),placeholder:"SEO optimized title"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"seoDescription",children:"SEO Description"}),(0,b.jsx)(H.Textarea,{id:"seoDescription",value:e.seoDescription,onChange:a=>p("seoDescription",a.target.value),placeholder:"SEO meta description",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"seoKeywords",children:"SEO Keywords"}),(0,b.jsx)(Y.Input,{id:"seoKeywords",value:e.seoKeywords,onChange:a=>p("seoKeywords",a.target.value),placeholder:"keyword1, keyword2, keyword3"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate keywords with commas"})]})]})]}),(0,b.jsx)(F.Dialog,{open:k,onOpenChange:l,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-sm",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsx)(F.DialogTitle,{children:"X√°c Nh·∫≠n Thay ƒê·ªïi Tr·∫°ng Th√°i"}),(0,b.jsx)(F.DialogDescription,{children:"B·∫°n ƒëang chu·∫©n b·ªã thay ƒë·ªïi tr·∫°ng th√°i trang. Vui l√≤ng x√°c nh·∫≠n h√†nh ƒë·ªông n√†y."})]}),m&&(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tr·∫°ng Th√°i Hi·ªán T·∫°i"}),(0,b.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${ba(e.status).color}`,children:[ba(e.status).icon,(0,b.jsx)("span",{className:"text-sm",children:ba(e.status).title})]})]}),(0,b.jsx)("div",{className:"text-center text-gray-400",children:"‚Üì"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Tr·∫°ng Th√°i M·ªõi"}),(0,b.jsxs)("div",{className:`p-3 rounded-lg border border-gray-200 bg-gray-50 flex items-center space-x-2 ${ba(m).color}`,children:[ba(m).icon,(0,b.jsx)("span",{className:"text-sm",children:ba(m).title})]})]}),(0,b.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 border border-blue-200",children:(0,b.jsx)("p",{className:"text-sm text-blue-900",children:ba(m).description})})]}),(0,b.jsxs)(F.DialogFooter,{children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>{l(!1),n(null)},children:"H·ªßy B·ªè"}),(0,b.jsx)(g.Button,{onClick:()=>{m&&(f({...e,status:m}),d({...a,...e,status:m,seoKeywords:e.seoKeywords.split(",").map(a=>a.trim()).filter(Boolean)})),l(!1),n(null)},children:"X√°c Nh·∫≠n"})]})]})})]})}let bc=c.default.memo(function({showPageInfo:a,editingPage:d,showPreview:e,onPreviewToggle:f,loading:i}){let k=(0,c.useMemo)(()=>d?.status&&d.status===aE.PageStatus.PUBLISHED?"default":"secondary",[d?.status]),l=(0,c.useMemo)(()=>{if(!d?.status)return"";let a=d.status;return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},[d?.status]),m=(0,c.useCallback)(()=>{f?.(!e)},[e,f]);return a?(0,b.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1 px-4 border-r border-gray-200",children:[(0,b.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:"Page Builder"}),d&&(0,b.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[(0,b.jsx)(h.Badge,{variant:k,className:"flex-shrink-0",title:`Page status: ${l}`,children:l}),d.isHomepage&&(0,b.jsxs)(h.Badge,{className:"bg-orange-100 text-orange-800 hover:bg-orange-100 flex-shrink-0",title:"This is the homepage",children:[(0,b.jsx)(D.Home,{size:14,className:"mr-1"}),(0,b.jsx)("span",{children:"Home"})]}),d.title&&(0,b.jsxs)("span",{className:"text-sm text-gray-600 truncate hidden sm:inline",children:["‚Äî ",d.title]})]}),(0,b.jsx)(g.Button,{variant:e?"default":"outline",size:"sm",onClick:m,className:"flex-shrink-0",title:e?"Back to edit mode":"Preview page",disabled:i,children:(0,b.jsx)(j.Eye,{size:16})})]}):null}),bd=c.default.memo(function({editorMode:a,onModeChange:c,device:d,onDeviceChange:e,isLoading:f}){return(0,b.jsxs)("div",{className:"flex items-center space-x-4 flex-shrink-0 px-4 border-r border-gray-200",children:[(0,b.jsx)(i.Tabs,{value:a,onValueChange:a=>c(a),children:(0,b.jsxs)(i.TabsList,{className:"bg-gray-100",children:[(0,b.jsxs)(i.TabsTrigger,{value:"visual",className:"gap-2",children:[(0,b.jsx)(j.Eye,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Visual"})]}),(0,b.jsxs)(i.TabsTrigger,{value:"code",className:"gap-2",children:[(0,b.jsx)(k.Code,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Code"})]})]})}),(0,b.jsx)(i.Tabs,{value:d,onValueChange:a=>e(a),children:(0,b.jsxs)(i.TabsList,{className:"bg-gray-100",children:[(0,b.jsxs)(i.TabsTrigger,{value:"desktop",className:"gap-1",children:[(0,b.jsx)(l.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden md:inline text-xs",children:"Desktop"})]}),(0,b.jsxs)(i.TabsTrigger,{value:"tablet",className:"gap-1",children:[(0,b.jsx)(m.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden md:inline text-xs",children:"Tablet"})]}),(0,b.jsxs)(i.TabsTrigger,{value:"mobile",className:"gap-1",children:[(0,b.jsx)(n.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden md:inline text-xs",children:"Mobile"})]})]})})]})}),be=c.default.memo(function({onSaveClick:a,onImportClick:c}){return(0,b.jsxs)(E.DropdownMenu,{children:[(0,b.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"gap-1",title:"Template options",children:[(0,b.jsx)(z.Archive,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Templates"}),(0,b.jsx)(A.ChevronDown,{className:"w-3 h-3"})]})}),(0,b.jsxs)(E.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,b.jsxs)(E.DropdownMenuItem,{onClick:a,children:[(0,b.jsx)(x.FileDown,{className:"w-4 h-4 mr-2"}),"Save as Template",(0,b.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:"‚áß‚åòS"})]}),(0,b.jsxs)(E.DropdownMenuItem,{onClick:c,children:[(0,b.jsx)(y.default,{className:"w-4 h-4 mr-2"}),"Import Template",(0,b.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:"‚áß‚åòO"})]})]})]})}),bf=c.default.memo(function({isOpen:a,onOpenChange:d,editingPage:e,onPageUpdate:f,pageSettings:h,onSettingChange:j,isLoading:k,onSave:l}){let[m,n]=(0,c.useState)(!1),o=(0,c.useCallback)(async()=>{n(!0);try{await l()}finally{n(!1)}},[l]);return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(F.DialogContent,{className:"flex flex-col max-w-4xl max-h-[90vh] p-0 gap-0",children:[(0,b.jsxs)(F.DialogHeader,{className:"border-b border-gray-200 px-6 py-4 flex-shrink-0 bg-white",children:[(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2 text-lg font-semibold",children:[(0,b.jsx)(w.Settings,{className:"w-5 h-5 text-gray-700"}),"Page Settings"]}),(0,b.jsx)(F.DialogDescription,{className:"text-sm text-gray-500 mt-1",children:"Configure page information, layout, SEO, visibility, and custom code"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-white",children:e?(0,b.jsxs)(i.Tabs,{defaultValue:"page-settings",className:"w-full",children:[(0,b.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200",children:(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-2 rounded-none bg-white p-0 h-auto",children:[(0,b.jsx)(i.TabsTrigger,{value:"page-settings",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white",children:"üìÑ Page Settings"}),(0,b.jsx)(i.TabsTrigger,{value:"advanced",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:bg-white",children:"‚öôÔ∏è Advanced Options"})]})}),(0,b.jsx)(i.TabsContent,{value:"page-settings",className:"px-6 py-6 m-0",children:(0,b.jsx)(bb,{page:e,onUpdate:f})}),(0,b.jsxs)(i.TabsContent,{value:"advanced",className:"px-6 py-6 m-0 space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"üéõÔ∏è"}),"Page Visibility & Access"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{className:"text-sm font-medium text-gray-900",children:"Published"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Make this page publicly visible"})]}),(0,b.jsx)(I.Switch,{checked:h.isPublished,onCheckedChange:a=>j("isPublished",a),disabled:k||m})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{className:"text-sm font-medium text-gray-900",children:"Show in Navigation"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Include in main navigation menu"})]}),(0,b.jsx)(I.Switch,{checked:h.showInNavigation,onCheckedChange:a=>j("showInNavigation",a),disabled:k||m})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{className:"text-sm font-medium text-gray-900",children:"Allow Indexing"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Allow search engines to index this page"})]}),(0,b.jsx)(I.Switch,{checked:h.allowIndexing,onCheckedChange:a=>j("allowIndexing",a),disabled:k||m,defaultChecked:!0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(G.Label,{className:"text-sm font-medium text-gray-900",children:"Require Authentication"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Require users to login to view"})]}),(0,b.jsx)(I.Switch,{checked:h.requireAuth,onCheckedChange:a=>j("requireAuth",a),disabled:k||m})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-8",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"üíª"}),"Custom Code"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{htmlFor:"custom-css",className:"text-sm font-medium text-gray-700",children:"Custom CSS"}),(0,b.jsx)(H.Textarea,{id:"custom-css",placeholder:".my-class { color: red; }",value:h.customCSS,onChange:a=>j("customCSS",a.target.value),disabled:k||m,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{htmlFor:"custom-js",className:"text-sm font-medium text-gray-700",children:"Custom JavaScript"}),(0,b.jsx)(H.Textarea,{id:"custom-js",placeholder:"console.log('Hello');",value:h.customJS,onChange:a=>j("customJS",a.target.value),disabled:k||m,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{htmlFor:"head-code",className:"text-sm font-medium text-gray-700",children:"Head Code (Meta tags, Analytics)"}),(0,b.jsx)(H.Textarea,{id:"head-code",placeholder:"<meta name='description' content='...' />",value:h.headCode,onChange:a=>j("headCode",a.target.value),disabled:k||m,rows:4,className:"w-full font-mono text-xs bg-gray-50"})]})]})]})]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("div",{className:"text-4xl text-gray-300",children:"üì≠"}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"No page selected"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Please select a page to edit settings"})]})})}),(0,b.jsxs)(F.DialogFooter,{className:"border-t border-gray-200 px-6 py-4 bg-gray-50 flex-shrink-0 gap-3",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>d(!1),disabled:k||m,className:"text-sm",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:o,disabled:k||m,className:"text-sm gap-2",children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Loader2,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{children:"Saving..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Save,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Save Settings"})]})})]})]})})}),bg=c.default.memo(function({leftPanelOpen:a,onToggleLeftPanel:c,rightPanelOpen:d,onToggleRightPanel:e,onSave:f,onExit:h,onTemplateClick:i,onSettingsClick:j,isSaving:k,isLoading:l,showEditorControls:m}){let n=aW(),x=a$();return(0,b.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0 px-4",children:[m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:c,title:a?"Hide left panel":"Show left panel",disabled:l,children:a?(0,b.jsx)(s.PanelLeftClose,{className:"w-4 h-4"}):(0,b.jsx)(t.PanelLeftOpen,{className:"w-4 h-4"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:e,title:d?"Hide right panel":"Show right panel",disabled:l,children:d?(0,b.jsx)(u.PanelRightClose,{className:"w-4 h-4"}):(0,b.jsx)(v.PanelRightOpen,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:x.handleUndo,disabled:!n.canUndo||l,title:`Undo${n.canUndo?`: ${n.getUndoAction()}`:""} (Ctrl+Z)`,children:(0,b.jsx)(o.default,{className:"w-4 h-4"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:x.handleRedo,disabled:!n.canRedo||l,title:`Redo${n.canRedo?`: ${n.getRedoAction()}`:""} (Ctrl+Y)`,children:(0,b.jsx)(p.default,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,b.jsx)(be,{onSaveClick:i||(()=>{}),onImportClick:()=>{}})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",title:"Global Settings (SEO, Code)",onClick:j,disabled:l,children:(0,b.jsx)(w.Settings,{className:"w-4 h-4"})}),(0,b.jsx)(g.Button,{variant:"default",size:"sm",onClick:f,className:"gap-1",disabled:k||l,title:"Save page (Ctrl+S)",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Loader2,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Saving..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Save,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline text-xs",children:"Save"})]})}),h&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:h,title:"Exit Fullscreen (ESC)",children:(0,b.jsx)(r.X,{className:"w-4 h-4"})})]})});function bh(a){let{editorMode:d="visual",onModeChange:e=()=>{},device:g="desktop",onDeviceChange:h=()=>{},leftPanelOpen:i=!1,onToggleLeftPanel:j=()=>{},rightPanelOpen:k=!1,onToggleRightPanel:l=()=>{},onSave:m=async()=>{},onExit:n,currentPageStructure:o=[],currentPageStyles:p,onApplyTemplate:q,onPreviewToggle:r,isLoading:s=!1,onSettingsSave:t,showEditorControls:u=!0,showPageInfo:v=!0}=a,{editingPage:w,blocks:x,setEditingPage:y}=(0,az.usePageState)(),{showPreview:z,setShowPreview:A}=aC(),{toast:B}=(0,au.useToast)(),{addTemplate:D,importFromJSON:E}=function(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(R),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{j()},[]);let j=(0,c.useCallback)(()=>{try{g(!0),i(null),0===L().length&&M(Q);let a=L();b(a)}catch(a){i(a instanceof Error?a.message:"Failed to load templates"),console.error("Error loading templates:",a)}finally{g(!1)}},[]),k=(0,c.useCallback)(()=>{let b=[...a];if(d.category&&"all"!==d.category&&(b=b.filter(a=>a.category===d.category)),d.search&&""!==d.search.trim()){let a=d.search.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.description.toLowerCase().includes(a)||b.tags?.some(b=>b.toLowerCase().includes(a)))}return d.tags&&d.tags.length>0&&(b=b.filter(a=>d.tags.some(b=>a.tags?.includes(b)))),d.sortBy&&b.sort((a,b)=>{let c=0;switch(d.sortBy){case"name":c=a.name.localeCompare(b.name);break;case"date":c=new Date(a.updatedAt).getTime()-new Date(b.updatedAt).getTime();break;case"category":c=a.category.localeCompare(b.category)}return"asc"===d.sortOrder?c:-c}),b},[a,d])(),l=(0,c.useCallback)(async a=>{try{let b=N(a);return b&&j(),b}catch(a){return i(a instanceof Error?a.message:"Failed to add template"),!1}},[j]),m=(0,c.useCallback)(async a=>{try{let b=N(a);return b&&j(),b}catch(a){return i(a instanceof Error?a.message:"Failed to update template"),!1}},[j]),n=(0,c.useCallback)(async a=>{try{let b,c,d=(c=(b=L()).find(b=>b.id===a))?c.isDefault?(console.warn(`Cannot delete default template: ${c.name}`),!1):M(b.filter(b=>b.id!==a)):(console.warn(`Template ${a} not found`),!1);return d&&j(),d}catch(a){return i(a instanceof Error?a.message:"Failed to delete template"),!1}},[j]),o=(0,c.useCallback)(async(a,b)=>{try{let c=function(a,b){let c=L().find(b=>b.id===a)||null;if(!c)return null;let d={...c,id:P(),name:b||`${c.name} (Copy)`,isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return N(d)?d:null}(a,b);return c&&j(),c}catch(a){return i(a instanceof Error?a.message:"Failed to duplicate template"),null}},[j]),p=(0,c.useCallback)(async a=>{try{let b=function(a){try{let b,c=JSON.parse(a),d=(b=[],c&&"object"==typeof c?"template"in c&&"version"in c?O(c.template):O(c):(b.push({field:"root",message:"Invalid template data format"}),{valid:!1,errors:b}));if(!d.valid)return{success:!1,error:d.errors?.map(a=>a.message).join(", ")||"Validation failed"};let e={..."template"in c?c.template:c,id:P(),isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(N(e))return{success:!0,template:e};return{success:!1,error:"Failed to save imported template"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to parse JSON"}}}(a);return b.success&&j(),b}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to import template"}}},[j]),q=(0,c.useCallback)(a=>{try{let b=new Blob([JSON.stringify({template:a,exportedAt:new Date().toISOString(),version:K},null,2)],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`${a.name.toLowerCase().replace(/\s+/g,"-")}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}catch(a){i(a instanceof Error?a.message:"Failed to export template")}},[]),r=(0,c.useCallback)(a=>{e(b=>({...b,...a}))},[]),s=(0,c.useCallback)(()=>{e(R)},[]),t=(0,c.useCallback)(b=>a.find(a=>a.id===b),[a]),u=(0,c.useCallback)(b=>"all"===b?a:a.filter(a=>a.category===b),[a]);return{templates:a,filteredTemplates:k,isLoading:f,error:h,filter:d,setFilter:r,resetFilter:s,addTemplate:l,updateTemplate:m,removeTemplate:n,duplicate:o,importFromJSON:p,exportTemplate:q,refresh:j,getTemplateById:t,getTemplatesByCategory:u}}(),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)({seoTitle:"",seoDescription:"",seoKeywords:"",isPublished:!0,showInNavigation:!0,allowIndexing:!0,requireAuth:!1,customCSS:"",customJS:"",headCode:""}),{data:_}=(0,f.useQuery)(av.GET_PAGE_BY_ID,{variables:{id:w?.id},skip:!w?.id,errorPolicy:"all"});(0,c.useEffect)(()=>{let a=a=>{(a.ctrlKey||a.metaKey)&&a.shiftKey&&"S"===a.key&&(a.preventDefault(),G(!0)),(a.ctrlKey||a.metaKey)&&a.shiftKey&&"O"===a.key&&(a.preventDefault(),I(!0))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),(0,c.useEffect)(()=>{if(_?.getPageById){let a=_.getPageById;$(b=>({...b,seoTitle:a.seoTitle||"",seoDescription:a.seoDescription||"",seoKeywords:Array.isArray(a.seoKeywords)?a.seoKeywords.join(", "):""}))}},[_]);let aa=(0,c.useCallback)((a,b)=>{$(c=>({...c,[a]:b}))},[]),ab=(0,c.useCallback)(async a=>{try{let b=await D(a);return b?B({title:"Template saved",description:`"${a.name}" has been saved to your template library.`,type:"success"}):B({title:"Error",description:"Failed to save template. Please try again.",type:"error"}),b}catch(a){return B({title:"Error",description:"Failed to save template. Please try again.",type:"error"}),!1}},[D,B]),ac=(0,c.useCallback)(async a=>{try{let b=JSON.stringify(a.template),c=await E(b);if(c.success)return B({title:"Template imported",description:`"${a.template.name}" has been imported successfully.`,type:"success"}),!0;return B({title:"Error",description:c.error||"Failed to import template. Please try again.",type:"error"}),!1}catch(a){return B({title:"Error",description:"Failed to import template. Please try again.",type:"error"}),!1}},[E,B]),ad=(0,c.useCallback)(async()=>{try{if(!w)throw Error("No page selected. Please select a page first.");U(!0);let a=Array.isArray(Z.seoKeywords)?Z.seoKeywords:(Z.seoKeywords||"").split(",").map(a=>a.trim()).filter(a=>a.length>0),b={...w,seoTitle:Z.seoTitle||void 0,seoDescription:Z.seoDescription||void 0,seoKeywords:a};y(b),t&&await t({...b,customCSS:Z.customCSS,customJS:Z.customJS,headCode:Z.headCode,isPublished:Z.isPublished,showInNavigation:Z.showInNavigation,allowIndexing:Z.allowIndexing,requireAuth:Z.requireAuth}),await m?.(),B({title:"Settings saved",description:"Page settings have been updated and saved successfully.",type:"success"}),S(!1)}catch(a){B({title:"Error",description:a instanceof Error?a.message:"Failed to save settings",type:"error"}),console.error("Save settings error:",a)}finally{U(!1)}},[w,Z,t,m,y,B]),ae=(0,c.useCallback)(async()=>{W(!0),Y(null);try{await m()}catch(a){Y(a instanceof Error?a.message:"Failed to save page"),console.error("Save error:",a)}finally{W(!1)}},[m]);return(0,c.useMemo)(()=>x?.length>0,[x?.length]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 flex flex-col",children:[(0,b.jsxs)("div",{className:"h-14 flex items-center justify-between overflow-x-auto",children:[(0,b.jsx)(bc,{showPageInfo:v,editingPage:w,showPreview:z,onPreviewToggle:r||A,loading:s}),u&&(0,b.jsx)(bd,{editorMode:d,onModeChange:e,device:g,onDeviceChange:h,isLoading:s}),(0,b.jsx)(bg,{leftPanelOpen:i,onToggleLeftPanel:j,rightPanelOpen:k,onToggleRightPanel:l,onSave:ae,onExit:n,onTemplateClick:()=>G(!0),onSettingsClick:()=>S(!0),isSaving:V,isLoading:s,showEditorControls:u})]}),X&&(0,b.jsxs)("div",{className:"px-4 py-2 bg-red-50 border-t border-red-200 flex items-center space-x-2 text-red-700 text-sm",children:[(0,b.jsx)(C.AlertCircle,{size:16,className:"flex-shrink-0"}),(0,b.jsx)("span",{className:"flex-1",children:X}),(0,b.jsx)("button",{onClick:()=>Y(null),className:"text-red-700 hover:text-red-900 font-medium",children:"Dismiss"})]})]}),(0,b.jsx)(bf,{isOpen:J,onOpenChange:S,editingPage:w,onPageUpdate:a=>{y(a),$(b=>({...b,seoTitle:a.seoTitle||"",seoDescription:a.seoDescription||"",seoKeywords:Array.isArray(a.seoKeywords)?a.seoKeywords.join(", "):""}))},pageSettings:Z,onSettingChange:aa,isLoading:s||T,onSave:ad}),(0,b.jsx)(ar,{isOpen:F,onClose:()=>G(!1),onSave:ab,currentPageStructure:o,currentPageStyles:p}),(0,b.jsx)(at,{isOpen:H,onClose:()=>I(!1),onImport:ac})]})}var bi=a.i(243277),bj=a.i(769251),bk=a.i(520215),bl=a.i(422171),bm=a.i(927052),bn=a.i(187290);function bo({block:a,isEditing:c,onUpdate:d,onDelete:e,onAddChild:f,onUpdateChild:g,onDeleteChild:h,onSelect:i,depth:j=0}){let{attributes:k,listeners:l,setNodeRef:m,transform:n,transition:o,isDragging:p}=(0,bi.useSortable)({id:a.id,data:{type:"existing-block",block:a}}),q={transform:bn.CSS.Transform.toString(n),transition:o,opacity:p?.5:1};return(0,b.jsx)("div",{ref:m,style:q,...k,children:(0,b.jsxs)("div",{className:`relative group rounded-lg transition-all duration-200 ${p?"ring-4 ring-blue-400 shadow-2xl scale-102":"hover:ring-2 hover:ring-gray-300"}`,children:[c&&(0,b.jsx)("div",{...l,className:`absolute -left-8 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center transition-all cursor-grab active:cursor-grabbing rounded shadow-sm z-10 ${p?"opacity-100 bg-blue-500 border border-blue-600":"opacity-0 group-hover:opacity-100 bg-white border border-gray-300 hover:bg-blue-50"}`,title:"Drag to reorder",children:(0,b.jsx)("svg",{className:`w-4 h-4 transition-colors ${p?"text-white":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9h8M8 15h8"})})}),p&&(0,b.jsx)("div",{className:"absolute -top-3 -right-3 bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-bounce z-20",children:"‚¨ÜÔ∏è Reordering"}),(0,b.jsx)(bm.BlockRenderer,{block:a,isEditing:c,onUpdate:d,onDelete:e,onAddChild:f,onUpdateChild:g,onDeleteChild:h,onSelect:i,depth:j})]})})}var bp=a.i(408484),bq=a.i(571698),br=a.i(889578),br=br,bs=a.i(358054),bt=a.i(434741),bu=a.i(609914),bv=a.i(310374),bv=bv,bw=a.i(279902),bw=bw,bx=a.i(176548),bx=bx,by=a.i(961670),bz=a.i(849423),bA=a.i(596739),bB=a.i(436021),bB=bB,bC=a.i(458007),bD=a.i(609100),bD=bD,bE=a.i(638735),bF=a.i(891026),bG=a.i(445192),bH=a.i(140300),bI=a.i(729995),bJ=a.i(543220);let bK=[{type:aE.BlockType.TEXT,label:"Text Block",icon:bp.Type,color:"bg-blue-100 text-blue-600"},{type:aE.BlockType.IMAGE,label:"Image Block",icon:bq.Image,color:"bg-green-100 text-green-600"},{type:aE.BlockType.VIDEO,label:"Video",icon:bC.Video,color:"bg-rose-100 text-rose-600"},{type:aE.BlockType.BUTTON,label:"Button",icon:br.default,color:"bg-orange-100 text-orange-600"},{type:aE.BlockType.HERO,label:"Hero Section",icon:bj.Layout,color:"bg-purple-100 text-purple-600"},{type:aE.BlockType.CAROUSEL,label:"Carousel",icon:bB.default,color:"bg-teal-100 text-teal-600"},{type:aE.BlockType.GALLERY,label:"Gallery",icon:bD.default,color:"bg-cyan-100 text-cyan-600"},{type:aE.BlockType.CARD,label:"Card",icon:bw.default,color:"bg-violet-100 text-violet-600"},{type:aE.BlockType.TESTIMONIAL,label:"Testimonial",icon:bE.MessageSquare,color:"bg-fuchsia-100 text-fuchsia-600"},{type:aE.BlockType.TEAM,label:"Team Section",icon:bs.Users,color:"bg-indigo-100 text-indigo-600"},{type:aE.BlockType.STATS,label:"Stats Section",icon:bF.BarChart3,color:"bg-emerald-100 text-emerald-600"},{type:aE.BlockType.FAQ,label:"FAQ",icon:bG.HelpCircle,color:"bg-sky-100 text-sky-600"},{type:aE.BlockType.CONTACT_FORM,label:"Contact Form",icon:bH.Mail,color:"bg-amber-100 text-amber-600"},{type:aE.BlockType.CONTACT_INFO,label:"Contact Info",icon:bt.Phone,color:"bg-cyan-100 text-cyan-600"},{type:aE.BlockType.CONTAINER,label:"Container",icon:bw.default,color:"bg-violet-100 text-violet-600"},{type:aE.BlockType.SECTION,label:"Section",icon:bx.default,color:"bg-fuchsia-100 text-fuchsia-600"},{type:aE.BlockType.GRID,label:"Grid Layout",icon:by.Grid3x3,color:"bg-pink-100 text-pink-600"},{type:aE.BlockType.FLEX_ROW,label:"Flex Row",icon:bz.ArrowRightLeft,color:"bg-rose-100 text-rose-600"},{type:aE.BlockType.FLEX_COLUMN,label:"Flex Column",icon:bA.ArrowUpDown,color:"bg-amber-100 text-amber-600"},{type:aE.BlockType.DIVIDER,label:"Divider",icon:bu.Minus,color:"bg-gray-100 text-gray-600"},{type:aE.BlockType.SPACER,label:"Spacer",icon:bv.default,color:"bg-yellow-100 text-yellow-600"},{type:aE.BlockType.DYNAMIC,label:"Dynamic Block",icon:k.Code,color:"bg-purple-100 text-purple-600"},{type:aE.BlockType.PRODUCT_LIST,label:"Product List",icon:bJ.ShoppingCart,color:"bg-green-100 text-green-600"},{type:aE.BlockType.PRODUCT_CAROUSEL,label:"Product Carousel",icon:bI.Zap,color:"bg-blue-100 text-blue-600"}];Object.fromEntries(bK.map(a=>[a.type,a.label]));let bL=[{category:"Content Blocks",blocks:bK.filter(a=>[aE.BlockType.TEXT,aE.BlockType.IMAGE,aE.BlockType.VIDEO,aE.BlockType.BUTTON,aE.BlockType.HERO,aE.BlockType.CAROUSEL,aE.BlockType.GALLERY,aE.BlockType.CARD,aE.BlockType.TESTIMONIAL,aE.BlockType.TEAM,aE.BlockType.STATS,aE.BlockType.FAQ,aE.BlockType.CONTACT_FORM,aE.BlockType.CONTACT_INFO].includes(a.type))},{category:"Container & Layout",blocks:bK.filter(a=>[aE.BlockType.SECTION,aE.BlockType.CONTAINER,aE.BlockType.GRID,aE.BlockType.FLEX_ROW,aE.BlockType.FLEX_COLUMN].includes(a.type))},{category:"Utility Blocks",blocks:bK.filter(a=>[aE.BlockType.DIVIDER,aE.BlockType.SPACER].includes(a.type))},{category:"Dynamic & E-commerce",blocks:bK.filter(a=>[aE.BlockType.DYNAMIC,aE.BlockType.PRODUCT_LIST,aE.BlockType.PRODUCT_CAROUSEL].includes(a.type))}],bM=c.default.memo(function(){let{blocks:a,draggedBlock:d}=(0,az.usePageState)(),{showPreview:e}=aC(),{handleBlockUpdate:f,handleBlockDelete:h,handleAddChild:i,handleSelectBlock:j,handleAddBlock:k}=a$(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(()=>new Set);c.default.useEffect(()=>{},[p]);let r=(0,c.useMemo)(()=>a.map(a=>a.id),[a]),s=(0,c.useMemo)(()=>a.length>0,[a.length]),{setNodeRef:t,isOver:u,node:v}=(0,aw.useDroppable)({id:"canvas-droppable",data:{type:"canvas",accepts:["existing-block","new-block"]}});c.default.useEffect(()=>{aL.debug("CANVAS_SETUP","Canvas droppable initialized",{hasRef:!!t,isOver:u})},[t,u]),bL.flatMap(a=>a.blocks);let w=(0,c.useCallback)(async a=>{try{await k(a),m(!1),o("")}catch(b){aL.error("BLOCK_ADD","Failed to add block",{blockType:a,error:b})}},[k]),x=(0,c.useCallback)((a,b)=>{b.stopPropagation(),q(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),y=(0,c.useMemo)(()=>{if(!n.trim())return bL;let a=n.toLowerCase();return bL.map(b=>({...b,blocks:b.blocks.filter(b=>b.label.toLowerCase().includes(a)||b.type.toLowerCase().includes(a))})).filter(a=>a.blocks.length>0)},[n,bL]),z=(0,c.useMemo)(()=>0===p.size?[]:bL.flatMap(a=>a.blocks).filter(a=>p.has(a.type)),[p,bL]),A=()=>(0,b.jsxs)(b.Fragment,{children:[z.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"px-2 py-1.5 text-xs font-semibold text-yellow-600 uppercase flex items-center gap-1",children:[(0,b.jsx)(bk.Star,{size:12,className:"fill-yellow-500 text-yellow-500"}),"Bookmarked"]}),z.map(({type:a,label:c,icon:d})=>(0,b.jsxs)(E.DropdownMenuItem,{onClick:()=>w(a),className:"cursor-pointer gap-2 group",children:[(0,b.jsx)(d,{size:16,className:"text-gray-600"}),(0,b.jsx)("span",{className:"flex-1",children:c}),(0,b.jsx)(bk.Star,{size:14,className:"fill-yellow-500 text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:b=>x(a,b)})]},a)),(0,b.jsx)("div",{className:"my-1 mx-0 h-px bg-gray-200"})]}),0===y.length?(0,b.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:[(0,b.jsx)(Z.Search,{size:32,className:"mx-auto mb-2 opacity-30"}),'No blocks found for "',n,'"']}):y.map((a,c)=>(0,b.jsxs)("div",{children:[(c>0||z.length>0)&&(0,b.jsx)("div",{className:"my-1 mx-0 h-px bg-gray-200"}),(0,b.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase",children:a.category}),a.blocks.map(({type:a,label:c,icon:d})=>{let e=p.has(a);return(0,b.jsxs)(E.DropdownMenuItem,{onClick:()=>w(a),className:"cursor-pointer gap-2 group",children:[(0,b.jsx)(d,{size:16,className:"text-gray-600"}),(0,b.jsx)("span",{className:"flex-1",children:c}),(0,b.jsx)(bk.Star,{size:14,className:(0,bl.cn)("transition-all",e?"fill-yellow-500 text-yellow-500":"text-gray-300 opacity-0 group-hover:opacity-100"),onClick:b=>x(a,b)})]},a)})]},a.category))]});return(0,b.jsx)("div",{className:"flex-1 p-12 overflow-auto bg-gradient-to-br from-gray-50 to-gray-100",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto",children:e?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Preview"}),a.map(a=>(0,b.jsx)(bm.BlockRenderer,{block:a,isEditing:!1,onUpdate:()=>{},onDelete:()=>{}},a.id))]}):(0,b.jsx)(bi.SortableContext,{items:r,strategy:bi.verticalListSortingStrategy,children:(0,b.jsxs)("div",{ref:t,className:`space-y-4 min-h-[400px] p-6 rounded-lg transition-all duration-200 ${u?"bg-blue-50 border-2 border-blue-400 border-dashed shadow-lg shadow-blue-200":"bg-white border-2 border-dashed border-gray-200"}`,children:[(0,b.jsx)("div",{className:(0,bl.cn)("absolute inset-0 pointer-events-none flex items-center justify-center transition-opacity duration-200",u?"opacity-100":"opacity-0"),children:(0,b.jsx)("div",{className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg animate-bounce",children:"üìç Drop here to add block"})}),s?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[a.map(a=>(0,b.jsx)(bo,{block:a,isEditing:!0,onUpdate:(b,c)=>f(a.id,b,c),onDelete:()=>h(a.id),onAddChild:i,onUpdateChild:f,onDeleteChild:h,onSelect:j,depth:0},a.id)),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-200 mt-6",children:(0,b.jsxs)(E.DropdownMenu,{open:l,onOpenChange:m,children:[(0,b.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{size:"sm",className:"w-full gap-2",variant:"secondary",children:[(0,b.jsx)($.Plus,{size:16}),"Add New Block"]})}),(0,b.jsxs)(E.DropdownMenuContent,{align:"center",className:"w-64 max-h-96 overflow-hidden flex flex-col",children:[(0,b.jsx)("div",{className:"p-2 border-b sticky top-0 bg-white z-10",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Z.Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)(Y.Input,{type:"text",placeholder:"Search blocks...",value:n,onChange:a=>o(a.target.value),className:"pl-9 h-8 text-sm",onClick:a=>a.stopPropagation()})]})}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-80",children:A()})]})]})})]})}):(0,b.jsx)(ay.Card,{className:`p-8 text-center border-2 transition-all duration-200 ${u?"border-blue-400 border-solid bg-blue-50 scale-105":"border-gray-300 border-dashed hover:border-primary hover:bg-primary/5"}`,children:(0,b.jsxs)("div",{className:"text-gray-500",children:[(0,b.jsx)(bj.Layout,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg font-medium mb-2",children:"No blocks yet"}),(0,b.jsx)("p",{className:"text-sm mb-6",children:"Drag and drop blocks from the left panel to start building"}),u&&(0,b.jsx)("p",{className:"text-sm text-blue-600 font-semibold mb-4",children:"üéØ Ready to drop!"}),(0,b.jsxs)(E.DropdownMenu,{open:l,onOpenChange:m,children:[(0,b.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{size:"sm",className:"gap-2",variant:"default",children:[(0,b.jsx)($.Plus,{size:16}),"Add Block"]})}),(0,b.jsxs)(E.DropdownMenuContent,{align:"center",className:"w-64 max-h-96 overflow-hidden flex flex-col",children:[(0,b.jsx)("div",{className:"p-2 border-b sticky top-0 bg-white z-10",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Z.Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)(Y.Input,{type:"text",placeholder:"Search blocks...",value:n,onChange:a=>o(a.target.value),className:"pl-9 h-8 text-sm",onClick:a=>a.stopPropagation()})]})}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-80",children:A()})]})]})]})})]})})})})}),bN={desktop:"100%",tablet:"768px",mobile:"375px"};function bO({editorMode:a,device:c,selectedBlockId:d,onSelectBlock:e}){let{blocks:f,loading:g}=(0,az.usePageState)();return g?(0,b.jsx)("div",{className:"h-full bg-gray-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Loading page..."})]})}):"code"===a?(0,b.jsx)("div",{className:"h-full bg-gray-900 text-white p-4 overflow-auto",children:(0,b.jsx)("pre",{className:"text-sm font-mono",children:JSON.stringify(f,null,2)})}):(0,b.jsx)("div",{className:"h-full bg-gray-100 overflow-auto flex",children:(0,b.jsx)("div",{className:"min-h-full flex items-start justify-center p-8 flex-1",children:(0,b.jsx)("div",{className:"bg-white shadow-xl transition-all duration-300 min-h-[600px] rounded-md relative",style:{width:bN[c],maxWidth:"100%"},children:(0,b.jsx)(bM,{})})})})}var bP=a.i(355275),bP=bP,bQ=a.i(609153),bR=a.i(693471),bR=bR,bS=a.i(616191),bT=a.i(284294),bT=bT,bU=a.i(294246),bU=bU;function bV({selectedBlockId:a,device:d}){let[e,f]=(0,c.useState)(null),[h,i]=(0,c.useState)(100),j=a=>{f(e===a?null:a)};return(0,b.jsxs)(b.Fragment,{children:[e&&(0,b.jsx)("div",{className:"h-48 bg-white border-t border-gray-200 overflow-auto",children:(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold capitalize",children:e}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>f(null),children:(0,b.jsx)(bS.ChevronUp,{className:"w-4 h-4"})})]}),"structure"===e&&(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Structure tree view will be here"}),"layers"===e&&(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Layers panel will be here"}),"history"===e&&(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"History panel will be here"})]})}),(0,b.jsxs)("div",{className:"h-10 bg-white border-t border-gray-200 flex items-center justify-between px-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:"structure"===e?"secondary":"ghost",size:"sm",onClick:()=>j("structure"),className:"gap-2",children:[(0,b.jsx)(bQ.List,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Structure"})]}),(0,b.jsxs)(g.Button,{variant:"layers"===e?"secondary":"ghost",size:"sm",onClick:()=>j("layers"),className:"gap-2",children:[(0,b.jsx)(bP.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Layers"})]}),(0,b.jsxs)(g.Button,{variant:"history"===e?"secondary":"ghost",size:"sm",onClick:()=>j("history"),className:"gap-2",children:[(0,b.jsx)(bR.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"History"})]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a?(0,b.jsxs)("span",{children:["Selected: ",a]}):(0,b.jsx)("span",{children:"No block selected"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>i(Math.max(50,h-10)),disabled:h<=50,children:(0,b.jsx)(bU.default,{className:"w-4 h-4"})}),(0,b.jsxs)("span",{className:"text-sm font-mono w-12 text-center",children:[h,"%"]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>i(Math.min(200,h+10)),disabled:h>=200,children:(0,b.jsx)(bT.default,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-2"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",title:"Help",children:(0,b.jsx)(bG.HelpCircle,{className:"w-4 h-4"})})]})]})]})}var bP=bP,bW=a.i(434135),bX=a.i(561642),bY=a.i(204710),bY=bY,bZ=a.i(323577),br=br,bx=bx,b$=a.i(175972),b$=b$,b_=a.i(803896),b_=b_,b0=a.i(799462),b1=a.i(79028),b2=a.i(609401);function b3(a,b="",d={}){let{searchFields:e=["name","description"],groupByField:f="category",caseSensitive:g=!1}=d;return(0,c.useMemo)(()=>{if(!a||0===a.length)return{groupedItems:{},itemCount:0,groupCount:0,isEmpty:!0};let c=a.filter(a=>{if(!b)return!0;let c=g?b:b.toLowerCase();return e.some(b=>{let d=a[b];return"string"==typeof d?(g?d:d.toLowerCase()).includes(c):!!Array.isArray(d)&&d.some(a=>{let b="string"==typeof a?a:String(a);return(g?b:b.toLowerCase()).includes(c)})})}),d=c.reduce((a,b)=>{let c=String(b[f]||"Other");return a[c]||(a[c]=[]),a[c].push(b),a},{}),h=Object.keys(d).sort().reduce((a,b)=>(a[b]=d[b],a),{});return{groupedItems:h,itemCount:c.length,groupCount:Object.keys(h).length,isEmpty:0===c.length}},[a,b,e,f,g])}function b4(a={}){let{defaultExpanded:b=!1,initialState:d={}}=a,[e,f]=(0,c.useState)(d),g=(0,c.useCallback)(a=>{f(b=>({...b,[a]:!b[a]}))},[]),h=(0,c.useCallback)(a=>{f(a.reduce((a,b)=>({...a,[b]:!0}),{}))},[]),i=(0,c.useCallback)(()=>{f({})},[]),j=(0,c.useCallback)(a=>e[a]??b,[e,b]);return{expandedCategories:e,toggleCategory:g,expandAll:h,collapseAll:i,setExpandedCategories:f,isExpanded:j}}let b5={basic:{id:"basic",label:"Basic Elements",icon:bI.Zap,description:"Core building blocks for your content"},layout:{id:"layout",label:"Layout",icon:bj.Layout,description:"Structure and organize your content"},content:{id:"content",label:"Content",icon:b_.default,description:"Rich media and dynamic content"},advanced:{id:"advanced",label:"Advanced",icon:bW.Sparkles,description:"Advanced components and features"},ecommerce:{id:"ecommerce",label:"E-commerce",icon:bJ.ShoppingCart,description:"Product and commerce elements"}},b6=[{id:aE.BlockType.RICH_TEXT,icon:X.FileText,label:"Rich Text",description:"BlockNote-style editor with advanced formatting",category:"basic",popularity:"hot"},{id:aE.BlockType.TEXT,icon:bp.Type,label:"Simple Text",description:"Plain text block for basic content",category:"basic"},{id:aE.BlockType.HERO,icon:bY.default,label:"Hero Section",description:"Large hero banner with heading",category:"basic",popularity:"hot"},{id:aE.BlockType.BUTTON,icon:bZ.MousePointer,label:"Button",description:"Call-to-action button",category:"basic",popularity:"hot"},{id:aE.BlockType.IMAGE,icon:bq.Image,label:"Image",description:"Single image with caption",category:"basic"},{id:aE.BlockType.DIVIDER,icon:bu.Minus,label:"Divider",description:"Horizontal separator line",category:"basic"},{id:aE.BlockType.SECTION,icon:br.default,label:"Section",description:"Full-width page section",category:"layout",popularity:"hot"},{id:aE.BlockType.CONTAINER,icon:bj.Layout,label:"Container",description:"Content container with max-width",category:"layout"},{id:aE.BlockType.GRID,icon:by.Grid3x3,label:"Grid",description:"Responsive grid layout",category:"layout",popularity:"hot"},{id:aE.BlockType.FLEX_ROW,icon:bx.default,label:"Flex Row",description:"Horizontal flex container",category:"layout"},{id:aE.BlockType.FLEX_COLUMN,icon:b$.default,label:"Flex Column",description:"Vertical flex container",category:"layout"},{id:aE.BlockType.SPACER,icon:b$.default,label:"Spacer",description:"Vertical spacing control",category:"layout"},{id:aE.BlockType.CAROUSEL,icon:b_.default,label:"Carousel",description:"Image slider with controls",category:"content",popularity:"new"},{id:aE.BlockType.GALLERY,icon:b_.default,label:"Gallery",description:"Image gallery grid",category:"content"},{id:aE.BlockType.VIDEO,icon:bC.Video,label:"Video",description:"Video player (YouTube/Vimeo)",category:"content"},{id:aE.BlockType.CARD,icon:b2.Quote,label:"Card",description:"Content card with image/text",category:"content",popularity:"hot"},{id:aE.BlockType.TESTIMONIAL,icon:b2.Quote,label:"Testimonial",description:"Customer testimonial block",category:"content"},{id:aE.BlockType.TEAM,icon:bs.Users,label:"Team",description:"Team member showcase",category:"content"},{id:aE.BlockType.STATS,icon:b0.BarChart,label:"Stats",description:"Statistics counter display",category:"content"},{id:aE.BlockType.FAQ,icon:bQ.List,label:"FAQ",description:"Accordion FAQ section",category:"content"},{id:aE.BlockType.CONTACT_FORM,icon:X.FileText,label:"Contact Form",description:"Dynamic contact form",category:"advanced",popularity:"hot"},{id:aE.BlockType.DYNAMIC,icon:bW.Sparkles,label:"Dynamic Block",description:"Template-based dynamic content",category:"advanced",popularity:"new"},{id:aE.BlockType.PRODUCT_LIST,icon:bJ.ShoppingCart,label:"Product List",description:"Grid of products with filters",category:"ecommerce",popularity:"hot"},{id:aE.BlockType.PRODUCT_DETAIL,icon:b1.Package,label:"Product Detail",description:"Single product showcase",category:"ecommerce"}];function b7({element:a}){let{handleAddBlock:d}=a$(),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),{attributes:i,listeners:j,setNodeRef:k,transform:l,isDragging:m}=(0,aw.useDraggable)({id:`element-${a.id}`,data:{type:"new-block",blockType:a.id}}),n=l?{transform:`translate3d(${l.x}px, ${l.y}px, 0)`,opacity:m?.8:1,zIndex:1e3}:void 0,o=a.icon,p=async()=>{if(!e)try{f(!0),await d(a.id)}catch(a){console.error("[ElementsLibrary] Error adding block:",a)}finally{f(!1)}};return(0,b.jsxs)("div",{className:"relative group/item",children:[(0,b.jsxs)("button",{ref:k,...j,...i,style:n,onDoubleClick:p,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:(0,bl.cn)("w-full flex items-start gap-3 p-3 rounded-lg border transition-all duration-200","text-left select-none group/btn","min-h-[44px] sm:min-h-[48px]",m&&"bg-blue-50 border-blue-400 shadow-lg scale-105 z-50",e&&"bg-green-50 border-green-400 shadow-lg",!m&&!e&&"border-gray-200 bg-white hover:bg-gradient-to-br hover:from-blue-50 hover:to-transparent hover:border-blue-300 hover:shadow-md","active:scale-[0.98] touch-manipulation"),title:"Double-click to add ‚Ä¢ Drag to canvas",children:[(0,b.jsx)("div",{className:(0,bl.cn)("flex-shrink-0 w-10 h-10 sm:w-11 sm:h-11 rounded-md flex items-center justify-center transition-all duration-200",m&&"bg-blue-500 text-white scale-110 shadow-lg",e&&"bg-green-500 text-white scale-110",!m&&!e&&"bg-gradient-to-br from-primary/20 to-primary/10 text-primary group-hover/btn:bg-blue-400 group-hover/btn:text-white group-hover/btn:shadow-md"),children:(0,b.jsx)(o,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("span",{className:"font-semibold text-sm sm:text-base text-gray-900 truncate",children:a.label}),"hot"===a.popularity&&(0,b.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700",children:"üî• Hot"}),"new"===a.popularity&&(0,b.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"‚ú® New"})]}),a.description&&(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 line-clamp-1 mt-0.5",children:a.description})]}),m&&(0,b.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-blue-500 text-white rounded text-xs font-semibold whitespace-nowrap",children:[(0,b.jsx)(bI.Zap,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Dragging"})]}),e&&(0,b.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-500 text-white rounded text-xs font-semibold whitespace-nowrap animate-pulse",children:[(0,b.jsx)(T.Copy,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Adding"})]})]}),g&&!m&&!e&&(0,b.jsxs)("div",{className:"hidden sm:block absolute bottom-full left-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap z-50 pointer-events-none",children:["Double-click to add ‚Ä¢ Drag to canvas",(0,b.jsx)("div",{className:"absolute top-full left-0 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-900"})]})]})}function b8({category:a,config:c,elements:d,isExpanded:e,onToggle:f,count:g}){let h=c.icon;return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("button",{onClick:f,className:(0,bl.cn)("w-full flex items-center gap-2 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-semibold text-gray-700 hover:bg-gray-100 group/cat","min-h-[44px] touch-manipulation active:scale-[0.98]",e&&"bg-blue-50 text-primary"),children:[h&&(0,b.jsx)(h,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 text-gray-400 group-hover/cat:text-gray-600"}),(0,b.jsx)("span",{className:"flex-1 text-left text-sm sm:text-base",children:c.label}),(0,b.jsx)("span",{className:(0,bl.cn)("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-700",e&&"bg-blue-200 text-primary"),children:g}),(0,b.jsx)(A.ChevronDown,{className:(0,bl.cn)("w-4 h-4 flex-shrink-0 text-gray-400 transition-transform duration-200",e&&"rotate-180 text-primary")})]}),e&&c.description&&(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 px-3",children:c.description}),e&&(0,b.jsx)("div",{className:"pl-2 space-y-2 border-l-2 border-gray-200",children:d.map(a=>(0,b.jsx)(b7,{element:a},a.id))})]})}function b9(){let[a,d]=(0,c.useState)(""),{expandedCategories:e,toggleCategory:f}=b4({initialState:{basic:!0,layout:!0}}),{groupedItems:g,itemCount:h}=b3(b6,a,{searchFields:["label","description"],groupByField:"category"}),i=Object.entries(g).map(([a,b])=>({category:a,config:b5[a],elements:b}));return(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gradient-to-b from-white to-gray-50",children:[(0,b.jsx)("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-4 py-3",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"Elements"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[h," element",1!==h?"s":""," available"]})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(Z.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"}),(0,b.jsx)(Y.Input,{placeholder:"Search elements...",value:a,onChange:a=>d(a.target.value),className:"pl-9 h-9 text-sm bg-gray-50 border-gray-300 rounded-lg group-focus-within:bg-white group-focus-within:border-blue-400 group-focus-within:ring-1 group-focus-within:ring-blue-200 transition-all"})]})]})}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:0===h?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 py-12 px-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 mb-3",children:(0,b.jsx)(Z.Search,{className:"w-6 h-6"})}),(0,b.jsx)("p",{className:"font-semibold text-gray-600",children:"No elements found"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Try a different search term"})]}):(0,b.jsx)("div",{className:"space-y-4 p-4",children:i.map(a=>(0,b.jsx)(b8,{category:a.category,config:a.config,elements:a.elements,isExpanded:e[a.category]||!1,onToggle:()=>f(a.category),count:a.elements.length},a.category))})}),(0,b.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 bg-white px-4 py-2.5",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 text-xs text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(bI.Zap,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:"Double-click to add"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(T.Copy,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:"Drag to canvas"})]})]})})]})}var ca=a.i(258958),cb=a.i(569866),cc=a.i(145533),cc=cc,cd=a.i(992775),ce=a.i(57597),cf=a.i(919403);let cg=[{id:"product-grid",name:"Product Grid",description:"Responsive product showcase with 3-column layout",category:"ecommerce",preview:"üõçÔ∏è",blockCount:6,color:"from-blue-500 to-cyan-500",popularity:"hot",blocks:[{type:aE.BlockType.HERO,content:{title:"Our Products",subtitle:"Discover our latest collection",style:{}}},{type:aE.BlockType.GRID,content:{columns:3,gap:"20px",style:{}}},{type:aE.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400",alt:"Product 1",style:{}}},{type:aE.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400",alt:"Product 2",style:{}}},{type:aE.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1560343090-f0409e92791a?w=400",alt:"Product 3",style:{}}},{type:aE.BlockType.BUTTON,content:{text:"View All Products",link:"#",variant:"primary",style:{}}}]},{id:"category-showcase",name:"Category Showcase",description:"Highlight product categories with images",category:"ecommerce",preview:"üè™",blockCount:4,color:"from-purple-500 to-pink-500",blocks:[{type:aE.BlockType.TEXT,content:{content:"<h2>Shop by Category</h2>",style:{}}},{type:aE.BlockType.GRID,content:{columns:2,gap:"16px",style:{}}},{type:aE.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400",alt:"Category 1",style:{}}},{type:aE.BlockType.IMAGE,content:{src:"https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=400",alt:"Category 2",style:{}}}]},{id:"task-dashboard",name:"Task Dashboard",description:"Kanban-style task management interface",category:"productivity",preview:"‚úÖ",blockCount:8,color:"from-green-500 to-emerald-500",popularity:"hot",blocks:[{type:aE.BlockType.TEXT,content:{content:"<h1>Task Dashboard</h1>",style:{}}},{type:aE.BlockType.STATS,content:{title:"Project Stats",stats:[{label:"Tasks",value:"24"},{label:"Completed",value:"12"}],style:{}}},{type:aE.BlockType.FLEX_ROW,content:{justifyContent:"space-between",style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>To Do</h3>",style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>In Progress</h3>",style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>Done</h3>",style:{}}},{type:aE.BlockType.DIVIDER,content:{thickness:1,color:"#e5e7eb",style:{}}},{type:aE.BlockType.BUTTON,content:{text:"Add New Task",link:"#",variant:"primary",style:{}}}]},{id:"hero-section",name:"Hero Section",description:"Eye-catching hero with CTA buttons",category:"landing",preview:"üöÄ",blockCount:3,color:"from-orange-500 to-red-500",popularity:"hot",blocks:[{type:aE.BlockType.HERO,content:{title:"Welcome to Our Platform",subtitle:"The best solution for your business",description:"Start today and see the difference",buttonText:"Get Started",buttonLink:"#",style:{}}},{type:aE.BlockType.SPACER,content:{height:60,style:{}}},{type:aE.BlockType.TEXT,content:{content:'<p style="text-align: center;">Trusted by thousands of companies worldwide</p>',style:{}}}]},{id:"contact-form",name:"Contact Form",description:"Professional contact form with validation",category:"landing",preview:"üìß",blockCount:5,color:"from-indigo-500 to-blue-500",blocks:[{type:aE.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Get in Touch</h2>',style:{}}},{type:aE.BlockType.TEXT,content:{content:'<p style="text-align: center;">We\'d love to hear from you</p>',style:{}}},{type:aE.BlockType.CONTACT_INFO,content:{email:"contact@example.com",phone:"+1 234 567 8900",address:"123 Main St, City, Country",style:{}}},{type:aE.BlockType.SPACER,content:{height:40,style:{}}},{type:aE.BlockType.BUTTON,content:{text:"Send Message",link:"#",variant:"primary",style:{}}}]},{id:"testimonials",name:"Testimonials",description:"Customer reviews in card layout",category:"landing",preview:"‚≠ê",blockCount:4,color:"from-yellow-500 to-orange-500",popularity:"new",blocks:[{type:aE.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">What Our Customers Say</h2>',style:{}}},{type:aE.BlockType.SPACER,content:{height:40,style:{}}},{type:aE.BlockType.GRID,content:{columns:2,gap:"24px",style:{}}},{type:aE.BlockType.TEXT,content:{content:'<blockquote>"Amazing service! Highly recommended." - John Doe</blockquote>',style:{}}}]},{id:"faq-section",name:"FAQ Section",description:"Accordion-style frequently asked questions",category:"business",preview:"‚ùì",blockCount:6,color:"from-teal-500 to-cyan-500",blocks:[{type:aE.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Frequently Asked Questions</h2>',style:{}}},{type:aE.BlockType.SPACER,content:{height:40,style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>How does it work?</h3><p>Our platform is designed to be intuitive and easy to use.</p>",style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>What are the pricing plans?</h3><p>We offer flexible pricing to suit your needs.</p>",style:{}}},{type:aE.BlockType.TEXT,content:{content:"<h3>How can I get support?</h3><p>Our support team is available 24/7 to help you.</p>",style:{}}},{type:aE.BlockType.BUTTON,content:{text:"Contact Support",link:"#",variant:"outline",style:{}}}]},{id:"newsletter",name:"Newsletter Signup",description:"Email subscription form with benefits",category:"marketing",preview:"üì∞",blockCount:3,color:"from-pink-500 to-rose-500",popularity:"new",blocks:[{type:aE.BlockType.TEXT,content:{content:'<h2 style="text-align: center;">Subscribe to Our Newsletter</h2>',style:{}}},{type:aE.BlockType.TEXT,content:{content:'<p style="text-align: center;">Get the latest updates and exclusive offers</p>',style:{}}},{type:aE.BlockType.BUTTON,content:{text:"Subscribe Now",link:"#",variant:"primary",style:{}}}]}];ca.ShoppingBag,cb.LayoutDashboard,bW.Sparkles,cd.Building2,ce.TrendingUp;let ch={ecommerce:{id:"ecommerce",label:"E-commerce",icon:ca.ShoppingBag,description:"Product showcase and shopping templates"},productivity:{id:"productivity",label:"Productivity",icon:cb.LayoutDashboard,description:"Task management and productivity tools"},landing:{id:"landing",label:"Landing Page",icon:cc.default,description:"Landing pages and marketing sites"},business:{id:"business",label:"Business",icon:cd.Building2,description:"Business and company templates"},marketing:{id:"marketing",label:"Marketing",icon:ce.TrendingUp,description:"Marketing and promotion templates"}};function ci({template:a,onInsert:d,onPreview:e}){let[f,i]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),m=()=>{d(a),l(!0),setTimeout(()=>l(!1),2e3)};return(0,b.jsxs)("div",{className:"group relative bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg hover:border-primary/50 transition-all duration-300 cursor-pointer",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onDoubleClick:()=>{aL.info("TEMPLATE_INSERT","Double-click inserting template",{templateId:a.id}),m()},title:"Double-click to insert template",children:[(0,b.jsxs)("div",{className:`relative h-24 sm:h-28 bg-gradient-to-br ${a.color} flex items-center justify-center`,children:[(0,b.jsx)("div",{className:"text-4xl sm:text-5xl",children:a.preview}),a.popularity&&(0,b.jsx)("div",{className:"absolute top-2 left-2",children:(0,b.jsx)(h.Badge,{className:(0,bl.cn)("text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2","hot"===a.popularity?"bg-red-500 hover:bg-red-600":"bg-purple-500 hover:bg-purple-600"),children:"hot"===a.popularity?"üî• Hot":"‚ú® New"})}),f&&(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center gap-2 animate-in fade-in duration-200",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"secondary",className:"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5",onClick:m,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(cf.Check,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Inserted"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(T.Copy,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Insert"})]})}),(0,b.jsxs)(g.Button,{size:"sm",variant:"secondary",className:"h-7 sm:h-8 px-2.5 sm:px-3 text-xs gap-1.5",onClick:()=>{e(a)},children:[(0,b.jsx)(j.Eye,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Preview"})]})]}),(0,b.jsx)("div",{className:(0,bl.cn)("absolute top-2 right-2",a.popularity&&"top-10 sm:top-12"),children:(0,b.jsxs)(h.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs h-5 sm:h-6 px-1.5 sm:px-2 bg-white/90 backdrop-blur-sm",children:[a.blockCount," blocks"]})})]}),(0,b.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm sm:text-base mb-1 truncate group-hover:text-primary transition-colors",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 line-clamp-2 mb-2 sm:mb-3",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[c.default.createElement(ch[a.category].icon,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-gray-400"}),(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500",children:ch[a.category].label})]})]})]})}function cj(){let[a,d]=(0,c.useState)(""),[e,f]=(0,c.useState)("all"),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),{expandedCategories:m,toggleCategory:n}=b4({initialState:{all:!0,ecommerce:!0,landing:!0}}),{handleApplyTemplate:o}=a$(),p=cg.filter(b=>{let c=b.name.toLowerCase().includes(a.toLowerCase())||b.description.toLowerCase().includes(a.toLowerCase()),d="all"===e||b.category===e;return c&&d}),{groupedItems:q}=b3("all"===e?cg:[],a,{searchFields:["name","description"],groupByField:"category"}),s=async a=>{l(!0);try{let b={id:a.id,name:a.name,description:a.description,category:"custom",blocks:a.blocks.map((a,b)=>({type:a.type,content:a.content,style:a.style||{},order:b,depth:0}))};await o(b),aJ.toast.success(`Template "${a.name}" inserted successfully!`)}catch(b){aL.error("TEMPLATE_ADD","Failed to insert template",{templateId:a.id,error:b}),aJ.toast.error(b.message||"Failed to insert template")}finally{l(!1)}},t=a=>{j(a)},u=()=>{j(null)};return(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(bW.Sparkles,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),(0,b.jsx)("h2",{className:"font-semibold text-sm sm:text-base",children:"Templates"}),(0,b.jsxs)(h.Badge,{variant:"secondary",className:"ml-auto text-[10px] sm:text-xs",children:[cg.length," available"]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Z.Search,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none"}),(0,b.jsx)(Y.Input,{placeholder:"Search templates or description...",value:a,onChange:a=>d(a.target.value),className:"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary"})]})]}),(0,b.jsxs)("div",{className:"flex-shrink-0 flex gap-1.5 sm:gap-2 p-2 sm:p-3 border-b border-gray-200 overflow-x-auto bg-white scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:[(0,b.jsxs)(g.Button,{variant:"all"===e?"default":"outline",size:"sm",onClick:()=>f("all"),className:"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5",children:[(0,b.jsx)(bW.Sparkles,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"All Templates"}),(0,b.jsx)("span",{className:"sm:hidden",children:"All"})]}),Object.keys(ch).map(a=>{let c=ch[a],d=c.icon;return(0,b.jsxs)(g.Button,{variant:e===a?"default":"outline",size:"sm",onClick:()=>f(a),className:"whitespace-nowrap text-xs h-7 sm:h-8 px-2.5 sm:px-3 flex-shrink-0 gap-1.5",children:[(0,b.jsx)(d,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:c.label}),(0,b.jsx)("span",{className:"sm:hidden",children:c.label.split(" ")[0]})]},a)})]}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:"all"===e?(0,b.jsx)("div",{className:"space-y-6 sm:space-y-8",children:Object.keys(ch).map(a=>{let c=q[a]||[];if(0===c.length)return null;let d=ch[a],e=d.icon,f=m[a]||!1;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>n(a),className:"flex items-center gap-2 mb-3 sm:mb-4 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full",children:[(0,b.jsx)(e,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,b.jsx)("span",{children:d.label}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs ml-auto",children:c.length}),(0,b.jsx)(A.ChevronDown,{className:(0,bl.cn)("w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0",f?"rotate-0":"-rotate-90")})]}),f&&(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2",children:c.map(a=>(0,b.jsx)(ci,{template:a,onInsert:s,onPreview:t},a.id))})]},a)})}):p.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:p.map(a=>(0,b.jsx)(ci,{template:a,onInsert:s,onPreview:t},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,b.jsx)(Z.Search,{className:"w-8 h-8 sm:w-10 sm:h-10 mb-2 opacity-50"}),(0,b.jsx)("p",{className:"font-medium",children:"No templates found"}),(0,b.jsx)("p",{className:"text-[10px] sm:text-xs mt-1",children:"Try a different search term or category"})]})}),(0,b.jsx)("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500",children:[(0,b.jsx)(bW.Sparkles,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,b.jsx)("span",{children:"Double-click to insert | üëÅÔ∏è Preview for details"})]})}),(0,b.jsx)(F.Dialog,{open:!!i,onOpenChange:()=>u(),children:(0,b.jsx)(F.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-auto",children:i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-2xl",children:i.preview}),i.name]}),(0,b.jsx)(F.DialogDescription,{children:i.description})]}),(0,b.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[(0,b.jsxs)(h.Badge,{variant:"secondary",className:"gap-1.5",children:[c.default.createElement(ch[i.category].icon,{className:"w-3.5 h-3.5"}),ch[i.category].label]}),(0,b.jsxs)(h.Badge,{variant:"outline",children:[i.blockCount," blocks"]}),i.popularity&&(0,b.jsx)(h.Badge,{className:"hot"===i.popularity?"bg-red-500 hover:bg-red-600":"bg-purple-500 hover:bg-purple-600",children:"hot"===i.popularity?"üî• Hot":"‚ú® New"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm",children:"Blocks included:"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.blocks.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded text-xs",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded bg-primary/10 flex items-center justify-center text-primary font-semibold",children:c+1}),(0,b.jsx)("span",{className:"capitalize",children:a.type.replace("_"," ")})]},c))})]}),(0,b.jsx)("div",{className:`h-32 rounded-lg bg-gradient-to-br ${i.color} flex items-center justify-center`,children:(0,b.jsx)("div",{className:"text-6xl",children:i.preview})}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(g.Button,{onClick:()=>{s(i),u()},disabled:k,className:"flex-1",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Inserting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(T.Copy,{className:"w-4 h-4 mr-2"}),"Insert Template"]})}),(0,b.jsxs)(g.Button,{onClick:u,variant:"outline",children:[(0,b.jsx)(r.X,{className:"w-4 h-4 mr-2"}),"Close"]})]})]})]})})})]})}var ck=a.i(139312);function cl({id:a,title:d,description:e,subtitle:f,badge:i,color:j,icon:k,metadata:l,isBookmarked:m,onBookmarkToggle:n,onDoubleClick:o,onPrimaryAction:p,actions:q=[],className:r}){let[s,t]=(0,c.useState)(!1);return(0,b.jsxs)(ay.Card,{className:(0,bl.cn)("overflow-hidden hover:border-primary/50 hover:shadow-md transition-all cursor-pointer",s&&"border-primary/50 shadow-md",r),onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),onDoubleClick:o,title:o?"Double-click to apply":void 0,children:[j&&(0,b.jsx)("div",{className:(0,bl.cn)("h-1 bg-gradient-to-r",j)}),(0,b.jsxs)("div",{className:"p-2.5 sm:p-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-1.5 sm:mb-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5",children:[k&&(0,b.jsx)("span",{className:"flex-shrink-0",children:k}),(0,b.jsx)("h4",{className:"font-semibold text-xs sm:text-sm truncate",children:d}),i&&(0,b.jsx)(h.Badge,{className:(0,bl.cn)("text-[9px] sm:text-[10px] h-4 sm:h-5 px-1 flex-shrink-0","destructive"===i.variant&&"bg-red-500 hover:bg-red-600","secondary"===i.variant&&"bg-gray-500 hover:bg-gray-600",!i.variant&&"bg-blue-500 hover:bg-blue-600"),children:i.label})]}),f&&(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mb-1",children:f}),e&&(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-600 line-clamp-2",children:e})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[n&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:(0,bl.cn)("h-6 w-6 sm:h-8 sm:w-8 transition-colors",m?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"),onClick:()=>n?.(),children:(0,b.jsx)(ck.Heart,{className:(0,bl.cn)("h-4 w-4 sm:h-5 sm:w-5",m&&"fill-current")})}),q.length>0&&(0,b.jsxs)(E.DropdownMenu,{children:[(0,b.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:(0,bl.cn)("h-6 w-6 sm:h-8 sm:w-8 transition-opacity",s?"opacity-100":"opacity-0"),children:(0,b.jsx)(V.MoreVertical,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),(0,b.jsx)(E.DropdownMenuContent,{align:"end",className:"w-40",children:q.map((d,e)=>(0,b.jsxs)(c.default.Fragment,{children:[d.separator&&(0,b.jsx)(E.DropdownMenuSeparator,{}),(0,b.jsxs)(E.DropdownMenuItem,{onClick:d.onClick,className:(0,bl.cn)("text-xs sm:text-sm","destructive"===d.variant&&"text-red-600"),children:[d.icon&&(0,b.jsx)("span",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-2",children:d.icon}),d.label]})]},`${a}-action-${e}`))})]})]})]}),l&&l.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 text-[9px] sm:text-[10px]",children:l.map((c,d)=>(0,b.jsxs)("span",{className:"text-gray-500",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:[c.label,":"]})," ",c.value]},`${a}-meta-${d}`))})]})]})}let cm="kata_saved_blocks";function cn(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(""),{blocks:i}=(0,az.usePageState)(),{handleAddBlock:j}=a$();(0,c.useEffect)(()=>{k()},[]);let k=()=>{try{let a=localStorage.getItem(cm);a&&d(JSON.parse(a))}catch(a){aL.error("SAVED_BLOCKS_LOAD","Error loading saved blocks",{error:a}),aJ.toast.error("Failed to load saved blocks")}},l=a=>{try{localStorage.setItem(cm,JSON.stringify(a)),d(a)}catch(a){aL.error("SAVED_BLOCKS_SAVE","Error saving blocks",{error:a}),aJ.toast.error("Failed to save blocks")}},m=()=>{if(0===i.length)return void aJ.toast.error("No blocks to save. Add some blocks to your page first.");let b=prompt("Enter a name for this saved block combination:");if(!b)return;let c=prompt("Enter a description (optional):")||"";l([...a,{id:`saved-${Date.now()}`,name:b,description:c,blocks:[...i],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),category:"custom",tags:[],popularity:"new"}]),aJ.toast.success(`"${b}" saved successfully!`)},n=async a=>{try{for(let b of a.blocks)await j(b.type);aJ.toast.success(`Applied "${a.name}" to page`)}catch(b){aL.error("SAVED_BLOCK_APPLY","Error applying saved block",{blockId:a.id,error:b}),aJ.toast.error("Failed to apply saved block")}},{expandedCategories:o,toggleCategory:p,expandAll:q,collapseAll:r}=b4({initialState:{custom:!0}}),{groupedItems:s,isEmpty:t}=b3(a,e,{searchFields:["name","description","tags"],groupByField:"category"}),u=Object.keys(s);return(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-gray-200 bg-white space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(b1.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),(0,b.jsx)("h2",{className:"font-semibold text-sm sm:text-base",children:"Saved Blocks"}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"ml-1 text-[10px] sm:text-xs",children:a.length})]}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-1.5",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{if(0===a.length)return void aJ.toast.error("No saved blocks to export");let b="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a,null,2)),c=`saved-blocks-${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",b),d.setAttribute("download",c),d.click(),aJ.toast.success("Blocks exported")},disabled:0===a.length,className:"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0",title:"Export blocks",children:(0,b.jsx)(S.Download,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{let b=document.createElement("input");b.type="file",b.accept=".json",b.onchange=b=>{let c=b.target.files?.[0];if(c){let b=new FileReader;b.onload=b=>{try{let c=JSON.parse(b.target?.result),d=[...a,...c];l(d),aJ.toast.success(`Imported ${c.length} blocks`)}catch(a){aJ.toast.error("Invalid file format. Please check the file.")}},b.readAsText(c)}},b.click()},className:"h-7 sm:h-8 w-7 sm:w-8 p-0 flex-shrink-0",title:"Import blocks",children:(0,b.jsx)(_.Upload,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),(0,b.jsxs)(g.Button,{size:"sm",onClick:m,disabled:0===i.length,className:"h-7 sm:h-8 px-2 sm:px-3 text-xs gap-1 flex-shrink-0",title:"Save current page blocks",children:[(0,b.jsx)($.Plus,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Save"})]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Z.Search,{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 pointer-events-none"}),(0,b.jsx)(Y.Input,{placeholder:"Search blocks or tags...",value:e,onChange:a=>f(a.target.value),className:"pl-8 sm:pl-9 h-8 sm:h-9 text-xs sm:text-sm focus-visible:ring-primary"})]})]}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4 bg-gray-50 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,b.jsx)(b1.Package,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50"}),(0,b.jsx)("p",{className:"font-medium text-gray-600",children:"No saved blocks yet"}),(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1 text-center",children:"Create block combinations and save them for quick reuse"}),(0,b.jsxs)(g.Button,{onClick:m,disabled:0===i.length,variant:"outline",size:"sm",className:"text-xs gap-1.5 mt-3 sm:mt-4",children:[(0,b.jsx)($.Plus,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Save Current Selection"]})]}):t?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-400 text-xs sm:text-sm py-8 sm:py-12",children:[(0,b.jsx)(Z.Search,{className:"w-10 h-10 sm:w-12 sm:h-12 mb-3 opacity-50"}),(0,b.jsx)("p",{className:"font-medium text-gray-600",children:"No blocks found"}),(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1",children:"Try a different search term"})]}):(0,b.jsx)("div",{className:"space-y-4 sm:space-y-6",children:u.map(c=>{let d=s[c]||[],e=o[c]||!1;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>p(c),className:"flex items-center gap-2 mb-2 sm:mb-3 text-sm sm:text-base font-semibold text-gray-900 hover:text-primary transition-colors w-full",children:[(0,b.jsx)(b1.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),(0,b.jsx)("span",{className:"capitalize",children:c}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-[10px] sm:text-xs ml-auto",children:d.length}),(0,b.jsx)(A.ChevronDown,{className:(0,bl.cn)("w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform flex-shrink-0",e?"rotate-0":"-rotate-90")})]}),e&&(0,b.jsx)("div",{className:"space-y-2 sm:space-y-2.5 ml-0 sm:ml-2 pl-0 sm:pl-4 border-l border-gray-200 sm:border-l-2",children:d.map(c=>{let d=Math.floor((Date.now()-new Date(c.createdAt).getTime())/864e5);return(0,b.jsx)(cl,{id:c.id,title:c.name,description:c.description,badge:d<=7?{label:"‚ú® New",variant:"default"}:void 0,isBookmarked:c.isBookmarked,onBookmarkToggle:()=>{var b;let d;return b=c.id,l(a.map(a=>a.id===b?{...a,isBookmarked:!a.isBookmarked}:a)),d=a.find(a=>a.id===b),void(d?.isBookmarked?aJ.toast.success("Bookmark removed"):aJ.toast.success("Block bookmarked!"))},onDoubleClick:()=>{aL.info("BLOCK_APPLY","Double-click applying saved block",{blockId:c.id}),n(c)},metadata:[{label:"Blocks",value:c.blocks.length},{label:"Created",value:new Date(c.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}],actions:[{label:"Apply to Page",icon:(0,b.jsx)($.Plus,{className:"w-4 h-4"}),onClick:()=>n(c)},{label:"Duplicate",icon:(0,b.jsx)(T.Copy,{className:"w-4 h-4"}),onClick:()=>{l([...a,{...c,id:`saved-${Date.now()}`,name:`${c.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),popularity:null}]),aJ.toast.success("Block duplicated")}},{separator:!0,label:"",onClick:()=>{}},{label:"Delete",icon:(0,b.jsx)(U.Trash2,{className:"w-4 h-4"}),variant:"destructive",onClick:()=>{var b;return b=c.id,void(confirm("Delete this saved block? This cannot be undone.")&&(l(a.filter(a=>a.id!==b)),aJ.toast.success("Block deleted")))}}]},c.id)})})]},c)})})}),a.length>0&&(0,b.jsx)("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-gray-200 bg-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] sm:text-xs text-gray-500",children:[(0,b.jsx)(bI.Zap,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),(0,b.jsx)("span",{children:"Double-click to apply | üìã Drag to canvas"})]})})]})}function co({onClose:a}){let[d,e]=(0,c.useState)("elements");return(0,b.jsxs)("div",{className:"w-full sm:w-80 md:w-96 bg-gradient-to-b from-white to-gray-50 border-r border-gray-200 flex flex-col shadow-lg",children:[(0,b.jsxs)("div",{className:"h-11 sm:h-12 border-b border-gray-200 flex items-center justify-between px-3 sm:px-4 bg-gradient-to-r from-blue-50 via-white to-white",children:[(0,b.jsxs)("h2",{className:"font-semibold text-sm sm:text-base flex items-center gap-2",children:[(0,b.jsx)(bP.default,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),(0,b.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text text-transparent",children:"Components"})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 sm:h-9 sm:w-9 hover:bg-red-100 hover:text-red-600",children:(0,b.jsx)(r.X,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),(0,b.jsxs)(i.Tabs,{value:d,onValueChange:a=>e(a),className:"flex-1 min-h-0 overflow-y-auto",children:[(0,b.jsxs)(i.TabsList,{className:"w-full justify-start rounded-none border-b bg-white h-auto p-1",children:[(0,b.jsxs)(i.TabsTrigger,{value:"elements",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,b.jsx)(bP.default,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Elements"})]}),(0,b.jsxs)(i.TabsTrigger,{value:"templates",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,b.jsx)(bW.Sparkles,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Templates"})]}),(0,b.jsxs)(i.TabsTrigger,{value:"saved",className:"flex-1 gap-1.5 text-xs sm:text-sm data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:[(0,b.jsx)(bX.Bookmark,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Saved"})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0 bg-gradient-to-b from-white to-gray-50",children:[(0,b.jsx)(i.TabsContent,{value:"elements",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,b.jsx)(b9,{})}),(0,b.jsx)(i.TabsContent,{value:"templates",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,b.jsx)(cj,{})}),(0,b.jsx)(i.TabsContent,{value:"saved",className:"mt-0 h-full data-[state=inactive]:hidden",children:(0,b.jsx)(cn,{})})]})]})]})}var cp=a.i(702079),cp=cp,cq=a.i(99850),cq=cq,cr=a.i(949024),cr=cr,cs=a.i(109375),ct=a.i(535669),ct=ct,cu=a.i(213359),cu=cu,cv=a.i(66649),cv=cv,cw=a.i(166730),cw=cw,cx=a.i(37061),cx=cx,cy=a.i(377319),cy=cy,cz=a.i(611327),cz=cz,cA=a.i(844493),cA=cA,cB=a.i(588095),cB=cB,bx=bx;function cC({value:a,onChange:c}){let d=a.display||"flex";return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Display"}),(0,b.jsx)(i.Tabs,{value:d,onValueChange:a=>c({display:a}),children:(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(i.TabsTrigger,{value:"block",className:"text-xs",children:"Block"}),(0,b.jsx)(i.TabsTrigger,{value:"flex",className:"text-xs",children:"Flex"}),(0,b.jsx)(i.TabsTrigger,{value:"grid",className:"text-xs",children:"Grid"}),(0,b.jsx)(i.TabsTrigger,{value:"inline-block",className:"text-xs",children:"Inline"})]})})]}),"flex"===d&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Direction"}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,b.jsx)(g.Button,{variant:"row"===a.flexDirection?"default":"outline",size:"sm",onClick:()=>c({flexDirection:"row"}),className:"h-8",children:(0,b.jsx)(cB.default,{className:"h-4 w-4 rotate-90"})}),(0,b.jsx)(g.Button,{variant:"column"===a.flexDirection?"default":"outline",size:"sm",onClick:()=>c({flexDirection:"column"}),className:"h-8",children:(0,b.jsx)(bx.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"row-reverse"===a.flexDirection?"default":"outline",size:"sm",onClick:()=>c({flexDirection:"row-reverse"}),className:"h-8",children:(0,b.jsx)(cB.default,{className:"h-4 w-4 rotate-90 scale-x-[-1]"})}),(0,b.jsx)(g.Button,{variant:"column-reverse"===a.flexDirection?"default":"outline",size:"sm",onClick:()=>c({flexDirection:"column-reverse"}),className:"h-8",children:(0,b.jsx)(bx.default,{className:"h-4 w-4 scale-y-[-1]"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Justify"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-1",children:[(0,b.jsx)(g.Button,{variant:"flex-start"===a.justifyContent?"default":"outline",size:"sm",onClick:()=>c({justifyContent:"flex-start"}),className:"h-8",children:(0,b.jsx)(ct.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"center"===a.justifyContent?"default":"outline",size:"sm",onClick:()=>c({justifyContent:"center"}),className:"h-8",children:(0,b.jsx)(cu.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"flex-end"===a.justifyContent?"default":"outline",size:"sm",onClick:()=>c({justifyContent:"flex-end"}),className:"h-8",children:(0,b.jsx)(cv.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"space-between"===a.justifyContent?"default":"outline",size:"sm",onClick:()=>c({justifyContent:"space-between"}),className:"h-8 col-span-3",children:(0,b.jsx)(cw.default,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Align"}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-1",children:[(0,b.jsx)(g.Button,{variant:"flex-start"===a.alignItems?"default":"outline",size:"sm",onClick:()=>c({alignItems:"flex-start"}),className:"h-8",children:(0,b.jsx)(cx.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"center"===a.alignItems?"default":"outline",size:"sm",onClick:()=>c({alignItems:"center"}),className:"h-8",children:(0,b.jsx)(cy.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"flex-end"===a.alignItems?"default":"outline",size:"sm",onClick:()=>c({alignItems:"flex-end"}),className:"h-8",children:(0,b.jsx)(cz.default,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"stretch"===a.alignItems?"default":"outline",size:"sm",onClick:()=>c({alignItems:"stretch"}),className:"h-8",children:(0,b.jsx)(cA.default,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Wrap"}),(0,b.jsx)(i.Tabs,{value:a.flexWrap||"nowrap",onValueChange:a=>c({flexWrap:a}),children:(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(i.TabsTrigger,{value:"nowrap",className:"text-xs",children:"No Wrap"}),(0,b.jsx)(i.TabsTrigger,{value:"wrap",className:"text-xs",children:"Wrap"}),(0,b.jsx)(i.TabsTrigger,{value:"wrap-reverse",className:"text-xs",children:"Reverse"})]})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Gap"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Input,{type:"number",min:"0",value:a.gap||0,onChange:a=>c({gap:parseInt(a.target.value)||0}),className:"h-8 text-xs"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]})]}),"grid"===d&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Columns"}),(0,b.jsx)(Y.Input,{value:a.gridTemplateColumns||"repeat(3, 1fr)",onChange:a=>c({gridTemplateColumns:a.target.value}),placeholder:"repeat(3, 1fr)",className:"h-8 text-xs font-mono"}),(0,b.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,6].map(a=>(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>c({gridTemplateColumns:`repeat(${a}, 1fr)`}),className:"h-6 px-2 text-xs",children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Rows"}),(0,b.jsx)(Y.Input,{value:a.gridTemplateRows||"auto",onChange:a=>c({gridTemplateRows:a.target.value}),placeholder:"auto",className:"h-8 text-xs font-mono"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Gap"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Input,{type:"number",min:"0",value:a.gap||0,onChange:a=>c({gap:parseInt(a.target.value)||0}),className:"h-8 text-xs"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]})]})]})}var cD=a.i(941502),cE=a.i(668266),cE=cE;function cF({type:a,value:d,onChange:e}){let[f,h]=(0,c.useState)(!0),i=(a,b)=>{let c=parseInt(b)||0;f?e({top:c,right:c,bottom:c,left:c}):e({...d,[a]:c})};return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium capitalize",children:a}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>h(!f),className:"h-6 px-2",children:f?(0,b.jsx)(cD.Link,{className:"h-3 w-3"}):(0,b.jsx)(cE.default,{className:"h-3 w-3"})})]}),(0,b.jsxs)("div",{className:"relative bg-gray-50 rounded-lg p-4",children:[(0,b.jsx)("div",{className:"flex justify-center mb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(Y.Input,{type:"number",value:d.top,onChange:a=>i("top",a.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(Y.Input,{type:"number",value:d.left,onChange:a=>i("left",a.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]}),(0,b.jsx)("div",{className:`px-4 py-3 rounded border-2 ${"padding"===a?"bg-blue-50 border-blue-300":"bg-orange-50 border-orange-300"}`,children:(0,b.jsx)("div",{className:"text-xs font-medium text-center text-gray-600",children:"padding"===a?"Content":"Element"})}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(Y.Input,{type:"number",value:d.right,onChange:a=>i("right",a.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(Y.Input,{type:"number",value:d.bottom,onChange:a=>i("bottom",a.target.value),className:"w-16 h-6 text-xs text-center",min:"0"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})}),(0,b.jsx)("div",{className:"absolute top-1 left-2 text-[10px] text-gray-400",children:"T"}),(0,b.jsx)("div",{className:"absolute bottom-1 left-2 text-[10px] text-gray-400",children:"B"}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-1 text-[10px] text-gray-400",children:"L"}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 right-1 text-[10px] text-gray-400",children:"R"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:[0,4,8,16,24,32].map(a=>(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>e({top:a,right:a,bottom:a,left:a}),className:"h-6 px-2 text-xs",children:a},a))})]})}var cE=cE;function cG(){return(cG=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function cH(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)b.indexOf(c=f[d])>=0||(e[c]=a[c]);return e}function cI(a){var b=(0,c.useRef)(a),d=(0,c.useRef)(function(a){b.current&&b.current(a)});return b.current=a,d.current}var cJ=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=1),a>c?c:a<b?b:a},cK=function(a){return"touches"in a},cL=function(a){return a&&a.ownerDocument.defaultView||self},cM=function(a,b,c){var d=a.getBoundingClientRect(),e=cK(b)?function(a,b){for(var c=0;c<a.length;c++)if(a[c].identifier===b)return a[c];return a[0]}(b.touches,c):b;return{left:cJ((e.pageX-(d.left+cL(a).pageXOffset))/d.width),top:cJ((e.pageY-(d.top+cL(a).pageYOffset))/d.height)}},cN=function(a){cK(a)||a.preventDefault()},cO=c.default.memo(function(a){var b=a.onMove,d=a.onKey,e=cH(a,["onMove","onKey"]),f=(0,c.useRef)(null),g=cI(b),h=cI(d),i=(0,c.useRef)(null),j=(0,c.useRef)(!1),k=(0,c.useMemo)(function(){var a=function(a){cN(a),(cK(a)?a.touches.length>0:a.buttons>0)&&f.current?g(cM(f.current,a,i.current)):c(!1)},b=function(){return c(!1)};function c(c){var d=j.current,e=cL(f.current),g=c?e.addEventListener:e.removeEventListener;g(d?"touchmove":"mousemove",a),g(d?"touchend":"mouseup",b)}return[function(a){var b=a.nativeEvent,d=f.current;if(d&&(cN(b),(!j.current||cK(b))&&d)){if(cK(b)){j.current=!0;var e=b.changedTouches||[];e.length&&(i.current=e[0].identifier)}d.focus(),g(cM(d,b,i.current)),c(!0)}},function(a){var b=a.which||a.keyCode;b<37||b>40||(a.preventDefault(),h({left:39===b?.05:37===b?-.05:0,top:40===b?.05:38===b?-.05:0}))},c]},[h,g]),l=k[0],m=k[1],n=k[2];return(0,c.useEffect)(function(){return n},[n]),c.default.createElement("div",cG({},e,{onTouchStart:l,onMouseDown:l,className:"react-colorful__interactive",ref:f,onKeyDown:m,tabIndex:0,role:"slider"}))}),cP=function(a){return a.filter(Boolean).join(" ")},cQ=function(a){var b=a.color,d=a.left,e=a.top,f=cP(["react-colorful__pointer",a.className]);return c.default.createElement("div",{className:f,style:{top:100*(void 0===e?.5:e)+"%",left:100*d+"%"}},c.default.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:b}}))},cR=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=Math.pow(10,b)),Math.round(c*a)/c},cS=function(a){return"#"===a[0]&&(a=a.substring(1)),a.length<6?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:4===a.length?cR(parseInt(a[3]+a[3],16)/255,2):1}:{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16),a:8===a.length?cR(parseInt(a.substring(6,8),16)/255,2):1}},cT=function(a){var b=a.s,c=a.v,d=a.a,e=(200-b)*c/100;return{h:cR(a.h),s:cR(e>0&&e<200?b*c/100/(e<=100?e:200-e)*100:0),l:cR(e/2),a:cR(d,2)}},cU=function(a){var b=cT(a);return"hsl("+b.h+", "+b.s+"%, "+b.l+"%)"},cV=function(a){var b=cT(a);return"hsla("+b.h+", "+b.s+"%, "+b.l+"%, "+b.a+")"},cW=function(a){var b=a.h,c=a.s,d=a.v,e=a.a;b=b/360*6,c/=100,d/=100;var f=Math.floor(b),g=d*(1-c),h=d*(1-(b-f)*c),i=d*(1-(1-b+f)*c),j=f%6;return{r:cR(255*[d,h,g,g,i,d][j]),g:cR(255*[i,d,d,h,g,g][j]),b:cR(255*[g,g,i,d,d,h][j]),a:cR(e,2)}},cX=function(a){var b=a.toString(16);return b.length<2?"0"+b:b},cY=function(a){var b=a.r,c=a.g,d=a.b,e=a.a,f=e<1?cX(cR(255*e)):"";return"#"+cX(b)+cX(c)+cX(d)+f},cZ=function(a){var b=a.r,c=a.g,d=a.b,e=a.a,f=Math.max(b,c,d),g=f-Math.min(b,c,d),h=g?f===b?(c-d)/g:f===c?2+(d-b)/g:4+(b-c)/g:0;return{h:cR(60*(h<0?h+6:h)),s:cR(f?g/f*100:0),v:cR(f/255*100),a:e}},c$=c.default.memo(function(a){var b=a.hue,d=a.onChange,e=cP(["react-colorful__hue",a.className]);return c.default.createElement("div",{className:e},c.default.createElement(cO,{onMove:function(a){d({h:360*a.left})},onKey:function(a){d({h:cJ(b+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":cR(b),"aria-valuemax":"360","aria-valuemin":"0"},c.default.createElement(cQ,{className:"react-colorful__hue-pointer",left:b/360,color:cU({h:b,s:100,v:100,a:1})})))}),c_=c.default.memo(function(a){var b=a.hsva,d=a.onChange,e={backgroundColor:cU({h:b.h,s:100,v:100,a:1})};return c.default.createElement("div",{className:"react-colorful__saturation",style:e},c.default.createElement(cO,{onMove:function(a){d({s:100*a.left,v:100-100*a.top})},onKey:function(a){d({s:cJ(b.s+100*a.left,0,100),v:cJ(b.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+cR(b.s)+"%, Brightness "+cR(b.v)+"%"},c.default.createElement(cQ,{className:"react-colorful__saturation-pointer",top:1-b.v/100,left:b.s/100,color:cU(b)})))}),c0=function(a,b){if(a===b)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0};function c1(a,b,d){var e=cI(d),f=(0,c.useState)(function(){return a.toHsva(b)}),g=f[0],h=f[1],i=(0,c.useRef)({color:b,hsva:g});return(0,c.useEffect)(function(){if(!a.equal(b,i.current.color)){var c=a.toHsva(b);i.current={hsva:c,color:b},h(c)}},[b,a]),(0,c.useEffect)(function(){var b;c0(g,i.current.hsva)||a.equal(b=a.fromHsva(g),i.current.color)||(i.current={hsva:g,color:b},e(b))},[g,a,e]),[g,(0,c.useCallback)(function(a){h(function(b){return Object.assign({},b,a)})},[])]}var c2,c3=c.useEffect,c4=new Map,c5=function(a){c3(function(){var b=a.current?a.current.ownerDocument:document;if(void 0!==b&&!c4.has(b)){var c=b.createElement("style");c.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',c4.set(b,c);var d=c2||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);d&&c.setAttribute("nonce",d),b.head.appendChild(c)}},[])},c6=function(a){var b=a.className,d=a.colorModel,e=a.color,f=void 0===e?d.defaultColor:e,g=a.onChange,h=cH(a,["className","colorModel","color","onChange"]),i=(0,c.useRef)(null);c5(i);var j=c1(d,f,g),k=j[0],l=j[1],m=cP(["react-colorful",b]);return c.default.createElement("div",cG({},h,{ref:i,className:m}),c.default.createElement(c_,{hsva:k,onChange:l}),c.default.createElement(c$,{hue:k.h,onChange:l,className:"react-colorful__last-control"}))},c7={defaultColor:"000",toHsva:function(a){return cZ(cS(a))},fromHsva:function(a){return cY(cW({h:a.h,s:a.s,v:a.v,a:1}))},equal:function(a,b){return a.toLowerCase()===b.toLowerCase()||c0(cS(a),cS(b))}},c8=function(a){return c.default.createElement(c6,cG({},a,{colorModel:c7}))},c9=function(a){var b=a.className,d=a.hsva,e=a.onChange,f={backgroundImage:"linear-gradient(90deg, "+cV(Object.assign({},d,{a:0}))+", "+cV(Object.assign({},d,{a:1}))+")"},g=cP(["react-colorful__alpha",b]),h=cR(100*d.a);return c.default.createElement("div",{className:g},c.default.createElement("div",{className:"react-colorful__alpha-gradient",style:f}),c.default.createElement(cO,{onMove:function(a){e({a:a.left})},onKey:function(a){e({a:cJ(d.a+a.left)})},"aria-label":"Alpha","aria-valuetext":h+"%","aria-valuenow":h,"aria-valuemin":"0","aria-valuemax":"100"},c.default.createElement(cQ,{className:"react-colorful__alpha-pointer",left:d.a,color:cV(d)})))},da=function(a){var b=a.className,d=a.colorModel,e=a.color,f=void 0===e?d.defaultColor:e,g=a.onChange,h=cH(a,["className","colorModel","color","onChange"]),i=(0,c.useRef)(null);c5(i);var j=c1(d,f,g),k=j[0],l=j[1],m=cP(["react-colorful",b]);return c.default.createElement("div",cG({},h,{ref:i,className:m}),c.default.createElement(c_,{hsva:k,onChange:l}),c.default.createElement(c$,{hue:k.h,onChange:l}),c.default.createElement(c9,{hsva:k,onChange:l,className:"react-colorful__last-control"}))},db={defaultColor:{r:0,g:0,b:0,a:1},toHsva:cZ,fromHsva:cW,equal:c0},dc=function(a){return c.default.createElement(da,cG({},a,{colorModel:db}))},dd=a.i(794155),de=a.i(762433),de=de;let df=["#000000","#FFFFFF","#F3F4F6","#E5E7EB","#D1D5DB","#EF4444","#F59E0B","#10B981","#3B82F6","#8B5CF6","#EC4899","#14B8A6","#F97316","#84CC16","#06B6D4"];function dg({label:a,value:d,onChange:e,showOpacity:f=!0,showGradient:h=!1}){var j;let k,[l,m]=(0,c.useState)("solid"),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)((j=d||"#000000",(k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(j))?{r:parseInt(k[1],16),g:parseInt(k[2],16),b:parseInt(k[3],16),a:1}:{r:0,g:0,b:0,a:1})),r=a=>{q(a);let{r:b,g:c,b:d,a:f}=a;f<1?e(`rgba(${b}, ${c}, ${d}, ${f})`):e(`#${(0x1000000+(b<<16)+(c<<8)+d).toString(16).slice(1)}`)};return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:a}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(dd.Popover,{open:n,onOpenChange:o,children:[(0,b.jsx)(dd.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"outline",className:"w-12 h-9 p-1",style:{backgroundColor:d||"#ffffff"},children:(0,b.jsx)("span",{className:"sr-only",children:"Pick color"})})}),(0,b.jsx)(dd.PopoverContent,{className:"w-auto p-3",align:"start",children:(0,b.jsxs)("div",{className:"space-y-3",children:[h&&(0,b.jsx)(i.Tabs,{value:l,onValueChange:a=>m(a),children:(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(i.TabsTrigger,{value:"solid",children:"Solid"}),(0,b.jsx)(i.TabsTrigger,{value:"gradient",children:"Gradient"})]})}),"solid"===l&&(0,b.jsxs)("div",{className:"space-y-3",children:[f?(0,b.jsx)(dc,{color:p,onChange:r}):(0,b.jsx)(c8,{color:d||"#000000",onChange:e}),f&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(G.Label,{className:"text-xs",children:"Opacity"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"range",min:"0",max:"100",value:Math.round(100*p.a),onChange:a=>{let b=parseInt(a.target.value)/100;r({...p,a:b})},className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,b.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(100*p.a),"%"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-xs mb-2 block",children:"Presets"}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-1",children:df.map(a=>(0,b.jsx)("button",{onClick:()=>e(a),className:"w-full aspect-square rounded border border-gray-200 hover:scale-110 transition-transform",style:{backgroundColor:a},title:a},a))})]})]}),"gradient"===l&&(0,b.jsx)("div",{className:"text-xs text-gray-500 text-center py-4",children:"Gradient editor coming soon"})]})})]}),(0,b.jsx)(Y.Input,{value:d||"",onChange:a=>e(a.target.value),placeholder:"#000000",className:"flex-1 h-9 text-xs font-mono"}),(0,b.jsx)(g.Button,{variant:"outline",size:"icon",className:"h-9 w-9",disabled:!0,children:(0,b.jsx)(de.default,{className:"h-4 w-4"})})]})]})}let dh=[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"},{value:"double",label:"Double"},{value:"groove",label:"Groove"},{value:"ridge",label:"Ridge"},{value:"inset",label:"Inset"},{value:"outset",label:"Outset"}],di=[0,4,8,12,16,24,32,9999];function dj({value:a,onChange:d}){let[e,f]=(0,c.useState)(!0),h=a.radius||{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},i=(b,c)=>{e?d({...a,radius:{topLeft:c,topRight:c,bottomRight:c,bottomLeft:c}}):d({...a,radius:{...h,[b]:c}})};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Width"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Input,{type:"number",min:"0",max:"20",value:a.width||0,onChange:a=>d({width:parseInt(a.target.value)||0}),className:"h-8 text-xs"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Style"}),(0,b.jsx)("select",{value:a.style||"solid",onChange:a=>d({style:a.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:dh.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsx)(dg,{label:"Border Color",value:a.color||"#000000",onChange:a=>d({color:a}),showOpacity:!0}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Border Radius"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>f(!e),className:"h-6 px-2",children:e?(0,b.jsx)(cD.Link,{className:"h-3 w-3"}):(0,b.jsx)(cE.default,{className:"h-3 w-3"})})]}),(0,b.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2",children:(0,b.jsx)(Y.Input,{type:"number",min:"0",value:h.topLeft,onChange:a=>i("topLeft",parseInt(a.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,b.jsx)("div",{className:"absolute top-0 right-0 translate-x-1/2 -translate-y-1/2",children:(0,b.jsx)(Y.Input,{type:"number",min:"0",value:h.topRight,onChange:a=>i("topRight",parseInt(a.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,b.jsx)("div",{className:"absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2",children:(0,b.jsx)(Y.Input,{type:"number",min:"0",value:h.bottomRight,onChange:a=>i("bottomRight",parseInt(a.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 -translate-x-1/2 translate-y-1/2",children:(0,b.jsx)(Y.Input,{type:"number",min:"0",value:h.bottomLeft,onChange:a=>i("bottomLeft",parseInt(a.target.value)||0),className:"w-14 h-7 text-xs text-center"})}),(0,b.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-blue-100 to-purple-100 border-4 border-blue-500 transition-all",style:{borderTopLeftRadius:`${h.topLeft}px`,borderTopRightRadius:`${h.topRight}px`,borderBottomRightRadius:`${h.bottomRight}px`,borderBottomLeftRadius:`${h.bottomLeft}px`,borderWidth:`${a.width||0}px`,borderStyle:a.style||"solid",borderColor:a.color||"#3B82F6"}})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:di.map(c=>(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{d({...a,radius:{topLeft:c,topRight:c,bottomRight:c,bottomLeft:c}})},className:"h-7 px-2 text-xs",children:9999===c?"‚àû":c},c))})]})]})}function dk({selectedBlock:a,onStyleChange:d}){let[e,f]=(0,c.useState)({}),[h,i]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{f({}),i(!1)},[a?.id]),!a)return(0,b.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"Select a block to edit its styles"});let j=a.style||{},k={...j,...e},l=a=>{console.log("StylePanel - handleStyleUpdate called with:",a),f(b=>({...b,...a})),i(!0)};return(0,b.jsxs)("div",{className:"space-y-3 p-3",children:[h&&(0,b.jsxs)("div",{className:"sticky top-0 z-10 bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Save,{className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Unsaved changes"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{onClick:()=>{f({}),i(!1)},variant:"ghost",size:"sm",className:"h-7 text-xs",children:"Discard"}),(0,b.jsx)(g.Button,{onClick:()=>{if(!h)return;console.log("StylePanel - Saving pending styles:",e);let a={...j,...e};console.log("StylePanel - merged styles:",a),d(a),f({}),i(!1)},size:"sm",className:"h-7 text-xs",children:"Save"})]})]}),(0,b.jsxs)(cs.Accordion,{type:"multiple",defaultValue:["layout","spacing","typography","colors"],className:"w-full",children:[(0,b.jsxs)(cs.AccordionItem,{value:"layout",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"üé® Layout"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsx)(cC,{value:{display:k.display,flexDirection:k.flexDirection,justifyContent:k.justifyContent,alignItems:k.alignItems,gap:k.gap,gridTemplateColumns:k.gridTemplateColumns,gridTemplateRows:k.gridTemplateRows,flexWrap:k.flexWrap},onChange:a=>l(a)})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"spacing",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"üìê Spacing"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium mb-2 block",children:"Padding"}),(0,b.jsx)(cF,{type:"padding",value:{top:k.paddingTop||0,right:k.paddingRight||0,bottom:k.paddingBottom||0,left:k.paddingLeft||0},onChange:a=>l({paddingTop:a.top,paddingRight:a.right,paddingBottom:a.bottom,paddingLeft:a.left})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium mb-2 block",children:"Margin"}),(0,b.jsx)(cF,{type:"margin",value:{top:k.marginTop||0,right:k.marginRight||0,bottom:k.marginBottom||0,left:k.marginLeft||0},onChange:a=>l({marginTop:a.top,marginRight:a.right,marginBottom:a.bottom,marginLeft:a.left})})]})]})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"typography",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"‚úçÔ∏è Typography"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Font Size"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Input,{type:"number",min:"8",max:"72",value:parseInt(k.fontSize||16),onChange:a=>l({fontSize:`${a.target.value}px`}),className:"h-8 text-xs"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"px"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Font Weight"}),(0,b.jsxs)("select",{value:k.fontWeight||"normal",onChange:a=>l({fontWeight:a.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:[(0,b.jsx)("option",{value:"100",children:"Thin"}),(0,b.jsx)("option",{value:"300",children:"Light"}),(0,b.jsx)("option",{value:"normal",children:"Normal"}),(0,b.jsx)("option",{value:"500",children:"Medium"}),(0,b.jsx)("option",{value:"600",children:"Semibold"}),(0,b.jsx)("option",{value:"bold",children:"Bold"}),(0,b.jsx)("option",{value:"800",children:"Extra Bold"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Line Height"}),(0,b.jsx)(Y.Input,{type:"number",min:"1",max:"3",step:"0.1",value:parseFloat(k.lineHeight||1.5),onChange:a=>l({lineHeight:a.target.value}),className:"h-8 text-xs"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Text Align"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-1",children:["left","center","right","justify"].map(a=>(0,b.jsx)(g.Button,{variant:k.textAlign===a?"default":"outline",size:"sm",onClick:()=>l({textAlign:a}),className:"h-8 text-xs capitalize",children:a},a))})]})]})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"colors",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"üé® Colors"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(dg,{label:"Text Color",value:k.color||"#000000",onChange:a=>l({color:a}),showOpacity:!0}),(0,b.jsx)(dg,{label:"Background Color",value:k.backgroundColor||"#ffffff",onChange:a=>l({backgroundColor:a}),showOpacity:!0})]})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"border",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"üî≤ Border"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsx)(dj,{value:{width:parseInt(k.borderWidth||0),style:k.borderStyle||"solid",color:k.borderColor||"#000000",radius:{topLeft:parseInt(k.borderTopLeftRadius||0),topRight:parseInt(k.borderTopRightRadius||0),bottomRight:parseInt(k.borderBottomRightRadius||0),bottomLeft:parseInt(k.borderBottomLeftRadius||0)}},onChange:a=>l({borderWidth:`${a.width}px`,borderStyle:a.style,borderColor:a.color,borderTopLeftRadius:`${a.radius?.topLeft||0}px`,borderTopRightRadius:`${a.radius?.topRight||0}px`,borderBottomRightRadius:`${a.radius?.bottomRight||0}px`,borderBottomLeftRadius:`${a.radius?.bottomLeft||0}px`})})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"effects",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"‚ú® Effects"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Opacity"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"range",min:"0",max:"100",value:100*parseFloat(k.opacity||1),onChange:a=>l({opacity:parseInt(a.target.value)/100}),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,b.jsxs)("span",{className:"text-xs w-10 text-right",children:[Math.round(100*parseFloat(k.opacity||1)),"%"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Shadow"}),(0,b.jsxs)("select",{value:k.boxShadow||"none",onChange:a=>l({boxShadow:a.target.value}),className:"w-full h-8 px-2 text-xs border rounded-md",children:[(0,b.jsx)("option",{value:"none",children:"None"}),(0,b.jsx)("option",{value:"0 1px 2px 0 rgb(0 0 0 / 0.05)",children:"Small"}),(0,b.jsx)("option",{value:"0 4px 6px -1px rgb(0 0 0 / 0.1)",children:"Medium"}),(0,b.jsx)("option",{value:"0 10px 15px -3px rgb(0 0 0 / 0.1)",children:"Large"}),(0,b.jsx)("option",{value:"0 20px 25px -5px rgb(0 0 0 / 0.1)",children:"Extra Large"}),(0,b.jsx)("option",{value:"0 25px 50px -12px rgb(0 0 0 / 0.25)",children:"2XL"})]})]})]})})]}),(0,b.jsxs)(cs.AccordionItem,{value:"size",children:[(0,b.jsx)(cs.AccordionTrigger,{className:"text-sm font-semibold",children:"üìè Size"}),(0,b.jsx)(cs.AccordionContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Width"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(Y.Input,{value:k.width||"auto",onChange:a=>l({width:a.target.value}),placeholder:"auto, 100%, 300px",className:"h-8 text-xs"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Height"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(Y.Input,{value:k.height||"auto",onChange:a=>l({height:a.target.value}),placeholder:"auto, 100%, 300px",className:"h-8 text-xs"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Min Width"}),(0,b.jsx)(Y.Input,{value:k.minWidth||"",onChange:a=>l({minWidth:a.target.value}),placeholder:"0",className:"h-8 text-xs"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(G.Label,{className:"text-xs font-medium",children:"Max Width"}),(0,b.jsx)(Y.Input,{value:k.maxWidth||"",onChange:a=>l({maxWidth:a.target.value}),placeholder:"none",className:"h-8 text-xs"})]})]})]})})]})]})]})}function dl(){let[a,b]=(0,c.useState)(aL.getLogs()),[d,e]=(0,c.useState)("all"),[f,g]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{if(!f)return;let a=setInterval(()=>{b(aL.getLogs())},500);return()=>clearInterval(a)},[f]),"all"===d||a.filter(a=>a.level===d),null}function dm({device:a,onClose:d}){let[e,f]=(0,c.useState)("style"),[h,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),{selectedBlockId:s,selectedBlock:t}=(0,az.usePageState)(),{handleUpdateBlockStyle:u,handleBlockUpdate:v,handleBlockDelete:x}=a$(),y=a=>{s&&t&&v(s,a,t.style)};return(0,c.useEffect)(()=>{t?.style?(o(t.style.customClasses||""),q(t.style.inlineStyles||"")):(o(""),q(""))},[s,t]),(0,b.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full overflow-hidden",children:[(0,b.jsxs)("div",{className:"border-b border-gray-200 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"h-12 flex items-center justify-between px-4",children:[(0,b.jsx)("h2",{className:"font-semibold",children:"Properties"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:d,children:(0,b.jsx)(r.X,{className:"w-4 h-4"})})]}),s&&(0,b.jsxs)("div",{className:"px-4 pb-3 flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:()=>{m(!l)},size:"sm",variant:"outline",className:"flex-1",title:l?"Unlock block":"Lock block",children:[l?(0,b.jsx)(a5.Lock,{className:"w-3.5 h-3.5 mr-1.5"}):(0,b.jsx)(cq.default,{className:"w-3.5 h-3.5 mr-1.5"}),(0,b.jsx)("span",{className:"text-xs",children:l?"Locked":"Lock"})]}),(0,b.jsxs)(g.Button,{onClick:()=>{s&&t&&console.log("Duplicate block:",s)},size:"sm",variant:"outline",className:"flex-1",title:"Duplicate block",disabled:l,children:[(0,b.jsx)(T.Copy,{className:"w-3.5 h-3.5 mr-1.5"}),(0,b.jsx)("span",{className:"text-xs",children:"Duplicate"})]}),(0,b.jsxs)(g.Button,{onClick:()=>{s&&(h?(x(s),k(!1)):(k(!0),setTimeout(()=>k(!1),3e3)))},size:"sm",variant:h?"destructive":"outline",className:"flex-1",title:"Delete block",disabled:l,children:[(0,b.jsx)(U.Trash2,{className:"w-3.5 h-3.5 mr-1.5"}),(0,b.jsx)("span",{className:"text-xs",children:h?"Confirm?":"Delete"})]})]})]}),s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200 flex-shrink-0",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Editing for: ",(0,b.jsx)("span",{className:"font-semibold capitalize",children:a})]})}),(0,b.jsxs)(i.Tabs,{value:e,onValueChange:a=>f(a),className:"flex-1 flex flex-col min-h-0",children:[(0,b.jsxs)(i.TabsList,{className:"w-full justify-start rounded-none border-b flex-shrink-0",children:[(0,b.jsxs)(i.TabsTrigger,{value:"style",className:"flex-1 gap-2",children:[(0,b.jsx)(cp.default,{className:"w-4 h-4"}),"Style"]}),(0,b.jsxs)(i.TabsTrigger,{value:"settings",className:"flex-1 gap-2",children:[(0,b.jsx)(w.Settings,{className:"w-4 h-4"}),"Settings"]}),(0,b.jsxs)(i.TabsTrigger,{value:"logs",className:"flex-1 gap-2",children:[(0,b.jsx)(X.FileText,{className:"w-4 h-4"}),"Logs"]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0",children:[(0,b.jsx)(i.TabsContent,{value:"style",className:"mt-0 h-full",children:(0,b.jsx)(dk,{selectedBlock:t,onStyleChange:a=>{console.log("RightPanel - handleStyleChange called with:",a),console.log("RightPanel - selectedBlockId:",s),s&&u(s,a)}})}),(0,b.jsx)(i.TabsContent,{value:"settings",className:"mt-0 p-4 h-full overflow-y-auto",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(w.Settings,{className:"w-4 h-4"}),"Block Information"]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm bg-gray-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"ID:"}),(0,b.jsx)("span",{className:"font-mono text-xs bg-white px-2 py-1 rounded border",children:s})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,b.jsx)("span",{className:"font-medium capitalize bg-primary/10 text-primary px-2 py-1 rounded text-xs",children:t?.type?.replace(/_/g," ")||"Unknown"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Order:"}),(0,b.jsxs)("span",{className:"font-medium",children:["#",t?.order??"N/A"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${l?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:l?"Locked":"Editable"})]})]})]}),t?.content&&!l&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Quick Edit Content"}),(0,b.jsxs)("div",{className:"space-y-3",children:[void 0!==t.content.text&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-text",className:"text-xs",children:"Text Content"}),(0,b.jsx)(H.Textarea,{id:"block-text",value:t.content.text||"",onChange:a=>y({...t.content,text:a.target.value}),className:"mt-1 text-sm",rows:3,placeholder:"Enter text..."})]}),void 0!==t.content.title&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-title",className:"text-xs",children:"Title"}),(0,b.jsx)(Y.Input,{id:"block-title",value:t.content.title||"",onChange:a=>y({...t.content,title:a.target.value}),className:"mt-1 text-sm",placeholder:"Enter title..."})]}),void 0!==t.content.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-description",className:"text-xs",children:"Description"}),(0,b.jsx)(H.Textarea,{id:"block-description",value:t.content.description||"",onChange:a=>y({...t.content,description:a.target.value}),className:"mt-1 text-sm",rows:2,placeholder:"Enter description..."})]}),void 0!==t.content.url&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-url",className:"text-xs",children:"URL"}),(0,b.jsx)(Y.Input,{id:"block-url",type:"url",value:t.content.url||"",onChange:a=>y({...t.content,url:a.target.value}),className:"mt-1 text-sm",placeholder:"https://..."})]}),void 0!==t.content.productSlug&&(0,b.jsxs)("div",{children:[(0,b.jsxs)(G.Label,{htmlFor:"block-productSlug",className:"text-xs",children:["Product Slug ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(Y.Input,{id:"block-productSlug",value:t.content.productSlug||"",onChange:a=>y({...t.content,productSlug:a.target.value}),className:"mt-1 text-sm",placeholder:"product-slug-example"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Slug c·ªßa s·∫£n ph·∫©m c·∫ßn hi·ªÉn th·ªã (vd: "ao-thun-nam")'})]}),void 0!==t.content.categoryId&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-categoryId",className:"text-xs",children:"Category ID"}),(0,b.jsx)(Y.Input,{id:"block-categoryId",value:t.content.categoryId||"",onChange:a=>y({...t.content,categoryId:a.target.value}),className:"mt-1 text-sm",placeholder:"Optional category filter"})]}),void 0!==t.content.limit&&(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"block-limit",className:"text-xs",children:"Products Limit"}),(0,b.jsx)(Y.Input,{id:"block-limit",type:"number",value:t.content.limit||12,onChange:a=>y({...t.content,limit:parseInt(a.target.value)||12}),className:"mt-1 text-sm",min:"1",max:"100"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(bI.Zap,{className:"w-4 h-4"}),"Advanced"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Visibility"}),(0,b.jsxs)(g.Button,{size:"sm",variant:"ghost",className:"h-7",children:[(0,b.jsx)(j.Eye,{className:"w-3 h-3 mr-1"}),(0,b.jsx)("span",{className:"text-xs",children:"Visible"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Animation"}),(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",className:"h-7",children:(0,b.jsx)("span",{className:"text-xs",children:"None"})})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(cr.default,{className:"w-4 h-4"}),"Custom CSS Classes"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"custom-classes",className:"text-xs",children:"Tailwind Classes"}),(0,b.jsx)(H.Textarea,{id:"custom-classes",value:n,onChange:a=>{var b;o(b=a.target.value),s&&t&&u(s,{customClasses:b})},placeholder:"e.g., hover:shadow-lg hover:scale-105 transition-all duration-300",className:"mt-1 text-xs font-mono",rows:3}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"üí° Add Tailwind classes for additional styling (space-separated)"}),n&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-amber-900 mb-2",children:"Preview:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:n.split(/\s+/).filter(Boolean).map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded text-xs font-mono",children:a},c))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(cr.default,{className:"w-4 h-4"}),"Inline Styles (CSS)"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G.Label,{htmlFor:"inline-styles",className:"text-xs",children:"CSS Properties"}),(0,b.jsx)(H.Textarea,{id:"inline-styles",value:p,onChange:a=>{var b;q(b=a.target.value),s&&t&&u(s,{inlineStyles:b})},placeholder:`e.g., box-shadow: 0 10px 30px rgba(0,0,0,0.3);
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);`,className:"mt-1 text-xs font-mono",rows:4}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"üí° Add inline CSS properties (semicolon-separated)"}),p&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Applied Styles:"}),(0,b.jsx)("pre",{className:"text-xs font-mono text-blue-800 overflow-x-auto",children:p.split(";").filter(a=>a.trim()).map((a,c)=>(0,b.jsxs)("div",{children:[a.trim(),";"]},c))})]})]})]}),t?.content&&(0,b.jsxs)("details",{className:"space-y-3",children:[(0,b.jsx)("summary",{className:"text-sm font-semibold text-gray-900 cursor-pointer hover:text-primary",children:"JSON Editor (Advanced)"}),(0,b.jsx)("div",{className:"bg-gray-900 text-gray-100 p-3 rounded-lg text-xs font-mono overflow-x-auto mt-2",children:(0,b.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(t.content,null,2)})})]}),(0,b.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,b.jsx)("strong",{children:"üí° Tip:"})," Use the Style tab for visual customization. Lock the block to prevent accidental changes."]})})]})}),(0,b.jsx)(i.TabsContent,{value:"logs",className:"mt-0 h-full",children:(0,b.jsx)(dl,{})})]})]})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Select a block to edit its properties"})})]})}function dn({editorMode:a,onModeChange:d,onExit:f,onSave:h}){let[i,j]=(0,c.useState)("desktop"),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!0),{selectedBlockId:o,loading:p,editingPage:q,setEditingPage:r}=(0,az.usePageState)(),{handleSelectBlock:s,handleAddChildBlock:t,handleCloseAddChildDialog:u}=a$(),{showAddChildDialog:v,addChildParentId:w}=aC(),{toast:x}=(0,au.useToast)(),[y]=(0,e.useMutation)(av.UPDATE_PAGE),z=(0,c.useCallback)(async a=>{if(!q)return void x({title:"Error",description:"No page selected",type:"error"});try{let b=Array.isArray(a.seoKeywords)?a.seoKeywords:a.seoKeywords?a.seoKeywords.split(",").map(a=>a.trim()):[],c={title:a.pageTitle,slug:a.pageSlug,seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:b};if(!q?.id){r({...q,title:a.pageTitle,slug:a.pageSlug,seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:b}),x({title:"Success",description:"Page settings updated",type:"success"});return}await y({variables:{id:q.id,input:c}}),r({...q,title:a.pageTitle,slug:a.pageSlug,seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:b}),x({title:"Success",description:"Global settings saved successfully",type:"success"})}catch(a){throw console.error("Error saving settings:",a),x({title:"Error",description:"Failed to save global settings",type:"error"}),a}},[q,y,r,x]);return(0,b.jsxs)("div",{className:"h-screen w-screen bg-gray-50 flex flex-col overflow-hidden",children:[(0,b.jsx)(bh,{editorMode:a,onModeChange:d,device:i,onDeviceChange:j,onSave:h,onExit:f,leftPanelOpen:k,onToggleLeftPanel:()=>l(!k),rightPanelOpen:m,onToggleRightPanel:()=>n(!m),isLoading:p,onSettingsSave:z,showEditorControls:!0,showPageInfo:!0}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[k&&(0,b.jsx)(co,{onClose:()=>l(!1)}),(0,b.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,b.jsx)(bO,{editorMode:a,device:i,selectedBlockId:o,onSelectBlock:s})}),m&&(0,b.jsx)(dm,{device:i,onClose:()=>n(!1)})]}),(0,b.jsx)(bV,{selectedBlockId:o,device:i}),(0,b.jsx)(F.Dialog,{open:v,onOpenChange:a=>{console.log("[FullScreenLayout] Dialog onOpenChange:",a),a||u()},children:(0,b.jsxs)(F.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsx)(F.DialogTitle,{children:"Add Child Block to Container"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Select a block type to add to the container",w&&` (Parent: ${w.substring(0,8)}...)`]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 py-4",children:bK.map(({type:a,label:c,icon:d,color:e})=>(0,b.jsxs)(g.Button,{variant:"outline",className:"h-auto p-4 flex flex-col items-center justify-center space-y-2 hover:border-blue-500",onClick:()=>{console.log("[FullScreenLayout] Block selected:",a,"parentId:",w),w&&t(w,a)},children:[(0,b.jsx)("div",{className:`p-3 rounded-lg ${e}`,children:(0,b.jsx)(d,{size:24})}),(0,b.jsx)("span",{className:"text-sm font-medium text-center",children:c})]},a))})]})})]})}function dp({onExit:a,initialMode:e="visual"}){let f=(0,d.useRouter)(),[g,h]=(0,c.useState)(e),{handlePageSave:i}=a$(),j=(0,c.useCallback)(()=>{a?a():f.back()},[a,f]),k=(0,c.useCallback)(async()=>{try{await i()}catch(a){aL.error("PAGE_SAVE","Error saving page",{error:a})}},[i]);return(0,b.jsx)(dn,{editorMode:g,onModeChange:h,onExit:j,onSave:k})}function dq({pageId:a,onExit:c,initialMode:d="visual",initialBlocks:e=[]}){return(0,b.jsx)(a2,{pageId:a,children:(0,b.jsx)(dp,{onExit:c,initialMode:d})})}var dr=a.i(376946),ds=a.i(920283),dt=a.i(730705),du=a.i(703540),dv=a.i(451825),dw=a.i(649316),dx=a.i(687649),dy=a.i(510071),dz=a.i(300827),dA=a.i(450345),dB=a.i(836690);function dC({data:a,isLoading:d,onEdit:e,onView:f,onDelete:i,onRefresh:k}){let l=(0,c.useRef)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("all"),[q,r]=(0,c.useState)("updatedAt"),[s,t]=(0,c.useState)("desc"),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(10),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l.current||(l.current=!0,z(null),D(!1))},[]);let F=(0,c.useMemo)(()=>{let b=a;if("all"!==o&&(b=b.filter(a=>a.status===o)),m){let a=m.toLowerCase();b=b.filter(b=>b.title?.toLowerCase().includes(a)||b.slug?.toLowerCase().includes(a))}return b},[a,o,m]),G=(0,c.useMemo)(()=>{let a=[...F];return s&&q&&a.sort((a,b)=>{let c=a[q],d=b[q];return("updatedAt"===q&&(c=c?new Date(c).getTime():0,d=d?new Date(d).getTime():0),"string"==typeof c&&(c=c.toLowerCase()),"string"==typeof d&&(d=d.toLowerCase()),c<d)?"asc"===s?-1:1:c>d?"asc"===s?1:-1:0}),a},[F,q,s]),H=(0,c.useMemo)(()=>{let a=u*w;return G.slice(a,a+w)},[G,u,w]),I=Math.ceil(G.length/w),J=a=>{q===a?"asc"===s?t("desc"):"desc"===s?t(null):t("asc"):(r(a),t("asc")),v(0)},K=a=>q!==a?(0,b.jsx)(bA.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-40"}):"asc"===s?(0,b.jsx)(du.ArrowUp,{className:"ml-2 h-4 w-4"}):"desc"===s?(0,b.jsx)(dv.ArrowDown,{className:"ml-2 h-4 w-4"}):(0,b.jsx)(bA.ArrowUpDown,{className:"ml-2 h-4 w-4 opacity-40"}),L=async()=>{if(y){B(!0);try{await i(y),z(null),k()}catch(a){console.error("Error deleting page:",a)}finally{B(!1)}}};return d?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4 flex-col sm:flex-row",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(Y.Input,{placeholder:"Search title or slug...",value:m,onChange:a=>{n(a.target.value),v(0)},className:"pl-10"})]}),(0,b.jsxs)(aa.Select,{value:o,onValueChange:a=>{p(a),v(0)},children:[(0,b.jsx)(aa.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,b.jsx)(aa.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(aa.SelectContent,{children:[(0,b.jsx)(aa.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.DRAFT,children:"Draft"}),(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.PUBLISHED,children:"Published"}),(0,b.jsx)(aa.SelectItem,{value:aE.PageStatus.ARCHIVED,children:"Archived"})]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(ds.Table,{children:[(0,b.jsx)(ds.TableHeader,{children:(0,b.jsxs)(ds.TableRow,{children:[(0,b.jsx)(ds.TableHead,{children:(0,b.jsxs)(g.Button,{variant:"ghost",onClick:()=>J("title"),className:"h-8 p-0 hover:bg-transparent",children:["Title",K("title")]})}),(0,b.jsx)(ds.TableHead,{children:(0,b.jsxs)(g.Button,{variant:"ghost",onClick:()=>J("slug"),className:"h-8 p-0 hover:bg-transparent",children:["Slug",K("slug")]})}),(0,b.jsx)(ds.TableHead,{children:"Status"}),(0,b.jsx)(ds.TableHead,{children:"Blocks"}),(0,b.jsx)(ds.TableHead,{children:(0,b.jsxs)(g.Button,{variant:"ghost",onClick:()=>J("updatedAt"),className:"h-8 p-0 hover:bg-transparent",children:["Updated",K("updatedAt")]})}),(0,b.jsx)(ds.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(ds.TableBody,{children:H.length>0?H.map(a=>(0,b.jsxs)(ds.TableRow,{children:[(0,b.jsx)(ds.TableCell,{className:"font-medium",children:a.title||"Untitled"}),(0,b.jsxs)(ds.TableCell,{className:"text-sm text-gray-600",children:["/",a.slug||"untitled"]}),(0,b.jsx)(ds.TableCell,{children:(0,b.jsx)(h.Badge,{variant:(a=>{switch(a){case aE.PageStatus.PUBLISHED:return"default";case aE.PageStatus.DRAFT:return"secondary";case aE.PageStatus.ARCHIVED:default:return"outline"}})(a.status),className:(a=>{switch(a){case aE.PageStatus.PUBLISHED:return"bg-green-100 text-green-800";case aE.PageStatus.DRAFT:return"bg-yellow-100 text-yellow-800";case aE.PageStatus.ARCHIVED:default:return"bg-gray-100 text-gray-800"}})(a.status),children:a.status.toLowerCase()})}),(0,b.jsx)(ds.TableCell,{className:"text-sm text-gray-600",children:Array.isArray(a.blocks)?a.blocks.length:0}),(0,b.jsx)(ds.TableCell,{className:"text-sm text-gray-600",children:a.updatedAt?new Date(a.updatedAt).toLocaleDateString():"N/A"}),(0,b.jsx)(ds.TableCell,{className:"text-right",children:(0,b.jsxs)(E.DropdownMenu,{children:[(0,b.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,b.jsx)(dw.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(E.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(E.DropdownMenuItem,{onClick:()=>e(a.id),children:[(0,b.jsx)(dx.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.status===aE.PageStatus.PUBLISHED&&a.slug&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.DropdownMenuSeparator,{}),(0,b.jsxs)(E.DropdownMenuItem,{onClick:()=>f(a.slug),children:[(0,b.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),"View Page"]})]}),(0,b.jsx)(E.DropdownMenuSeparator,{}),(0,b.jsxs)(E.DropdownMenuItem,{onClick:()=>{z(a.id),D(!0)},className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(U.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id)):(0,b.jsx)(ds.TableRow,{children:(0,b.jsx)(ds.TableCell,{colSpan:6,className:"h-24 text-center",children:"No pages found"})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[G.length," page(s) total",m&&" (filtered)"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Rows per page:"}),(0,b.jsxs)(aa.Select,{value:String(w),onValueChange:a=>{x(Number(a)),v(0)},children:[(0,b.jsx)(aa.SelectTrigger,{className:"w-[70px]",children:(0,b.jsx)(aa.SelectValue,{})}),(0,b.jsx)(aa.SelectContent,{children:[5,10,20,50].map(a=>(0,b.jsx)(aa.SelectItem,{value:String(a),children:a},a))})]})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",u+1," of ",I]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>v(0),disabled:0===u,children:(0,b.jsx)(dA.ChevronsLeft,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>v(Math.max(0,u-1)),disabled:0===u,children:(0,b.jsx)(dy.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>v(Math.min(I-1,u+1)),disabled:u>=I-1,children:(0,b.jsx)(dz.ChevronRight,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>v(I-1),disabled:u>=I-1,children:(0,b.jsx)(dB.ChevronsRight,{className:"h-4 w-4"})})]})]})]})]}),null!==y&&C&&(0,b.jsx)(dt.AlertDialog,{open:!0,onOpenChange:a=>{a||(D(!1),z(null))},children:(0,b.jsxs)(dt.AlertDialogContent,{children:[(0,b.jsxs)(dt.AlertDialogHeader,{children:[(0,b.jsx)(dt.AlertDialogTitle,{children:"Delete Page"}),(0,b.jsx)(dt.AlertDialogDescription,{children:"Are you sure you want to delete this page? This action cannot be undone."})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(dt.AlertDialogCancel,{disabled:A,onClick:()=>{D(!1),z(null)},children:"Cancel"}),(0,b.jsx)(dt.AlertDialogAction,{onClick:L,disabled:A,className:"bg-red-600 hover:bg-red-700",children:A?"Deleting...":"Delete"})]})]})})]})}function dD(){let a=(0,d.useSearchParams)(),e=(0,d.useRouter)(),f=a.get("pageId"),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),{pages:l,loading:m,refetch:n,error:o}=(0,aK.usePages)({page:1,limit:100},void 0,{skip:!!f}),{deletePage:p}=(0,aK.usePageOperations)();(0,c.useEffect)(()=>{f&&k(!0)},[f]),(0,c.useEffect)(()=>{!j&&f&&n()},[j,f,n]);let q=async a=>{try{await p(a),n()}catch(a){throw console.error("Error deleting page:",a),a}},r=()=>{k(!1),e.push("/admin/pagebuilder"),n()};return h||o?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,b.jsxs)(ay.Card,{className:"max-w-md w-full p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,b.jsx)(C.AlertCircle,{size:24}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Error Loading Pages"})]}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:h||o?.message||"An unexpected error occurred"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"}),(0,b.jsx)(g.Button,{onClick:()=>i(null),variant:"outline",children:"Dismiss"})]})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pages"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Manage and edit your website pages"})]}),(0,b.jsxs)(g.Button,{onClick:()=>{try{e.push("/admin/pagebuilder"),k(!0)}catch(a){console.error("Error creating page:",a),i("Failed to create new page")}},className:"flex items-center space-x-2",children:[(0,b.jsx)($.Plus,{size:20}),(0,b.jsx)("span",{children:"New Page"})]})]})})})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)(dC,{data:l?.items||[],isLoading:m,onEdit:a=>{try{e.push(`/admin/pagebuilder?pageId=${a}`),k(!0)}catch(a){console.error("Error editing page:",a),i("Failed to edit page")}},onView:a=>{try{window.open(`/${a}`,"_blank")}catch(a){console.error("Error viewing page:",a)}},onDelete:q,onRefresh:n})})]}),(0,b.jsx)(F.Dialog,{open:j,onOpenChange:a=>{k(a),a||r()},children:(0,b.jsxs)(F.DialogContent,{className:"max-w-full w-screen h-screen p-0 m-0 bg-white border-0 rounded-none",style:{maxWidth:"100vw",maxHeight:"100vh",width:"100vw",height:"100vh"},children:[(0,b.jsxs)(dr.VisuallyHidden,{children:[(0,b.jsx)(F.DialogTitle,{children:"Page Builder Editor"}),(0,b.jsx)(F.DialogDescription,{children:"Edit your page content using the visual page builder interface"})]}),(0,b.jsx)("div",{className:"h-full w-full",children:(0,b.jsx)(dq,{pageId:f||void 0,onExit:r,initialMode:"visual"})})]})})]})}function dE(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,b.jsx)(dD,{})})}a.s(["default",()=>dE],941565)}];

//# sourceMappingURL=frontend_src_app_admin_pagebuilder_page_tsx_91c0e790._.js.map
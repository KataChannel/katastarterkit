{"version":3,"sources":["turbopack:///[project]/frontend/src/app/ketoan/sanpham/page.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/graphql/mutations.ts","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/StatsCards.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/SearchToolbar.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/ProductTable.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/utils.ts","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/Pagination.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/NormalizationModal.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/components/UpdateProductsModal.tsx","turbopack:///[project]/frontend/src/app/ketoan/sanpham/hooks/useProductFilters.ts","turbopack:///[project]/frontend/src/app/ketoan/sanpham/hooks/useProductPagination.ts"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { toast } from 'sonner';\nimport { useDynamicQuery } from '@/lib/graphql/dynamic-hooks';\nimport { useMutation } from '@apollo/client';\nimport { UPDATE_PRODUCTS_FROM_DETAILS } from './graphql/mutations';\n\n// Types\nimport { SortField, SortDirection, FilterStatus, UniqueFilter, NormalizationResult } from './types';\n\n// Components\nimport {\n  StatsCards,\n  SearchToolbar,\n  ProductTable,\n  Pagination,\n  NormalizationModal,\n  UpdateProductsModal,\n} from './components';\n\n// Hooks\nimport { useProductFilters, useProductPagination } from './hooks';\n\nexport default function SanPhamPage() {\n  // State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [page, setPage] = useState(1);\n  const [limit] = useState(50);\n  const [sortField, setSortField] = useState<SortField>('createdAt');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  const [filterStatus, setFilterStatus] = useState<FilterStatus>('all');\n  const [uniqueFilter, setUniqueFilter] = useState<UniqueFilter>('none');\n  const [normalizing, setNormalizing] = useState(false);\n  const [showNormalizeModal, setShowNormalizeModal] = useState(false);\n  const [updating, setUpdating] = useState(false);\n  const [showUpdateModal, setShowUpdateModal] = useState(false);\n\n  // GraphQL query\n  const { data: productsData, loading: queryLoading, refetch } = useDynamicQuery('GET_ALL', 'ext_sanphamhoadon', {\n    fetchPolicy: 'network-only',\n  });\n\n  // GraphQL mutation for update products\n  const [updateProductsMutation] = useMutation(UPDATE_PRODUCTS_FROM_DETAILS);\n\n  // Extract products from GraphQL response\n  const rawProducts = productsData?.getext_sanphamhoadons || [];\n\n  // Apply filters and sorting\n  const { filteredProducts, stats } = useProductFilters({\n    products: rawProducts,\n    searchTerm,\n    filterStatus,\n    uniqueFilter,\n    sortField,\n    sortDirection,\n  });\n\n  // Apply pagination\n  const { paginatedProducts } = useProductPagination({\n    products: filteredProducts,\n    page,\n    limit,\n    setPage,\n    dependencies: [searchTerm, filterStatus, uniqueFilter, sortField, sortDirection],\n  });\n\n  // Handlers\n  const handleRefresh = async () => {\n    try {\n      await refetch();\n      toast.success('Đã tải lại dữ liệu');\n    } catch (error) {\n      console.error('Error loading products:', error);\n      toast.error('Lỗi khi tải dữ liệu');\n    }\n  };\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const handleNormalization = async (dryRun: boolean, limitValue: number) => {\n    setNormalizing(true);\n    \n    try {\n      const response = await fetch('/api/ketoan/normalize-products', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ dryRun, limit: limitValue }),\n      });\n\n      const result: NormalizationResult = await response.json();\n\n      if (result.success) {\n        toast.success(result.message);\n        if (!dryRun) {\n          await handleRefresh();\n        }\n        setShowNormalizeModal(false);\n      } else {\n        toast.error(result.message || 'Lỗi khi chuẩn hóa dữ liệu');\n      }\n    } catch (error) {\n      console.error('Normalization error:', error);\n      toast.error('Không thể kết nối với server');\n    } finally {\n      setNormalizing(false);\n    }\n  };\n\n  const handleUpdate = async (dryRun: boolean, limitValue: number) => {\n    setUpdating(true);\n    \n    try {\n      // Use GraphQL mutation instead of REST API\n      const { data } = await updateProductsMutation({\n        variables: {\n          dryRun,\n          limit: limitValue,\n        },\n      });\n\n      const result = data?.updateProductsFromDetails;\n\n      if (result?.success) {\n        toast.success(result.message);\n        \n        // Show stats if available\n        if (result.stats) {\n          const { created, updated, skipped, errors } = result.stats;\n          console.log('Update stats:', { created, updated, skipped, errors });\n        }\n        \n        if (!dryRun) {\n          await handleRefresh();\n        }\n        setShowUpdateModal(false);\n      } else {\n        toast.error(result?.message || 'Lỗi khi cập nhật sản phẩm');\n      }\n    } catch (error: any) {\n      console.error('Update error:', error);\n      toast.error(error.message || 'Không thể kết nối với server');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n          Quản Lý Sản Phẩm\n        </h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Danh sách sản phẩm từ hóa đơn với tính năng chuẩn hóa tên sản phẩm\n        </p>\n      </div>\n\n      {/* Search Toolbar */}\n      <SearchToolbar\n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        filterStatus={filterStatus}\n        onFilterChange={setFilterStatus}\n        uniqueFilter={uniqueFilter}\n        onUniqueFilterChange={setUniqueFilter}\n        stats={stats}\n        filteredCount={filteredProducts.length}\n        loading={queryLoading}\n        onRefresh={handleRefresh}\n        onNormalize={() => setShowNormalizeModal(true)}\n        onUpdate={() => setShowUpdateModal(true)}\n      />\n\n      {/* Stats Cards */}\n      <StatsCards stats={stats} />\n\n      {/* Products Table */}\n      <ProductTable\n        products={paginatedProducts}\n        loading={queryLoading}\n        sortField={sortField}\n        sortDirection={sortDirection}\n        onSort={handleSort}\n        emptyMessage={\n          searchTerm || filterStatus !== 'all'\n            ? 'Không tìm thấy sản phẩm phù hợp'\n            : 'Không có dữ liệu'\n        }\n      />\n\n      {/* Pagination */}\n      <Pagination\n        currentPage={page}\n        totalItems={filteredProducts.length}\n        itemsPerPage={limit}\n        onPageChange={setPage}\n      />\n\n      {/* Normalization Modal */}\n      <NormalizationModal\n        isOpen={showNormalizeModal}\n        onClose={() => setShowNormalizeModal(false)}\n        onNormalize={handleNormalization}\n        loading={normalizing}\n      />\n\n      {/* Update Products Modal */}\n      <UpdateProductsModal\n        isOpen={showUpdateModal}\n        onClose={() => setShowUpdateModal(false)}\n        onUpdate={handleUpdate}\n        loading={updating}\n      />\n    </div>\n  );\n}\n","import { gql } from '@apollo/client';\n\nexport const UPDATE_PRODUCTS_FROM_DETAILS = gql`\n  mutation UpdateProductsFromDetails($dryRun: Boolean!, $limit: Int) {\n    updateProductsFromDetails(dryRun: $dryRun, limit: $limit) {\n      success\n      message\n      stats {\n        totalDetails\n        processed\n        created\n        updated\n        skipped\n        errors\n      }\n      output\n    }\n  }\n`;\n\nexport const NORMALIZE_PRODUCTS = gql`\n  mutation NormalizeProducts($productIds: [String!], $threshold: Float) {\n    normalizeProducts(productIds: $productIds, threshold: $threshold) {\n      updated\n      skipped\n      errors\n    }\n  }\n`;\n\nexport const FIND_SIMILAR_PRODUCTS = gql`\n  query FindSimilarProducts($searchText: String!, $threshold: Float) {\n    findSimilarProducts(searchText: $searchText, threshold: $threshold) {\n      id\n      ten\n      ten2\n      ma\n      similarityScore\n    }\n  }\n`;\n\nexport const GET_PRODUCT_GROUPS = gql`\n  query GetProductGroups($minGroupSize: Float) {\n    getProductGroups(minGroupSize: $minGroupSize) {\n      ten2\n      productCount\n      products {\n        id\n        ten\n        ma\n        dvt\n        dgia\n      }\n    }\n  }\n`;\n","import React from 'react';\nimport { Database, CheckCircle2, XCircle } from 'lucide-react';\nimport { ProductStats } from '../types';\n\ninterface StatsCardsProps {\n  stats: ProductStats;\n}\n\nexport const StatsCards: React.FC<StatsCardsProps> = ({ stats }) => {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Tổng sản phẩm</p>\n            <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.total}</p>\n          </div>\n          <Database className=\"h-8 w-8 text-blue-500\" />\n        </div>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Đã chuẩn hóa</p>\n            <p className=\"text-2xl font-bold text-green-600\">{stats.normalized}</p>\n          </div>\n          <CheckCircle2 className=\"h-8 w-8 text-green-500\" />\n        </div>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Chưa chuẩn hóa</p>\n            <p className=\"text-2xl font-bold text-orange-600\">{stats.pending}</p>\n          </div>\n          <XCircle className=\"h-8 w-8 text-orange-500\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Search, RefreshCw, Database, PackagePlus } from 'lucide-react';\nimport { FilterStatus, UniqueFilter, ProductStats } from '../types';\n\ninterface SearchToolbarProps {\n  searchTerm: string;\n  onSearchChange: (value: string) => void;\n  filterStatus: FilterStatus;\n  onFilterChange: (status: FilterStatus) => void;\n  uniqueFilter: UniqueFilter;\n  onUniqueFilterChange: (filter: UniqueFilter) => void;\n  stats: ProductStats;\n  filteredCount: number; // Count after applying all filters including unique\n  loading: boolean;\n  onRefresh: () => void;\n  onNormalize: () => void;\n  onUpdate: () => void;\n}\n\nexport const SearchToolbar: React.FC<SearchToolbarProps> = ({\n  searchTerm,\n  onSearchChange,\n  filterStatus,\n  onFilterChange,\n  uniqueFilter,\n  onUniqueFilterChange,\n  stats,\n  filteredCount,\n  loading,\n  onRefresh,\n  onNormalize,\n  onUpdate,\n}) => {\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6\">\n      <div className=\"flex flex-col gap-4\">\n        {/* Search and Actions */}\n        <div className=\"flex flex-col md:flex-row gap-4 items-center justify-between\">\n          {/* Search */}\n          <div className=\"relative flex-1 max-w-md\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Tìm kiếm theo tên, mã, DVT...\"\n              value={searchTerm}\n              onChange={(e) => onSearchChange(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-2\">\n            <button\n              onClick={onRefresh}\n              disabled={loading}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50\"\n            >\n              <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n              Làm mới\n            </button>\n\n            <button\n              onClick={onUpdate}\n              className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\"\n            >\n              <PackagePlus className=\"h-4 w-4\" />\n              Cập nhật SP\n            </button>\n\n            <button\n              onClick={onNormalize}\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n            >\n              <Database className=\"h-4 w-4\" />\n              Chuẩn hóa\n            </button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex gap-2 items-center\">\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">Trạng thái:</span>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => onFilterChange('all')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                filterStatus === 'all'\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Tất cả ({stats.total})\n            </button>\n            <button\n              onClick={() => onFilterChange('normalized')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                filterStatus === 'normalized'\n                  ? 'bg-green-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Đã chuẩn hóa ({stats.normalized})\n            </button>\n            <button\n              onClick={() => onFilterChange('pending')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                filterStatus === 'pending'\n                  ? 'bg-orange-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Chưa xử lý ({stats.pending})\n            </button>\n          </div>\n        </div>\n\n        {/* Unique Filters */}\n        <div className=\"flex gap-2 items-center\">\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">Hiển thị unique:</span>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => onUniqueFilterChange('none')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                uniqueFilter === 'none'\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Tất cả {uniqueFilter === 'none' && `(${filteredCount})`}\n            </button>\n            <button\n              onClick={() => onUniqueFilterChange('ma')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                uniqueFilter === 'ma'\n                  ? 'bg-purple-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Theo mã sản phẩm {uniqueFilter === 'ma' && `(${filteredCount})`}\n            </button>\n            <button\n              onClick={() => onUniqueFilterChange('ten2')}\n              className={`px-3 py-1 text-sm rounded-lg transition-colors ${\n                uniqueFilter === 'ten2'\n                  ? 'bg-indigo-600 text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\n              }`}\n            >\n              Theo tên chuẩn hóa {uniqueFilter === 'ten2' && `(${filteredCount})`}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { CheckCircle2, XCircle, Loader2, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\nimport { Product, SortField, SortDirection } from '../types';\nimport { formatPrice } from '../utils';\n\ninterface ProductTableProps {\n  products: Product[];\n  loading: boolean;\n  sortField: SortField;\n  sortDirection: SortDirection;\n  onSort: (field: SortField) => void;\n  emptyMessage?: string;\n}\n\nexport const ProductTable: React.FC<ProductTableProps> = ({\n  products,\n  loading,\n  sortField,\n  sortDirection,\n  onSort,\n  emptyMessage = 'Không có dữ liệu',\n}) => {\n  const renderSortIcon = (field: SortField) => {\n    if (sortField !== field) {\n      return <ArrowUpDown className=\"h-4 w-4 text-gray-400\" />;\n    }\n    return sortDirection === 'asc' \n      ? <ArrowUp className=\"h-4 w-4 text-blue-500\" />\n      : <ArrowDown className=\"h-4 w-4 text-blue-500\" />;\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th \n                className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600\"\n                onClick={() => onSort('ma')}\n              >\n                <div className=\"flex items-center gap-2\">\n                  Mã SP\n                  {renderSortIcon('ma')}\n                </div>\n              </th>\n              <th \n                className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600\"\n                onClick={() => onSort('ten')}\n              >\n                <div className=\"flex items-center gap-2\">\n                  Tên sản phẩm\n                  {renderSortIcon('ten')}\n                </div>\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Tên chuẩn hóa\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                ĐVT\n              </th>\n              <th \n                className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600\"\n                onClick={() => onSort('dgia')}\n              >\n                <div className=\"flex items-center justify-end gap-2\">\n                  Đơn giá\n                  {renderSortIcon('dgia')}\n                </div>\n              </th>\n              <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Trạng thái\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n            {loading ? (\n              <tr>\n                <td colSpan={6} className=\"px-4 py-8 text-center\">\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"h-5 w-5 animate-spin text-blue-500\" />\n                    <span className=\"text-gray-500\">Đang tải...</span>\n                  </div>\n                </td>\n              </tr>\n            ) : products.length === 0 ? (\n              <tr>\n                <td colSpan={6} className=\"px-4 py-8 text-center text-gray-500\">\n                  {emptyMessage}\n                </td>\n              </tr>\n            ) : (\n              products.map((product) => (\n                <tr key={product.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                  <td className=\"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white\">\n                    {product.ma || '-'}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\">\n                    {product.ten || '-'}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm\">\n                    {product.ten2 ? (\n                      <span className=\"text-green-700 dark:text-green-400 font-medium\">\n                        {product.ten2}\n                      </span>\n                    ) : (\n                      <span className=\"text-gray-400 italic\">Chưa chuẩn hóa</span>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\">\n                    {product.dvt || '-'}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm text-right text-gray-900 dark:text-white font-medium\">\n                    {formatPrice(product.dgia)}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {product.ten2 ? (\n                      <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs rounded-full\">\n                        <CheckCircle2 className=\"h-3 w-3\" />\n                        Đã chuẩn hóa\n                      </span>\n                    ) : (\n                      <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-xs rounded-full\">\n                        <XCircle className=\"h-3 w-3\" />\n                        Chưa xử lý\n                      </span>\n                    )}\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","export const formatPrice = (price: number | null): string => {\n  if (price === null) return '-';\n  return new Intl.NumberFormat('vi-VN', {\n    style: 'currency',\n    currency: 'VND',\n  }).format(Number(price));\n};\n\nexport const formatDate = (date: string): string => {\n  return new Date(date).toLocaleString('vi-VN');\n};\n","import React from 'react';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalItems: number;\n  itemsPerPage: number;\n  onPageChange: (page: number) => void;\n}\n\nexport const Pagination: React.FC<PaginationProps> = ({\n  currentPage,\n  totalItems,\n  itemsPerPage,\n  onPageChange,\n}) => {\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startItem = ((currentPage - 1) * itemsPerPage) + 1;\n  const endItem = Math.min(currentPage * itemsPerPage, totalItems);\n\n  if (totalItems <= itemsPerPage) {\n    return null;\n  }\n\n  return (\n    <div className=\"px-4 py-3 border-t border-gray-200 dark:border-gray-700\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n          Hiển thị {startItem} - {endItem} trong tổng số {totalItems} sản phẩm\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => onPageChange(Math.max(1, currentPage - 1))}\n            disabled={currentPage === 1}\n            className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Trang trước\n          </button>\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Trang {currentPage} / {totalPages}\n          </span>\n          <button\n            onClick={() => onPageChange(currentPage + 1)}\n            disabled={currentPage >= totalPages}\n            className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Trang sau\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Play, Loader2 } from 'lucide-react';\n\ninterface NormalizationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onNormalize: (dryRun: boolean, limit: number) => Promise<void>;\n  loading: boolean;\n}\n\nexport const NormalizationModal: React.FC<NormalizationModalProps> = ({\n  isOpen,\n  onClose,\n  onNormalize,\n  loading,\n}) => {\n  const [mode, setMode] = useState<'preview' | 'update'>('preview');\n  const [limit, setLimit] = useState(10);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async () => {\n    await onNormalize(mode === 'preview', limit);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n          Chuẩn hóa tên sản phẩm\n        </h3>\n\n        <div className=\"space-y-4\">\n          {/* Mode Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Chế độ\n            </label>\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"radio\"\n                  checked={mode === 'preview'}\n                  onChange={() => setMode('preview')}\n                  className=\"text-blue-600\"\n                />\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                  Xem trước (Dry run)\n                </span>\n              </label>\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"radio\"\n                  checked={mode === 'update'}\n                  onChange={() => setMode('update')}\n                  className=\"text-blue-600\"\n                />\n                <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                  Cập nhật thực tế\n                </span>\n              </label>\n            </div>\n          </div>\n\n          {/* Limit */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Số lượng sản phẩm\n            </label>\n            <select\n              value={limit}\n              onChange={(e) => setLimit(Number(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\n            >\n              <option value={10}>10 sản phẩm</option>\n              <option value={100}>100 sản phẩm</option>\n              <option value={1000}>1000 sản phẩm</option>\n              <option value={0}>Tất cả</option>\n            </select>\n          </div>\n\n          {/* Info */}\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n            <p className=\"text-sm text-blue-800 dark:text-blue-300\">\n              <strong>Fuzzy Matching với pg_trgm:</strong> Hệ thống sẽ tự động nhóm các sản phẩm có tên tương tự nhau bằng thuật toán fuzzy matching.\n            </p>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-2 mt-6\">\n          <button\n            onClick={onClose}\n            disabled={loading}\n            className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700\"\n          >\n            Hủy\n          </button>\n          <button\n            onClick={handleSubmit}\n            disabled={loading}\n            className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                Đang xử lý...\n              </>\n            ) : (\n              <>\n                <Play className=\"h-4 w-4\" />\n                {mode === 'preview' ? 'Xem trước' : 'Chạy ngay'}\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { X, PackagePlus, AlertTriangle } from 'lucide-react';\n\ninterface UpdateProductsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onUpdate: (dryRun: boolean, limit: number) => Promise<void>;\n  loading: boolean;\n}\n\nexport const UpdateProductsModal: React.FC<UpdateProductsModalProps> = ({\n  isOpen,\n  onClose,\n  onUpdate,\n  loading,\n}) => {\n  const [mode, setMode] = useState<'preview' | 'update'>('preview');\n  const [limit, setLimit] = useState(100);\n\n  const handleUpdate = async () => {\n    const dryRun = mode === 'preview';\n    await onUpdate(dryRun, limit);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center gap-3\">\n            <PackagePlus className=\"h-6 w-6 text-green-600\" />\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n              Cập Nhật Sản Phẩm\n            </h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\"\n          >\n            <X className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-6\">\n          {/* Description */}\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n            <h3 className=\"font-medium text-blue-900 dark:text-blue-200 mb-2\">\n              Chức năng\n            </h3>\n            <p className=\"text-sm text-blue-800 dark:text-blue-300\">\n              Tự động đồng bộ sản phẩm từ <strong>ext_detailhoadon</strong> sang{' '}\n              <strong>ext_sanphamhoadon</strong>.\n            </p>\n            <ul className=\"mt-2 text-sm text-blue-800 dark:text-blue-300 list-disc list-inside space-y-1\">\n              <li>Tạo sản phẩm mới nếu chưa tồn tại</li>\n              <li>Cập nhật thông tin nếu đã có</li>\n              <li>Tự động sinh mã sản phẩm từ tên</li>\n              <li>Tự động chuẩn hóa tên sản phẩm (ten2) bằng fuzzy matching</li>\n            </ul>\n          </div>\n\n          {/* Mode Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Chế độ thực thi\n            </label>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <button\n                onClick={() => setMode('preview')}\n                className={`p-4 border-2 rounded-lg transition-all ${\n                  mode === 'preview'\n                    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                    : 'border-gray-200 dark:border-gray-700 hover:border-blue-300'\n                }`}\n              >\n                <div className=\"text-left\">\n                  <div className=\"font-medium text-gray-900 dark:text-white\">\n                    Xem trước\n                  </div>\n                  <div className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                    Chỉ hiển thị thay đổi, không lưu vào database\n                  </div>\n                </div>\n              </button>\n\n              <button\n                onClick={() => setMode('update')}\n                className={`p-4 border-2 rounded-lg transition-all ${\n                  mode === 'update'\n                    ? 'border-green-500 bg-green-50 dark:bg-green-900/20'\n                    : 'border-gray-200 dark:border-gray-700 hover:border-green-300'\n                }`}\n              >\n                <div className=\"text-left\">\n                  <div className=\"font-medium text-gray-900 dark:text-white\">\n                    Cập nhật\n                  </div>\n                  <div className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                    Thực hiện và lưu thay đổi vào database\n                  </div>\n                </div>\n              </button>\n            </div>\n          </div>\n\n          {/* Limit Setting */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Giới hạn số lượng (để test)\n            </label>\n            <input\n              type=\"number\"\n              value={limit}\n              onChange={(e) => setLimit(Math.max(1, parseInt(e.target.value) || 1))}\n              min=\"1\"\n              max=\"10000\"\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Bỏ trống hoặc nhập số lớn để xử lý tất cả\n            </p>\n          </div>\n\n          {/* Warning for Update Mode */}\n          {mode === 'update' && (\n            <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n              <div className=\"flex gap-3\">\n                <AlertTriangle className=\"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <h4 className=\"font-medium text-yellow-900 dark:text-yellow-200\">\n                    Cảnh báo\n                  </h4>\n                  <p className=\"text-sm text-yellow-800 dark:text-yellow-300 mt-1\">\n                    Chế độ cập nhật sẽ thay đổi dữ liệu trong database. Hãy đảm bảo bạn đã\n                    kiểm tra ở chế độ xem trước trước khi thực hiện.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={onClose}\n            disabled={loading}\n            className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50\"\n          >\n            Hủy\n          </button>\n          <button\n            onClick={handleUpdate}\n            disabled={loading}\n            className={`px-6 py-2 rounded-lg text-white disabled:opacity-50 flex items-center gap-2 ${\n              mode === 'preview'\n                ? 'bg-blue-600 hover:bg-blue-700'\n                : 'bg-green-600 hover:bg-green-700'\n            }`}\n          >\n            {loading ? (\n              <>\n                <div className=\"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full\" />\n                Đang xử lý...\n              </>\n            ) : (\n              <>\n                <PackagePlus className=\"h-4 w-4\" />\n                {mode === 'preview' ? 'Xem trước' : 'Cập nhật ngay'}\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { useMemo } from 'react';\nimport { Product, SortField, SortDirection, FilterStatus, UniqueFilter, ProductStats } from '../types';\n\ninterface UseProductFiltersProps {\n  products: Product[];\n  searchTerm: string;\n  filterStatus: FilterStatus;\n  uniqueFilter: UniqueFilter;\n  sortField: SortField;\n  sortDirection: SortDirection;\n}\n\ninterface UseProductFiltersResult {\n  filteredProducts: Product[];\n  stats: ProductStats;\n}\n\nexport const useProductFilters = ({\n  products,\n  searchTerm,\n  filterStatus,\n  uniqueFilter,\n  sortField,\n  sortDirection,\n}: UseProductFiltersProps): UseProductFiltersResult => {\n  return useMemo(() => {\n    if (!Array.isArray(products)) {\n      console.warn('Products data is not an array:', products);\n      return { filteredProducts: [], stats: { total: 0, normalized: 0, pending: 0 } };\n    }\n\n    let filtered = [...products];\n\n    // Apply search filter\n    if (searchTerm) {\n      const term = searchTerm.toLowerCase().trim();\n      filtered = filtered.filter((p: Product) => \n        p.ten?.toLowerCase().includes(term) ||\n        p.ten2?.toLowerCase().includes(term) ||\n        p.ma?.toLowerCase().includes(term) ||\n        p.dvt?.toLowerCase().includes(term)\n      );\n    }\n\n    // Apply status filter\n    if (filterStatus === 'normalized') {\n      filtered = filtered.filter((p: Product) => p.ten2);\n    } else if (filterStatus === 'pending') {\n      filtered = filtered.filter((p: Product) => !p.ten2);\n    }\n\n    // Apply unique filter\n    if (uniqueFilter === 'ma') {\n      // Keep only first occurrence of each 'ma' (product code)\n      const seen = new Set<string>();\n      filtered = filtered.filter((p: Product) => {\n        if (!p.ma) return true; // Keep products without ma\n        if (seen.has(p.ma)) return false;\n        seen.add(p.ma);\n        return true;\n      });\n    } else if (uniqueFilter === 'ten2') {\n      // Keep only first occurrence of each 'ten2' (normalized name)\n      const seen = new Set<string>();\n      filtered = filtered.filter((p: Product) => {\n        if (!p.ten2) return true; // Keep products without ten2\n        if (seen.has(p.ten2)) return false;\n        seen.add(p.ten2);\n        return true;\n      });\n    }\n\n    // Apply sorting\n    filtered.sort((a: Product, b: Product) => {\n      let aVal: any = a[sortField];\n      let bVal: any = b[sortField];\n\n      // Handle null values\n      if (aVal === null) return 1;\n      if (bVal === null) return -1;\n\n      // Convert to comparable values\n      if (sortField === 'dgia') {\n        aVal = Number(aVal) || 0;\n        bVal = Number(bVal) || 0;\n      } else if (sortField === 'createdAt') {\n        aVal = new Date(aVal).getTime();\n        bVal = new Date(bVal).getTime();\n      } else {\n        aVal = String(aVal).toLowerCase();\n        bVal = String(bVal).toLowerCase();\n      }\n\n      const comparison = aVal < bVal ? -1 : aVal > bVal ? 1 : 0;\n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n\n    // Calculate stats\n    const statsData: ProductStats = {\n      total: products.length,\n      normalized: products.filter((p: Product) => p.ten2).length,\n      pending: products.filter((p: Product) => !p.ten2).length,\n    };\n\n    return { filteredProducts: filtered, stats: statsData };\n  }, [products, searchTerm, filterStatus, uniqueFilter, sortField, sortDirection]);\n};\n","import { useMemo, useEffect } from 'react';\nimport { Product } from '../types';\n\ninterface UseProductPaginationProps {\n  products: Product[];\n  page: number;\n  limit: number;\n  setPage: (page: number) => void;\n  dependencies?: any[];\n}\n\ninterface UseProductPaginationResult {\n  paginatedProducts: Product[];\n  totalPages: number;\n}\n\nexport const useProductPagination = ({\n  products,\n  page,\n  limit,\n  setPage,\n  dependencies = [],\n}: UseProductPaginationProps): UseProductPaginationResult => {\n  // Reset page when dependencies change (e.g., filters, search)\n  useEffect(() => {\n    setPage(1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n\n  const paginatedProducts = useMemo(() => {\n    const start = (page - 1) * limit;\n    const end = start + limit;\n    return products.slice(start, end);\n  }, [products, page, limit]);\n\n  const totalPages = Math.ceil(products.length / limit);\n\n  return { paginatedProducts, totalPages };\n};\n"],"names":[],"mappings":"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"}
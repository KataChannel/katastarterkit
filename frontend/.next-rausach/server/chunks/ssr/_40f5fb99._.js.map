{"version":3,"sources":["turbopack:///[project]/frontend/src/lib/graphql/shared-fragments.ts","turbopack:///[project]/frontend/src/graphql/product.queries.ts"],"sourcesContent":["import { gql } from '@apollo/client';\n\n/**\n * Centralized GraphQL fragments to avoid duplication warnings\n * graphql-tag enforces unique fragment names across the application\n */\n\n// ============================================================================\n// Category Fragments\n// ============================================================================\n\nexport const CATEGORY_BASIC_FRAGMENT = gql`\n  fragment CategoryBasicFields on CategoryType {\n    id\n    name\n    slug\n    description\n    image\n    displayOrder\n    isActive\n    createdAt\n  }\n`;\n\nexport const CATEGORY_WITH_COUNT_FRAGMENT = gql`\n  ${CATEGORY_BASIC_FRAGMENT}\n  fragment CategoryWithCountFields on CategoryType {\n    ...CategoryBasicFields\n    productCount\n  }\n`;\n\nexport const CATEGORY_TREE_FRAGMENT = gql`\n  ${CATEGORY_WITH_COUNT_FRAGMENT}\n  fragment CategoryTreeFields on CategoryType {\n    ...CategoryWithCountFields\n    parent {\n      id\n      name\n      slug\n    }\n    children {\n      ...CategoryWithCountFields\n    }\n  }\n`;\n\n// ============================================================================\n// Product Fragments\n// ============================================================================\n\nexport const PRODUCT_IMAGE_FRAGMENT = gql`\n  fragment ProductImageFields on ProductImageType {\n    id\n    url\n    alt\n    isPrimary\n    order\n    createdAt\n  }\n`;\n\nexport const PRODUCT_VARIANT_FRAGMENT = gql`\n  fragment ProductVariantFields on ProductVariantType {\n    id\n    name\n    sku\n    price\n    stock\n    order\n    isActive\n    attributes\n    createdAt\n  }\n`;\n\nexport const PRODUCT_BASIC_FRAGMENT = gql`\n  fragment ProductBasicFields on ProductType {\n    id\n    name\n    slug\n    description\n    shortDesc\n    price\n    compareAtPrice\n    status\n    isActive\n    sku\n    createdAt\n  }\n`;\n\n// ============================================================================\n// User Fragments\n// ============================================================================\n\nexport const USER_FRAGMENT = gql`\n  fragment UserFragment on User {\n    id\n    email\n    username\n    firstName\n    lastName\n    phone\n    avatar\n    roleType\n    isActive\n    isVerified\n    isTwoFactorEnabled\n    failedLoginAttempts\n    lockedUntil\n    lastLoginAt\n    createdAt\n    updatedAt\n  }\n`;\n\n// ============================================================================\n// Common Model Fragments (used in dynamic queries)\n// ============================================================================\n\nexport const POST_FRAGMENT = gql`\n  fragment PostFragment on Post {\n    id\n    title\n    slug\n    content\n    excerpt\n    featured_image\n    author {\n      id\n      username\n    }\n    category {\n      id\n      name\n    }\n    published_at\n    created_at\n  }\n`;\n\nexport const COMMENT_FRAGMENT = gql`\n  fragment CommentFragment on Comment {\n    id\n    content\n    author {\n      id\n      username\n    }\n    post {\n      id\n      title\n    }\n    created_at\n  }\n`;\n","import { gql } from '@apollo/client';\nimport {\n  CATEGORY_BASIC_FRAGMENT,\n  PRODUCT_IMAGE_FRAGMENT as SHARED_PRODUCT_IMAGE_FRAGMENT,\n  PRODUCT_VARIANT_FRAGMENT as SHARED_PRODUCT_VARIANT_FRAGMENT,\n} from '@/lib/graphql/shared-fragments';\n\n// ============================================================================\n// FRAGMENTS\n// ============================================================================\n\n// Re-export shared fragments for backward compatibility\nexport { CATEGORY_BASIC_FRAGMENT };\n\nexport const PRODUCT_IMAGE_FRAGMENT = SHARED_PRODUCT_IMAGE_FRAGMENT;\n\nexport const PRODUCT_VARIANT_FRAGMENT = SHARED_PRODUCT_VARIANT_FRAGMENT;\n\nexport const PRODUCT_BASIC_FRAGMENT = gql`\n  fragment ProductBasicFields on ProductType {\n    id\n    name\n    slug\n    description\n    shortDesc\n    sku\n    barcode\n    price\n    originalPrice\n    costPrice\n    unit\n    stock\n    minStock\n    status\n    thumbnail\n    origin\n    createdAt\n    updatedAt\n  }\n`;\n\nexport const PRODUCT_FULL_FRAGMENT = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${PRODUCT_IMAGE_FRAGMENT}\n  ${PRODUCT_VARIANT_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  fragment ProductFullFields on ProductType {\n    ...ProductBasicFields\n    category {\n      ...CategoryBasicFields\n    }\n    images {\n      ...ProductImageFields\n    }\n    variants {\n      ...ProductVariantFields\n    }\n    isFeatured\n    isNewArrival\n    isBestSeller\n    isOnSale\n    weight\n    attributes\n    metaTitle\n    metaDescription\n    metaKeywords\n  }\n`;\n\n// ============================================================================\n// QUERIES\n// ============================================================================\n\nexport const GET_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetProducts($input: GetProductsInput) {\n    products(input: $input) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  query GetProduct($id: ID!) {\n    product(id: $id) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const GET_PRODUCT_BY_SLUG = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  query GetProductBySlug($slug: String!) {\n    productBySlug(slug: $slug) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const GET_PRODUCTS_BY_CATEGORY = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  query GetProductsByCategory($categoryId: ID!, $input: GetProductsInput) {\n    productsByCategory(categoryId: $categoryId, input: $input) {\n      items {\n        ...ProductBasicFields\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_FEATURED_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetFeaturedProducts($limit: Int) {\n    products(input: { \n      filters: { isFeatured: true }\n      limit: $limit\n      sortBy: \"createdAt\"\n      sortOrder: DESC\n    }) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        discountPercentage\n      }\n      total\n    }\n  }\n`;\n\nexport const SEARCH_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query SearchProducts($search: String!, $limit: Int, $page: Int) {\n    products(input: { \n      filters: { search: $search }\n      limit: $limit\n      page: $page\n    }) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        discountPercentage\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_CHEAP_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetCheapProducts($input: GetProductsInput) {\n    products(input: $input) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\n// ============================================================================\n// MUTATIONS\n// ============================================================================\n\nexport const CREATE_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  mutation CreateProduct($input: CreateProductInput!) {\n    createProduct(input: $input) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const UPDATE_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  mutation UpdateProduct($input: UpdateProductInput!) {\n    updateProduct(input: $input) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT = gql`\n  mutation DeleteProduct($id: ID!) {\n    deleteProduct(id: $id)\n  }\n`;\n\nexport const UPDATE_PRODUCT_STOCK = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  mutation UpdateProductStock($id: ID!, $quantity: Float!) {\n    updateProductStock(id: $id, quantity: $quantity) {\n      ...ProductBasicFields\n    }\n  }\n`;\n\nexport const ADD_PRODUCT_IMAGE = gql`\n  ${PRODUCT_IMAGE_FRAGMENT}\n  mutation AddProductImage($input: CreateProductImageInput!) {\n    addProductImage(input: $input) {\n      ...ProductImageFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT_IMAGE = gql`\n  mutation DeleteProductImage($id: ID!) {\n    deleteProductImage(id: $id)\n  }\n`;\n\nexport const ADD_PRODUCT_VARIANT = gql`\n  ${PRODUCT_VARIANT_FRAGMENT}\n  mutation AddProductVariant($input: CreateProductVariantInput!) {\n    addProductVariant(input: $input) {\n      ...ProductVariantFields\n    }\n  }\n`;\n\nexport const UPDATE_PRODUCT_VARIANT = gql`\n  ${PRODUCT_VARIANT_FRAGMENT}\n  mutation UpdateProductVariant($input: UpdateProductVariantInput!) {\n    updateProductVariant(input: $input) {\n      ...ProductVariantFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT_VARIANT = gql`\n  mutation DeleteProductVariant($id: ID!) {\n    deleteProductVariant(id: $id)\n  }\n`;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface ProductImage {\n  id: string;\n  url: string;\n  alt?: string;\n  isPrimary: boolean;\n  order: number;\n  createdAt: string;\n}\n\nexport interface ProductVariant {\n  id: string;\n  name: string;\n  sku: string;\n  price: number;\n  stock: number;\n  order: number;\n  isActive: boolean;\n  attributes?: any;\n  createdAt: string;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  image?: string;\n  displayOrder: number;\n  isActive: boolean;\n}\n\nexport interface Product {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit: string;\n  stock: number;\n  minStock: number;\n  status: string;\n  thumbnail?: string;\n  origin?: string;\n  category?: Category;\n  images?: ProductImage[];\n  variants?: ProductVariant[];\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n  discountPercentage?: number; // Added for computed field\n  profitMargin?: number; // Added for computed field\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface PaginatedProducts {\n  items: Product[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n}\n\nexport interface ProductFilters {\n  search?: string;\n  categoryId?: string;\n  minPrice?: number;\n  maxPrice?: number;\n  status?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  unit?: string;\n  origin?: string;\n  inStock?: boolean;\n}\n\nexport interface GetProductsInput {\n  filters?: ProductFilters;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface CreateProductInput {\n  name: string;\n  categoryId: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit: string;\n  stock: number;\n  minStock?: number;\n  status?: string;\n  thumbnail?: string;\n  origin?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n}\n\nexport interface UpdateProductInput {\n  id: string;\n  name?: string;\n  categoryId?: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price?: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit?: string;\n  stock?: number;\n  minStock?: number;\n  status?: string;\n  thumbnail?: string;\n  origin?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n}\n\nexport interface CreateProductImageInput {\n  productId: string;\n  url: string;\n  alt?: string;\n  title?: string;\n  isPrimary?: boolean;\n  order?: number;\n}\n\nexport interface CreateProductVariantInput {\n  productId: string;\n  name: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  stock?: number;\n  attributes?: Record<string, any>;\n  isActive?: boolean;\n  order?: number;\n}\n\nexport interface UpdateProductVariantInput {\n  id: string;\n  name?: string;\n  sku?: string;\n  barcode?: string;\n  price?: number;\n  stock?: number;\n  attributes?: Record<string, any>;\n  isActive?: boolean;\n  order?: number;\n}\n"],"names":[],"mappings":"8LAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QAWO,IAAM,EAA0B,EAAA,GAAG,CAAC;;;;;;;;;;;AAW3C,CAAC,CAEY,EAA+B,EAAA,GAAG,CAAC;EAC9C,EAAE,EAAwB;;;;;AAK5B,CAAC,CAEY,EAAyB,EAAA,GAAG,CAAC;EACxC,EAAE,EAA6B;;;;;;;;;;;;AAYjC,CAAC,CAMY,EAAyB,EAAA,GAAG,CAAC;;;;;;;;;AAS1C,CAAC,CAEY,EAA2B,EAAA,GAAG,CAAC;;;;;;;;;;;;AAY5C,CAAC,CAEqC,EAAA,GAAG,CAAC;;;;;;;;;;;;;;AAc1C,CAAC,CAMM,IAAM,EAAgB,EAAA,GAAG,CAAC;;;;;;;;;;;;;;;;;;;AAmBjC,CAAC,CAMY,EAAgB,EAAA,GAAG,CAAC;;;;;;;;;;;;;;;;;;;AAmBjC,CAAC,CAEY,EAAmB,EAAA,GAAG,CAAC;;;;;;;;;;;;;;AAcpC,CAAC,0PC5JD,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAaO,IAAM,EAAyB,EAAA,sBAA6B,CAEtD,EAA2B,EAAA,wBAA+B,CAE1D,EAAyB,EAAA,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;AAqB1C,CAAC,CAEY,EAAwB,EAAA,GAAG,CAAC;EACvC,EAAE,EAAuB;EACzB,EAAE,EAAuB;EACzB,EAAE,EAAyB;EAC3B,EAAE,EAAA,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;;AAsB5B,CAAC,CAMY,EAAe,EAAA,GAAG,CAAC;EAC9B,EAAE,EAAuB;EACzB,EAAE,EAAA,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;AAmB5B,CAAC,CAEY,EAAc,EAAA,GAAG,CAAC;EAC7B,EAAE,EAAsB;;;;;;AAM1B,CAAC,CAEY,EAAsB,EAAA,GAAG,CAAC;EACrC,EAAE,EAAsB;;;;;;AAM1B,CAAC,CAEY,EAA2B,EAAA,GAAG,CAAC;EAC1C,EAAE,EAAuB;;;;;;;;;;;;;;;;AAgB3B,CAAC,CAEY,EAAwB,EAAA,GAAG,CAAC;EACvC,EAAE,EAAuB;EACzB,EAAE,EAAA,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;AAkB5B,CAAC,CAEY,EAAkB,EAAA,GAAG,CAAC;EACjC,EAAE,EAAuB;EACzB,EAAE,EAAA,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;AAoB5B,CAAC,CAEiC,EAAA,GAAG,CAAC;EACpC,EAAE,EAAuB;EACzB,EAAE,EAAA,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;AAmB5B,CAAC,CAMM,IAAM,EAAiB,EAAA,GAAG,CAAC;EAChC,EAAE,EAAsB;;;;;;AAM1B,CAAC,CAEY,EAAiB,EAAA,GAAG,CAAC;EAChC,EAAE,EAAsB;;;;;;AAM1B,CAAC,CAEY,EAAiB,EAAA,GAAG,CAAC;;;;AAIlC,CAAC,CAEY,EAAuB,EAAA,GAAG,CAAC;EACtC,EAAE,EAAuB;;;;;;AAM3B,CAAC,CAEY,EAAoB,EAAA,GAAG,CAAC;EACnC,EAAE,EAAuB;;;;;;AAM3B,CAAC,CAEY,EAAuB,EAAA,GAAG,CAAC;;;;AAIxC,CAAC,CAEY,EAAsB,EAAA,GAAG,CAAC;EACrC,EAAE,EAAyB;;;;;;AAM7B,CAAC,CAEY,EAAyB,EAAA,GAAG,CAAC;EACxC,EAAE,EAAyB;;;;;;AAM7B,CAAC,CAEY,EAAyB,EAAA,GAAG,CAAC;;;;AAI1C,CAAC"}
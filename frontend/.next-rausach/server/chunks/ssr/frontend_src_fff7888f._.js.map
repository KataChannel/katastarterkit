{"version":3,"sources":["turbopack:///[project]/frontend/src/lib/graphql/shared-fragments.ts","turbopack:///[project]/frontend/src/graphql/product.queries.ts","turbopack:///[project]/frontend/src/hooks/useCategories.ts","turbopack:///[project]/frontend/src/graphql/category.queries.ts","turbopack:///[project]/frontend/src/hooks/useProducts.ts"],"sourcesContent":["import { gql } from '@apollo/client';\n\n/**\n * Centralized GraphQL fragments to avoid duplication warnings\n * graphql-tag enforces unique fragment names across the application\n */\n\n// ============================================================================\n// Category Fragments\n// ============================================================================\n\nexport const CATEGORY_BASIC_FRAGMENT = gql`\n  fragment CategoryBasicFields on CategoryType {\n    id\n    name\n    slug\n    description\n    image\n    displayOrder\n    isActive\n    createdAt\n  }\n`;\n\nexport const CATEGORY_WITH_COUNT_FRAGMENT = gql`\n  ${CATEGORY_BASIC_FRAGMENT}\n  fragment CategoryWithCountFields on CategoryType {\n    ...CategoryBasicFields\n    productCount\n  }\n`;\n\nexport const CATEGORY_TREE_FRAGMENT = gql`\n  ${CATEGORY_WITH_COUNT_FRAGMENT}\n  fragment CategoryTreeFields on CategoryType {\n    ...CategoryWithCountFields\n    parent {\n      id\n      name\n      slug\n    }\n    children {\n      ...CategoryWithCountFields\n    }\n  }\n`;\n\n// ============================================================================\n// Product Fragments\n// ============================================================================\n\nexport const PRODUCT_IMAGE_FRAGMENT = gql`\n  fragment ProductImageFields on ProductImageType {\n    id\n    url\n    alt\n    isPrimary\n    order\n    createdAt\n  }\n`;\n\nexport const PRODUCT_VARIANT_FRAGMENT = gql`\n  fragment ProductVariantFields on ProductVariantType {\n    id\n    name\n    sku\n    price\n    stock\n    order\n    isActive\n    attributes\n    createdAt\n  }\n`;\n\nexport const PRODUCT_BASIC_FRAGMENT = gql`\n  fragment ProductBasicFields on ProductType {\n    id\n    name\n    slug\n    description\n    shortDesc\n    price\n    compareAtPrice\n    status\n    isActive\n    sku\n    createdAt\n  }\n`;\n\n// ============================================================================\n// User Fragments\n// ============================================================================\n\nexport const USER_FRAGMENT = gql`\n  fragment UserFragment on User {\n    id\n    email\n    username\n    firstName\n    lastName\n    phone\n    avatar\n    roleType\n    isActive\n    isVerified\n    isTwoFactorEnabled\n    failedLoginAttempts\n    lockedUntil\n    lastLoginAt\n    createdAt\n    updatedAt\n  }\n`;\n\n// ============================================================================\n// Common Model Fragments (used in dynamic queries)\n// ============================================================================\n\nexport const POST_FRAGMENT = gql`\n  fragment PostFragment on Post {\n    id\n    title\n    slug\n    content\n    excerpt\n    featured_image\n    author {\n      id\n      username\n    }\n    category {\n      id\n      name\n    }\n    published_at\n    created_at\n  }\n`;\n\nexport const COMMENT_FRAGMENT = gql`\n  fragment CommentFragment on Comment {\n    id\n    content\n    author {\n      id\n      username\n    }\n    post {\n      id\n      title\n    }\n    created_at\n  }\n`;\n","import { gql } from '@apollo/client';\nimport {\n  CATEGORY_BASIC_FRAGMENT,\n  PRODUCT_IMAGE_FRAGMENT as SHARED_PRODUCT_IMAGE_FRAGMENT,\n  PRODUCT_VARIANT_FRAGMENT as SHARED_PRODUCT_VARIANT_FRAGMENT,\n} from '@/lib/graphql/shared-fragments';\n\n// ============================================================================\n// FRAGMENTS\n// ============================================================================\n\n// Re-export shared fragments for backward compatibility\nexport { CATEGORY_BASIC_FRAGMENT };\n\nexport const PRODUCT_IMAGE_FRAGMENT = SHARED_PRODUCT_IMAGE_FRAGMENT;\n\nexport const PRODUCT_VARIANT_FRAGMENT = SHARED_PRODUCT_VARIANT_FRAGMENT;\n\nexport const PRODUCT_BASIC_FRAGMENT = gql`\n  fragment ProductBasicFields on ProductType {\n    id\n    name\n    slug\n    description\n    shortDesc\n    sku\n    barcode\n    price\n    originalPrice\n    costPrice\n    unit\n    stock\n    minStock\n    status\n    thumbnail\n    origin\n    createdAt\n    updatedAt\n  }\n`;\n\nexport const PRODUCT_FULL_FRAGMENT = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${PRODUCT_IMAGE_FRAGMENT}\n  ${PRODUCT_VARIANT_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  fragment ProductFullFields on ProductType {\n    ...ProductBasicFields\n    category {\n      ...CategoryBasicFields\n    }\n    images {\n      ...ProductImageFields\n    }\n    variants {\n      ...ProductVariantFields\n    }\n    isFeatured\n    isNewArrival\n    isBestSeller\n    isOnSale\n    weight\n    attributes\n    metaTitle\n    metaDescription\n    metaKeywords\n  }\n`;\n\n// ============================================================================\n// QUERIES\n// ============================================================================\n\nexport const GET_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetProducts($input: GetProductsInput) {\n    products(input: $input) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  query GetProduct($id: ID!) {\n    product(id: $id) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const GET_PRODUCT_BY_SLUG = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  query GetProductBySlug($slug: String!) {\n    productBySlug(slug: $slug) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const GET_PRODUCTS_BY_CATEGORY = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  query GetProductsByCategory($categoryId: ID!, $input: GetProductsInput) {\n    productsByCategory(categoryId: $categoryId, input: $input) {\n      items {\n        ...ProductBasicFields\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_FEATURED_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetFeaturedProducts($limit: Int) {\n    products(input: { \n      filters: { isFeatured: true }\n      limit: $limit\n      sortBy: \"createdAt\"\n      sortOrder: DESC\n    }) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        discountPercentage\n      }\n      total\n    }\n  }\n`;\n\nexport const SEARCH_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query SearchProducts($search: String!, $limit: Int, $page: Int) {\n    products(input: { \n      filters: { search: $search }\n      limit: $limit\n      page: $page\n    }) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        discountPercentage\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_CHEAP_PRODUCTS = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  ${CATEGORY_BASIC_FRAGMENT}\n  query GetCheapProducts($input: GetProductsInput) {\n    products(input: $input) {\n      items {\n        ...ProductBasicFields\n        category {\n          ...CategoryBasicFields\n        }\n        isFeatured\n        isNewArrival\n        isBestSeller\n        isOnSale\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\n// ============================================================================\n// MUTATIONS\n// ============================================================================\n\nexport const CREATE_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  mutation CreateProduct($input: CreateProductInput!) {\n    createProduct(input: $input) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const UPDATE_PRODUCT = gql`\n  ${PRODUCT_FULL_FRAGMENT}\n  mutation UpdateProduct($input: UpdateProductInput!) {\n    updateProduct(input: $input) {\n      ...ProductFullFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT = gql`\n  mutation DeleteProduct($id: ID!) {\n    deleteProduct(id: $id)\n  }\n`;\n\nexport const UPDATE_PRODUCT_STOCK = gql`\n  ${PRODUCT_BASIC_FRAGMENT}\n  mutation UpdateProductStock($id: ID!, $quantity: Float!) {\n    updateProductStock(id: $id, quantity: $quantity) {\n      ...ProductBasicFields\n    }\n  }\n`;\n\nexport const ADD_PRODUCT_IMAGE = gql`\n  ${PRODUCT_IMAGE_FRAGMENT}\n  mutation AddProductImage($input: CreateProductImageInput!) {\n    addProductImage(input: $input) {\n      ...ProductImageFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT_IMAGE = gql`\n  mutation DeleteProductImage($id: ID!) {\n    deleteProductImage(id: $id)\n  }\n`;\n\nexport const ADD_PRODUCT_VARIANT = gql`\n  ${PRODUCT_VARIANT_FRAGMENT}\n  mutation AddProductVariant($input: CreateProductVariantInput!) {\n    addProductVariant(input: $input) {\n      ...ProductVariantFields\n    }\n  }\n`;\n\nexport const UPDATE_PRODUCT_VARIANT = gql`\n  ${PRODUCT_VARIANT_FRAGMENT}\n  mutation UpdateProductVariant($input: UpdateProductVariantInput!) {\n    updateProductVariant(input: $input) {\n      ...ProductVariantFields\n    }\n  }\n`;\n\nexport const DELETE_PRODUCT_VARIANT = gql`\n  mutation DeleteProductVariant($id: ID!) {\n    deleteProductVariant(id: $id)\n  }\n`;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface ProductImage {\n  id: string;\n  url: string;\n  alt?: string;\n  isPrimary: boolean;\n  order: number;\n  createdAt: string;\n}\n\nexport interface ProductVariant {\n  id: string;\n  name: string;\n  sku: string;\n  price: number;\n  stock: number;\n  order: number;\n  isActive: boolean;\n  attributes?: any;\n  createdAt: string;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  image?: string;\n  displayOrder: number;\n  isActive: boolean;\n}\n\nexport interface Product {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit: string;\n  stock: number;\n  minStock: number;\n  status: string;\n  thumbnail?: string;\n  origin?: string;\n  category?: Category;\n  images?: ProductImage[];\n  variants?: ProductVariant[];\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n  discountPercentage?: number; // Added for computed field\n  profitMargin?: number; // Added for computed field\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface PaginatedProducts {\n  items: Product[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n}\n\nexport interface ProductFilters {\n  search?: string;\n  categoryId?: string;\n  minPrice?: number;\n  maxPrice?: number;\n  status?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  unit?: string;\n  origin?: string;\n  inStock?: boolean;\n}\n\nexport interface GetProductsInput {\n  filters?: ProductFilters;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface CreateProductInput {\n  name: string;\n  categoryId: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit: string;\n  stock: number;\n  minStock?: number;\n  status?: string;\n  thumbnail?: string;\n  origin?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n}\n\nexport interface UpdateProductInput {\n  id: string;\n  name?: string;\n  categoryId?: string;\n  description?: string;\n  shortDesc?: string;\n  sku?: string;\n  barcode?: string;\n  price?: number;\n  originalPrice?: number;\n  costPrice?: number;\n  unit?: string;\n  stock?: number;\n  minStock?: number;\n  status?: string;\n  thumbnail?: string;\n  origin?: string;\n  isFeatured?: boolean;\n  isNewArrival?: boolean;\n  isBestSeller?: boolean;\n  isOnSale?: boolean;\n  weight?: number;\n  attributes?: Record<string, any>;\n  metaTitle?: string;\n  metaDescription?: string;\n  metaKeywords?: string;\n}\n\nexport interface CreateProductImageInput {\n  productId: string;\n  url: string;\n  alt?: string;\n  title?: string;\n  isPrimary?: boolean;\n  order?: number;\n}\n\nexport interface CreateProductVariantInput {\n  productId: string;\n  name: string;\n  sku?: string;\n  barcode?: string;\n  price: number;\n  stock?: number;\n  attributes?: Record<string, any>;\n  isActive?: boolean;\n  order?: number;\n}\n\nexport interface UpdateProductVariantInput {\n  id: string;\n  name?: string;\n  sku?: string;\n  barcode?: string;\n  price?: number;\n  stock?: number;\n  attributes?: Record<string, any>;\n  isActive?: boolean;\n  order?: number;\n}\n","import { useQuery, useMutation } from '@apollo/client';\nimport React from 'react';\nimport {\n  GET_CATEGORIES,\n  GET_CATEGORY_TREE,\n  GET_CATEGORY,\n  GET_CATEGORY_BY_SLUG,\n  GET_ACTIVE_CATEGORIES,\n  CREATE_CATEGORY,\n  UPDATE_CATEGORY,\n  DELETE_CATEGORY,\n  Category,\n  PaginatedCategories,\n  GetCategoriesInput,\n  CreateCategoryInput,\n  UpdateCategoryInput,\n} from '../graphql/category.queries';\n\n// ============================================================================\n// QUERY HOOKS\n// ============================================================================\n\nexport function useCategories(input?: GetCategoriesInput) {\n  const { data, loading, error, refetch } = useQuery<{\n    categories: PaginatedCategories;\n  }>(GET_CATEGORIES, {\n    variables: { input },\n  });\n\n  return {\n    categories: data?.categories.items || [],\n    pagination: {\n      total: data?.categories.total || 0,\n      page: data?.categories.page || 1,\n      limit: data?.categories.limit || 10,\n      totalPages: data?.categories.totalPages || 0,\n    },\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useCategoryTree() {\n  const { data, loading, error, refetch } = useQuery<{\n    categoryTree: Category[];\n  }>(GET_CATEGORY_TREE);\n\n  return {\n    categoryTree: data?.categoryTree || [],\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useCategory(id: string) {\n  const { data, loading, error, refetch } = useQuery<{ category: Category }>(\n    GET_CATEGORY,\n    {\n      variables: { id },\n      skip: !id,\n    }\n  );\n\n  return {\n    category: data?.category,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useCategoryBySlug(slug: string) {\n  const { data, loading, error, refetch } = useQuery<{\n    categoryBySlug: Category;\n  }>(GET_CATEGORY_BY_SLUG, {\n    variables: { slug },\n    skip: !slug,\n  });\n\n  return {\n    category: data?.categoryBySlug,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useActiveCategories() {\n  const { data, loading, error, refetch } = useQuery<{\n    categories: PaginatedCategories;\n  }>(GET_ACTIVE_CATEGORIES);\n\n  return {\n    categories: data?.categories.items || [],\n    total: data?.categories.total || 0,\n    loading,\n    error,\n    refetch,\n  };\n}\n\n// ============================================================================\n// MUTATION HOOKS\n// ============================================================================\n\nexport function useCreateCategory() {\n  const [createCategory, { data, loading, error }] = useMutation<\n    { createCategory: Category },\n    { input: CreateCategoryInput }\n  >(CREATE_CATEGORY, {\n    refetchQueries: [{ query: GET_CATEGORIES }, { query: GET_CATEGORY_TREE }],\n  });\n\n  return {\n    createCategory: (input: CreateCategoryInput) =>\n      createCategory({ variables: { input } }),\n    category: data?.createCategory,\n    loading,\n    error,\n  };\n}\n\nexport function useUpdateCategory() {\n  const [updateCategory, { data, loading, error }] = useMutation<\n    { updateCategory: Category },\n    { id: string; input: UpdateCategoryInput }\n  >(UPDATE_CATEGORY, {\n    refetchQueries: [{ query: GET_CATEGORY_TREE }],\n  });\n\n  return {\n    updateCategory: (id: string, input: UpdateCategoryInput) =>\n      updateCategory({ variables: { id, input } }),\n    category: data?.updateCategory,\n    loading,\n    error,\n  };\n}\n\nexport function useDeleteCategory() {\n  const [deleteCategory, { data, loading, error }] = useMutation<\n    { deleteCategory: boolean },\n    { id: string }\n  >(DELETE_CATEGORY, {\n    refetchQueries: [{ query: GET_CATEGORIES }, { query: GET_CATEGORY_TREE }],\n  });\n\n  return {\n    deleteCategory: (id: string) => deleteCategory({ variables: { id } }),\n    success: data?.deleteCategory,\n    loading,\n    error,\n  };\n}\n\n// ============================================================================\n// UTILITY HOOKS\n// ============================================================================\n\nexport function useCategoryManagement() {\n  const { createCategory, loading: creating, error: createError } = useCreateCategory();\n  const { updateCategory, loading: updating, error: updateError } = useUpdateCategory();\n  const { deleteCategory, loading: deleting, error: deleteError } = useDeleteCategory();\n\n  return {\n    createCategory,\n    updateCategory,\n    deleteCategory,\n    loading: creating || updating || deleting,\n    error: createError || updateError || deleteError,\n  };\n}\n\nexport function useCategorySelector() {\n  const { categoryTree, loading, error } = useCategoryTree();\n  const [selectedCategoryId, setSelectedCategoryId] = React.useState<string | null>(null);\n\n  const flattenCategories = (categories: Category[]): Category[] => {\n    const result: Category[] = [];\n    const flatten = (cats: Category[], level: number = 0) => {\n      cats.forEach((cat) => {\n        result.push({ ...cat, level } as Category & { level: number });\n        if (cat.children && cat.children.length > 0) {\n          flatten(cat.children, level + 1);\n        }\n      });\n    };\n    flatten(categories);\n    return result;\n  };\n\n  const flatCategories = React.useMemo(\n    () => flattenCategories(categoryTree),\n    [categoryTree]\n  );\n\n  const selectedCategory = React.useMemo(\n    () => flatCategories.find((cat) => cat.id === selectedCategoryId),\n    [flatCategories, selectedCategoryId]\n  );\n\n  return {\n    categoryTree,\n    flatCategories,\n    selectedCategory,\n    selectedCategoryId,\n    setSelectedCategoryId,\n    loading,\n    error,\n  };\n}\n\nexport function useCategoryNavigation() {\n  const { categoryTree, loading, error } = useCategoryTree();\n  const [breadcrumbs, setBreadcrumbs] = React.useState<Category[]>([]);\n\n  const findCategoryPath = (\n    categories: Category[],\n    targetId: string,\n    path: Category[] = []\n  ): Category[] | null => {\n    for (const category of categories) {\n      const currentPath = [...path, category];\n      if (category.id === targetId) {\n        return currentPath;\n      }\n      if (category.children && category.children.length > 0) {\n        const found = findCategoryPath(category.children, targetId, currentPath);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n\n  const navigateToCategory = (categoryId: string) => {\n    const path = findCategoryPath(categoryTree, categoryId);\n    if (path) {\n      setBreadcrumbs(path);\n    }\n  };\n\n  return {\n    categoryTree,\n    breadcrumbs,\n    navigateToCategory,\n    loading,\n    error,\n  };\n}\n","import { gql } from '@apollo/client';\nimport {\n  CATEGORY_BASIC_FRAGMENT,\n  CATEGORY_WITH_COUNT_FRAGMENT,\n  CATEGORY_TREE_FRAGMENT,\n} from '@/lib/graphql/shared-fragments';\n\n// ============================================================================\n// FRAGMENTS - Imported from shared-fragments.ts to avoid duplication\n// ============================================================================\n// Re-export for backward compatibility\nexport { CATEGORY_BASIC_FRAGMENT, CATEGORY_WITH_COUNT_FRAGMENT, CATEGORY_TREE_FRAGMENT };\n\n// ============================================================================\n// QUERIES\n// ============================================================================\n\nexport const GET_CATEGORIES = gql`\n  ${CATEGORY_WITH_COUNT_FRAGMENT}\n  query GetCategories($input: GetCategoriesInput) {\n    categories(input: $input) {\n      items {\n        ...CategoryWithCountFields\n        parent {\n          id\n          name\n        }\n      }\n      total\n      page\n      limit\n      totalPages\n    }\n  }\n`;\n\nexport const GET_CATEGORY_TREE = gql`\n  ${CATEGORY_TREE_FRAGMENT}\n  query GetCategoryTree {\n    categoryTree {\n      ...CategoryTreeFields\n      children {\n        ...CategoryTreeFields\n        children {\n          ...CategoryWithCountFields\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_CATEGORY = gql`\n  ${CATEGORY_TREE_FRAGMENT}\n  query GetCategory($id: String!) {\n    category(id: $id) {\n      ...CategoryTreeFields\n    }\n  }\n`;\n\nexport const GET_CATEGORY_BY_SLUG = gql`\n  ${CATEGORY_TREE_FRAGMENT}\n  query GetCategoryBySlug($slug: String!) {\n    categoryBySlug(slug: $slug) {\n      ...CategoryTreeFields\n    }\n  }\n`;\n\nexport const GET_ACTIVE_CATEGORIES = gql`\n  ${CATEGORY_WITH_COUNT_FRAGMENT}\n  query GetActiveCategories {\n    categories(input: { \n      filters: { isActive: true }\n      sortBy: \"displayOrder\"\n      sortOrder: \"asc\"\n    }) {\n      items {\n        ...CategoryWithCountFields\n      }\n      total\n    }\n  }\n`;\n\n// ============================================================================\n// MUTATIONS\n// ============================================================================\n\nexport const CREATE_CATEGORY = gql`\n  ${CATEGORY_TREE_FRAGMENT}\n  mutation CreateCategory($input: CreateCategoryInput!) {\n    createCategory(input: $input) {\n      ...CategoryTreeFields\n    }\n  }\n`;\n\nexport const UPDATE_CATEGORY = gql`\n  ${CATEGORY_TREE_FRAGMENT}\n  mutation UpdateCategory($id: String!, $input: UpdateCategoryInput!) {\n    updateCategory(id: $id, input: $input) {\n      ...CategoryTreeFields\n    }\n  }\n`;\n\nexport const DELETE_CATEGORY = gql`\n  mutation DeleteCategory($id: String!) {\n    deleteCategory(id: $id)\n  }\n`;\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface Category {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  image?: string;\n  displayOrder: number;\n  isActive: boolean;\n  productCount?: number;\n  parent?: {\n    id: string;\n    name: string;\n    slug: string;\n  };\n  children?: Category[];\n  createdAt: string;\n}\n\nexport interface PaginatedCategories {\n  items: Category[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n}\n\nexport interface CategoryFilters {\n  search?: string;\n  isActive?: boolean;\n  parentId?: string;\n  hasProducts?: boolean;\n}\n\nexport interface GetCategoriesInput {\n  filters?: CategoryFilters;\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  includeChildren?: boolean;\n}\n\nexport interface CreateCategoryInput {\n  name: string;\n  description?: string;\n  image?: string;\n  parentId?: string;\n  displayOrder?: number;\n  isActive?: boolean;\n}\n\nexport interface UpdateCategoryInput {\n  name?: string;\n  description?: string;\n  image?: string;\n  parentId?: string;\n  displayOrder?: number;\n  isActive?: boolean;\n}\n","import { useQuery, useMutation, ApolloError } from '@apollo/client';\nimport {\n  GET_PRODUCTS,\n  GET_PRODUCT,\n  GET_PRODUCT_BY_SLUG,\n  GET_PRODUCTS_BY_CATEGORY,\n  GET_FEATURED_PRODUCTS,\n  SEARCH_PRODUCTS,\n  CREATE_PRODUCT,\n  UPDATE_PRODUCT,\n  DELETE_PRODUCT,\n  UPDATE_PRODUCT_STOCK,\n  ADD_PRODUCT_IMAGE,\n  DELETE_PRODUCT_IMAGE,\n  ADD_PRODUCT_VARIANT,\n  UPDATE_PRODUCT_VARIANT,\n  DELETE_PRODUCT_VARIANT,\n  Product,\n  PaginatedProducts,\n  GetProductsInput,\n  CreateProductInput,\n  UpdateProductInput,\n  CreateProductImageInput,\n  CreateProductVariantInput,\n  UpdateProductVariantInput,\n} from '../graphql/product.queries';\n\n// ============================================================================\n// QUERY HOOKS\n// ============================================================================\n\nexport function useProducts(input?: GetProductsInput) {\n  const { data, loading, error, refetch } = useQuery<{\n    products: PaginatedProducts;\n  }>(GET_PRODUCTS, {\n    variables: { input },\n  });\n\n  return {\n    products: data?.products.items || [],\n    pagination: {\n      total: data?.products.total || 0,\n      page: data?.products.page || 1,\n      limit: data?.products.limit || 10,\n      totalPages: data?.products.totalPages || 0,\n    },\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useProduct(id: string) {\n  const { data, loading, error, refetch } = useQuery<{ product: Product }>(\n    GET_PRODUCT,\n    {\n      variables: { id },\n      skip: !id,\n    }\n  );\n\n  return {\n    product: data?.product,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useProductBySlug(slug: string) {\n  const { data, loading, error, refetch } = useQuery<{\n    productBySlug: Product;\n  }>(GET_PRODUCT_BY_SLUG, {\n    variables: { slug },\n    skip: !slug,\n  });\n\n  return {\n    product: data?.productBySlug,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useProductsByCategory(\n  categoryId: string,\n  input?: GetProductsInput\n) {\n  const { data, loading, error, refetch } = useQuery<{\n    productsByCategory: PaginatedProducts;\n  }>(GET_PRODUCTS_BY_CATEGORY, {\n    variables: { categoryId, input },\n    skip: !categoryId,\n  });\n\n  return {\n    products: data?.productsByCategory.items || [],\n    pagination: {\n      total: data?.productsByCategory.total || 0,\n      page: data?.productsByCategory.page || 1,\n      limit: data?.productsByCategory.limit || 10,\n      totalPages: data?.productsByCategory.totalPages || 0,\n    },\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useFeaturedProducts(limit: number = 10) {\n  const { data, loading, error, refetch } = useQuery<{\n    products: PaginatedProducts;\n  }>(GET_FEATURED_PRODUCTS, {\n    variables: { limit },\n  });\n\n  return {\n    products: data?.products.items || [],\n    total: data?.products.total || 0,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nexport function useSearchProducts(search: string, limit: number = 20, page: number = 1) {\n  const { data, loading, error, refetch } = useQuery<{\n    products: PaginatedProducts;\n  }>(SEARCH_PRODUCTS, {\n    variables: { search, limit, page },\n    skip: !search || search.length < 2,\n  });\n\n  return {\n    products: data?.products.items || [],\n    pagination: {\n      total: data?.products.total || 0,\n      page: data?.products.page || 1,\n      limit: data?.products.limit || 20,\n      totalPages: data?.products.totalPages || 0,\n    },\n    loading,\n    error,\n    refetch,\n  };\n}\n\n// ============================================================================\n// MUTATION HOOKS\n// ============================================================================\n\nexport function useCreateProduct() {\n  const [createProduct, { data, loading, error }] = useMutation<\n    { createProduct: Product },\n    { input: CreateProductInput }\n  >(CREATE_PRODUCT, {\n    refetchQueries: [{ query: GET_PRODUCTS }],\n  });\n\n  return {\n    createProduct: (input: CreateProductInput) =>\n      createProduct({ variables: { input } }),\n    product: data?.createProduct,\n    loading,\n    error,\n  };\n}\n\nexport function useUpdateProduct() {\n  const [updateProduct, { data, loading, error }] = useMutation<\n    { updateProduct: Product },\n    { input: UpdateProductInput }\n  >(UPDATE_PRODUCT);\n\n  return {\n    updateProduct: (input: UpdateProductInput) =>\n      updateProduct({ variables: { input } }),\n    product: data?.updateProduct,\n    loading,\n    error,\n  };\n}\n\nexport function useDeleteProduct() {\n  const [deleteProduct, { data, loading, error }] = useMutation<\n    { deleteProduct: boolean },\n    { id: string }\n  >(DELETE_PRODUCT, {\n    refetchQueries: [{ query: GET_PRODUCTS }],\n  });\n\n  return {\n    deleteProduct: (id: string) => deleteProduct({ variables: { id } }),\n    success: data?.deleteProduct,\n    loading,\n    error,\n  };\n}\n\nexport function useUpdateProductStock() {\n  const [updateStock, { data, loading, error }] = useMutation<\n    { updateProductStock: Product },\n    { id: string; quantity: number }\n  >(UPDATE_PRODUCT_STOCK);\n\n  return {\n    updateStock: (id: string, quantity: number) =>\n      updateStock({ variables: { id, quantity } }),\n    product: data?.updateProductStock,\n    loading,\n    error,\n  };\n}\n\nexport function useAddProductImage() {\n  const [addImage, { data, loading, error }] = useMutation(ADD_PRODUCT_IMAGE);\n\n  return {\n    addImage: (input: CreateProductImageInput) =>\n      addImage({ variables: { input } }),\n    image: data?.addProductImage,\n    loading,\n    error,\n  };\n}\n\nexport function useDeleteProductImage() {\n  const [deleteImage, { loading, error }] = useMutation(DELETE_PRODUCT_IMAGE);\n\n  return {\n    deleteImage: (id: string) => deleteImage({ variables: { id } }),\n    loading,\n    error,\n  };\n}\n\nexport function useAddProductVariant() {\n  const [addVariant, { data, loading, error }] = useMutation(\n    ADD_PRODUCT_VARIANT\n  );\n\n  return {\n    addVariant: (input: CreateProductVariantInput) =>\n      addVariant({ variables: { input } }),\n    variant: data?.addProductVariant,\n    loading,\n    error,\n  };\n}\n\nexport function useUpdateProductVariant() {\n  const [updateVariant, { data, loading, error }] = useMutation(\n    UPDATE_PRODUCT_VARIANT\n  );\n\n  return {\n    updateVariant: (input: UpdateProductVariantInput) =>\n      updateVariant({ variables: { input } }),\n    variant: data?.updateProductVariant,\n    loading,\n    error,\n  };\n}\n\nexport function useDeleteProductVariant() {\n  const [deleteVariant, { loading, error }] = useMutation(\n    DELETE_PRODUCT_VARIANT\n  );\n\n  return {\n    deleteVariant: (id: string) => deleteVariant({ variables: { id } }),\n    loading,\n    error,\n  };\n}\n\n// ============================================================================\n// UTILITY HOOKS\n// ============================================================================\n\nexport function useProductManagement() {\n  const { createProduct, loading: creating, error: createError } = useCreateProduct();\n  const { updateProduct, loading: updating, error: updateError } = useUpdateProduct();\n  const { deleteProduct, loading: deleting, error: deleteError } = useDeleteProduct();\n\n  return {\n    createProduct,\n    updateProduct,\n    deleteProduct,\n    loading: creating || updating || deleting,\n    error: createError || updateError || deleteError,\n  };\n}\n\nexport function useProductFilters(initialFilters?: GetProductsInput) {\n  const [filters, setFilters] = React.useState<GetProductsInput>(\n    initialFilters || {\n      page: 1,\n      limit: 20,\n      sortBy: 'createdAt',\n      sortOrder: 'desc',\n    }\n  );\n\n  const { products, pagination, loading, error, refetch } = useProducts(filters);\n\n  const updateFilters = (newFilters: Partial<GetProductsInput>) => {\n    setFilters((prev) => ({ ...prev, ...newFilters }));\n  };\n\n  const resetFilters = () => {\n    setFilters({\n      page: 1,\n      limit: 20,\n      sortBy: 'createdAt',\n      sortOrder: 'desc',\n    });\n  };\n\n  return {\n    products,\n    pagination,\n    filters,\n    updateFilters,\n    resetFilters,\n    loading,\n    error,\n    refetch,\n  };\n}\n\nimport React from 'react';\n"],"names":[],"mappings":"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"}
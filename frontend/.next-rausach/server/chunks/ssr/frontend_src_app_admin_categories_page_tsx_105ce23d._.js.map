{"version":3,"sources":["turbopack:///[project]/frontend/src/app/admin/categories/page.tsx","turbopack:///[project]/frontend/src/components/category/CategoryCard.tsx","turbopack:///[project]/frontend/src/components/category/CategoryTree.tsx","turbopack:///[project]/frontend/src/components/category/CategoryForm.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  useCategoryTree,\n  useCreateCategory,\n  useUpdateCategory,\n  useDeleteCategory,\n} from '@/hooks/useCategories';\nimport { Category, CreateCategoryInput, UpdateCategoryInput } from '@/graphql/category.queries';\nimport { CategoryTree } from '@/components/category';\nimport { CategoryForm } from '@/components/category';\nimport { ImportExportDialog } from '@/components/admin/ImportExportDialog';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Plus, Loader2, FolderTree, Download, Upload } from 'lucide-react';\nimport { toast } from 'sonner';\n\ntype DialogMode = 'create' | 'edit' | 'create-child' | null;\n\nexport default function CategoriesPage() {\n  const router = useRouter();\n  const [dialogMode, setDialogMode] = React.useState<DialogMode>(null);\n  const [selectedCategory, setSelectedCategory] = React.useState<Category | null>(null);\n  const [parentCategory, setParentCategory] = React.useState<Category | null>(null);\n  const [importDialogOpen, setImportDialogOpen] = React.useState(false);\n\n  const { categoryTree, loading, error, refetch } = useCategoryTree();\n  const { createCategory, loading: creating } = useCreateCategory();\n  const { updateCategory, loading: updating } = useUpdateCategory();\n  const { deleteCategory, loading: deleting } = useDeleteCategory();\n\n  const handleCreate = () => {\n    setSelectedCategory(null);\n    setParentCategory(null);\n    setDialogMode('create');\n  };\n\n  const handleEdit = (category: Category) => {\n    setSelectedCategory(category);\n    setDialogMode('edit');\n  };\n\n  const handleAddChild = (parent: Category) => {\n    setParentCategory(parent);\n    setSelectedCategory(null);\n    setDialogMode('create-child');\n  };\n\n  const handleDeleteClick = async (category: Category) => {\n    try {\n      await deleteCategory(category.id);\n      toast.success(`ƒê√£ x√≥a danh m·ª•c \"${category.name}\"`);\n      refetch();\n    } catch (error: any) {\n      toast.error(error.message || 'L·ªói khi x√≥a danh m·ª•c');\n      console.error(error);\n    }\n  };\n\n  const handleSubmit = async (data: CreateCategoryInput | UpdateCategoryInput) => {\n    try {\n      if (dialogMode === 'create' || dialogMode === 'create-child') {\n        const input: CreateCategoryInput = {\n          ...(data as CreateCategoryInput),\n          parentId: dialogMode === 'create-child' ? parentCategory?.id : data.parentId,\n        };\n        await createCategory(input);\n        toast.success('T·∫°o danh m·ª•c th√†nh c√¥ng!');\n      } else if (dialogMode === 'edit' && selectedCategory) {\n        await updateCategory(selectedCategory.id, data as UpdateCategoryInput);\n        toast.success('C·∫≠p nh·∫≠t danh m·ª•c th√†nh c√¥ng!');\n      }\n      setDialogMode(null);\n      setSelectedCategory(null);\n      setParentCategory(null);\n      refetch();\n    } catch (error: any) {\n      toast.error(error.message || 'L·ªói khi l∆∞u danh m·ª•c');\n      console.error(error);\n    }\n  };\n\n  const handleCancel = () => {\n    setDialogMode(null);\n    setSelectedCategory(null);\n    setParentCategory(null);\n  };\n\n  const handleExport = async () => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const backendUrl = process.env.NEXT_PUBLIC_GRAPHQL_ENDPOINT?.replace('/graphql', '') || 'http://localhost:12001';\n      const response = await fetch(`${backendUrl}/api/category-import-export/export`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) throw new Error('Export failed');\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `DanhMuc_${Date.now()}.xlsx`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      toast.success('ƒê√£ export danh m·ª•c th√†nh c√¥ng');\n    } catch (error) {\n      toast.error('Kh√¥ng th·ªÉ export danh m·ª•c');\n    }\n  };\n\n  const totalCategories = React.useMemo(() => {\n    const countCategories = (categories: Category[]): number => {\n      return categories.reduce((count, cat) => {\n        return count + 1 + (cat.children ? countCategories(cat.children) : 0);\n      }, 0);\n    };\n    return countCategories(categoryTree);\n  }, [categoryTree]);\n\n  const activeCategories = React.useMemo(() => {\n    const countActive = (categories: Category[]): number => {\n      return categories.reduce((count, cat) => {\n        return (\n          count +\n          (cat.isActive ? 1 : 0) +\n          (cat.children ? countActive(cat.children) : 0)\n        );\n      }, 0);\n    };\n    return countActive(categoryTree);\n  }, [categoryTree]);\n\n  return (\n    <div className=\"container mx-auto py-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Qu·∫£n l√Ω danh m·ª•c</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Qu·∫£n l√Ω c√¢y danh m·ª•c s·∫£n ph·∫©m\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={() => setImportDialogOpen(true)}>\n            <Upload className=\"h-4 w-4 mr-2\" />\n            Import Excel\n          </Button>\n          <Button variant=\"outline\" onClick={handleExport}>\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export Excel\n          </Button>\n          <Button onClick={handleCreate}>\n            <Plus className=\"h-4 w-4 mr-2\" />\n            T·∫°o danh m·ª•c m·ªõi\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              T·ªïng danh m·ª•c\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalCategories}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              ƒêang ho·∫°t ƒë·ªông\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {activeCategories}\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              Kh√¥ng ho·∫°t ƒë·ªông\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-gray-600\">\n              {totalCategories - activeCategories}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Category Tree */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FolderTree className=\"h-5 w-5\" />\n            C√¢y danh m·ª•c\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"flex justify-center items-center py-12\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            </div>\n          ) : error ? (\n            <div className=\"text-center py-12 text-red-500\">\n              L·ªói: {error.message}\n            </div>\n          ) : categoryTree.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground mb-4\">\n                Ch∆∞a c√≥ danh m·ª•c n√†o\n              </p>\n              <Button onClick={handleCreate}>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                T·∫°o danh m·ª•c ƒë·∫ßu ti√™n\n              </Button>\n            </div>\n          ) : (\n            <CategoryTree\n              categories={categoryTree}\n              selectedId={selectedCategory?.id}\n              onSelect={setSelectedCategory}\n              onEdit={handleEdit}\n              onDelete={handleDeleteClick}\n              onAddChild={handleAddChild}\n              showActions\n              showProductCount\n            />\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Create/Edit Dialog */}\n      <Dialog open={dialogMode !== null} onOpenChange={() => handleCancel()}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {dialogMode === 'create' && 'T·∫°o danh m·ª•c m·ªõi'}\n              {dialogMode === 'create-child' &&\n                `T·∫°o danh m·ª•c con cho \"${parentCategory?.name}\"`}\n              {dialogMode === 'edit' && `Ch·ªânh s·ª≠a \"${selectedCategory?.name}\"`}\n            </DialogTitle>\n          </DialogHeader>\n          <CategoryForm\n            category={selectedCategory || undefined}\n            onSubmit={handleSubmit}\n            onCancel={handleCancel}\n            loading={creating || updating}\n            excludeId={selectedCategory?.id}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Import/Export Dialog */}\n      <ImportExportDialog\n        open={importDialogOpen}\n        onOpenChange={setImportDialogOpen}\n        title=\"Import Danh M·ª•c t·ª´ Excel\"\n        description=\"T·∫£i file m·∫´u, ƒëi·ªÅn th√¥ng tin, v√† upload ƒë·ªÉ import h√†ng lo·∫°t danh m·ª•c\"\n        templateUrl=\"/api/category-import-export/template\"\n        importUrl=\"/api/category-import-export/import\"\n        onImportSuccess={() => {\n          refetch();\n          toast.success('Import danh m·ª•c th√†nh c√¥ng');\n        }}\n      />\n    </div>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { Category } from '@/graphql/category.queries';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Package, ChevronRight } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface CategoryCardProps {\n  category: Category;\n  variant?: 'default' | 'compact' | 'icon';\n  showProductCount?: boolean;\n  className?: string;\n}\n\nexport function CategoryCard({\n  category,\n  variant = 'default',\n  showProductCount = true,\n  className,\n}: CategoryCardProps) {\n  const [isHovered, setIsHovered] = React.useState(false);\n\n  if (variant === 'compact') {\n    return (\n      <Link href={`/shop/${category.slug}`}>\n        <Card className={cn('hover:shadow-md transition-shadow', className)}>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {category.image ? (\n                  <img\n                    src={category.image}\n                    alt={category.name}\n                    className=\"w-10 h-10 rounded object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-10 h-10 rounded bg-primary/10 flex items-center justify-center\">\n                    <Package className=\"h-5 w-5 text-primary\" />\n                  </div>\n                )}\n                <div>\n                  <h4 className=\"font-medium\">{category.name}</h4>\n                  {showProductCount && category.productCount !== undefined && (\n                    <p className=\"text-xs text-muted-foreground\">\n                      {category.productCount} s·∫£n ph·∫©m\n                    </p>\n                  )}\n                </div>\n              </div>\n              <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\n            </div>\n          </CardContent>\n        </Card>\n      </Link>\n    );\n  }\n\n  if (variant === 'icon') {\n    return (\n      <Link href={`/shop/${category.slug}`}>\n        <div\n          className={cn(\n            'flex flex-col items-center text-center p-4 rounded-lg hover:bg-accent transition-colors',\n            className\n          )}\n        >\n          {category.image ? (\n            <img\n              src={category.image}\n              alt={category.name}\n              className=\"w-16 h-16 rounded-full object-cover mb-3\"\n            />\n          ) : (\n            <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-3\">\n              <Package className=\"h-8 w-8 text-primary\" />\n            </div>\n          )}\n          <h4 className=\"font-medium text-sm\">{category.name}</h4>\n          {showProductCount && category.productCount !== undefined && (\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {category.productCount}\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  }\n\n  // Default variant\n  return (\n    <Link href={`/shop/${category.slug}`}>\n      <Card\n        className={cn('group overflow-hidden hover:shadow-lg transition-shadow', className)}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <div className=\"relative h-48 overflow-hidden bg-gradient-to-br from-primary/10 to-primary/5\">\n          {category.image ? (\n            <img\n              src={category.image}\n              alt={category.name}\n              className={cn(\n                'w-full h-full object-cover transition-transform duration-300',\n                isHovered && 'scale-110'\n              )}\n            />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center\">\n              <Package className=\"h-20 w-20 text-primary/40\" />\n            </div>\n          )}\n          {!category.isActive && (\n            <Badge className=\"absolute top-2 right-2\" variant=\"outline\">\n              Kh√¥ng ho·∫°t ƒë·ªông\n            </Badge>\n          )}\n        </div>\n        <CardContent className=\"p-4\">\n          <h3 className=\"font-semibold text-lg mb-2\">{category.name}</h3>\n          {category.description && (\n            <p className=\"text-sm text-muted-foreground line-clamp-2 mb-3\">\n              {category.description}\n            </p>\n          )}\n          <div className=\"flex items-center justify-between\">\n            {showProductCount && category.productCount !== undefined && (\n              <span className=\"text-sm text-muted-foreground\">\n                {category.productCount} s·∫£n ph·∫©m\n              </span>\n            )}\n            <ChevronRight\n              className={cn(\n                'h-5 w-5 text-muted-foreground transition-transform',\n                isHovered && 'translate-x-1'\n              )}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    </Link>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { Category } from '@/graphql/category.queries';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  ChevronRight,\n  ChevronDown,\n  Folder,\n  FolderOpen,\n  Edit,\n  Trash2,\n  Plus,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface CategoryTreeProps {\n  categories: Category[];\n  selectedId?: string;\n  onSelect?: (category: Category) => void;\n  onEdit?: (category: Category) => void;\n  onDelete?: (category: Category) => void;\n  onAddChild?: (parentCategory: Category) => void;\n  showActions?: boolean;\n  showProductCount?: boolean;\n  className?: string;\n}\n\nexport function CategoryTree({\n  categories,\n  selectedId,\n  onSelect,\n  onEdit,\n  onDelete,\n  onAddChild,\n  showActions = false,\n  showProductCount = true,\n  className,\n}: CategoryTreeProps) {\n  return (\n    <div className={cn('space-y-1', className)}>\n      {categories.map((category) => (\n        <CategoryTreeItem\n          key={category.id}\n          category={category}\n          level={0}\n          selectedId={selectedId}\n          onSelect={onSelect}\n          onEdit={onEdit}\n          onDelete={onDelete}\n          onAddChild={onAddChild}\n          showActions={showActions}\n          showProductCount={showProductCount}\n        />\n      ))}\n    </div>\n  );\n}\n\ninterface CategoryTreeItemProps {\n  category: Category;\n  level: number;\n  selectedId?: string;\n  onSelect?: (category: Category) => void;\n  onEdit?: (category: Category) => void;\n  onDelete?: (category: Category) => void;\n  onAddChild?: (parentCategory: Category) => void;\n  showActions?: boolean;\n  showProductCount?: boolean;\n}\n\nfunction CategoryTreeItem({\n  category,\n  level,\n  selectedId,\n  onSelect,\n  onEdit,\n  onDelete,\n  onAddChild,\n  showActions,\n  showProductCount,\n}: CategoryTreeItemProps) {\n  const [isExpanded, setIsExpanded] = React.useState(level < 2); // Auto-expand first 2 levels\n  const hasChildren = category.children && category.children.length > 0;\n  const isSelected = selectedId === category.id;\n\n  const handleToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsExpanded(!isExpanded);\n  };\n\n  const handleSelect = () => {\n    onSelect?.(category);\n  };\n\n  const handleEdit = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onEdit?.(category);\n  };\n\n  const handleDelete = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onDelete?.(category);\n  };\n\n  const handleAddChild = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onAddChild?.(category);\n  };\n\n  return (\n    <div>\n      <div\n        className={cn(\n          'group flex items-center gap-2 px-2 py-2 rounded-md hover:bg-accent transition-colors cursor-pointer',\n          isSelected && 'bg-accent',\n          !category.isActive && 'opacity-60'\n        )}\n        style={{ paddingLeft: `${level * 24 + 8}px` }}\n        onClick={handleSelect}\n      >\n        {/* Expand/Collapse Button */}\n        <button\n          type=\"button\"\n          onClick={handleToggle}\n          className={cn(\n            'flex-shrink-0 w-5 h-5 flex items-center justify-center hover:bg-accent-foreground/10 rounded transition-colors',\n            !hasChildren && 'invisible'\n          )}\n        >\n          {hasChildren &&\n            (isExpanded ? (\n              <ChevronDown className=\"h-4 w-4\" />\n            ) : (\n              <ChevronRight className=\"h-4 w-4\" />\n            ))}\n        </button>\n\n        {/* Folder Icon */}\n        <div className=\"flex-shrink-0\">\n          {isExpanded && hasChildren ? (\n            <FolderOpen className=\"h-5 w-5 text-primary\" />\n          ) : (\n            <Folder className=\"h-5 w-5 text-muted-foreground\" />\n          )}\n        </div>\n\n        {/* Category Image (if available) */}\n        {category.image && (\n          <img\n            src={category.image}\n            alt={category.name}\n            className=\"w-6 h-6 rounded object-cover flex-shrink-0\"\n          />\n        )}\n\n        {/* Category Name */}\n        <span className={cn('flex-1 font-medium text-sm', isSelected && 'font-semibold')}>\n          {category.name}\n        </span>\n\n        {/* Product Count */}\n        {showProductCount && category.productCount !== undefined && (\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {category.productCount}\n          </Badge>\n        )}\n\n        {/* Status Badge */}\n        {!category.isActive && (\n          <Badge variant=\"outline\" className=\"text-xs\">\n            ·∫®n\n          </Badge>\n        )}\n\n        {/* Actions */}\n        {showActions && (\n          <div className=\"flex-shrink-0 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n            <Button\n              type=\"button\"\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-7 w-7\"\n              onClick={handleAddChild}\n              title=\"Th√™m danh m·ª•c con\"\n            >\n              <Plus className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              type=\"button\"\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-7 w-7\"\n              onClick={handleEdit}\n              title=\"Ch·ªânh s·ª≠a\"\n            >\n              <Edit className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              type=\"button\"\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-7 w-7 text-red-500 hover:text-red-600\"\n              onClick={handleDelete}\n              title=\"X√≥a\"\n            >\n              <Trash2 className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Children */}\n      {hasChildren && isExpanded && (\n        <div>\n          {category.children!.map((child) => (\n            <CategoryTreeItem\n              key={child.id}\n              category={child}\n              level={level + 1}\n              selectedId={selectedId}\n              onSelect={onSelect}\n              onEdit={onEdit}\n              onDelete={onDelete}\n              onAddChild={onAddChild}\n              showActions={showActions}\n              showProductCount={showProductCount}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Simple category list view (alternative to tree)\ninterface CategoryListProps {\n  categories: Category[];\n  selectedId?: string;\n  onSelect?: (category: Category) => void;\n  className?: string;\n}\n\nexport function CategoryList({\n  categories,\n  selectedId,\n  onSelect,\n  className,\n}: CategoryListProps) {\n  return (\n    <div className={cn('space-y-1', className)}>\n      {categories.map((category) => (\n        <button\n          key={category.id}\n          onClick={() => onSelect?.(category)}\n          className={cn(\n            'w-full flex items-center justify-between px-4 py-3 rounded-md hover:bg-accent transition-colors text-left',\n            selectedId === category.id && 'bg-accent'\n          )}\n        >\n          <div className=\"flex items-center gap-3\">\n            {category.image ? (\n              <img\n                src={category.image}\n                alt={category.name}\n                className=\"w-10 h-10 rounded object-cover\"\n              />\n            ) : (\n              <div className=\"w-10 h-10 rounded bg-primary/10 flex items-center justify-center\">\n                <Folder className=\"h-5 w-5 text-primary\" />\n              </div>\n            )}\n            <div>\n              <p className=\"font-medium\">{category.name}</p>\n              {category.productCount !== undefined && (\n                <p className=\"text-xs text-muted-foreground\">\n                  {category.productCount} s·∫£n ph·∫©m\n                </p>\n              )}\n            </div>\n          </div>\n          {!category.isActive && (\n            <Badge variant=\"outline\" className=\"text-xs\">\n              ·∫®n\n            </Badge>\n          )}\n        </button>\n      ))}\n    </div>\n  );\n}\n\n// Breadcrumb navigation for categories\ninterface CategoryBreadcrumbProps {\n  categories: Category[];\n  className?: string;\n}\n\nexport function CategoryBreadcrumb({ categories, className }: CategoryBreadcrumbProps) {\n  return (\n    <nav className={cn('flex items-center text-sm', className)}>\n      <Link href=\"/shop\" className=\"text-muted-foreground hover:text-foreground transition-colors\">\n        T·∫•t c·∫£ s·∫£n ph·∫©m\n      </Link>\n      {categories.map((category, index) => (\n        <React.Fragment key={category.id}>\n          <ChevronRight className=\"h-4 w-4 mx-1 text-muted-foreground\" />\n          <Link\n            href={`/shop/${category.slug}`}\n            className={cn(\n              'hover:text-foreground transition-colors',\n              index === categories.length - 1 ? 'font-medium' : 'text-muted-foreground'\n            )}\n          >\n            {category.name}\n          </Link>\n        </React.Fragment>\n      ))}\n    </nav>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { Category, CreateCategoryInput, UpdateCategoryInput } from '@/graphql/category.queries';\nimport { useCategoryTree } from '@/hooks/useCategories';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Loader2 } from 'lucide-react';\n\nconst categorySchema = z.object({\n  name: z.string().min(2, 'T√™n danh m·ª•c ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±'),\n  description: z.string().optional(),\n  imageUrl: z.string().url('URL ·∫£nh kh√¥ng h·ª£p l·ªá').optional().or(z.literal('')),\n  parentId: z.string().optional(),\n  displayOrder: z.number().min(0).optional(),\n  isActive: z.boolean().optional(),\n});\n\ntype CategoryFormData = z.infer<typeof categorySchema>;\n\ninterface CategoryFormProps {\n  category?: Category;\n  onSubmit: (data: CreateCategoryInput | UpdateCategoryInput) => Promise<void>;\n  onCancel?: () => void;\n  loading?: boolean;\n  excludeId?: string; // Exclude this category from parent selection (prevent circular reference)\n}\n\nexport function CategoryForm({\n  category,\n  onSubmit,\n  onCancel,\n  loading = false,\n  excludeId,\n}: CategoryFormProps) {\n  const { categoryTree, loading: categoriesLoading } = useCategoryTree();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setValue,\n    watch,\n  } = useForm<CategoryFormData>({\n    resolver: zodResolver(categorySchema),\n    defaultValues: category\n      ? {\n          name: category.name,\n          description: category.description || '',\n          imageUrl: category.image || '',\n          parentId: category.parent?.id || '',\n          displayOrder: category.displayOrder || 0,\n          isActive: category.isActive,\n        }\n      : {\n          displayOrder: 0,\n          isActive: true,\n        },\n  });\n\n  const watchedFields = watch();\n\n  // Flatten category tree for parent selection\n  const flattenCategories = (\n    categories: Category[],\n    level: number = 0,\n    exclude?: string\n  ): Array<Category & { level: number }> => {\n    const result: Array<Category & { level: number }> = [];\n    categories.forEach((cat) => {\n      if (cat.id !== exclude) {\n        result.push({ ...cat, level });\n        if (cat.children && cat.children.length > 0) {\n          result.push(...flattenCategories(cat.children, level + 1, exclude));\n        }\n      }\n    });\n    return result;\n  };\n\n  const flatCategories = React.useMemo(\n    () => flattenCategories(categoryTree, 0, excludeId || category?.id),\n    [categoryTree, excludeId, category?.id]\n  );\n\n  const handleFormSubmit = async (data: CategoryFormData) => {\n    // Remove empty parentId and map imageUrl to image\n    const submitData = {\n      ...data,\n      parentId: data.parentId || undefined,\n      image: data.imageUrl || undefined,\n      description: data.description || undefined,\n    };\n    // Remove imageUrl from submitData as it's renamed to image\n    delete (submitData as any).imageUrl;\n    await onSubmit(submitData as any);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Th√¥ng tin danh m·ª•c</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Name */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">T√™n danh m·ª•c *</Label>\n            <Input\n              id=\"name\"\n              {...register('name')}\n              placeholder=\"Nh·∫≠p t√™n danh m·ª•c\"\n            />\n            {errors.name && (\n              <p className=\"text-sm text-red-500\">{errors.name.message}</p>\n            )}\n          </div>\n\n          {/* Description */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">M√¥ t·∫£</Label>\n            <Textarea\n              id=\"description\"\n              {...register('description')}\n              placeholder=\"M√¥ t·∫£ v·ªÅ danh m·ª•c\"\n              rows={4}\n            />\n            {errors.description && (\n              <p className=\"text-sm text-red-500\">{errors.description.message}</p>\n            )}\n          </div>\n\n          {/* Image URL */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"imageUrl\">URL ·∫£nh</Label>\n            <Input\n              id=\"imageUrl\"\n              {...register('imageUrl')}\n              placeholder=\"https://example.com/image.jpg\"\n            />\n            {errors.imageUrl && (\n              <p className=\"text-sm text-red-500\">{errors.imageUrl.message}</p>\n            )}\n            {watchedFields.imageUrl && (\n              <div className=\"mt-2\">\n                <img\n                  src={watchedFields.imageUrl}\n                  alt=\"Preview\"\n                  className=\"w-32 h-32 object-cover rounded border\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n              </div>\n            )}\n          </div>\n\n          {/* Parent Category */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"parentId\">Danh m·ª•c cha</Label>\n            <Select\n              value={watchedFields.parentId || 'none'}\n              onValueChange={(value) => setValue('parentId', value === 'none' ? '' : value)}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Ch·ªçn danh m·ª•c cha (t√πy ch·ªçn)\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"none\">Kh√¥ng c√≥ (danh m·ª•c g·ªëc)</SelectItem>\n                {categoriesLoading ? (\n                  <div className=\"p-2 text-center text-sm\">ƒêang t·∫£i...</div>\n                ) : (\n                  flatCategories.map((cat) => (\n                    <SelectItem key={cat.id} value={cat.id}>\n                      {'‚Äî'.repeat(cat.level)} {cat.name}\n                    </SelectItem>\n                  ))\n                )}\n              </SelectContent>\n            </Select>\n            {errors.parentId && (\n              <p className=\"text-sm text-red-500\">{errors.parentId.message}</p>\n            )}\n          </div>\n\n          {/* Display Order */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"displayOrder\">Th·ª© t·ª± hi·ªÉn th·ªã</Label>\n            <Input\n              id=\"displayOrder\"\n              type=\"number\"\n              {...register('displayOrder', { valueAsNumber: true })}\n              placeholder=\"0\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              S·ªë th·ª© t·ª± hi·ªÉn th·ªã (s·ªë nh·ªè h∆°n s·∫Ω hi·ªÉn th·ªã tr∆∞·ªõc)\n            </p>\n            {errors.displayOrder && (\n              <p className=\"text-sm text-red-500\">{errors.displayOrder.message}</p>\n            )}\n          </div>\n\n          {/* Is Active */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"isActive\">Tr·∫°ng th√°i ho·∫°t ƒë·ªông</Label>\n              <p className=\"text-xs text-muted-foreground\">\n                Danh m·ª•c s·∫Ω hi·ªÉn th·ªã tr√™n website khi ƒë∆∞·ª£c k√≠ch ho·∫°t\n              </p>\n            </div>\n            <Switch\n              id=\"isActive\"\n              checked={watchedFields.isActive}\n              onCheckedChange={(checked) => setValue('isActive', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Category Preview */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Xem tr∆∞·ªõc</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"border rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              {watchedFields.imageUrl ? (\n                <img\n                  src={watchedFields.imageUrl}\n                  alt=\"Preview\"\n                  className=\"w-12 h-12 rounded object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n              ) : (\n                <div className=\"w-12 h-12 rounded bg-primary/10 flex items-center justify-center\">\n                  <span className=\"text-lg\">üìÅ</span>\n                </div>\n              )}\n              <div className=\"flex-1\">\n                <h4 className=\"font-medium\">\n                  {watchedFields.name || 'T√™n danh m·ª•c'}\n                </h4>\n                {watchedFields.description && (\n                  <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                    {watchedFields.description}\n                  </p>\n                )}\n              </div>\n              <div className=\"text-right\">\n                <div className={`text-xs ${watchedFields.isActive ? 'text-green-600' : 'text-gray-400'}`}>\n                  {watchedFields.isActive ? '‚úì Ho·∫°t ƒë·ªông' : '‚úó Kh√¥ng ho·∫°t ƒë·ªông'}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Th·ª© t·ª±: {watchedFields.displayOrder || 0}\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Actions */}\n      <div className=\"flex justify-end gap-3\">\n        {onCancel && (\n          <Button type=\"button\" variant=\"outline\" onClick={onCancel} disabled={loading}>\n            H·ªßy\n          </Button>\n        )}\n        <Button type=\"submit\" disabled={loading}>\n          {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n          {category ? 'C·∫≠p nh·∫≠t' : 'T·∫°o m·ªõi'}\n        </Button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QCDA,EAAA,CAAA,CAAA,QAEA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCHA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAuBO,SAAS,EAAa,CAC3B,YAAU,CACV,YAAU,CACV,UAAQ,QACR,CAAM,UACN,CAAQ,YACR,CAAU,aACV,GAAc,CAAK,kBACnB,GAAmB,CAAI,WACvB,CAAS,CACS,EAClB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,YAAa,YAC7B,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,SAAU,EACV,MAAO,EACP,WAAY,EACZ,SAAU,EACV,OAAQ,EACR,SAAU,EACV,WAAY,EACZ,YAAa,EACb,iBAAkB,GATb,EAAS,EAAE,IAc1B,CAcA,SAAS,EAAiB,UACxB,CAAQ,OACR,CAAK,YACL,CAAU,CACV,UAAQ,QACR,CAAM,UACN,CAAQ,YACR,CAAU,aACV,CAAW,kBACX,CAAgB,CACM,EACtB,GAAM,CAAC,EAAY,EAAc,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,EAAQ,GACrD,CADyD,CAC3C,EAAS,QAAQ,EAAI,EAAS,QAAQ,CAAC,KADiC,CAC3B,CAAG,EAC9D,EAAa,IAAe,EAAS,EAAE,CA0B7C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,sGACA,GAAc,YACd,CAAC,EAAS,QAAQ,EAAI,cAExB,MAAO,CAAE,YAAa,CAAA,EAAG,AAAQ,KAAK,EAAE,EAAE,CAAC,AAAC,EAC5C,QA5Be,CA4BN,IA3Bb,IAAW,EACb,YA6BM,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAtCa,AAAC,CAsCL,GArCf,EAAE,eAAe,GACjB,EAAc,CAAC,EACjB,EAoCQ,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,iHACA,CAAC,GAAe,sBAGjB,IACE,EACC,CAAA,EAAA,EAAA,GAAA,CADF,CACG,EAAA,WAAW,CAAA,CAAC,UAAU,YAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,YACzB,GAIL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBACZ,GAAc,EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,oCAKrB,EAAS,KAAK,EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAS,KAAK,CACnB,IAAK,EAAS,IAAI,CAClB,UAAU,+CAKd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAAG,6BAA8B,GAAc,0BAC7D,EAAS,IAAI,GAIf,QAA8C,IAA1B,EAAS,YAAY,EACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,mBAClC,EAAS,YAAY,GAKzB,CAAC,EAAS,QAAQ,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAAU,OAM9C,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uGACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,KAAK,OACL,QAAQ,QACR,UAAU,UACV,QA9EW,AAAC,CA8EH,GA7EnB,EAAE,eAAe,GACjB,IAAa,EACf,EA4EY,MAAM,6BAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,cAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,KAAK,OACL,QAAQ,QACR,UAAU,UACV,QAlGO,AAAC,CAkGC,GAjGnB,EAAE,eAAe,GACjB,IAAS,EACX,EAgGY,MAAM,qBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,cAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,KAAK,OACL,QAAQ,QACR,UAAU,0CACV,QAvGU,AAAD,CAuGA,GAtGnB,EAAE,eAAe,GACjB,IAAW,EACb,EAqGY,MAAM,eAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,oBAOzB,GAAe,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACE,EAAS,QAAQ,CAAE,GAAG,CAAC,AAAC,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,SAAU,EACV,MAAO,EAAQ,EACf,WAAY,EACZ,SAAU,EACV,OAAQ,EACR,SAAU,EACV,WAAY,EACZ,YAAa,EACb,iBAAkB,GATb,EAAM,EAAE,OAgB3B,CCxOA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAIA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAOA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QAEA,IAAM,EAAiB,EAAA,MAAQ,CAAC,CAC9B,KAAM,EAAA,MAAQ,GAAG,GAAG,CAAC,EAAG,wCACxB,YAAa,EAAA,MAAQ,GAAG,QAAQ,GAChC,SAAU,EAAA,MAAQ,GAAG,GAAG,CAAC,wBAAwB,QAAQ,GAAG,EAAE,CAAC,EAAA,OAAS,CAAC,KACzE,SAAU,EAAA,MAAQ,GAAG,QAAQ,GAC7B,aAAc,EAAA,MAAQ,GAAG,GAAG,CAAC,GAAG,QAAQ,GACxC,SAAU,EAAA,OAAS,GAAG,QAAQ,EAChC,GAYO,SAAS,EAAa,UAC3B,CAAQ,UACR,CAAQ,UACR,CAAQ,SACR,GAAU,CAAK,WACf,CAAS,CACS,EAClB,GAAM,cAAE,CAAY,CAAE,QAAS,CAAiB,CAAE,CAAG,CAAA,EAAA,EAAA,eAAe,AAAf,IAE/C,UACJ,CAAQ,cACR,CAAY,CACZ,UAAW,QAAE,CAAM,CAAE,UACrB,CAAQ,OACR,CAAK,CACN,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,EAAmB,CAC5B,SAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,GACtB,cAAe,EACX,CACE,KAAM,EAAS,IAAI,CACnB,YAAa,EAAS,WAAW,EAAI,GACrC,SAAU,EAAS,KAAK,EAAI,GAC5B,SAAU,EAAS,MAAM,EAAE,IAAM,GACjC,aAAc,EAAS,YAAY,EAAI,EACvC,SAAU,EAAS,QAAQ,AAC7B,EACA,CACE,aAAc,EACd,UAAU,CACZ,CACN,GAEM,EAAgB,IAGhB,EAAoB,CACxB,EACA,EAAgB,CAAC,CACjB,KAEA,IAAM,EAA8C,EAAE,CAStD,OARA,EAAW,OAAO,CAAC,AAAC,IACd,EAAI,EAAE,GAAK,IACb,EAAO,GADe,CACX,CAAC,CAAE,GAAG,CAAG,OAAE,CAAM,GACxB,EAAI,QAAQ,EAAI,EAAI,QAAQ,CAAC,MAAM,CAAG,GACxC,AAD2C,EACpC,IAAI,IAAI,EAAkB,EAAI,QAAQ,CAAE,EAAQ,EAAG,IAGhE,GACO,CACT,EAEM,EAAiB,EAAA,OAAK,CAAC,OAAO,CAClC,IAAM,EAAkB,EAAc,EAAG,GAAa,GAAU,IAChE,CAAC,EAAc,EAAW,GAAU,GAAG,EAGnC,EAAmB,MAAO,IAE9B,IAAM,EAAa,CACjB,GAAG,CAAI,CACP,SAAU,EAAK,QAAQ,OAAI,EAC3B,MAAO,EAAK,QAAQ,EAAI,OACxB,YAAa,EAAK,WAAW,OAAI,CACnC,CAEA,QAAQ,EAAmB,QAAQ,CACnC,MAAM,EAAS,EACjB,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAa,GAAmB,UAAU,sBACxD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,yBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,gBAAO,mBACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,OACF,GAAG,EAAS,OAAO,CACpB,YAAY,sBAEb,EAAO,IAAI,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,IAAI,CAAC,OAAO,MAK5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,UAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,cACF,GAAG,EAAS,cAAc,CAC3B,YAAY,oBACZ,KAAM,IAEP,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,WAAW,CAAC,OAAO,MAKnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,YAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,WACF,GAAG,EAAS,WAAW,CACxB,YAAY,kCAEb,EAAO,QAAQ,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,QAAQ,CAAC,OAAO,GAE7D,EAAc,QAAQ,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAc,QAAQ,CAC3B,IAAI,UACJ,UAAU,wCACV,QAAS,AAAC,IACR,EAAE,aAAa,CAAC,KAAK,CAAC,OAAO,CAAG,MAClC,SAOR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,iBAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,MAAO,EAAc,QAAQ,EAAI,OACjC,cAAe,AAAC,GAAU,EAAS,WAAsB,SAAV,EAAmB,GAAK,aAEvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,mCAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,gBAAO,4BACxB,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAA0B,gBAEzC,EAAe,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAc,MAAO,EAAI,EAAE,WACnC,IAAI,MAAM,CAAC,EAAI,KAAK,EAAE,IAAE,EAAI,IAAI,GADlB,EAAI,EAAE,SAO9B,EAAO,QAAQ,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,QAAQ,CAAC,OAAO,MAKhE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,wBAAe,oBAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,SACJ,GAAG,EAAS,eAAgB,CAAE,eAAe,CAAK,EAAE,CACrD,YAAY,MAEd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,sDAG5C,EAAO,YAAY,EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,YAAY,CAAC,OAAO,MAKpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,yBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,4DAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,GAAG,WACH,QAAS,EAAc,QAAQ,CAC/B,gBAAiB,AAAC,GAAY,EAAS,WAAY,cAO3D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,gBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACZ,EAAc,QAAQ,CACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAc,QAAQ,CAC3B,IAAI,UACJ,UAAU,iCACV,QAAS,AAAC,IACR,EAAE,aAAa,CAAC,KAAK,CAAC,OAAO,CAAG,MAClC,IAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,SAG9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBACX,EAAc,IAAI,EAAI,iBAExB,EAAc,WAAW,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDACV,EAAc,WAAW,MAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,EAAc,QAAQ,CAAG,iBAAmB,gBAAA,CAAiB,UACrF,EAAc,QAAQ,CAAG,cAAgB,sBAE5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CAAgC,WACpC,EAAc,YAAY,EAAI,kBASnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAAS,EAAU,SAAU,WAAS,QAIhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,YAC7B,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,8BAC9B,EAAW,WAAa,kBAKnC,CHvRA,IAAA,EAAA,EAAA,CAAA,CAAA,QAGA,EAAA,EAAA,CAAA,CAAA,0BAMA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAIe,SAAS,IACP,CAAA,EAAA,EAAA,SAAA,AAAS,IACxB,GAAM,CAAC,EAAY,EAAc,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAa,MACzD,CAAC,EAAkB,EAAoB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAkB,MAC1E,CAAC,EAAgB,EAAkB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAkB,MACtE,CAAC,EAAkB,EAAoB,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GAEzD,cAAE,CAAY,SAAE,CAAO,OAAE,CAAK,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,eAAe,AAAf,IAC5C,gBAAE,CAAc,CAAE,QAAS,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,iBAAA,AAAiB,IACzD,gBAAE,CAAc,CAAE,QAAS,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,iBAAA,AAAiB,IACzD,gBAAE,CAAc,CAAE,QAAS,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,iBAAA,AAAiB,IAEzD,EAAe,KACnB,EAAoB,MACpB,EAAkB,MAClB,EAAc,SAChB,EAaM,EAAoB,MAAO,IAC/B,GAAI,CACF,MAAM,EAAe,EAAS,EAAE,EAChC,EAAA,KAAK,CAAC,OAAO,CAAC,CAAC,uBAAiB,EAAE,EAAS,IAAI,CAAC,CAAC,CAAC,EAClD,GACF,CAAE,MAAO,EAAY,CACnB,EAAA,KAAK,CAAC,KAAK,CAAC,EAAM,OAAO,EAAI,wBAC7B,QAAQ,KAAK,CAAC,EAChB,CACF,EAEM,EAAe,MAAO,IAC1B,GAAI,CACF,GAAI,AAAe,cAA2B,iBAAf,EAA+B,CAC5D,IAAM,EAA6B,CACjC,GAAI,CAAI,CACR,SAAyB,iBAAf,EAAgC,GAAgB,GAAK,EAAK,QAAQ,AAC9E,CACA,OAAM,EAAe,GACrB,EAAA,KAAK,CAAC,OAAO,CAAC,2BAChB,KAA0B,EAAnB,OAAI,GAAyB,IAClC,MAAM,EAAe,EAAiB,EAAE,CAAE,CADU,EAEpD,EAAA,KAAK,CAAC,OAAO,CAAC,kCAEhB,EAAc,MACd,EAAoB,MACpB,EAAkB,MAClB,GACF,CAAE,MAAO,EAAY,CACnB,EAAA,KAAK,CAAC,KAAK,CAAC,EAAM,OAAO,EAAI,wBAC7B,QAAQ,KAAK,CAAC,EAChB,CACF,EAEM,EAAe,KACnB,EAAc,MACd,EAAoB,MACpB,EAAkB,KACpB,EAEM,EAAe,UACnB,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,eAC7B,EAAa,yCAA0C,OAAA,CAAQ,WAAY,KAAO,yBAClF,EAAW,MAAM,MAAM,CAAA,EAAG,EAAW,kCAAkC,CAAC,CAAE,CAC9E,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACpC,CACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,iBAElC,IAAM,EAAO,MAAM,EAAS,IAAI,GAC1B,EAAM,OAAO,GAAG,CAAC,eAAe,CAAC,GACjC,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,KAAK,CAAC,CACzC,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAE,KAAK,GACP,OAAO,GAAG,CAAC,eAAe,CAAC,GAC3B,SAAS,IAAI,CAAC,WAAW,CAAC,GAE1B,EAAA,KAAK,CAAC,OAAO,CAAC,gCAChB,CAAE,MAAO,EAAO,CACd,EAAA,KAAK,CAAC,KAAK,CAAC,4BACd,CACF,EAEM,EAAkB,EAAA,OAAK,CAAC,OAAO,CAAC,KACpC,IAAM,EAAkB,AAAC,GAChB,EAAW,MAAM,CAAC,CAAC,EAAO,IACxB,EAAQ,GAAK,CAAD,CAAK,QAAQ,CAAG,EAAgB,EAAI,QAAQ,GAAI,CAAC,CACnE,GAEL,OAAO,EAAgB,EACzB,EAAG,CAAC,EAAa,EAEX,EAAmB,EAAA,OAAK,CAAC,OAAO,CAAC,KACrC,IAAM,EAAe,AAAD,GACX,EAAW,MAAM,CAAC,CAAC,EAAO,IAE7B,MACC,EAAD,AAAK,QAAQ,EACZ,CADe,CACX,GADe,CAAC,IACrB,AAAa,CAAG,EAAY,EAAI,QAAQ,GAAI,CAAC,CAE9C,GAEL,OAAO,EAAY,EACrB,EAAG,CAAC,EAAa,EAEjB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,qBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qCAI5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,GAAoB,aAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,kBAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,YACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,kBAGvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,YACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,4BAOvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,oBAInE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,SAGzC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,qBAInE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACZ,SAIP,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,sBAInE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACZ,EAAkB,YAO3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,UAAU,YAAY,oBAItC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,wCAEnB,EACF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CAAiC,QACxC,EAAM,OAAO,IAEnB,AAAwB,MAAX,MAAM,CACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,yBAG1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,YACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,8BAKrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,WAAY,EACZ,WAAY,GAAkB,GAC9B,SAAU,EACV,OArMQ,AAAD,CAqMC,GApMlB,EAAoB,GACpB,EAAc,OAChB,EAmMY,SAAU,EACV,WAlMW,AAAC,CAkMA,GAjMtB,EAAkB,GAClB,EAAoB,MACpB,EAAc,eAChB,EA+LY,WAAW,CAAA,CAAA,EACX,gBAAgB,CAAA,CAAA,SAOxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAqB,OAAf,EAAqB,aAAc,IAAM,aACrD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mDACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,UACX,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACM,WAAf,GAA2B,mBACZ,iBAAf,GACC,CAAC,sBAAsB,EAAE,GAAgB,KAAK,CAAC,CAAC,CAClC,SAAf,GAAyB,CAAC,WAAW,EAAE,GAAkB,KAAK,CAAC,CAAC,MAGrE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,SAAU,QAAoB,EAC9B,SAAU,EACV,SAAU,EACV,QAAS,GAAY,EACrB,UAAW,GAAkB,UAMnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,kBAAkB,CAAA,CACjB,KAAM,EACN,aAAc,EACd,MAAM,2BACN,YAAY,uEACZ,YAAY,uCACZ,UAAU,qCACV,gBAAiB,KACf,IACA,EAAA,KAAK,CAAC,OAAO,CAAC,6BAChB,MAIR"}
module.exports=[55211,10292,a=>{"use strict";var b=a.i(651332),c=a.i(803212);let d=a=>[c.BlockType.CONTAINER,c.BlockType.SECTION,c.BlockType.GRID,c.BlockType.FLEX_ROW,c.BlockType.FLEX_COLUMN].includes(a),e=a=>!!a&&d(a.type),f=a=>a?.children?[...a.children].sort((a,b)=>a.order-b.order):[];function g({parentBlock:a,onUpdateChild:c,onDeleteChild:d,onReorderChildren:g,onAddChild:h}){let i=(0,b.useMemo)(()=>f(a),[a?.id,a?.children?.length,a?.children?.map(a=>a.order).join(",")]),j=(0,b.useMemo)(()=>i.length,[i.length]),k=(0,b.useMemo)(()=>e(a),[a?.type]),l=(0,b.useMemo)(()=>i.map(a=>a.id),[i]),m=(0,b.useCallback)((b,d,e)=>{a?.id&&(i.some(a=>a.id===b)?c?.(b,d,e):console.warn(`Child block ${b} not found in parent ${a.id}`))},[a?.id,i,c]),n=(0,b.useCallback)(b=>{a?.id&&(i.some(a=>a.id===b)?d?.(b):console.warn(`Child block ${b} not found in parent ${a.id}`))},[a?.id,i,d]),o=(0,b.useCallback)(b=>{if(!a?.id)return;let c=new Set(i.map(a=>a.id)),d=b.filter(a=>!c.has(a));d.length>0?console.warn(`Invalid child IDs in reorder: ${d.join(", ")}`):b.length!==i.length?console.warn(`Reorder IDs count (${b.length}) doesn't match children count (${i.length})`):g?.(a.id,b)},[a?.id,i,g]);return{sortedChildren:i,childrenCount:j,canAddChildren:k,childrenIds:l,handleUpdateChild:m,handleDeleteChild:n,handleReorderChildren:o}}function h({parentId:a,isContainerType:c,isDraggedBlockId:d}){let e=(0,b.useMemo)(()=>d!==a&&c,[a,c,d]);return{canDrop:e,droppableId:(0,b.useMemo)(()=>`nested-container-${a}`,[a]),dropData:(0,b.useMemo)(()=>({type:"nested-container",parentId:a}),[a])}}a.s(["canHaveChildren",0,e,"getSortedChildren",0,f,"isContainerBlockType",0,d],10292),a.s(["useNestedBlockRenderer",()=>g,"useNestedDropZone",()=>h],55211)},633463,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(44445),e=a.i(325521),f=a.i(558767),g=a.i(723593),h=a.i(79028),i=a.i(202979),j=a.i(478184),k=a.i(441405),l=a.i(144932),m=a.i(55211),n=a.i(10292);a.s(["ContainerBlock",0,({block:a,isEditable:o=!0,onUpdate:p,onDelete:q,onAddChild:r,onUpdateChild:s,onDeleteChild:t,children:u})=>{let v=a.content,[w,x]=c.default.useState(!1),[y,z]=c.default.useState(!1),[A,B]=c.default.useState(v||{layout:"stack",gap:16,padding:16,backgroundColor:"transparent",maxWidth:"100%",alignment:"left"}),{droppableId:C,dropData:D}=(0,m.useNestedDropZone)({parentId:a.id,isContainerType:(0,n.isContainerBlockType)(a.type)}),{setNodeRef:E,isOver:F,active:G}=(0,d.useDroppable)({id:C,data:D}),{sortedChildren:H,childrenCount:I,canAddChildren:J}=(0,m.useNestedBlockRenderer)({parentBlock:a,onUpdateChild:s,onDeleteChild:t});c.default.useEffect(()=>{console.log(`[ContainerBlock ${a.id}] Debug:`,{canAddChildren:J,onAddChildDefined:!!r,onAddChildFunc:r,childrenCount:I,blockType:a.type})},[J,r,I,a.id,a.type]);let K={display:"flex",flexDirection:"stack"===v.layout?"column":"wrap"===v.layout?"row":"column",flexWrap:"wrap"===v.layout?"wrap":"nowrap",gap:`${v.gap||16}px`,padding:`${v.padding||16}px`,backgroundColor:v.backgroundColor||"transparent",maxWidth:v.maxWidth||"100%",alignItems:"center"===v.alignment?"center":"right"===v.alignment?"flex-end":"flex-start",width:"100%",position:"relative",minHeight:u&&c.default.Children.count(u)>0?"auto":"100px",border:o?"2px dashed #ccc":"none",borderRadius:"8px",overflow:"scroll"===v.layout?"auto":"visible"};return(0,b.jsxs)("div",{ref:E,style:K,className:`group transition-all duration-200 ${F?"ring-2 ring-blue-500 bg-blue-50 scale-105":"hover:ring-2 hover:ring-gray-300"}`,onMouseEnter:()=>z(!0),onMouseLeave:()=>z(!1),children:[o&&(y||w)&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2 z-10 animate-in fade-in duration-200",children:[!1,J&&r?(0,b.jsxs)(i.Button,{size:"sm",variant:J&&r?"outline":"destructive",onClick:()=>{console.log(`[ContainerBlock ${a.id}] Add Child clicked:`,{canAddChildren:J,hasOnAddChild:!!r,block:a.id}),r?r(a.id):console.error("[ContainerBlock] onAddChild is undefined!")},className:"bg-white shadow-sm hover:shadow-md",title:`Add child block (${I} nested) - canAdd: ${J}`,children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4 mr-1"}),(0,b.jsxs)("span",{className:"text-xs",children:["Add ",J?"Child":"- canAdd=false"]})]}):null,!1,!1,(0,b.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>x(!w),className:"bg-white shadow-sm hover:shadow-md",title:"Edit container settings",children:(0,b.jsx)(e.Settings,{className:"w-4 h-4"})}),(0,b.jsx)(i.Button,{size:"sm",variant:"destructive",onClick:q,className:"shadow-sm hover:shadow-md",title:"Delete container",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]}),F&&(0,b.jsx)("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-50",children:(0,b.jsx)("div",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold shadow-lg",children:"ðŸ“ Drop here to add nested block"})}),w&&(0,b.jsxs)("div",{className:"absolute top-12 right-2 bg-white p-4 rounded-lg shadow-xl border border-gray-200 z-20 w-80 max-h-96 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3 text-sm",children:"Container Settings"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Layout"}),(0,b.jsxs)(l.Select,{value:A.layout||"stack",onValueChange:a=>B({...A,layout:a}),children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"stack",children:"Stack (Vertical)"}),(0,b.jsx)(l.SelectItem,{value:"wrap",children:"Wrap (Horizontal)"}),(0,b.jsx)(l.SelectItem,{value:"scroll",children:"Scroll"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Gap (px)"}),(0,b.jsx)(j.Input,{type:"number",value:A.gap||16,onChange:a=>B({...A,gap:parseInt(a.target.value)}),className:"text-xs"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Padding (px)"}),(0,b.jsx)(j.Input,{type:"number",value:A.padding||16,onChange:a=>B({...A,padding:parseInt(a.target.value)}),className:"text-xs"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Background Color"}),(0,b.jsx)(j.Input,{type:"text",placeholder:"#ffffff or transparent",value:A.backgroundColor||"transparent",onChange:a=>B({...A,backgroundColor:a.target.value}),className:"text-xs"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Max Width"}),(0,b.jsx)(j.Input,{type:"text",placeholder:"100% or 800px",value:A.maxWidth||"100%",onChange:a=>B({...A,maxWidth:a.target.value}),className:"text-xs"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-xs",children:"Alignment"}),(0,b.jsxs)(l.Select,{value:A.alignment||"left",onValueChange:a=>B({...A,alignment:a}),children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"left",children:"Left"}),(0,b.jsx)(l.SelectItem,{value:"center",children:"Center"}),(0,b.jsx)(l.SelectItem,{value:"right",children:"Right"})]})]})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,b.jsxs)("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,b.jsx)(h.Package,{className:"w-3 h-3"}),I," nested block",1!==I?"s":""]})}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)(i.Button,{onClick:()=>{p(A),x(!1)},className:"flex-1 text-xs py-1",size:"sm",children:"Save"}),(0,b.jsx)(i.Button,{onClick:()=>x(!1),variant:"outline",className:"flex-1 text-xs py-1",size:"sm",children:"Cancel"})]})]})]}),u?(0,b.jsx)("div",{className:"nested-children-wrapper w-full",children:u}):(0,b.jsxs)("div",{className:`empty-state text-center py-8 transition-colors duration-200 border-2 border-dashed rounded-lg ${F?"text-blue-600 border-blue-400 bg-blue-50":"text-gray-400 border-gray-300 bg-gray-50/50"}`,children:[(0,b.jsx)(h.Package,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"No nested blocks yet"}),(0,b.jsx)("p",{className:"text-xs mt-1 opacity-75",children:'Drop blocks here or click "Add Child" to add nested content'}),!1,!1]})]})}])}];

//# sourceMappingURL=frontend_src_1bba0716._.js.map
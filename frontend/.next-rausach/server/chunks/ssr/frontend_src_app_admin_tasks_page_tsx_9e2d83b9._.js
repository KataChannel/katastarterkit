module.exports=[386346,a=>{"use strict";var b=a.i(321248),c=a.i(651332),d=a.i(40947),e=a.i(53627),f=a.i(723593),g=a.i(629432),h=a.i(969721),h=h,i=a.i(202979),j=a.i(478184),k=a.i(751075),l=a.i(293470);function m({totalTasks:a,onCreateTask:c,onSearch:d,searchQuery:e,onFilterChange:m}){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and organize your tasks efficiently"})]}),(0,b.jsxs)(i.Button,{onClick:c,size:"default",className:"gap-2",children:[(0,b.jsx)(f.Plus,{className:"h-4 w-4"}),"Create Task"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(j.Input,{type:"search",placeholder:"Search tasks...",value:e,onChange:a=>d(a.target.value),className:"pl-9"})]}),(0,b.jsxs)(k.DropdownMenu,{children:[(0,b.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(h.default,{className:"h-4 w-4"}),"Filters"]})}),(0,b.jsxs)(k.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,b.jsx)(k.DropdownMenuLabel,{children:"Filter by"}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsx)(k.DropdownMenuItem,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:"Status"}),(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-2",children:"All"})]})}),(0,b.jsx)(k.DropdownMenuItem,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:"Priority"}),(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-2",children:"All"})]})}),(0,b.jsx)(k.DropdownMenuItem,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:"Category"}),(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-2",children:"All"})]})}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsx)(k.DropdownMenuItem,{className:"text-destructive",children:"Clear all filters"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted rounded-md",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:1===a?"task":"tasks"})]})]})]})}var n=a.i(890082),o=a.i(753748),p=a.i(411185),q=a.i(327987),r=a.i(57597),s=a.i(395992),t=a.i(975780),u=a.i(422171);function v({stats:a}){let c=[{title:"Total Tasks",value:a.total,icon:s.Target,description:"All tasks",color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Pending",value:a.pending,icon:o.Circle,description:"Not started yet",color:"text-gray-600",bgColor:"bg-gray-50"},{title:"In Progress",value:a.inProgress,icon:p.Clock,description:"Currently working on",color:"text-amber-600",bgColor:"bg-amber-50"},{title:"Completed",value:a.completed,icon:n.CheckCircle2,description:"Successfully done",color:"text-green-600",bgColor:"bg-green-50"},{title:"High Priority",value:a.highPriority,icon:q.AlertCircle,description:"Urgent tasks",color:"text-red-600",bgColor:"bg-red-50"},{title:"Completion Rate",value:a.total>0?`${Math.round(a.completed/a.total*100)}%`:"0%",icon:r.TrendingUp,description:"Overall progress",color:"text-purple-600",bgColor:"bg-purple-50"}];return(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:c.map((a,c)=>(0,b.jsxs)(t.Card,{className:"overflow-hidden hover:shadow-md transition-shadow",children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:a.title}),(0,b.jsx)("div",{className:(0,u.cn)("p-2 rounded-lg",a.bgColor),children:(0,b.jsx)(a.icon,{className:(0,u.cn)("h-4 w-4",a.color)})})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.value}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.description})]})]},c))})}var w=a.i(681768),x=a.i(363615),y=a.i(144932),z=a.i(785694),A=a.i(426849);function B({filters:a,onFiltersChange:c,myTasksCount:d,sharedTasksCount:e,allTasksCount:f}){let g="all"!==a.status||"all"!==a.priority||"all"!==a.category;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(i.Button,{variant:"all"===a.tab?"default":"outline",size:"sm",onClick:()=>c({...a,tab:"all"}),className:"gap-2",children:["All Tasks",(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-1",children:f})]}),(0,b.jsxs)(i.Button,{variant:"my"===a.tab?"default":"outline",size:"sm",onClick:()=>c({...a,tab:"my"}),className:"gap-2",children:["My Tasks",(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-1",children:d})]}),(0,b.jsxs)(i.Button,{variant:"shared"===a.tab?"default":"outline",size:"sm",onClick:()=>c({...a,tab:"shared"}),className:"gap-2",children:["Shared",(0,b.jsx)(l.Badge,{variant:"secondary",className:"ml-1",children:e})]})]}),(0,b.jsx)(z.Separator,{}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(w.Filter,{className:"h-4 w-4"}),"Filters:"]}),(0,b.jsxs)(y.Select,{value:a.status||"all",onValueChange:b=>c({...a,status:b}),children:[(0,b.jsx)(y.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(y.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(y.SelectItem,{value:A.TaskStatus.PENDING,children:"Pending"}),(0,b.jsx)(y.SelectItem,{value:A.TaskStatus.IN_PROGRESS,children:"In Progress"}),(0,b.jsx)(y.SelectItem,{value:A.TaskStatus.COMPLETED,children:"Completed"}),(0,b.jsx)(y.SelectItem,{value:A.TaskStatus.CANCELLED,children:"Cancelled"})]})]}),(0,b.jsxs)(y.Select,{value:a.priority||"all",onValueChange:b=>c({...a,priority:b}),children:[(0,b.jsx)(y.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(y.SelectValue,{placeholder:"Priority"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:"All Priority"}),(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.LOW,children:"Low"}),(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.MEDIUM,children:"Medium"}),(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.HIGH,children:"High"})]})]}),(0,b.jsxs)(y.Select,{value:a.category||"all",onValueChange:b=>c({...a,category:b}),children:[(0,b.jsx)(y.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(y.SelectValue,{placeholder:"Category"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:"All Categories"}),(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.PERSONAL,children:"Personal"}),(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.WORK,children:"Work"}),(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.STUDY,children:"Study"})]})]}),g&&(0,b.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{c({...a,status:"all",priority:"all",category:"all"})},className:"gap-2",children:[(0,b.jsx)(x.X,{className:"h-4 w-4"}),"Clear filters"]})]})]})}var C=a.i(723989),D=a.i(797945),E=a.i(558767),F=a.i(128348),G=a.i(608722),G=G,H=a.i(251326),I=a.i(585291);let J={[A.TaskPriority.HIGH]:{label:"High",className:"bg-red-100 text-red-800 border-red-200",icon:q.AlertCircle},[A.TaskPriority.MEDIUM]:{label:"Medium",className:"bg-amber-100 text-amber-800 border-amber-200",icon:p.Clock},[A.TaskPriority.LOW]:{label:"Low",className:"bg-blue-100 text-blue-800 border-blue-200",icon:o.Circle}},K={[A.TaskStatus.PENDING]:{label:"Pending",className:"bg-gray-100 text-gray-800",icon:o.Circle},[A.TaskStatus.IN_PROGRESS]:{label:"In Progress",className:"bg-blue-100 text-blue-800",icon:p.Clock},[A.TaskStatus.COMPLETED]:{label:"Completed",className:"bg-green-100 text-green-800",icon:n.CheckCircle2},[A.TaskStatus.CANCELLED]:{label:"Cancelled",className:"bg-red-100 text-red-800",icon:q.AlertCircle}},L={[A.TaskCategory.WORK]:{label:"Work",className:"bg-purple-100 text-purple-800"},[A.TaskCategory.PERSONAL]:{label:"Personal",className:"bg-green-100 text-green-800"},[A.TaskCategory.STUDY]:{label:"Study",className:"bg-indigo-100 text-indigo-800"}};function M({task:a,onEdit:c,onDelete:d,onStatusChange:e}){let f=K[a.status]?.icon||o.Circle,g=J[a.priority]?.icon||o.Circle,h=L[a.category&&a.category in A.TaskCategory?a.category:A.TaskCategory.PERSONAL],j=a.dueDate&&new Date(a.dueDate)<new Date&&a.status!==A.TaskStatus.COMPLETED;return(0,b.jsxs)(t.Card,{className:(0,u.cn)("group hover:shadow-lg transition-all duration-200",j&&"border-red-300"),children:[(0,b.jsx)(t.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg leading-none tracking-tight",children:a.title}),a.isShared&&(0,b.jsxs)(l.Badge,{variant:"outline",className:"gap-1",children:[(0,b.jsx)(G.default,{className:"h-3 w-3"}),"Shared"]})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description})]}),(0,b.jsxs)(k.DropdownMenu,{children:[(0,b.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(C.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(k.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>c?.(a),children:[(0,b.jsx)(D.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>e?.(a.id,A.TaskStatus.PENDING),disabled:a.status===A.TaskStatus.PENDING,children:[(0,b.jsx)(o.Circle,{className:"mr-2 h-4 w-4"}),"Mark as Pending"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>e?.(a.id,A.TaskStatus.IN_PROGRESS),disabled:a.status===A.TaskStatus.IN_PROGRESS,children:[(0,b.jsx)(p.Clock,{className:"mr-2 h-4 w-4"}),"Mark as In Progress"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>e?.(a.id,A.TaskStatus.COMPLETED),disabled:a.status===A.TaskStatus.COMPLETED,children:[(0,b.jsx)(n.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Mark as Completed"]}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>d?.(a.id),className:"text-destructive",children:[(0,b.jsx)(E.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),(0,b.jsx)(t.CardContent,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(l.Badge,{variant:"outline",className:(0,u.cn)("gap-1",K[a.status]?.className||"bg-gray-100 text-gray-800"),children:[(0,b.jsx)(f,{className:"h-3 w-3"}),K[a.status]?.label||"Unknown"]}),(0,b.jsxs)(l.Badge,{variant:"outline",className:(0,u.cn)("gap-1",J[a.priority]?.className||"bg-gray-100 text-gray-800"),children:[(0,b.jsx)(g,{className:"h-3 w-3"}),J[a.priority]?.label||"Unknown"]}),(0,b.jsx)(l.Badge,{variant:"outline",className:h.className,children:h.label})]})}),(0,b.jsxs)(t.CardFooter,{className:"flex items-center justify-between text-sm text-muted-foreground pt-3 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.dueDate&&(0,b.jsxs)("div",{className:(0,u.cn)("flex items-center gap-1",j&&"text-red-600 font-medium"),children:[(0,b.jsx)(F.Calendar,{className:"h-4 w-4"}),(0,I.format)(new Date(a.dueDate),"MMM dd, yyyy"),j&&(0,b.jsx)("span",{className:"text-xs",children:"(Overdue)"})]}),a.isShared&&a.sharedBy&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(H.Avatar,{className:"h-5 w-5",children:[(0,b.jsx)(H.AvatarImage,{src:a.sharedBy.avatar}),(0,b.jsx)(H.AvatarFallback,{className:"text-xs",children:a.sharedBy.username[0].toUpperCase()})]}),(0,b.jsx)("span",{className:"text-xs",children:a.sharedBy.username})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,b.jsx)(p.Clock,{className:"h-3 w-3"}),(0,I.format)(new Date(a.createdAt),"MMM dd")]})]})]})}var N=a.i(733554),O=a.i(132276),O=O;function P({tasks:a,loading:c,onEdit:d,onDelete:e,onStatusChange:f,emptyMessage:g="No tasks found"}){return c?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(N.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading tasks..."})]})}):0===a.length?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,b.jsx)(O.default,{className:"h-12 w-12 text-muted-foreground/50"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-medium text-muted-foreground",children:g}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Create a new task to get started"})]})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsx)(M,{task:a,onEdit:d,onDelete:e,onStatusChange:f},a.id))})}var Q=a.i(111264);let R=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}),S=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}),T=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var U=a.i(387170);let V=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}),W=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var X=a.i(189101);let Y=["image/jpeg","image/png","image/gif","image/webp"],Z=["video/mp4","video/webm","video/ogg"],$=["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],_=({onMediaAdd:a,onMediaRemove:d,existingMedia:e=[],maxFiles:f=10,maxFileSize:g=50,acceptedTypes:h=[...Y,...Z,...$],disabled:i=!1})=>{let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(null),o=a=>Y.includes(a)?A.MediaType.IMAGE:Z.includes(a)?A.MediaType.VIDEO:A.MediaType.DOCUMENT,p=async a=>{if(a.type.startsWith("image/"))return new Promise(b=>{let c=new FileReader;c.onload=a=>b(a.target?.result),c.readAsDataURL(a)})},q=async b=>{let c=Array.from(b);if(e.length+c.length>f)return void X.toast.error(`Chá»‰ c\xf3 thá»ƒ upload tá»‘i Ä‘a ${f} file`);k(!0);let d=[];for(let a of c){if(!h.includes(a.type)){X.toast.error(`File ${a.name} kh\xf4ng Ä‘Æ°á»£c há»— trá»£`);continue}if(a.size>1024*g*1024){X.toast.error(`File ${a.name} qu\xe1 lá»›n (tá»‘i Ä‘a ${g}MB)`);continue}try{let b=await p(a),c={id:`temp-${Date.now()}-${Math.random()}`,file:a,url:URL.createObjectURL(a),type:o(a.type),size:a.size,mimeType:a.type,preview:b};d.push(c)}catch(b){X.toast.error(`Lá»—i xá»­ l\xfd file ${a.name}`)}}d.length>0&&(a(d),X.toast.success(`Ä\xe3 th\xeam ${d.length} file`)),k(!1)},r=(0,c.useCallback)(a=>{if(a.preventDefault(),m(!1),i)return;let b=a.dataTransfer.files;b.length>0&&q(b)},[i,q]),s=(0,c.useCallback)(a=>{a.preventDefault(),i||m(!0)},[i]),t=(0,c.useCallback)(a=>{a.preventDefault(),m(!1)},[]),u=(0,c.useCallback)(async a=>{if(i)return;let b=a.clipboardData.items,c=[];for(let a of Array.from(b))if("file"===a.kind){let b=a.getAsFile();b&&c.push(b)}c.length>0&&await q(c)},[i,q]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${l?"border-blue-500 bg-blue-50":i?"border-gray-200 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,onDrop:r,onDragOver:s,onDragLeave:t,onPaste:u,tabIndex:0,children:[(0,b.jsx)("input",{ref:n,type:"file",multiple:!0,accept:h.join(","),onChange:a=>{let b=a.target.files;b&&b.length>0&&q(b),n.current&&(n.current.value="")},className:"hidden",disabled:i}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(W,{className:"h-12 w-12 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-lg font-medium text-gray-900",children:["KÃ©o tháº£ file vÃ o Ä‘Ã¢y hoáº·c"," ",(0,b.jsx)("button",{type:"button",onClick:()=>n.current?.click(),disabled:i,className:"text-blue-600 hover:text-blue-500 font-medium disabled:text-gray-400",children:"chá»n file"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Há»— trá»£ hÃ¬nh áº£nh, video vÃ  tÃ i liá»‡u. Tá»‘i Ä‘a ",g,"MB má»—i file."]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(V,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Paste (Ctrl+V)"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(W,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Drag & Drop"})]})]})]}),j&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Äang xá»­ lÃ½..."})]})]}),e.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-gray-900",children:["File Ä‘Ã£ chá»n (",e.length,"/",f,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(a=>(0,b.jsxs)("div",{className:"relative bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:a.type===A.MediaType.IMAGE&&a.preview?(0,b.jsx)("img",{src:a.preview,alt:a.file.name,className:"h-12 w-12 object-cover rounded"}):(a=>{switch(a){case A.MediaType.IMAGE:return(0,b.jsx)(R,{className:"h-8 w-8 text-blue-500"});case A.MediaType.VIDEO:return(0,b.jsx)(S,{className:"h-8 w-8 text-purple-500"});case A.MediaType.DOCUMENT:default:return(0,b.jsx)(T,{className:"h-8 w-8 text-gray-500"})}})(a.type)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.file.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["Bytes","KB","MB","GB"][b]})(a.size)}),(0,b.jsx)("p",{className:"text-xs text-gray-400 capitalize",children:a.type.toLowerCase()})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>d(a.id),className:"absolute top-1 right-1 p-1 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:(0,b.jsx)(U.XMarkIcon,{className:"h-4 w-4"})})]},a.id))})]})]})};var aa=a.i(8912),ab=a.i(772213);ab.gql`
  mutation CreateTaskComment($input: CreateTaskCommentInput!) {
    createTaskComment(input: $input) {
      id
      content
      taskId
      userId
      parentId
      user {
        id
        username
        firstName
        lastName
        avatar
      }
      createdAt
      updatedAt
    }
  }
`,ab.gql`
  mutation UpdateTaskComment($id: String!, $input: UpdateTaskCommentInput!) {
    updateTaskComment(id: $id, input: $input) {
      id
      content
      taskId
      userId
      parentId
      user {
        id
        username
        firstName
        lastName
        avatar
      }
      createdAt
      updatedAt
    }
  }
`,ab.gql`
  mutation DeleteTaskComment($id: String!) {
    deleteTaskComment(id: $id)
  }
`;let ac=ab.gql`
  mutation UploadTaskMedia($input: UploadTaskMediaInput!) {
    uploadTaskMedia(input: $input) {
      id
      filename
      url
      type
      size
      mimeType
      caption
      taskId
      uploadedBy
      uploader {
        id
        username
        firstName
        lastName
        avatar
      }
      createdAt
      updatedAt
    }
  }
`;ab.gql`
  mutation DeleteTaskMedia($mediaId: String!) {
    deleteTaskMedia(mediaId: $mediaId)
  }
`,ab.gql`
  query ($id: String!) {
    getTask(id: $id) {
      id
      title
      description
      status
      priority
      dueDate
      category
      userId
      author {
        id
        username
        firstName
        lastName
        avatar
      }
      comments {
        id
        content
        taskId
        userId
        parentId
        user {
          id
          username
          firstName
          lastName
          avatar
        }
        replies {
          id
          content
          taskId
          userId
          parentId
          user {
            id
            username
            firstName
            lastName
            avatar
          }
          createdAt
          updatedAt
        }
        createdAt
        updatedAt
      }
      media {
        id
        filename
        url
        size
        mimeType
        taskId
        uploadedBy
        uploader {
          id
          username
          firstName
          lastName
          avatar
        }
        createdAt
      }
      shares {
        id
        taskId
        permission
        sharedBy
        sharedWith
        sharedByUser {
          id
          username
          firstName
          lastName
          avatar
        }
        sharedWithUser {
          id
          username
          firstName
          lastName
          avatar
        }
        createdAt
      }
      createdAt
      updatedAt
    }
  }
`;var ad=a.i(755820),ae=a.i(441405),af=a.i(466577);let ag=({isOpen:a,onClose:d,onTaskCreated:e})=>{let[f,g]=(0,c.useState)({title:"",description:"",category:A.TaskCategory.PERSONAL,priority:A.TaskPriority.MEDIUM,dueDate:""}),{createTask:h,loading:k}=(0,Q.useTaskMutations)(),{mediaFiles:l,uploading:m,uploadProgress:n,addMediaFiles:o,removeMediaFile:p,clearMediaFiles:q,uploadMedia:r}=((a={})=>{let{maxFiles:b=10,maxFileSize:d=50,onUploadProgress:e,onUploadComplete:f,onUploadError:g}=a,[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(0),[n]=(0,aa.useMutation)(ac),o=(0,c.useCallback)(a=>{i(c=>{let d=[...c,...a];return d.length>b?(X.toast.error(`Chá»‰ c\xf3 thá»ƒ upload tá»‘i Ä‘a ${b} file`),c.slice(0,b)):d})},[b]),p=(0,c.useCallback)(a=>{i(b=>{let c=b.find(b=>b.id===a);return c&&(URL.revokeObjectURL(c.url),c.preview&&URL.revokeObjectURL(c.preview)),b.filter(b=>b.id!==a)})},[]),q=(0,c.useCallback)(()=>{i(a=>(a.forEach(a=>{URL.revokeObjectURL(a.url),a.preview&&URL.revokeObjectURL(a.preview)}),[]))},[]),r=(0,c.useCallback)(async a=>{if(0===h.length)return[];k(!0),m(0);try{let b=[],c=h.length;for(let d=0;d<h.length;d++){let f=h[d];try{let g=(d+1)/c*100;m(g),e?.(g);let h=`temp://media/${Date.now()}-${f.file.name}`,i=await n({variables:{input:{taskId:a,filename:f.file.name,mimeType:f.mimeType,size:f.size,type:f.type,url:h}}});i.data?.uploadTaskMedia&&b.push(i.data.uploadTaskMedia)}catch(b){let a=`Lá»—i upload file ${f.file.name}: ${b}`;X.toast.error(a),g?.(a),console.error("Upload error:",b)}}return q(),f?.(b),b.length>0&&X.toast.success(`Ä\xe3 upload th\xe0nh c\xf4ng ${b.length} file`),b}catch(b){let a=`Lá»—i upload media: ${b}`;throw X.toast.error(a),g?.(a),b}finally{k(!1),m(0)}},[h,e,f,g,q]);return{mediaFiles:h,uploading:j,uploadProgress:l,addMediaFiles:o,removeMediaFile:p,clearMediaFiles:q,uploadMedia:r}})({maxFiles:5,maxFileSize:10}),s=()=>{g({title:"",description:"",category:A.TaskCategory.PERSONAL,priority:A.TaskPriority.MEDIUM,dueDate:""}),q()},t=async a=>{if(a.preventDefault(),!f.title.trim())return void X.toast.error("Vui lÃ²ng nháº­p tiÃªu Ä‘á» task");try{let a={title:f.title.trim(),description:f.description?.trim()||void 0,category:f.category,priority:f.priority,dueDate:f.dueDate||void 0},b=await h(a);if(l.length>0&&b?.id)try{await r(b.id),X.toast.success(`Táº¡o task th\xe0nh c\xf4ng vá»›i ${l.length} file Ä‘\xednh k\xe8m!`)}catch(a){X.toast.success("Táº¡o task thÃ nh cÃ´ng nhÆ°ng cÃ³ lá»—i khi upload file"),console.error("Media upload error:",a)}else X.toast.success("Táº¡o task thÃ nh cÃ´ng!");s(),d(),e?.()}catch(a){console.error("Create task error:",a),X.toast.error(a.message||"Lá»—i khi táº¡o task")}},u=(a,b)=>{g(c=>({...c,[a]:b}))};return(0,b.jsx)(ad.Dialog,{open:a,onOpenChange:a=>{a||s(),d()},children:(0,b.jsxs)(ad.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsx)(ad.DialogHeader,{children:(0,b.jsx)(ad.DialogTitle,{children:"Táº¡o Task Má»›i"})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{htmlFor:"title",children:"TiÃªu Ä‘á» *"}),(0,b.jsx)(j.Input,{id:"title",value:f.title,onChange:a=>u("title",a.target.value),placeholder:"Nháº­p tiÃªu Ä‘á» task...",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{htmlFor:"description",children:"MÃ´ táº£"}),(0,b.jsx)(af.Textarea,{id:"description",value:f.description,onChange:a=>u("description",a.target.value),placeholder:"Nháº­p mÃ´ táº£ chi tiáº¿t...",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{htmlFor:"category",children:"Danh má»¥c"}),(0,b.jsxs)(y.Select,{value:f.category,onValueChange:a=>u("category",a),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{placeholder:"Chá»n danh má»¥c"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.WORK,children:"CÃ´ng viá»‡c"}),(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.PERSONAL,children:"CÃ¡ nhÃ¢n"}),(0,b.jsx)(y.SelectItem,{value:A.TaskCategory.STUDY,children:"Há»c táº­p"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{htmlFor:"priority",children:"Äá»™ Æ°u tiÃªn"}),(0,b.jsxs)(y.Select,{value:f.priority,onValueChange:a=>u("priority",a),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{placeholder:"Chá»n Ä‘á»™ Æ°u tiÃªn"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.LOW,children:"Tháº¥p"}),(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.MEDIUM,children:"Trung bÃ¬nh"}),(0,b.jsx)(y.SelectItem,{value:A.TaskPriority.HIGH,children:"Cao"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{htmlFor:"dueDate",children:"Háº¡n chÃ³t"}),(0,b.jsx)(j.Input,{type:"datetime-local",id:"dueDate",value:f.dueDate,onChange:a=>u("dueDate",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(ae.Label,{children:"File Ä‘Ã­nh kÃ¨m"}),(0,b.jsx)(_,{onMediaAdd:o,onMediaRemove:p,existingMedia:l,maxFiles:5,maxFileSize:10,disabled:k.creating||m}),m&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Äang upload... ",Math.round(n),"%"]})]})]})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t bg-white",children:[(0,b.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{s(),d()},disabled:k.creating,children:"Há»§y"}),(0,b.jsx)(i.Button,{type:"submit",onClick:t,disabled:k.creating||!f.title.trim(),children:k.creating?"Äang táº¡o...":"Táº¡o Task"})]})]})})};var ah=a.i(624461);function ai(){let{isAuthenticated:a,loading:f,user:g}=(0,d.useAuth)(),h=(0,e.useRouter)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),[n,o]=(0,c.useState)({status:"all",priority:"all",category:"all",view:"all"}),{tasks:p,loading:q,createTask:r,updateTask:s,deleteTask:t,refetch:u}=function(){let[a,b]=(0,c.useState)(!1),d=(0,ah.useCRUD)("Task"),{data:e,loading:f,error:g,refetch:h}=(0,ah.useDynamicQuery)("GET_ALL","Task",{fetchPolicy:"cache-and-network",errorPolicy:"all"});(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{g&&console.error("âŒ Dynamic tasks error:",g)},[g]);let{data:i,loading:j,refetch:k}=(0,ah.useDynamicQuery)("GET_PAGINATED","Task",{variables:{page:1,limit:10},fetchPolicy:"cache-and-network"}),[l,{loading:m}]=(0,ah.useDynamicMutation)("CREATE","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED"],awaitRefetchQueries:!0,errorPolicy:"all"}),[n,{loading:o}]=(0,ah.useDynamicMutation)("UPDATE","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED","GET_TASK_BY_ID"],awaitRefetchQueries:!0}),[p,{loading:q}]=(0,ah.useDynamicMutation)("DELETE","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED"],awaitRefetchQueries:!0}),[r,{loading:s}]=(0,ah.useDynamicMutation)("CREATE_BULK","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED"],awaitRefetchQueries:!0}),[t,{loading:u}]=(0,ah.useDynamicMutation)("UPDATE_BULK","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED"],awaitRefetchQueries:!0}),[v,{loading:w}]=(0,ah.useDynamicMutation)("DELETE_BULK","Task",{refetchQueries:["GET_TASKs","GET_TASKs_PAGINATED"],awaitRefetchQueries:!0}),x=(0,c.useCallback)(async(a,c={})=>{let{showToast:d=!0,onCreate:e,onError:f}=c;try{if(b(!0),!a.title?.trim())throw Error("TiÃªu Ä‘á» task khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng");let c={title:a.title.trim(),description:a.description?.trim()||void 0,category:a.category,priority:a.priority,dueDate:a.dueDate||void 0},f=(await l({variables:{data:c}})).data||null;if(!f)throw Error("KhÃ´ng thá»ƒ táº¡o task - response rá»—ng");d&&X.toast.success("âœ… Táº¡o task thÃ nh cÃ´ng!"),e?.(f);try{await h()}catch(a){console.warn("âš ï¸ Refetch warning:",a)}return f}catch(b){console.error("âŒ Error creating task:",b);let a=(0,ah.isDynamicGraphQLError)(b)?(0,ah.formatDynamicGraphQLError)(b):b.message||"Lá»—i khi táº¡o task";throw d&&X.toast.error(`âŒ ${a}`),f?.(b),b}finally{b(!1)}},[l,h]),y=(0,c.useCallback)(async(a,c={})=>{let{showToast:d=!0,showProgress:e=!0,onProgress:f,onCompleted:g,onError:i}=c;try{b(!0);let c=a.map((a,b)=>{if(!a.title?.trim())throw Error(`Task ${b+1}: Ti\xeau Ä‘á» kh\xf4ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng`);return{title:a.title.trim(),description:a.description?.trim()||void 0,category:a.category,priority:a.priority,dueDate:a.dueDate||void 0}});e&&X.toast.loading(`Äang táº¡o ${a.length} tasks...`,{id:"bulk-create"});let i=(await r({variables:{data:c}})).data;return e&&X.toast.dismiss("bulk-create"),d&&(i.errors&&i.errors.length>0?(X.toast.success(`âœ… Táº¡o th\xe0nh c\xf4ng ${i.count}/${a.length} tasks`),X.toast.error(`âŒ Lá»—i: ${i.errors.length} tasks`)):X.toast.success(`âœ… Táº¡o th\xe0nh c\xf4ng ${i.count} tasks!`)),f?.({completed:i.count,total:a.length}),g?.(i),await h(),i}catch(b){console.error("Error creating tasks bulk:",b),e&&X.toast.dismiss("bulk-create");let a=(0,ah.isDynamicGraphQLError)(b)?(0,ah.formatDynamicGraphQLError)(b):b.message||"Lá»—i khi táº¡o tasks";throw d&&X.toast.error(`âŒ ${a}`),i?.(b),b}finally{b(!1)}},[r,h]),z=(0,c.useCallback)(async(a,c,d={})=>{let{showToast:e=!0,onUpdate:f,onError:g}=d;try{b(!0);let d=Object.entries(c).reduce((a,[b,c])=>(null!=c&&("string"==typeof c?a[b]=c.trim()||void 0:a[b]=c),a),{}),g=(await n({variables:{id:a,data:d}})).data;if(!g)throw Error("KhÃ´ng thá»ƒ cáº­p nháº­t task");return e&&X.toast.success("âœ… Cáº­p nháº­t task thÃ nh cÃ´ng!"),f?.(g),await h(),g}catch(b){console.error("âŒ Error updating task:",b);let a=(0,ah.isDynamicGraphQLError)(b)?(0,ah.formatDynamicGraphQLError)(b):b.message||"Lá»—i khi cáº­p nháº­t task";throw e&&X.toast.error(`âŒ ${a}`),g?.(b),b}finally{b(!1)}},[n,h]),B=(0,c.useCallback)(async(a,c={})=>{let{showToast:d=!0,onDelete:e,onError:f}=c;try{b(!0);let c=(await p({variables:{id:a}})).data;return d&&c&&X.toast.success("âœ… XÃ³a task thÃ nh cÃ´ng!"),e?.(),await h(),c}catch(b){console.error("âŒ Error deleting task:",b);let a=(0,ah.isDynamicGraphQLError)(b)?(0,ah.formatDynamicGraphQLError)(b):b.message||"Lá»—i khi xÃ³a task";throw d&&X.toast.error(`âŒ ${a}`),f?.(b),b}finally{b(!1)}},[p,h]),C=(0,c.useMemo)(()=>{if(!Array.isArray(e))return{total:0,completed:0,pending:0,overdue:0};let a=e.filter(a=>a.status===A.TaskStatus.COMPLETED).length,b=e.filter(a=>a.status!==A.TaskStatus.COMPLETED).length,c=e.filter(a=>a.dueDate&&new Date(a.dueDate)<new Date&&a.status!==A.TaskStatus.COMPLETED).length;return{total:e.length,completed:a,pending:b,overdue:c}},[e]),D=(0,c.useMemo)(()=>({markAsCompleted:a=>z(a,{status:A.TaskStatus.COMPLETED}),markAsPending:a=>z(a,{status:A.TaskStatus.PENDING}),markAsInProgress:a=>z(a,{status:A.TaskStatus.IN_PROGRESS}),setPriority:(a,b)=>z(a,{priority:b}),setDueDate:(a,b)=>z(a,{dueDate:b.toISOString()})}),[z]);return{tasks:Array.isArray(e)?e:[],tasksPaginated:i,statistics:C,loading:f||j||a,creating:m,updating:o,deleting:q,bulkCreating:s,bulkUpdating:u,bulkDeleting:w,error:g,createTask:x,createTasksBulk:y,updateTask:z,deleteTask:B,refetch:h,refetchPaginated:k,quickActions:D,crud:d}}(),{tasks:w,loading:x,refetch:y}=(0,Q.useTasks)(),{sharedTasks:z,loading:C,refetch:D}=(0,Q.useSharedTasks)(),E=(0,c.useMemo)(()=>(p?.length>0?p:w||[]).map(a=>({...a,isShared:!1})),[p,w]),F=(0,c.useMemo)(()=>(z||[]).map(a=>({...a,isShared:!0,sharedBy:a.author,sharePermission:"VIEW"})),[z]),G=(0,c.useMemo)(()=>[...E,...F],[E,F]),H=(0,c.useMemo)(()=>{let a=G;switch(n.view){case"my":a=E;break;case"shared":a=F;break;default:a=G}if("all"!==n.status&&(a=a.filter(a=>a.status===n.status)),"all"!==n.priority&&(a=a.filter(a=>a.priority===n.priority)),"all"!==n.category&&(a=a.filter(a=>a.category===n.category)),k.trim()){let b=k.toLowerCase();a=a.filter(a=>a.title.toLowerCase().includes(b)||a.description?.toLowerCase().includes(b))}return a},[G,E,F,n,k]),I=(0,c.useMemo)(()=>{let a=H.length,b=H.filter(a=>a.status===A.TaskStatus.PENDING).length,c=H.filter(a=>a.status===A.TaskStatus.IN_PROGRESS).length,d=H.filter(a=>a.status===A.TaskStatus.COMPLETED).length,e=H.filter(a=>a.status===A.TaskStatus.CANCELLED).length,f=H.filter(a=>a.priority===A.TaskPriority.HIGH).length,g=new Date;return{total:a,pending:b,inProgress:c,completed:d,cancelled:e,highPriority:f,overdue:H.filter(a=>a.dueDate&&new Date(a.dueDate)<g&&a.status!==A.TaskStatus.COMPLETED).length}},[H]);(0,c.useEffect)(()=>{f||a||h.push("/login")},[a,f,h]);let J=(0,c.useCallback)(async()=>{await Promise.all([u(),y(),D()])},[u,y,D]),K=(0,c.useCallback)(async a=>{try{if(a&&a.title){let b={title:a.title,description:a.description||"",category:a.category||A.TaskCategory.PERSONAL,priority:a.priority||A.TaskPriority.MEDIUM,dueDate:a.dueDate};await r(b,{showToast:!0,onCreate:a=>{console.log("âœ… Task created via Dynamic GraphQL:",a),X.toast.success(`ðŸŽ‰ Created: "${a.title}"`)}})}else j(!0)}catch(a){console.error("âŒ Task creation error:",a),X.toast.error(`âŒ Error creating task: ${a instanceof Error?a.message:"Unknown error"}`)}},[r]),L=(0,c.useCallback)(async(a,b)=>{try{let c={};void 0!==b.title&&(c.title=b.title),void 0!==b.description&&(c.description=b.description),void 0!==b.status&&(c.status=b.status),void 0!==b.priority&&(c.priority=b.priority),void 0!==b.category&&(c.category=b.category),void 0!==b.dueDate&&(c.dueDate=b.dueDate),await s(a,c,{showToast:!0,onUpdate:a=>{console.log("âœ… Task updated via Dynamic GraphQL:",a)}})}catch(a){console.error("âŒ Update error:",a),X.toast.error("âŒ Error updating task")}},[s]),M=(0,c.useCallback)(async a=>{try{if(!confirm("Are you sure you want to delete this task?"))return;await t(a,{showToast:!0,onDelete:()=>{console.log("âœ… Task deleted via Dynamic GraphQL")}})}catch(a){console.error("âŒ Delete error:",a),X.toast.error("âŒ Error deleting task")}},[t]),O=(0,c.useCallback)(async(a,b)=>{try{await L(a,{status:b})}catch(a){console.error("âŒ Status change error:",a)}},[L]),R=(0,c.useCallback)(a=>{o(b=>({...b,...a}))},[]),S=(0,c.useCallback)(()=>{o({status:"all",priority:"all",category:"all",view:n.view}),l("")},[n.view]);return f?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(N.Loader2,{className:"h-12 w-12 animate-spin text-blue-600"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):a?(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)(m,{totalTasks:I.total,onCreateTask:()=>K(),onSearch:l,searchQuery:k,onFilterChange:S}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(v,{stats:I})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(B,{filters:n,onFiltersChange:R,myTasksCount:E.length,sharedTasksCount:F.length,allTasksCount:G.length})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(P,{tasks:H,loading:q||x||C,onEdit:a=>{console.log("Edit task:",a),X.toast.success("Edit functionality coming soon!")},onDelete:M,onStatusChange:O,emptyMessage:k||"all"!==n.status||"all"!==n.priority||"all"!==n.category?"No tasks match your filters":"No tasks found. Create your first task to get started!"})})]}),(0,b.jsx)(ag,{isOpen:i,onClose:()=>j(!1),onTaskCreated:()=>{J()}})]}):null}a.s(["default",()=>ai],386346)}];

//# sourceMappingURL=frontend_src_app_admin_tasks_page_tsx_9e2d83b9._.js.map
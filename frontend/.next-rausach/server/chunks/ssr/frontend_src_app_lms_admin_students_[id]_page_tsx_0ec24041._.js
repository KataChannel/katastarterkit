module.exports=[304371,a=>{"use strict";var b=a.i(321248),c=a.i(53627),d=a.i(235746),e=a.i(975780),f=a.i(202979),g=a.i(293470),h=a.i(976762),i=a.i(516482),j=a.i(459853),k=a.i(140300),l=a.i(434741),m=a.i(128348),n=a.i(26720),o=a.i(147678),p=a.i(57597),q=a.i(411185),r=a.i(890082),s=a.i(327987),t=a.i(520215),u=a.i(638735),v=a.i(187145),w=a.i(388339),x=a.i(234211);function y(){var a;let y=(0,c.useParams)(),z=(0,c.useRouter)(),{toast:A}=(0,x.useToast)(),B=y.id,{data:C,loading:D,error:E}=(0,d.useFindUnique)("User",{where:{id:B},select:{id:!0,username:!0,email:!0,firstName:!0,lastName:!0,phone:!0,avatar:!0,isActive:!0,isVerified:!0,createdAt:!0,lastLoginAt:!0},include:{enrollments:{include:{course:{include:{category:!0,instructor:!0}}},orderBy:{enrolledAt:"desc"}},certificates:{include:{course:!0},orderBy:{issuedAt:"desc"}},courseReviews:{include:{course:!0},orderBy:{createdAt:"desc"}},_count:{select:{enrollments:!0,certificates:!0,courseReviews:!0}}}}),F=a=>a?new Date(a).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}):"Chưa có",G=a=>a.firstName&&a.lastName?`${a.firstName} ${a.lastName}`:a.username,H=a=>({BEGINNER:"bg-green-100 text-green-800",INTERMEDIATE:"bg-blue-100 text-blue-800",ADVANCED:"bg-purple-100 text-purple-800"})[a]||"bg-gray-100 text-gray-800";if(D)return(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"text-gray-500 mt-4",children:"Đang tải thông tin học viên..."})]})});if(E||!C)return(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(s.AlertCircle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-red-600",children:E?.message||"Không tìm thấy học viên"}),(0,b.jsxs)(f.Button,{onClick:()=>z.back(),variant:"outline",className:"mt-4",children:[(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Quay lại"]})]})})});let I=C.enrollments?.filter(a=>"ACTIVE"===a.status)||[],J=C.enrollments?.filter(a=>"COMPLETED"===a.status)||[],K=C.enrollments?.length>0?Math.round(C.enrollments.reduce((a,b)=>a+(b.progress||0),0)/C.enrollments.length):0;return(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(f.Button,{onClick:()=>z.back(),variant:"outline",size:"sm",children:[(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Quay lại"]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Chi tiết học viên"})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:C.avatar?(0,b.jsx)("img",{src:C.avatar,alt:G(C),className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover border-4 border-white shadow-lg"}):(0,b.jsx)("div",{className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center border-4 border-white shadow-lg",children:(0,b.jsx)(j.UserCircle2,{className:"w-16 h-16 sm:w-20 sm:h-20 text-white"})})}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl mb-2",children:G(C)}),(0,b.jsxs)(e.CardDescription,{className:"text-base",children:["@",C.username]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(g.Badge,{variant:C.isActive?"default":"secondary",children:C.isActive?"Hoạt động":"Tạm khóa"}),C.isVerified&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"gap-1",children:[(0,b.jsx)(r.CheckCircle2,{className:"w-3 h-3"}),"Đã xác thực"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[C.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("span",{children:C.email})]}),C.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(l.Phone,{className:"w-4 h-4 text-green-600"}),(0,b.jsx)("span",{children:C.phone})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4 text-purple-600"}),(0,b.jsxs)("span",{children:["Tham gia: ",F(C.createdAt)]})]}),C.lastLoginAt&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(q.Clock,{className:"w-4 h-4 text-orange-600"}),(0,b.jsxs)("span",{children:["Hoạt động: ",(a=C.lastLoginAt)?new Date(a).toLocaleString("vi-VN"):"Chưa có"]})]})]})]})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardDescription,{children:"Tổng khóa học"}),(0,b.jsx)(n.BookOpen,{className:"w-5 h-5 text-blue-600"})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:C._count?.enrollments||0}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[I.length," đang học"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardDescription,{children:"Hoàn thành"}),(0,b.jsx)(r.CheckCircle2,{className:"w-5 h-5 text-green-600"})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600",children:J.length}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[C._count?.enrollments>0?Math.round(J.length/C._count.enrollments*100):0,"% tỷ lệ hoàn thành"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardDescription,{children:"Chứng chỉ"}),(0,b.jsx)(o.Award,{className:"w-5 h-5 text-yellow-600"})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:C._count?.certificates||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Đã đạt được"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardDescription,{children:"Tiến độ TB"}),(0,b.jsx)(p.TrendingUp,{className:"w-5 h-5 text-purple-600"})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[K,"%"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Trung bình các khóa"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.BookOpen,{className:"w-5 h-5"}),"Khóa học đã đăng ký (",C.enrollments?.length||0,")"]}),(0,b.jsx)(e.CardDescription,{className:"mt-1",children:"Danh sách các khóa học học viên đang tham gia"})]})})}),(0,b.jsx)(e.CardContent,{children:C.enrollments&&0!==C.enrollments.length?(0,b.jsx)("div",{className:"space-y-4",children:C.enrollments.map(a=>{var c;let d,f=(c=a.status,(d={ACTIVE:{variant:"default",label:"Đang học",icon:v.PlayCircle},COMPLETED:{variant:"outline",label:"Hoàn thành",icon:r.CheckCircle2},DROPPED:{variant:"destructive",label:"Đã bỏ",icon:s.AlertCircle}})[c]||d.ACTIVE),i=f.icon;return(0,b.jsx)(e.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:a.course.thumbnail?(0,b.jsx)("img",{src:a.course.thumbnail,alt:a.course.title,className:"w-full sm:w-32 h-20 sm:h-20 object-cover rounded-lg"}):(0,b.jsx)("div",{className:"w-full sm:w-32 h-20 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg flex items-center justify-center",children:(0,b.jsx)(n.BookOpen,{className:"w-8 h-8 text-white"})})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.course.title}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-gray-600",children:[(0,b.jsx)(g.Badge,{variant:"secondary",className:H(a.course.level),children:a.course.level}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Clock,{className:"w-3 h-3"}),a.course.duration||0," phút"]}),a.course.category&&(0,b.jsxs)("span",{className:"text-gray-500",children:["• ",a.course.category.name]})]})]}),(0,b.jsxs)(g.Badge,{variant:f.variant,className:"gap-1",children:[(0,b.jsx)(i,{className:"w-3 h-3"}),f.label]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tiến độ học tập"}),(0,b.jsxs)("span",{className:"font-semibold",children:[a.progress||0,"%"]})]}),(0,b.jsx)(h.Progress,{value:a.progress||0,className:"h-2"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(m.Calendar,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:["Đăng ký: ",F(a.enrolledAt)]})]}),a.lastAccessedAt&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Clock,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:["Truy cập: ",F(a.lastAccessedAt)]})]}),a.completedAt&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,b.jsx)(r.CheckCircle2,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:["Hoàn thành: ",F(a.completedAt)]})]})]}),a.course.instructor&&(0,b.jsxs)("div",{className:"text-xs text-gray-600",children:["Giảng viên: ",a.course.instructor.firstName," ",a.course.instructor.lastName]})]})]})})},a.id)})}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(n.BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,b.jsx)("p",{children:"Chưa đăng ký khóa học nào"})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Trophy,{className:"w-5 h-5"}),"Chứng chỉ đã đạt được (",C.certificates?.length||0,")"]})}),(0,b.jsx)(e.CardContent,{children:C.certificates&&0!==C.certificates.length?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.certificates.map(a=>(0,b.jsx)(e.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:(0,b.jsx)(w.Trophy,{className:"w-6 h-6 text-white"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm truncate",children:a.course.title}),(0,b.jsx)(g.Badge,{variant:"secondary",className:`${H(a.course.level)} mt-1 text-xs`,children:a.course.level}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Cấp ngày: ",F(a.issuedAt)]})]})]})})},a.id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(o.Award,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,b.jsx)("p",{children:"Chưa có chứng chỉ nào"})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.MessageSquare,{className:"w-5 h-5"}),"Đánh giá của học viên (",C.courseReviews?.length||0,")"]})}),(0,b.jsx)(e.CardContent,{children:C.courseReviews&&0!==C.courseReviews.length?(0,b.jsx)("div",{className:"space-y-4",children:C.courseReviews.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.course.title}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[[void 0,void 0,void 0,void 0,void 0].map((c,d)=>(0,b.jsx)(t.Star,{className:`w-4 h-4 ${d<a.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},d)),(0,b.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:[a.rating,"/5"]})]})]}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:F(a.createdAt)})]}),a.comment&&(0,b.jsxs)("p",{className:"text-sm text-gray-700 mt-2 italic",children:['"',a.comment,'"']})]})},a.id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(t.Star,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,b.jsx)("p",{children:"Chưa có đánh giá nào"})]})})]})]})}a.s(["default",()=>y])}];

//# sourceMappingURL=frontend_src_app_lms_admin_students_%5Bid%5D_page_tsx_0ec24041._.js.map
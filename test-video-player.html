<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Video Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        video {
            width: 100%;
            max-width: 800px;
            background: #000;
            border-radius: 4px;
        }
        .info {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 4px;
        }
        .error {
            color: red;
            margin-top: 10px;
        }
        .success {
            color: green;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé• Test Video Player - Tazagroup Storage</h1>
        
        <h2>Video Test</h2>
        <video 
            id="testVideo"
            controls 
            preload="metadata"
            crossorigin="anonymous"
        >
            <source 
                src="https://storage.tazagroup.vn/source-documents/record-t3_ch10_20251027101446_20251027101733.mp4" 
                type="video/mp4"
            />
            Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ video.
        </video>

        <div class="info">
            <h3>Th√¥ng tin video:</h3>
            <p id="url"><strong>URL:</strong> https://storage.tazagroup.vn/source-documents/record-t3_ch10_20251027101446_20251027101733.mp4</p>
            <p id="duration"><strong>Th·ªùi l∆∞·ª£ng:</strong> <span>Loading...</span></p>
            <p id="resolution"><strong>ƒê·ªô ph√¢n gi·∫£i:</strong> <span>Loading...</span></p>
            <p id="loaded"><strong>Tr·∫°ng th√°i:</strong> <span>Loading...</span></p>
            <div id="errors"></div>
        </div>
    </div>

    <script>
        const video = document.getElementById('testVideo');
        const errorsDiv = document.getElementById('errors');

        // Event listeners
        video.addEventListener('loadedmetadata', function() {
            document.getElementById('duration').innerHTML = 
                `<strong>Th·ªùi l∆∞·ª£ng:</strong> <span class="success">${Math.floor(video.duration)} gi√¢y</span>`;
            document.getElementById('resolution').innerHTML = 
                `<strong>ƒê·ªô ph√¢n gi·∫£i:</strong> <span class="success">${video.videoWidth} x ${video.videoHeight}</span>`;
            document.getElementById('loaded').innerHTML = 
                `<strong>Tr·∫°ng th√°i:</strong> <span class="success">‚úì Loaded metadata successfully</span>`;
        });

        video.addEventListener('canplay', function() {
            console.log('Video can play');
            document.getElementById('loaded').innerHTML = 
                `<strong>Tr·∫°ng th√°i:</strong> <span class="success">‚úì Video s·∫µn s√†ng ph√°t</span>`;
        });

        video.addEventListener('error', function(e) {
            console.error('Video error:', e);
            const error = video.error;
            let errorMsg = 'Unknown error';
            
            if (error) {
                switch(error.code) {
                    case 1: errorMsg = 'MEDIA_ERR_ABORTED - T·∫£i video b·ªã h·ªßy'; break;
                    case 2: errorMsg = 'MEDIA_ERR_NETWORK - L·ªói m·∫°ng khi t·∫£i video'; break;
                    case 3: errorMsg = 'MEDIA_ERR_DECODE - Video b·ªã l·ªói khi decode'; break;
                    case 4: errorMsg = 'MEDIA_ERR_SRC_NOT_SUPPORTED - Format kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£'; break;
                }
            }
            
            errorsDiv.innerHTML = `<p class="error"><strong>‚ùå L·ªói:</strong> ${errorMsg}</p>`;
            document.getElementById('loaded').innerHTML = 
                `<strong>Tr·∫°ng th√°i:</strong> <span class="error">‚ùå Failed to load</span>`;
        });

        video.addEventListener('stalled', function() {
            console.warn('Video stalled');
        });

        video.addEventListener('waiting', function() {
            console.log('Video waiting for data');
        });

        // Check if video loads after 5 seconds
        setTimeout(() => {
            if (video.readyState === 0) {
                errorsDiv.innerHTML = `<p class="error"><strong>‚ö†Ô∏è C·∫£nh b√°o:</strong> Video ch∆∞a load sau 5 gi√¢y</p>`;
            }
        }, 5000);
    </script>
</body>
</html>

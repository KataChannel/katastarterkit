import { PrismaService } from '../../prisma/prisma.service';
import { NotificationService } from '../../services/notification.service';
import { CreateTechnicalSupportTicketInput, UpdateTechnicalSupportTicketInput, CreateTechnicalSupportMessageInput, RateTicketInput, TechnicalSupportTicketWhereInput } from '../dto/technical-support.input';
export declare class TechnicalSupportService {
    private readonly prisma;
    private readonly notificationService;
    private readonly logger;
    constructor(prisma: PrismaService, notificationService: NotificationService);
    createTicket(input: CreateTechnicalSupportTicketInput): Promise<{
        customer: {
            id: string;
            username: string;
            email: string;
            avatar: string;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    findAll(where?: TechnicalSupportTicketWhereInput, take?: number, skip?: number): Promise<({
        customer: {
            id: string;
            username: string;
            email: string;
            avatar: string;
        };
        assignedTo: {
            id: string;
            username: string;
            avatar: string;
        };
        messages: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            content: string;
            authorId: string | null;
            isRead: boolean;
            readAt: Date | null;
            attachmentUrls: string[];
            ticketId: string;
            isInternal: boolean;
            authorName: string | null;
            authorEmail: string | null;
        }[];
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    })[]>;
    findOne(id: string): Promise<{
        customer: {
            id: string;
            username: string;
            email: string;
            avatar: string;
        };
        assignedTo: {
            id: string;
            username: string;
            avatar: string;
        };
        messages: ({
            author: {
                id: string;
                username: string;
                avatar: string;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            content: string;
            authorId: string | null;
            isRead: boolean;
            readAt: Date | null;
            attachmentUrls: string[];
            ticketId: string;
            isInternal: boolean;
            authorName: string | null;
            authorEmail: string | null;
        })[];
        resolvedBy: {
            id: string;
            username: string;
            avatar: string;
        };
        relatedOrder: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            title: string | null;
            status: import("@prisma/client").$Enums.OrderStatus;
            total: number;
            type: string | null;
            displayOrder: number | null;
            metadata: import("@prisma/client/runtime/library").JsonValue | null;
            createdBy: string | null;
            userId: string | null;
            paymentMethod: import("@prisma/client").$Enums.PaymentMethod;
            updatedBy: string | null;
            vat: number;
            paymentStatus: import("@prisma/client").$Enums.PaymentStatus;
            guestName: string | null;
            guestEmail: string | null;
            orderNumber: string;
            customerId: string | null;
            guestPhone: string | null;
            subtotal: number;
            shippingFee: number;
            tax: number;
            discount: number;
            priceListId: string | null;
            deliveryDate: Date | null;
            isShowVAT: boolean;
            shipper: string | null;
            deliveryNote: string | null;
            departTime: string | null;
            returnTime: string | null;
            signature: string | null;
            shippingMethod: import("@prisma/client").$Enums.ShippingMethod;
            shippingAddress: import("@prisma/client/runtime/library").JsonValue;
            billingAddress: import("@prisma/client/runtime/library").JsonValue | null;
            customerNote: string | null;
            internalNote: string | null;
            cancelReason: string | null;
            printCount: number | null;
            confirmedAt: Date | null;
            shippedAt: Date | null;
            deliveredAt: Date | null;
            cancelledAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    findByTicketNumber(ticketNumber: string): Promise<{
        customer: {
            id: string;
            username: string;
            firstName: string | null;
            lastName: string | null;
            email: string | null;
            createdAt: Date;
            updatedAt: Date;
            isActive: boolean;
            password: string | null;
            phone: string | null;
            avatar: string | null;
            roleType: import("@prisma/client").$Enums.UserRoleType;
            isVerified: boolean;
            address: string | null;
            city: string | null;
            district: string | null;
            ward: string | null;
            isTwoFactorEnabled: boolean;
            failedLoginAttempts: number;
            lockedUntil: Date | null;
            lastLoginAt: Date | null;
            departmentId: string | null;
        };
        assignedTo: {
            id: string;
            username: string;
            firstName: string | null;
            lastName: string | null;
            email: string | null;
            createdAt: Date;
            updatedAt: Date;
            isActive: boolean;
            password: string | null;
            phone: string | null;
            avatar: string | null;
            roleType: import("@prisma/client").$Enums.UserRoleType;
            isVerified: boolean;
            address: string | null;
            city: string | null;
            district: string | null;
            ward: string | null;
            isTwoFactorEnabled: boolean;
            failedLoginAttempts: number;
            lockedUntil: Date | null;
            lastLoginAt: Date | null;
            departmentId: string | null;
        };
        messages: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            content: string;
            authorId: string | null;
            isRead: boolean;
            readAt: Date | null;
            attachmentUrls: string[];
            ticketId: string;
            isInternal: boolean;
            authorName: string | null;
            authorEmail: string | null;
        }[];
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    update(id: string, input: UpdateTechnicalSupportTicketInput): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    assignTicket(ticketId: string, assignedToId: string): Promise<{
        customer: {
            id: string;
            username: string;
            firstName: string | null;
            lastName: string | null;
            email: string | null;
            createdAt: Date;
            updatedAt: Date;
            isActive: boolean;
            password: string | null;
            phone: string | null;
            avatar: string | null;
            roleType: import("@prisma/client").$Enums.UserRoleType;
            isVerified: boolean;
            address: string | null;
            city: string | null;
            district: string | null;
            ward: string | null;
            isTwoFactorEnabled: boolean;
            failedLoginAttempts: number;
            lockedUntil: Date | null;
            lastLoginAt: Date | null;
            departmentId: string | null;
        };
        assignedTo: {
            id: string;
            username: string;
            firstName: string | null;
            lastName: string | null;
            email: string | null;
            createdAt: Date;
            updatedAt: Date;
            isActive: boolean;
            password: string | null;
            phone: string | null;
            avatar: string | null;
            roleType: import("@prisma/client").$Enums.UserRoleType;
            isVerified: boolean;
            address: string | null;
            city: string | null;
            district: string | null;
            ward: string | null;
            isTwoFactorEnabled: boolean;
            failedLoginAttempts: number;
            lockedUntil: Date | null;
            lastLoginAt: Date | null;
            departmentId: string | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    resolveTicket(ticketId: string, resolution: string, resolvedById: string): Promise<{
        customer: {
            id: string;
            username: string;
            firstName: string | null;
            lastName: string | null;
            email: string | null;
            createdAt: Date;
            updatedAt: Date;
            isActive: boolean;
            password: string | null;
            phone: string | null;
            avatar: string | null;
            roleType: import("@prisma/client").$Enums.UserRoleType;
            isVerified: boolean;
            address: string | null;
            city: string | null;
            district: string | null;
            ward: string | null;
            isTwoFactorEnabled: boolean;
            failedLoginAttempts: number;
            lockedUntil: Date | null;
            lastLoginAt: Date | null;
            departmentId: string | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    createMessage(input: CreateTechnicalSupportMessageInput): Promise<{
        author: {
            id: string;
            username: string;
            avatar: string;
        };
        ticket: {
            customer: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: import("@prisma/client").$Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
            assignedTo: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: import("@prisma/client").$Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string;
            status: import("@prisma/client").$Enums.SupportTicketStatus;
            category: import("@prisma/client").$Enums.SupportTicketCategory;
            tags: string[];
            priority: import("@prisma/client").$Enums.SupportTicketPriority;
            assignedAt: Date | null;
            environment: string | null;
            customerEmail: string | null;
            resolvedAt: Date | null;
            resolution: string | null;
            customerId: string | null;
            customerName: string | null;
            customerPhone: string | null;
            subject: string;
            closedAt: Date | null;
            ticketNumber: string;
            relatedOrderId: string | null;
            resolvedById: string | null;
            screenshotUrls: string[];
            browserInfo: string | null;
            osInfo: string | null;
            deviceInfo: string | null;
            errorLogs: string | null;
            attachmentUrls: string[];
            relatedUrl: string | null;
            assignedToId: string | null;
            customerRating: number | null;
            customerFeedback: string | null;
            firstResponseAt: Date | null;
            lastResponseAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        content: string;
        authorId: string | null;
        isRead: boolean;
        readAt: Date | null;
        attachmentUrls: string[];
        ticketId: string;
        isInternal: boolean;
        authorName: string | null;
        authorEmail: string | null;
    }>;
    rateTicket(input: RateTicketInput): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    }>;
    getMyTickets(userId: string, status?: string): Promise<({
        assignedTo: {
            id: string;
            username: string;
            avatar: string;
        };
        messages: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            content: string;
            authorId: string | null;
            isRead: boolean;
            readAt: Date | null;
            attachmentUrls: string[];
            ticketId: string;
            isInternal: boolean;
            authorName: string | null;
            authorEmail: string | null;
        }[];
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string;
        status: import("@prisma/client").$Enums.SupportTicketStatus;
        category: import("@prisma/client").$Enums.SupportTicketCategory;
        tags: string[];
        priority: import("@prisma/client").$Enums.SupportTicketPriority;
        assignedAt: Date | null;
        environment: string | null;
        customerEmail: string | null;
        resolvedAt: Date | null;
        resolution: string | null;
        customerId: string | null;
        customerName: string | null;
        customerPhone: string | null;
        subject: string;
        closedAt: Date | null;
        ticketNumber: string;
        relatedOrderId: string | null;
        resolvedById: string | null;
        screenshotUrls: string[];
        browserInfo: string | null;
        osInfo: string | null;
        deviceInfo: string | null;
        errorLogs: string | null;
        attachmentUrls: string[];
        relatedUrl: string | null;
        assignedToId: string | null;
        customerRating: number | null;
        customerFeedback: string | null;
        firstResponseAt: Date | null;
        lastResponseAt: Date | null;
    })[]>;
    private generateTicketNumber;
}

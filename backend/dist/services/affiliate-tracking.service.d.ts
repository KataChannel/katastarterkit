import { PrismaService } from '../prisma/prisma.service';
import { $Enums } from '@prisma/client';
import { CreateAffLinkInput, UpdateAffLinkInput, TrackConversionInput, ReviewConversionInput, AffLinkSearchInput, AffConversionSearchInput } from '../graphql/inputs/affiliate.input';
export declare class AffiliateTrackingService {
    private readonly prisma;
    constructor(prisma: PrismaService);
    private generateTrackingCode;
    findLinkByCode(trackingCode: string): Promise<{
        campaign: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            status: $Enums.AffCampaignStatus;
            productImage: string | null;
            startDate: Date | null;
            endDate: Date | null;
            commissionType: string;
            productName: string;
            productUrl: string;
            commissionRate: import("@prisma/client/runtime/library").Decimal;
            fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
            maxAffiliates: number | null;
            requireApproval: boolean;
            totalClicks: number;
            totalConversions: number;
            totalRevenue: import("@prisma/client/runtime/library").Decimal;
            totalCommission: import("@prisma/client/runtime/library").Decimal;
            creatorId: string;
        };
        affiliate: {
            user: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: $Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            userId: string;
            paymentMethod: $Enums.AffPaymentMethod | null;
            role: $Enums.AffUserRole;
            joinedAt: Date;
            companyName: string | null;
            businessType: string | null;
            website: string | null;
            bankAccount: string | null;
            paypalEmail: string | null;
            taxId: string | null;
            lastActiveAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string | null;
        isActive: boolean;
        title: string | null;
        expiresAt: Date | null;
        campaignId: string;
        totalClicks: number;
        totalConversions: number;
        affiliateId: string;
        trackingCode: string;
        originalUrl: string;
        shortUrl: string | null;
        customAlias: string | null;
        utmSource: string | null;
        utmMedium: string | null;
        utmCampaign: string | null;
        utmContent: string | null;
        totalEarnings: import("@prisma/client/runtime/library").Decimal;
    }>;
    createAffiliateLink(affiliateUserId: string, input: CreateAffLinkInput): Promise<{
        campaign: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            status: $Enums.AffCampaignStatus;
            productImage: string | null;
            startDate: Date | null;
            endDate: Date | null;
            commissionType: string;
            productName: string;
            productUrl: string;
            commissionRate: import("@prisma/client/runtime/library").Decimal;
            fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
            maxAffiliates: number | null;
            requireApproval: boolean;
            totalClicks: number;
            totalConversions: number;
            totalRevenue: import("@prisma/client/runtime/library").Decimal;
            totalCommission: import("@prisma/client/runtime/library").Decimal;
            creatorId: string;
        };
        affiliate: {
            user: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: $Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            userId: string;
            paymentMethod: $Enums.AffPaymentMethod | null;
            role: $Enums.AffUserRole;
            joinedAt: Date;
            companyName: string | null;
            businessType: string | null;
            website: string | null;
            bankAccount: string | null;
            paypalEmail: string | null;
            taxId: string | null;
            lastActiveAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string | null;
        isActive: boolean;
        title: string | null;
        expiresAt: Date | null;
        campaignId: string;
        totalClicks: number;
        totalConversions: number;
        affiliateId: string;
        trackingCode: string;
        originalUrl: string;
        shortUrl: string | null;
        customAlias: string | null;
        utmSource: string | null;
        utmMedium: string | null;
        utmCampaign: string | null;
        utmContent: string | null;
        totalEarnings: import("@prisma/client/runtime/library").Decimal;
    }>;
    getAffiliateLinks(affiliateUserId: string, input?: AffLinkSearchInput): Promise<{
        links: ({
            _count: {
                clicks: number;
                conversions: number;
            };
            campaign: {
                id: string;
                name: string;
                createdAt: Date;
                updatedAt: Date;
                description: string | null;
                status: $Enums.AffCampaignStatus;
                productImage: string | null;
                startDate: Date | null;
                endDate: Date | null;
                commissionType: string;
                productName: string;
                productUrl: string;
                commissionRate: import("@prisma/client/runtime/library").Decimal;
                fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
                maxAffiliates: number | null;
                requireApproval: boolean;
                totalClicks: number;
                totalConversions: number;
                totalRevenue: import("@prisma/client/runtime/library").Decimal;
                totalCommission: import("@prisma/client/runtime/library").Decimal;
                creatorId: string;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            title: string | null;
            expiresAt: Date | null;
            campaignId: string;
            totalClicks: number;
            totalConversions: number;
            affiliateId: string;
            trackingCode: string;
            originalUrl: string;
            shortUrl: string | null;
            customAlias: string | null;
            utmSource: string | null;
            utmMedium: string | null;
            utmCampaign: string | null;
            utmContent: string | null;
            totalEarnings: import("@prisma/client/runtime/library").Decimal;
        })[];
        total: number;
        page: number;
        size: number;
        totalPages: number;
    }>;
    updateAffiliateLink(linkId: string, affiliateUserId: string, input: UpdateAffLinkInput): Promise<{
        campaign: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            status: $Enums.AffCampaignStatus;
            productImage: string | null;
            startDate: Date | null;
            endDate: Date | null;
            commissionType: string;
            productName: string;
            productUrl: string;
            commissionRate: import("@prisma/client/runtime/library").Decimal;
            fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
            maxAffiliates: number | null;
            requireApproval: boolean;
            totalClicks: number;
            totalConversions: number;
            totalRevenue: import("@prisma/client/runtime/library").Decimal;
            totalCommission: import("@prisma/client/runtime/library").Decimal;
            creatorId: string;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string | null;
        isActive: boolean;
        title: string | null;
        expiresAt: Date | null;
        campaignId: string;
        totalClicks: number;
        totalConversions: number;
        affiliateId: string;
        trackingCode: string;
        originalUrl: string;
        shortUrl: string | null;
        customAlias: string | null;
        utmSource: string | null;
        utmMedium: string | null;
        utmCampaign: string | null;
        utmContent: string | null;
        totalEarnings: import("@prisma/client/runtime/library").Decimal;
    }>;
    trackClick(clickData: {
        linkId: string;
        ipAddress: string;
        userAgent: string;
        referer?: string | null;
        device?: string;
        browser?: string;
        country?: string | null;
    }): Promise<{
        id: string;
        city: string | null;
        sessionId: string | null;
        ipAddress: string | null;
        userAgent: string | null;
        referer: string | null;
        country: string | null;
        device: string | null;
        browser: string | null;
        visitorId: string | null;
        clickedAt: Date;
        linkId: string;
    }>;
    trackClickFromRequest(trackingCode: string, request: any): Promise<{
        clickId: string;
        redirectUrl: string;
        visitorId: any;
    }>;
    trackConversion(input: TrackConversionInput): Promise<{
        link: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            title: string | null;
            expiresAt: Date | null;
            campaignId: string;
            totalClicks: number;
            totalConversions: number;
            affiliateId: string;
            trackingCode: string;
            originalUrl: string;
            shortUrl: string | null;
            customAlias: string | null;
            utmSource: string | null;
            utmMedium: string | null;
            utmCampaign: string | null;
            utmContent: string | null;
            totalEarnings: import("@prisma/client/runtime/library").Decimal;
        };
        campaign: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            status: $Enums.AffCampaignStatus;
            productImage: string | null;
            startDate: Date | null;
            endDate: Date | null;
            commissionType: string;
            productName: string;
            productUrl: string;
            commissionRate: import("@prisma/client/runtime/library").Decimal;
            fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
            maxAffiliates: number | null;
            requireApproval: boolean;
            totalClicks: number;
            totalConversions: number;
            totalRevenue: import("@prisma/client/runtime/library").Decimal;
            totalCommission: import("@prisma/client/runtime/library").Decimal;
            creatorId: string;
        };
        affiliate: {
            user: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: $Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            userId: string;
            paymentMethod: $Enums.AffPaymentMethod | null;
            role: $Enums.AffUserRole;
            joinedAt: Date;
            companyName: string | null;
            businessType: string | null;
            website: string | null;
            bankAccount: string | null;
            paypalEmail: string | null;
            taxId: string | null;
            lastActiveAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: $Enums.AffConversionStatus;
        approvedAt: Date | null;
        campaignId: string;
        affiliateId: string;
        notes: string | null;
        orderId: string | null;
        customerEmail: string | null;
        saleAmount: import("@prisma/client/runtime/library").Decimal;
        conversionType: string;
        rejectedAt: Date | null;
        linkId: string;
        commission: import("@prisma/client/runtime/library").Decimal;
        clickId: string | null;
        currency: string;
        convertedAt: Date;
        paidAt: Date | null;
        validatedBy: string | null;
    }>;
    reviewConversion(reviewerUserId: string, input: ReviewConversionInput): Promise<{
        link: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            title: string | null;
            expiresAt: Date | null;
            campaignId: string;
            totalClicks: number;
            totalConversions: number;
            affiliateId: string;
            trackingCode: string;
            originalUrl: string;
            shortUrl: string | null;
            customAlias: string | null;
            utmSource: string | null;
            utmMedium: string | null;
            utmCampaign: string | null;
            utmContent: string | null;
            totalEarnings: import("@prisma/client/runtime/library").Decimal;
        };
        campaign: {
            id: string;
            name: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            status: $Enums.AffCampaignStatus;
            productImage: string | null;
            startDate: Date | null;
            endDate: Date | null;
            commissionType: string;
            productName: string;
            productUrl: string;
            commissionRate: import("@prisma/client/runtime/library").Decimal;
            fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
            maxAffiliates: number | null;
            requireApproval: boolean;
            totalClicks: number;
            totalConversions: number;
            totalRevenue: import("@prisma/client/runtime/library").Decimal;
            totalCommission: import("@prisma/client/runtime/library").Decimal;
            creatorId: string;
        };
        affiliate: {
            user: {
                id: string;
                username: string;
                firstName: string | null;
                lastName: string | null;
                email: string | null;
                createdAt: Date;
                updatedAt: Date;
                isActive: boolean;
                password: string | null;
                phone: string | null;
                avatar: string | null;
                roleType: $Enums.UserRoleType;
                isVerified: boolean;
                address: string | null;
                city: string | null;
                district: string | null;
                ward: string | null;
                isTwoFactorEnabled: boolean;
                failedLoginAttempts: number;
                lockedUntil: Date | null;
                lastLoginAt: Date | null;
                departmentId: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            description: string | null;
            isActive: boolean;
            userId: string;
            paymentMethod: $Enums.AffPaymentMethod | null;
            role: $Enums.AffUserRole;
            joinedAt: Date;
            companyName: string | null;
            businessType: string | null;
            website: string | null;
            bankAccount: string | null;
            paypalEmail: string | null;
            taxId: string | null;
            lastActiveAt: Date | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: $Enums.AffConversionStatus;
        approvedAt: Date | null;
        campaignId: string;
        affiliateId: string;
        notes: string | null;
        orderId: string | null;
        customerEmail: string | null;
        saleAmount: import("@prisma/client/runtime/library").Decimal;
        conversionType: string;
        rejectedAt: Date | null;
        linkId: string;
        commission: import("@prisma/client/runtime/library").Decimal;
        clickId: string | null;
        currency: string;
        convertedAt: Date;
        paidAt: Date | null;
        validatedBy: string | null;
    }>;
    getConversions(input: AffConversionSearchInput, userRole?: $Enums.AffUserRole, userId?: string): Promise<{
        conversions: ({
            link: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                description: string | null;
                isActive: boolean;
                title: string | null;
                expiresAt: Date | null;
                campaignId: string;
                totalClicks: number;
                totalConversions: number;
                affiliateId: string;
                trackingCode: string;
                originalUrl: string;
                shortUrl: string | null;
                customAlias: string | null;
                utmSource: string | null;
                utmMedium: string | null;
                utmCampaign: string | null;
                utmContent: string | null;
                totalEarnings: import("@prisma/client/runtime/library").Decimal;
            };
            campaign: {
                id: string;
                name: string;
                createdAt: Date;
                updatedAt: Date;
                description: string | null;
                status: $Enums.AffCampaignStatus;
                productImage: string | null;
                startDate: Date | null;
                endDate: Date | null;
                commissionType: string;
                productName: string;
                productUrl: string;
                commissionRate: import("@prisma/client/runtime/library").Decimal;
                fixedAmount: import("@prisma/client/runtime/library").Decimal | null;
                maxAffiliates: number | null;
                requireApproval: boolean;
                totalClicks: number;
                totalConversions: number;
                totalRevenue: import("@prisma/client/runtime/library").Decimal;
                totalCommission: import("@prisma/client/runtime/library").Decimal;
                creatorId: string;
            };
            affiliate: {
                user: {
                    id: string;
                    username: string;
                    firstName: string | null;
                    lastName: string | null;
                    email: string | null;
                    createdAt: Date;
                    updatedAt: Date;
                    isActive: boolean;
                    password: string | null;
                    phone: string | null;
                    avatar: string | null;
                    roleType: $Enums.UserRoleType;
                    isVerified: boolean;
                    address: string | null;
                    city: string | null;
                    district: string | null;
                    ward: string | null;
                    isTwoFactorEnabled: boolean;
                    failedLoginAttempts: number;
                    lockedUntil: Date | null;
                    lastLoginAt: Date | null;
                    departmentId: string | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                description: string | null;
                isActive: boolean;
                userId: string;
                paymentMethod: $Enums.AffPaymentMethod | null;
                role: $Enums.AffUserRole;
                joinedAt: Date;
                companyName: string | null;
                businessType: string | null;
                website: string | null;
                bankAccount: string | null;
                paypalEmail: string | null;
                taxId: string | null;
                lastActiveAt: Date | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: $Enums.AffConversionStatus;
            approvedAt: Date | null;
            campaignId: string;
            affiliateId: string;
            notes: string | null;
            orderId: string | null;
            customerEmail: string | null;
            saleAmount: import("@prisma/client/runtime/library").Decimal;
            conversionType: string;
            rejectedAt: Date | null;
            linkId: string;
            commission: import("@prisma/client/runtime/library").Decimal;
            clickId: string | null;
            currency: string;
            convertedAt: Date;
            paidAt: Date | null;
            validatedBy: string | null;
        })[];
        total: number;
        page: number;
        size: number;
        totalPages: number;
    }>;
    generateTrackingUrl(trackingCode: string, baseUrl?: string): string;
    generateQRCode(trackingUrl: string): Promise<string>;
}

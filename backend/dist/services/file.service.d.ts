import { PrismaService } from '../prisma/prisma.service';
import { MinioService } from './minio.service';
import { File, FileFolder, Prisma } from '@prisma/client';
import { CreateFolderInput, UpdateFolderInput, UpdateFileInput, GetFilesInput, CreateFileShareInput, MoveFilesInput, BulkDeleteFilesInput, BulkUpdateFilesInput } from '../graphql/inputs/file.input';
export declare class FileService {
    private prisma;
    private minioService;
    private readonly logger;
    constructor(prisma: PrismaService, minioService: MinioService);
    private getFileType;
    uploadFile(file: Express.Multer.File, userId: string, folderId?: string, metadata?: any): Promise<File>;
    getFile(id: string, userId: string): Promise<File>;
    getFiles(input: GetFilesInput, userId: string): Promise<{
        items: ({
            shares: {
                id: string;
                createdAt: Date;
                password: string | null;
                expiresAt: Date | null;
                token: string;
                sharedBy: string;
                sharedWith: string | null;
                fileId: string;
                canDownload: boolean;
                canView: boolean;
                accessCount: number;
                lastAccess: Date | null;
            }[];
            folder: {
                id: string;
                parentId: string | null;
                createdAt: Date;
                updatedAt: Date;
                description: string | null;
                name: string;
                icon: string | null;
                userId: string;
                color: string | null;
                path: string;
                isSystem: boolean;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            title: string | null;
            description: string | null;
            viewCount: number;
            tags: string[];
            userId: string;
            metadata: Prisma.JsonValue | null;
            path: string;
            url: string;
            size: number;
            filename: string;
            mimeType: string;
            width: number | null;
            alt: string | null;
            folderId: string | null;
            visibility: import("@prisma/client").$Enums.FileVisibility;
            fileType: import("@prisma/client").$Enums.FileType;
            originalName: string;
            bucket: string;
            etag: string | null;
            height: number | null;
            thumbnailUrl: string | null;
            downloadCount: number;
        })[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
        hasNextPage: boolean;
        hasPreviousPage: boolean;
    }>;
    updateFile(input: UpdateFileInput, userId: string): Promise<File>;
    deleteFile(id: string, userId: string): Promise<boolean>;
    createFolder(input: CreateFolderInput, userId: string): Promise<FileFolder>;
    getFolder(id: string, userId: string): Promise<FileFolder>;
    getFolders(userId: string): Promise<FileFolder[]>;
    updateFolder(input: UpdateFolderInput, userId: string): Promise<FileFolder>;
    deleteFolder(id: string, userId: string): Promise<boolean>;
    private getFolderPath;
    moveFiles(input: MoveFilesInput, userId: string): Promise<File[]>;
    bulkDeleteFiles(input: BulkDeleteFilesInput, userId: string): Promise<number>;
    bulkUpdateFiles(input: BulkUpdateFilesInput, userId: string): Promise<File[]>;
    getStorageStats(userId: string): Promise<{
        totalFiles: number;
        totalSize: number;
        totalFolders: number;
        filesByType: {
            type: "IMAGE" | "VIDEO" | "OTHER" | "DOCUMENT" | "AUDIO" | "ARCHIVE";
            count: number;
            totalSize: number;
        }[];
        filesByVisibility: {
            visibility: "PUBLIC" | "PRIVATE" | "SHARED";
            count: number;
        }[];
    }>;
    createFileShare(input: CreateFileShareInput, userId: string): Promise<{
        file: {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            title: string | null;
            description: string | null;
            viewCount: number;
            tags: string[];
            userId: string;
            metadata: Prisma.JsonValue | null;
            path: string;
            url: string;
            size: number;
            filename: string;
            mimeType: string;
            width: number | null;
            alt: string | null;
            folderId: string | null;
            visibility: import("@prisma/client").$Enums.FileVisibility;
            fileType: import("@prisma/client").$Enums.FileType;
            originalName: string;
            bucket: string;
            etag: string | null;
            height: number | null;
            thumbnailUrl: string | null;
            downloadCount: number;
        };
    } & {
        id: string;
        createdAt: Date;
        password: string | null;
        expiresAt: Date | null;
        token: string;
        sharedBy: string;
        sharedWith: string | null;
        fileId: string;
        canDownload: boolean;
        canView: boolean;
        accessCount: number;
        lastAccess: Date | null;
    }>;
}

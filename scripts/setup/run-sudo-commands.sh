#!/bin/bash

# Script cแบฅu hรฌnh Storage Domain - Cรกc lแปnh cแบงn chแบกy vแปi sudo

set -e

echo "=================================================="
echo "  Cแบฅu Hรฌnh Storage Domain - Bฦฐแปc Tiแบฟp Theo"
echo "=================================================="
echo ""

echo "โ ฤรฃ kiแปm tra:"
echo "   - DNS: storage.rausachtrangia.com โ 116.118.49.243"
echo "   - MinIO ฤang chแบกy trรชn port 12007"
echo ""

echo "๐ Cรกc lแปnh cแบงn chแบกy (copy vร paste tแปซng lแปnh):"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "1. CรI ฤแบถT NGINX:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo apt update && sudo apt install -y nginx"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "2. TแบO CแบคU HรNH NGINX:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo cp /mnt/chikiet/kataoffical/shoprausach/nginx-storage.conf /etc/nginx/sites-available/storage.rausachtrangia.com"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "3. KรCH HOแบT SITE:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo ln -sf /etc/nginx/sites-available/storage.rausachtrangia.com /etc/nginx/sites-enabled/"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "4. TEST CแบคU HรNH NGINX:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo nginx -t"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "5. RELOAD NGINX:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo systemctl reload nginx"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "6. CรI ฤแบถT CERTBOT (SSL):"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo apt install -y certbot python3-certbot-nginx"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "7. LแบคY SSL CERTIFICATE:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "sudo certbot --nginx -d storage.rausachtrangia.com"
echo ""
echo "   โ๏ธ  Bแบกn sแบฝ ฤฦฐแปฃc hแปi:"
echo "   - Email address (nhแบญp email cแปงa bแบกn)"
echo "   - Agree to Terms of Service (nhแบญp 'Y')"
echo "   - Share email with EFF (nhแบญp 'N' hoแบทc 'Y')"
echo ""
echo ""

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "8. TEST SSL:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "curl -I https://storage.rausachtrangia.com"
echo ""
echo ""

echo "=================================================="
echo ""
echo "๐ SAU KHI HOรN THรNH CรC LแปNH TRรN, CHแบY:"
echo ""
echo "   cd /mnt/chikiet/kataoffical/shoprausach"
echo "   ./finalize-storage-setup.sh"
echo ""
echo "=================================================="
